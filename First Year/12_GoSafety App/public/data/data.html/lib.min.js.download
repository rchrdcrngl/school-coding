!function(n){var e={};function __webpack_require__(t){if(e[t])return e[t].exports;var r=e[t]={i:t,l:!1,exports:{}};return n[t].call(r.exports,r,r.exports,__webpack_require__),r.l=!0,r.exports}__webpack_require__.m=n,__webpack_require__.c=e,__webpack_require__.d=function(n,e,t){__webpack_require__.o(n,e)||Object.defineProperty(n,e,{enumerable:!0,get:t})},__webpack_require__.r=function(n){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(n,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(n,"__esModule",{value:!0})},__webpack_require__.t=function(n,e){if(1&e&&(n=__webpack_require__(n)),8&e)return n;if(4&e&&"object"==typeof n&&n&&n.__esModule)return n;var t=Object.create(null);if(__webpack_require__.r(t),Object.defineProperty(t,"default",{enumerable:!0,value:n}),2&e&&"string"!=typeof n)for(var r in n)__webpack_require__.d(t,r,function(e){return n[e]}.bind(null,r));return t},__webpack_require__.n=function(n){var e=n&&n.__esModule?function(){return n.default}:function(){return n};return __webpack_require__.d(e,"a",e),e},__webpack_require__.o=function(n,e){return Object.prototype.hasOwnProperty.call(n,e)},__webpack_require__.p="",__webpack_require__(__webpack_require__.s=8)}([function(n,e,t){"use strict";e.__esModule=!0,e.extend=extend,e.indexOf=function(n,e){for(var t=0,r=n.length;t<r;t++)if(n[t]===e)return t;return-1},e.escapeExpression=function(n){if("string"!=typeof n){if(n&&n.toHTML)return n.toHTML();if(null==n)return"";if(!n)return n+"";n=""+n}if(!i.test(n))return n;return n.replace(a,escapeChar)},e.isEmpty=function(n){return!n&&0!==n||!(!s(n)||0!==n.length)},e.createFrame=function(n){var e=extend({},n);return e._parent=n,e},e.blockParams=function(n,e){return n.path=e,n},e.appendContextPath=function(n,e){return(n?n+".":"")+e};var r={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;","`":"&#x60;","=":"&#x3D;"},a=/[&<>"'`=]/g,i=/[&<>"'`=]/;function escapeChar(n){return r[n]}function extend(n){for(var e=1;e<arguments.length;e++)for(var t in arguments[e])Object.prototype.hasOwnProperty.call(arguments[e],t)&&(n[t]=arguments[e][t]);return n}var o=Object.prototype.toString;e.toString=o;var isFunction=function(n){return"function"==typeof n};isFunction(/x/)&&(e.isFunction=isFunction=function(n){return"function"==typeof n&&"[object Function]"===o.call(n)}),e.isFunction=isFunction;var s=Array.isArray||function(n){return!(!n||"object"!=typeof n)&&"[object Array]"===o.call(n)};e.isArray=s},function(n,e,t){"use strict";e.__esModule=!0;var r=["description","fileName","lineNumber","endLineNumber","message","name","number","stack"];function Exception(n,e){var t=e&&e.loc,a=void 0,i=void 0,o=void 0,s=void 0;t&&(a=t.start.line,i=t.end.line,o=t.start.column,s=t.end.column,n+=" - "+a+":"+o);for(var l=Error.prototype.constructor.call(this,n),c=0;c<r.length;c++)this[r[c]]=l[r[c]];Error.captureStackTrace&&Error.captureStackTrace(this,Exception);try{t&&(this.lineNumber=a,this.endLineNumber=i,Object.defineProperty?(Object.defineProperty(this,"column",{value:o,enumerable:!0}),Object.defineProperty(this,"endColumn",{value:s,enumerable:!0})):(this.column=o,this.endColumn=s))}catch(n){}}Exception.prototype=new Error,e.default=Exception,n.exports=e.default},function(n,e,t){"use strict";function _interopRequireDefault(n){return n&&n.__esModule?n:{default:n}}e.__esModule=!0,e.HandlebarsEnvironment=HandlebarsEnvironment;var r=t(0),a=_interopRequireDefault(t(1)),i=t(4),o=t(21),s=_interopRequireDefault(t(23));e.VERSION="4.5.1";e.COMPILER_REVISION=8;e.LAST_COMPATIBLE_COMPILER_REVISION=7;e.REVISION_CHANGES={1:"<= 1.0.rc.2",2:"== 1.0.0-rc.3",3:"== 1.0.0-rc.4",4:"== 1.x.x",5:"== 2.0.0-alpha.x",6:">= 2.0.0-beta.1",7:">= 4.0.0 <4.3.0",8:">= 4.3.0"};function HandlebarsEnvironment(n,e,t){this.helpers=n||{},this.partials=e||{},this.decorators=t||{},i.registerDefaultHelpers(this),o.registerDefaultDecorators(this)}HandlebarsEnvironment.prototype={constructor:HandlebarsEnvironment,logger:s.default,log:s.default.log,registerHelper:function(n,e){if("[object Object]"===r.toString.call(n)){if(e)throw new a.default("Arg not supported with multiple helpers");r.extend(this.helpers,n)}else this.helpers[n]=e},unregisterHelper:function(n){delete this.helpers[n]},registerPartial:function(n,e){if("[object Object]"===r.toString.call(n))r.extend(this.partials,n);else{if(void 0===e)throw new a.default('Attempting to register a partial called "'+n+'" as undefined');this.partials[n]=e}},unregisterPartial:function(n){delete this.partials[n]},registerDecorator:function(n,e){if("[object Object]"===r.toString.call(n)){if(e)throw new a.default("Arg not supported with multiple decorators");r.extend(this.decorators,n)}else this.decorators[n]=e},unregisterDecorator:function(n){delete this.decorators[n]}};var l=s.default.log;e.log=l,e.createFrame=r.createFrame,e.logger=s.default},function(n,e,t){"use strict";e.__esModule=!0;var r,a=t(1),i=(r=a)&&r.__esModule?r:{default:r};function Visitor(){this.parents=[]}function visitSubExpression(n){this.acceptRequired(n,"path"),this.acceptArray(n.params),this.acceptKey(n,"hash")}function visitBlock(n){visitSubExpression.call(this,n),this.acceptKey(n,"program"),this.acceptKey(n,"inverse")}function visitPartial(n){this.acceptRequired(n,"name"),this.acceptArray(n.params),this.acceptKey(n,"hash")}Visitor.prototype={constructor:Visitor,mutating:!1,acceptKey:function(n,e){var t=this.accept(n[e]);if(this.mutating){if(t&&!Visitor.prototype[t.type])throw new i.default('Unexpected node type "'+t.type+'" found when accepting '+e+" on "+n.type);n[e]=t}},acceptRequired:function(n,e){if(this.acceptKey(n,e),!n[e])throw new i.default(n.type+" requires "+e)},acceptArray:function(n){for(var e=0,t=n.length;e<t;e++)this.acceptKey(n,e),n[e]||(n.splice(e,1),e--,t--)},accept:function(n){if(n){if(!this[n.type])throw new i.default("Unknown type: "+n.type,n);this.current&&this.parents.unshift(this.current),this.current=n;var e=this[n.type](n);return this.current=this.parents.shift(),!this.mutating||e?e:!1!==e?n:void 0}},Program:function(n){this.acceptArray(n.body)},MustacheStatement:visitSubExpression,Decorator:visitSubExpression,BlockStatement:visitBlock,DecoratorBlock:visitBlock,PartialStatement:visitPartial,PartialBlockStatement:function(n){visitPartial.call(this,n),this.acceptKey(n,"program")},ContentStatement:function(){},CommentStatement:function(){},SubExpression:visitSubExpression,PathExpression:function(){},StringLiteral:function(){},NumberLiteral:function(){},BooleanLiteral:function(){},UndefinedLiteral:function(){},NullLiteral:function(){},Hash:function(n){this.acceptArray(n.pairs)},HashPair:function(n){this.acceptRequired(n,"value")}},e.default=Visitor,n.exports=e.default},function(n,e,t){"use strict";function _interopRequireDefault(n){return n&&n.__esModule?n:{default:n}}e.__esModule=!0,e.registerDefaultHelpers=function(n){r.default(n),a.default(n),i.default(n),o.default(n),s.default(n),l.default(n),c.default(n)},e.moveHelperToHooks=function(n,e,t){n.helpers[e]&&(n.hooks[e]=n.helpers[e],t||delete n.helpers[e])};var r=_interopRequireDefault(t(14)),a=_interopRequireDefault(t(15)),i=_interopRequireDefault(t(16)),o=_interopRequireDefault(t(17)),s=_interopRequireDefault(t(18)),l=_interopRequireDefault(t(19)),c=_interopRequireDefault(t(20))},function(n,e,t){"use strict";e.__esModule=!0,e.default=function(n){var e="undefined"!=typeof global?global:window,t=e.Handlebars;n.noConflict=function(){return e.Handlebars===n&&(e.Handlebars=t),n}},n.exports=e.default},function(n,e,t){"use strict";e.__esModule=!0;var r={helpers:{helperExpression:function(n){return"SubExpression"===n.type||("MustacheStatement"===n.type||"BlockStatement"===n.type)&&!!(n.params&&n.params.length||n.hash)},scopedId:function(n){return/^\.|this\b/.test(n.original)},simpleId:function(n){return 1===n.parts.length&&!r.helpers.scopedId(n)&&!n.depth}}};e.default=r,n.exports=e.default},function(n,e,t){"use strict";var src_finally=function(n){var e=this.constructor;return this.then((function(t){return e.resolve(n()).then((function(){return t}))}),(function(t){return e.resolve(n()).then((function(){return e.reject(t)}))}))},r=setTimeout;function isArray(n){return Boolean(n&&void 0!==n.length)}function noop(){}function Promise(n){if(!(this instanceof Promise))throw new TypeError("Promises must be constructed via new");if("function"!=typeof n)throw new TypeError("not a function");this._state=0,this._handled=!1,this._value=void 0,this._deferreds=[],doResolve(n,this)}function handle(n,e){for(;3===n._state;)n=n._value;0!==n._state?(n._handled=!0,Promise._immediateFn((function(){var t=1===n._state?e.onFulfilled:e.onRejected;if(null!==t){var r;try{r=t(n._value)}catch(n){return void reject(e.promise,n)}resolve(e.promise,r)}else(1===n._state?resolve:reject)(e.promise,n._value)}))):n._deferreds.push(e)}function resolve(n,e){try{if(e===n)throw new TypeError("A promise cannot be resolved with itself.");if(e&&("object"==typeof e||"function"==typeof e)){var t=e.then;if(e instanceof Promise)return n._state=3,n._value=e,void finale(n);if("function"==typeof t)return void doResolve((r=t,a=e,function(){r.apply(a,arguments)}),n)}n._state=1,n._value=e,finale(n)}catch(e){reject(n,e)}var r,a}function reject(n,e){n._state=2,n._value=e,finale(n)}function finale(n){2===n._state&&0===n._deferreds.length&&Promise._immediateFn((function(){n._handled||Promise._unhandledRejectionFn(n._value)}));for(var e=0,t=n._deferreds.length;e<t;e++)handle(n,n._deferreds[e]);n._deferreds=null}function Handler(n,e,t){this.onFulfilled="function"==typeof n?n:null,this.onRejected="function"==typeof e?e:null,this.promise=t}function doResolve(n,e){var t=!1;try{n((function(n){t||(t=!0,resolve(e,n))}),(function(n){t||(t=!0,reject(e,n))}))}catch(n){if(t)return;t=!0,reject(e,n)}}Promise.prototype.catch=function(n){return this.then(null,n)},Promise.prototype.then=function(n,e){var t=new this.constructor(noop);return handle(this,new Handler(n,e,t)),t},Promise.prototype.finally=src_finally,Promise.all=function(n){return new Promise((function(e,t){if(!isArray(n))return t(new TypeError("Promise.all accepts an array"));var r=Array.prototype.slice.call(n);if(0===r.length)return e([]);var a=r.length;function res(n,i){try{if(i&&("object"==typeof i||"function"==typeof i)){var o=i.then;if("function"==typeof o)return void o.call(i,(function(e){res(n,e)}),t)}r[n]=i,0==--a&&e(r)}catch(n){t(n)}}for(var i=0;i<r.length;i++)res(i,r[i])}))},Promise.resolve=function(n){return n&&"object"==typeof n&&n.constructor===Promise?n:new Promise((function(e){e(n)}))},Promise.reject=function(n){return new Promise((function(e,t){t(n)}))},Promise.race=function(n){return new Promise((function(e,t){if(!isArray(n))return t(new TypeError("Promise.race accepts an array"));for(var r=0,a=n.length;r<a;r++)Promise.resolve(n[r]).then(e,t)}))},Promise._immediateFn="function"==typeof setImmediate&&function(n){setImmediate(n)}||function(n){r(n,0)},Promise._unhandledRejectionFn=function(n){"undefined"!=typeof console&&console&&console.warn("Possible Unhandled Promise Rejection:",n)};e.a=Promise},function(n,e,t){n.exports=t(9)},function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__);var promise_polyfill__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(7),whatwg_fetch__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(10),Handlebars=__webpack_require__(11);function BoxeverWebLib(){var API_PATH="https://api.boxever.com";if(_boxever_settings&&_boxever_settings.target){var apiTarget=_boxever_settings.target.split(".boxever.com")[0];API_PATH=-1!==apiTarget.indexOf("http")&&-1!==apiTarget.indexOf("api")?"".concat(apiTarget,".boxever.com"):"https://api.boxever.com"}var Boxever=window.Boxever||{};if(Boxever.webFlowDebug={flows:{production:[],sandbox:[],config:{}}},Boxever.pointOfSale=_boxever_settings.pointOfSale||"unknown",Boxever.runJS=function(n){return new Function("(function () { "+n+"\n})()")()},Boxever.browser_id&&Boxever.client_key){try{var allFlows=[{ref:"535e5c57-f4e2-4fcb-bdd1-cd8871de6d31",name:"BOX-313 Global Navigation Search (EK.com)",revision:51,archived:!1,target:{script:'if (\n  typeof dataLayer !== "undefined" &&\n  dataLayer &&\n  dataLayer.length &&\n  dataLayer[0].languageCode === "EN" &&\n  dataLayer[0].pageCategory !== \'Home\'\n) {\n  const searchBtn = getHeaderSearchBtn();\n  if (searchBtn) {\n    searchBtn.addEventListener("click", function () {\n      if (!window.box313IsSearchFormClicked) {\n        const searchWrapper = getSearchWrapper();\n        if (searchWrapper) {\n          searchWrapper.classList.add("bx-313-hidden");\n        }\n        targetingPassed();\n      }\n    });\n  }\n}\n\nfunction getHeaderSearchBtn() {\n  if (typeof __INITIAL_STATE__ !== "undefined" && __INITIAL_STATE__)\n    return document.querySelector(\n      ".header-buttons__item--search .header-popup__btn"\n    );\n  if (typeof __EK__ !== "undefined")\n    return document.querySelector(\n      ".js-website-search .js-search-selector-list-item-link"\n    );\n  return document.querySelector(\n    ".ek-global-navigation__secondarymenu--search .search-selector-list-item-link"\n  );\n}\n\nfunction getSearchWrapper() {\n  if (typeof __INITIAL_STATE__ !== "undefined" && __INITIAL_STATE__)\n    return null;\n  if (typeof __EK__ !== "undefined")\n    return document.querySelector(".js-website-search .js-search-popup");\n  return document.querySelector(\n    ".ek-global-navigation__secondarymenu--search .search-popup"\n  );\n}',targetPages:[]},traffic:{type:"advancedTraffic",allocationLow:1,allocationHigh:120,splits:[{ref:"e656c02a-42f9-499a-a166-6e581ec2cb98",lowSplit:1,highSplit:60},{ref:"014befe5-98bc-4a41-bdd3-e75682c30c6e",lowSplit:61,highSplit:120}]},variants:[{ref:"e656c02a-42f9-499a-a166-6e581ec2cb98",name:"Original",assets:{css:"",html:"",js:'function sendBoxeverEvent(eventType) {\n  let eventLabel = `BOX313_${eventType}`;\n  var event = {\n    channel: "WEB",\n    type: eventLabel,\n    page: dataLayer[0].pageName,\n    pos: _boxever_settings.pointOfSale,\n    browser_id: Boxever.getID(),\n  };\n  Boxever.eventCreate(event, function (data) {}, "json");\n}\n\nfunction trackSearchSubmitCTA() {\n  if (typeof __EK__ !== "undefined") {\n    let searchBtn = document.querySelector("#search-country-input");\n    if (searchBtn) {\n      searchBtn.addEventListener("click", function (e) {\n        sendBoxeverEvent("CLICKED");\n      });\n    }\n  } else if (typeof __INITIAL_STATE__ !== "undefined") {\n    document.addEventListener("click", function (e) {\n      const searchBtnWrapper = document.querySelector(\n        ".header-buttons__item--search .header-search__form .header-search__btn"\n      );\n      if (searchBtnWrapper && searchBtnWrapper.contains(e.target)) {\n        sendBoxeverEvent("CLICKED");\n      }\n    });\n  } else {\n    let searchBtn = document.querySelector(\n      ".ek-global-navigation__secondarymenu--search #search-input"\n    );\n    if (searchBtn) {\n      searchBtn.addEventListener("click", function (e) {\n        sendBoxeverEvent("CLICKED");\n      });\n    }\n  }\n}\nfunction getSearchWrapper() {\n  if (typeof __INITIAL_STATE__ !== "undefined" && __INITIAL_STATE__)\n    return null;\n  if (typeof __EK__ !== "undefined")\n    return document.querySelector(".js-website-search .js-search-popup");\n  return document.querySelector(\n    ".ek-global-navigation__secondarymenu--search .search-popup"\n  );\n}\nconst searchWrapper = getSearchWrapper();\nif (searchWrapper) {\n  searchWrapper.classList.remove("bx-313-hidden");\n}\n\ntrackSearchSubmitCTA();\n'}},{ref:"014befe5-98bc-4a41-bdd3-e75682c30c6e",name:"Predictive search",assets:{css:'@font-face {\n  font-family: "bx-iconography";\n  src: url("https://c.ekstatic.net/shared/fonts/iconography/iconography.woff2?580e865c7c5f11c3fae0de33e30a4db9")\n      format("woff2"),\n    url("https://c.ekstatic.net/shared/fonts/iconography/iconography.woff?580e865c7c5f11c3fae0de33e30a4db9")\n      format("woff"),\n    url("https://c.ekstatic.net/shared/fonts/iconography/iconography.ttf?580e865c7c5f11c3fae0de33e30a4db9")\n      format("truetype");\n  font-weight: normal;\n  font-style: normal;\n}\n.bx-313-hidden {\n    display: none !important;\n}\n/*classic related*/\n.ek-global-navigation__secondarymenu--search .search-popup {\n  display: none !important;\n}\n.ek-global-navigation__secondarymenu--search .bx-313-header-popup__wrapper--active {\n  z-index: 12;\n}\n.ek-global-navigation__secondarymenu--search .bx-313-input-field__input:focus {\n  box-shadow: none !important;\n  outline: none !important;\n}\n.ek input.bx-313-input-field__input:not([disabled]):not([tabindex="-1"]):not(.panel-disabled):focus {\n  outline: none !important;\n}\n.ek button.bx-313-auto-suggest__item:not([disabled]):not([tabindex="-1"]):not(.panel-disabled):focus {\n  outline: none !important;\n}\n/*end classic related*/\n\n/*home page*/\n.js-website-search .js-search-popup {\n  display: none !important;\n}\n.js-website-search .bx-313-header-popup__wrapper {\n  z-index: unset;\n}\n* input.bx-313-input-field__input:focus {\n  box-shadow: none;\n}\n@media only screen and (max-width: 1199px) {\n  .js-website-search .bx-313-header-popup__content {\n    margin-left: 40px;\n  }\n  html[dir="rtl"] .js-website-search .bx-313-header-popup__content {\n    margin-right: 40px;\n  }\n}\n/*end home page*/\n.bx-313-global-nav-search-popup {\n  display: none;\n}\n.bx-313-input-field {\n  vertical-align: bottom;\n  position: relative;\n  display: inline-block;\n  box-sizing: border-box;\n  width: 100%;\n  min-height: 60px;\n  padding: 0 20px;\n  overflow: hidden;\n  color: #333;\n  line-height: 60px;\n  background: #fff;\n  border: 1px solid #666;\n  border-radius: 3px;\n  box-shadow: inset 4px 4px 0 0 #f2f2f2;\n}\n.bx-313-input-field--focus {\n  box-shadow: 0 0 6px 0 rgb(0 0 0 / 50%), inset 0 0 4px #a9a9a9;\n}\n/*.bx-313-header-search__input .bx-313-input-field {*/\n/*    padding: 0;*/\n/*}*/\n.bx-313-input-field__field {\n  display: flex;\n  height: 58px;\n}\n.bx-313-header-search__input .bx-313-input-field .bx-313-input-field__field {\n  padding: 0 20px;\n}\n.bx-313-global-nav-search-input__errored {\n  border: 0.1rem solid #8d0203;\n  box-shadow: inset 4px 4px 0 0 rgb(141 2 3 / 10%);\n  padding: 0;\n}\n.bx-313-ellipsis {\n  overflow: hidden;\n  white-space: nowrap;\n  text-overflow: ellipsis;\n}\n.bx-313-input-field__input {\n  font-family: HelveticaNeue-Medium, Helvetica, Arial, Lucida Grande, sans-serif !important;\n  position: absolute;\n  top: 18px;\n  bottom: 0;\n  color: #333 !important;\n  left: 0;\n  box-sizing: border-box;\n  width: 100%;\n  height: 40px;\n  padding: 0 20px;\n  font-size: 20px !important;\n  background-color: transparent;\n  border: none;\n  outline: none;\n  line-height: normal !important;\n}\n\n.bx-313-input-field--active .bx-313-input-field__placeholder {\n  top: 6px;\n  bottom: inherit;\n  font-size: 12px;\n  line-height: 16px;\n}\n\n.bx-313-input-field__placeholder {\n  text-align: initial !important;\n  cursor: unset !important;\n  color: #333 !important;\n  margin-bottom: 0 !important;\n  position: absolute;\n  top: 0;\n  right: 0;\n  bottom: 0;\n  left: 0;\n  z-index: 2;\n  display: block !important;\n  padding: 0 20px;\n  overflow: hidden;\n  font-weight: 400;\n  font-size: 16px;\n  line-height: 60px;\n  white-space: nowrap;\n  text-overflow: ellipsis;\n  transition: all 0.2s ease;\n  -webkit-user-select: none;\n  -moz-user-select: none;\n  -ms-user-select: none;\n  user-select: none;\n  font-family: HelveticaNeue-Light, Helvetica Neue Light, Helvetica Neue,\n    Helvetica, Arial, Lucida Grande, sans-serif;\n}\n@media only screen and (min-width: 992px) {\n  .bx-313-global-nav-search-popup .bx-313-auto-suggest__not-found {\n    padding: 0 20px;\n  }\n}\n.bx-313-auto-suggest__not-found-heading {\n  padding: 0 !important;\n  margin: 20px 0 20px !important;\n  font-size: 14px !important;\n  font-weight: 700 !important;\n  font-family: HelveticaNeue, Helvetica Neue, Helvetica, Arial, Lucida Grande,\n    sans-serif !important;\n  text-align: initial !important;\n  line-height: 0 !important;\n}\n.header-buttons__item--search .header-popup__wrapper {\n  display: none;\n}\n\n.bx-313-header-popup__wrapper {\n  position: absolute;\n  right: 0;\n  left: 0;\n  display: none;\n  overflow: hidden;\n  border-bottom: 1px solid hsla(0, 0%, 40%, 0.5);\n  box-shadow: 0 10px 19px rgb(51 51 51 / 11%);\n}\n.bx-313-header-popup__wrapper--active {\n  z-index: 1101;\n}\n.bx-313-header-popup__wrapper:after {\n  position: absolute;\n  top: 0;\n  right: 0;\n  bottom: 0;\n  left: 0;\n  z-index: -1;\n  background-color: #fff;\n  content: "";\n}\n.bx-313-header-popup__content {\n  position: relative;\n  box-sizing: border-box;\n  max-width: 1100px;\n  margin: 0 auto;\n  padding: 0 10px;\n  outline: none;\n}\n@media only screen and (min-width: 1024px) {\n  .bx-313-header-popup__content {\n    padding-left: 105px;\n  }\n  html[dir="rtl"] .bx-313-header-popup__content {\n    padding-right: 105px;\n    padding-left: 10px;\n  }\n  .bx-313-header-popup__close {\n    top: 24px;\n    right: 0;\n  }\n}\n\n.bx-313-header-search {\n  padding: 15px 0;\n}\n.bx-313-header-popup__close {\n  position: absolute;\n  top: 10px;\n  right: 10px;\n  padding: 10px !important;\n  font-size: 1rem;\n  background: none;\n  border: none;\n  cursor: pointer;\n  line-height: normal !important;\n}\nhtml[dir="rtl"] .bx-313-header-popup__close {\n  right: unset;\n  left: 10px;\n}\n.bx-313-header-search + .bx-313-header-popup__close {\n  top: 30px;\n}\n.bx-313-pictogram-wrapper {\n  display: inline-block;\n  line-height: 1em;\n  vertical-align: middle;\n}\n.bx-313-hidden-control {\n  position: absolute;\n  width: 1px;\n  height: 1px;\n  margin: -1px;\n  padding: 0;\n  overflow: hidden;\n  border: 0;\n  clip: rect(0, 0, 0, 0);\n}\n.bx-313-close-icon--big {\n  font-size: 11px;\n}\n.bx-313-icon {\n  margin: 0;\n}\n.bx-313-icon {\n  display: inline-flex;\n  direction: ltr !important;\n}\nhtml[dir="rtl"] .bx-313-icon {\n  direction: rtl !important;\n}\n.bx-313-icon {\n  line-height: 1;\n  font-weight: 400;\n  line-height: 1;\n}\n[class*="bx-313-icon-"]:before,\n[class^="bx-313-icon-"]:before {\n  font-weight: normal;\n  font-family: bx-iconography;\n  speak: none;\n  font-style: normal;\n  font-variant: normal;\n  line-height: 1;\n  text-transform: none;\n  -webkit-font-smoothing: antialiased;\n  -moz-osx-font-smoothing: grayscale;\n}\n.bx-313-icon-close:before {\n  content: "\\f154";\n}\n.bx-313-icon-information:before {\n  content: "\\f1c6";\n}\n.bx-313-header-search__input {\n  margin: 0 0 10px;\n}\n.bx-313-global-nav-search-info {\n  padding: 10px 20px;\n  border-radius: 3px;\n  border: 1px solid #666;\n  background-color: #fef7d7;\n  margin: 15px 35px 0 15px;\n  color: #333;\n  display: flex;\n  align-items: center;\n  font-size: 14px;\n  text-align: left;\n}\nhtml[dir="rtl"] .bx-313-global-nav-search-info {\n  margin: 15px 15px 0 35px;\n  text-align: right;\n}\n.bx-313-global-nav-search-info__content {\n  font-family: HelveticaNeue, Helvetica, Arial, sans-serif !important;\n  font-weight: 700 !important;\n  font-style: normal;\n  font-stretch: normal;\n  line-height: normal;\n  letter-spacing: normal;\n  color: #333;\n  margin: 0 0 0 10px !important;\n  padding: 0 !important;\n}\nhtml[dir="rtl"] .bx-313-global-nav-search-info__content {\n  margin: 0 10px 0 0 !important;\n}\n.bx-313-global-nav-search-info__link {\n  font-family: HelveticaNeue, Helvetica, Arial, sans-serif !important;\n  color: #333 !important;\n  font-size: 14px !important;\n  display: inline-block !important;\n  font-weight: 700 !important;\n  text-decoration: underline !important;\n  padding: 0 !important;\n  text-transform: none !important;\n  font-style: normal;\n  font-stretch: normal;\n  line-height: normal;\n  letter-spacing: normal;\n  color: #333;\n}\n.bx-313-global-nav-search-info__link:hover {\n  text-decoration: none !important;\n}\n.bx-313-global-nav-search-info__link:focus {\n  box-shadow: 0 0 2px 1.5px #fff, 0 0 3px 3px #000 !important;\n}\n.bx-313-input-field__button-icon {\n  position: absolute;\n  top: 0;\n  right: 0;\n  z-index: 10;\n  width: 40px;\n  height: 60px;\n  color: #333;\n  line-height: 60px;\n  background: transparent;\n  display: none;\n  border: none;\n  cursor: pointer;\n  padding: 0;\n  font-size: 14px;\n  font-family: HelveticaNeue-Light, Helvetica Neue Light, Helvetica Neue,\n    Helvetica, Arial, Lucida Grande, sans-serif;\n}\nhtml[dir="rtl"] .bx-313-input-field__button-icon {\n  right: unset;\n  left: 0;\n}\n.bx-313-input-field__button-icon .bx-313-close-icon--small {\n  margin-right: 6px;\n}\nhtml[dir="rtl"] .bx-313-input-field__button-icon .bx-313-close-icon--small {\n  margin-left: 6px;\n  margin-right: 0;\n}\n.bx-313-close-icon--small {\n  font-size: 8px;\n}\nbutton.bx-313-input-field__button-icon:focus {\n  border: none;\n  box-shadow: none;\n  outline: none;\n}\n.bx-313-header-popup__close:focus {\n  border: none;\n  box-shadow: none;\n  outline: none;\n}\n.bx-313-header-search__btn {\n  margin: 0 0 10px;\n}\n/*.bx-313-header-search__btn-cta:focus {*/\n/*     border: none;*/\n/*    box-shadow: none;*/\n/*    outline: none;*/\n/*}*/\n.bx-313-header-search__btn-cta:hover {\n  box-shadow: 0 0 6px 0 grey !important;\n  background-color: #b20a2b !important;\n}\n.bx-313-header-search__btn-cta:active,\n.bx-313-header-search__btn-cta:focus {\n  background: #b20a2b !important;\n}\n.bx-313-header-search__btn-cta {\n  min-height: 60px;\n  text-transform: none !important;\n  padding: 0 20px !important;\n  color: #fff !important;\n  background: #c60c30;\n  border: 0;\n  height: auto !important;\n  line-height: 1 !important;\n  font-size: 16px !important;\n  font-weight: 700 !important;\n  font-family: HelveticaNeue, Helvetica Neue, Helvetica, Arial, Lucida Grande,\n    sans-serif !important;\n  display: inline-block !important;\n  width: 100%;\n  overflow: hidden !important;\n  white-space: nowrap;\n  text-align: center !important;\n  text-decoration: none !important;\n  text-overflow: ellipsis;\n  vertical-align: middle;\n  border-radius: 3px;\n  cursor: pointer !important;\n  transition: 0.1s ease;\n  -webkit-appearance: none !important;\n  -moz-appearance: none !important;\n  appearance: none !important;\n}\n.bx-313-header-search__btn-cta-wrapper {\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  width: 100%;\n  height: 100%;\n  min-height: inherit;\n  margin: 0;\n  padding: 0;\n  line-height: 1;\n  white-space: normal;\n  vertical-align: middle;\n}\n.bx-313-header-search__btn-cta-wrapper-content {\n  display: inline-block;\n  max-height: 2em;\n  overflow: hidden;\n}\n.bx-313-popover {\n  font-family: HelveticaNeue, Helvetica Neue, Helvetica, Arial, Lucida Grande,\n    sans-serif;\n  position: absolute;\n  top: 0;\n  z-index: 1101;\n  padding: 1px;\n  background-color: #fff;\n  border: 1px solid #666;\n  border-radius: 3px;\n  box-shadow: 0 5px 10px rgb(0 0 0 / 20%);\n}\n.bx-313-popover__arrow {\n  top: -11px;\n  left: 50%;\n  border-color: transparent transparent #666;\n  border-style: solid;\n  border-width: 0 11px 11px;\n}\n.bx-313-popover__arrow,\n.bx-313-popover__arrow:after {\n  position: absolute;\n  width: 0;\n  height: 0;\n  margin-left: -11px;\n}\nhtml[dir="rtl"] .bx-313-popover__arrow,\nhtml[dir="rtl"] .bx-313-popover__arrow:after {\n  margin-left: 0;\n  margin-right: -11px;\n}\n.bx-313-popover__arrow:after {\n  top: 2px;\n  display: block;\n  border-color: transparent transparent #fff;\n  border-style: solid;\n  border-width: 0 11px 11px;\n  content: "";\n}\n.bx-313-scroll {\n  position: relative;\n  overflow: hidden;\n}\n.bx-313-scroll__box {\n  max-height: 420px;\n  overflow: auto;\n}\n.bx-313-auto-suggest {\n  flex-grow: 1;\n  /*padding-bottom: 10px;*/\n  border-radius: 0 !important;\n  box-shadow: none !important;\n}\n.bx-313-auto-suggest__list {\n  font-size: 14px;\n}\n.bx-313-auto-suggest__item {\n  display: flex;\n  align-items: center;\n  box-sizing: border-box;\n  width: 100%;\n  padding: 10px 0;\n  text-align: left;\n  background: none;\n  border-width: 1px 0;\n  border-color: transparent;\n  color: #333 !important;\n  cursor: pointer !important;\n  font-size: 14px !important;\n  line-height: 18px !important;\n  font-family: HelveticaNeue-Light, Helvetica Neue Light, Helvetica Neue,\n    Helvetica, Arial, Lucida Grande, sans-serif !important;\n}\n.bx-313-auto-suggest__item:focus,\n.bx-313-auto-suggest__item:hover:enabled {\n  background: rgba(0, 0, 0, 0.05);\n  border-width: 1px 0;\n  border-radius: 0;\n  box-shadow: none !important;\n}\n.bx-313-auto-suggest__item:focus {\n  border-style: solid;\n  border-color: #a9a9a9;\n  outline: none !important;\n}\n.bx-313-global-nav-search-input__errored-msg {\n  width: auto;\n  height: auto;\n  padding: 10px 14px;\n  font-weight: 700;\n  font-family: HelveticaNeue, Helvetica, Arial, sans-serif;\n  font-size: 14px;\n  line-height: 18px;\n  margin: 0 !important;\n  color: #8d0203;\n  letter-spacing: 0;\n  text-align: left;\n  background: rgba(141, 2, 3, 0.1);\n}\nhtml[dir="rtl"] .bx-313-global-nav-search-input__errored-msg {\n  text-align: right;\n}\n@media only screen and (min-width: 992px) {\n  .bx-313-header-search__form {\n    display: flex;\n    padding-right: 36px;\n  }\n  html[dir="rtl"] .bx-313-header-search__form {\n    padding-left: 36px;\n  }\n  .bx-313-header-search__input {\n    flex: 1 1 100%;\n    margin: 0;\n    padding: 0 20px 0 15px;\n  }\n  html[dir="rtl"] .bx-313-header-search__input {\n    padding: 0 15px 0 20px;\n  }\n  .bx-313-header-search__btn {\n    flex: 1 1 140px;\n    max-width: 300px;\n    margin: 0;\n  }\n}\n@media only screen and (min-width: 769px) {\n  .bx-313-auto-suggest__item {\n    padding: 10px 20px;\n  }\n  html[dir="rtl"] .bx-313-auto-suggest__item {\n    padding: 10px 20px;\n  }\n}\n@media (hover: hover) {\n  .bx-313-input-field:hover {\n    box-shadow: 0 0 6px 0 rgb(0 0 0 / 50%), inset 0 0 4px #a9a9a9;\n  }\n}\n',html:'<div class="bx-313-header-popup__wrapper bx-313-header-popup__wrapper--active">\n    <div class="bx-313-header-popup__content">\n        <div class="bx-313-header-search">\n            <div class="bx-313-header-search__form">\n                <div class="bx-313-header-search__input">\n                    <span class="bx-313-input-field bx-313-input-field--active">\n                        <span class="bx-313-input-field__field">\n                            <input aria-describedby="bx-313-search-description"\n                                aria-labelledby="bx-313-search-input_label" id="bx-313-search-input"\n                                aria-required="false" class="bx-313-input-field__input bx-313-ellipsis" type="text"\n                                autocomplete="off">\n                        </span>\n                        <label for="bx-313-search-input" id="bx-313-search-input_label" aria-label="Search"\n                            class="bx-313-input-field__placeholder">Search</label>\n                        <button type="button" class="bx-313-input-field__button-icon" tabindex="-1" aria-hidden="true">\n                            <span dir="auto" class="bx-313-close-icon--small bx-313-pictogram-wrapper"\n                                aria-hidden="true">\n                                <i class="bx-313-icon bx-313-icon-close"></i>\n                            </span>\n                        </button>\n                    </span>\n                    <span id="bx-313-search-description" style="display:none;">Please\n                        enter search text before you try to search.</span>\n                </div>\n                <div class="bx-313-header-search__btn">\n                    <button type="button" class="bx-313-header-search__btn-cta">\n                        <div class="bx-313-header-search__btn-cta-wrapper"><span\n                                class="bx-313-header-search__btn-cta-wrapper-content">Search</span></div>\n                    </button>\n                </div>\n            </div>\n            <div class="bx-313-global-nav-search-info" style="display: none;">\n                <span class="bx-313-icon bx-313-icon-information" aria-hidden="true"></span>\n                <p class="bx-313-global-nav-search-info__content">\n                    Click on “View page” link to view our page (currently only available in English).\n                    <a class="bx-313-global-nav-search-info__link">\n                        <span class="link__text link__text--underline" id="">View page</span>\n                    </a>\n                </p>\n            </div>\n        </div>\n        <button role="link" class="bx-313-header-popup__close">\n            <span dir="auto" class="bx-313-close-icon--big bx-313-pictogram-wrapper" aria-hidden="true">\n                <i class="bx-313-icon bx-313-icon-close"></i>\n            </span>\n            <span class="bx-313-hidden-control">Close</span>\n        </button>\n    </div>\n</div>\n\n<div class="bx-313-global-nav-search-popup">\n    <div class="bx-313-popover" tabindex="-1">\n        <div class="bx-313-popover__arrow"></div>\n        <div class="bx-313-scroll">\n            <div class="bx-313-scroll__box">\n                <div class="bx-313-auto-suggest" tabindex="-1" role="listbox">\n                    <div class="bx-313-auto-suggest__list"></div>\n                </div>\n            </div>\n        </div>\n    </div>\n</div>',js:'function sendBoxeverEvent(eventType) {\n  let eventLabel = `BOX313_${eventType}`;\n  var event = {\n    channel: "WEB",\n    type: eventLabel,\n    page: dataLayer[0].pageName,\n    pos: _boxever_settings.pointOfSale,\n    browser_id: Boxever.getID(),\n  };\n  Boxever.eventCreate(event, function (data) {}, "json");\n}\n\nconst codes = {\n  space: 32,\n  enter: 13,\n  arrowUp: 38,\n  arrowDown: 40,\n  arrowLeft: 37,\n  arrowRight: 39,\n  tab: 9,\n  escape: 27,\n  backspace: 8,\n  shift: 16,\n  backslash: 220,\n  comma: 188,\n};\n/**\n * The base implementation of `propertyOf` without support for deep paths.\n *\n * @private\n * @param {Object} object The object to query.\n * @returns {Function} Returns the new accessor function.\n */\nfunction basePropertyOf(object) {\n  return (key) => (object == null ? undefined : object[key]);\n}\n\n/** Used to map Latin Unicode letters to basic Latin letters. */\nconst deburredLetters = {\n  // Latin-1 Supplement block.\n  "\\xc0": "A",\n  "\\xc1": "A",\n  "\\xc2": "A",\n  "\\xc3": "A",\n  "\\xc4": "A",\n  "\\xc5": "A",\n  "\\xe0": "a",\n  "\\xe1": "a",\n  "\\xe2": "a",\n  "\\xe3": "a",\n  "\\xe4": "a",\n  "\\xe5": "a",\n  "\\xc7": "C",\n  "\\xe7": "c",\n  "\\xd0": "D",\n  "\\xf0": "d",\n  "\\xc8": "E",\n  "\\xc9": "E",\n  "\\xca": "E",\n  "\\xcb": "E",\n  "\\xe8": "e",\n  "\\xe9": "e",\n  "\\xea": "e",\n  "\\xeb": "e",\n  "\\xcc": "I",\n  "\\xcd": "I",\n  "\\xce": "I",\n  "\\xcf": "I",\n  "\\xec": "i",\n  "\\xed": "i",\n  "\\xee": "i",\n  "\\xef": "i",\n  "\\xd1": "N",\n  "\\xf1": "n",\n  "\\xd2": "O",\n  "\\xd3": "O",\n  "\\xd4": "O",\n  "\\xd5": "O",\n  "\\xd6": "O",\n  "\\xd8": "O",\n  "\\xf2": "o",\n  "\\xf3": "o",\n  "\\xf4": "o",\n  "\\xf5": "o",\n  "\\xf6": "o",\n  "\\xf8": "o",\n  "\\xd9": "U",\n  "\\xda": "U",\n  "\\xdb": "U",\n  "\\xdc": "U",\n  "\\xf9": "u",\n  "\\xfa": "u",\n  "\\xfb": "u",\n  "\\xfc": "u",\n  "\\xdd": "Y",\n  "\\xfd": "y",\n  "\\xff": "y",\n  "\\xc6": "Ae",\n  "\\xe6": "ae",\n  "\\xde": "Th",\n  "\\xfe": "th",\n  "\\xdf": "ss",\n  // Latin Extended-A block.\n  "\\u0100": "A",\n  "\\u0102": "A",\n  "\\u0104": "A",\n  "\\u0101": "a",\n  "\\u0103": "a",\n  "\\u0105": "a",\n  "\\u0106": "C",\n  "\\u0108": "C",\n  "\\u010a": "C",\n  "\\u010c": "C",\n  "\\u0107": "c",\n  "\\u0109": "c",\n  "\\u010b": "c",\n  "\\u010d": "c",\n  "\\u010e": "D",\n  "\\u0110": "D",\n  "\\u010f": "d",\n  "\\u0111": "d",\n  "\\u0112": "E",\n  "\\u0114": "E",\n  "\\u0116": "E",\n  "\\u0118": "E",\n  "\\u011a": "E",\n  "\\u0113": "e",\n  "\\u0115": "e",\n  "\\u0117": "e",\n  "\\u0119": "e",\n  "\\u011b": "e",\n  "\\u011c": "G",\n  "\\u011e": "G",\n  "\\u0120": "G",\n  "\\u0122": "G",\n  "\\u011d": "g",\n  "\\u011f": "g",\n  "\\u0121": "g",\n  "\\u0123": "g",\n  "\\u0124": "H",\n  "\\u0126": "H",\n  "\\u0125": "h",\n  "\\u0127": "h",\n  "\\u0128": "I",\n  "\\u012a": "I",\n  "\\u012c": "I",\n  "\\u012e": "I",\n  "\\u0130": "I",\n  "\\u0129": "i",\n  "\\u012b": "i",\n  "\\u012d": "i",\n  "\\u012f": "i",\n  "\\u0131": "i",\n  "\\u0134": "J",\n  "\\u0135": "j",\n  "\\u0136": "K",\n  "\\u0137": "k",\n  "\\u0138": "k",\n  "\\u0139": "L",\n  "\\u013b": "L",\n  "\\u013d": "L",\n  "\\u013f": "L",\n  "\\u0141": "L",\n  "\\u013a": "l",\n  "\\u013c": "l",\n  "\\u013e": "l",\n  "\\u0140": "l",\n  "\\u0142": "l",\n  "\\u0143": "N",\n  "\\u0145": "N",\n  "\\u0147": "N",\n  "\\u014a": "N",\n  "\\u0144": "n",\n  "\\u0146": "n",\n  "\\u0148": "n",\n  "\\u014b": "n",\n  "\\u014c": "O",\n  "\\u014e": "O",\n  "\\u0150": "O",\n  "\\u014d": "o",\n  "\\u014f": "o",\n  "\\u0151": "o",\n  "\\u0154": "R",\n  "\\u0156": "R",\n  "\\u0158": "R",\n  "\\u0155": "r",\n  "\\u0157": "r",\n  "\\u0159": "r",\n  "\\u015a": "S",\n  "\\u015c": "S",\n  "\\u015e": "S",\n  "\\u0160": "S",\n  "\\u015b": "s",\n  "\\u015d": "s",\n  "\\u015f": "s",\n  "\\u0161": "s",\n  "\\u0162": "T",\n  "\\u0164": "T",\n  "\\u0166": "T",\n  "\\u0163": "t",\n  "\\u0165": "t",\n  "\\u0167": "t",\n  "\\u0168": "U",\n  "\\u016a": "U",\n  "\\u016c": "U",\n  "\\u016e": "U",\n  "\\u0170": "U",\n  "\\u0172": "U",\n  "\\u0169": "u",\n  "\\u016b": "u",\n  "\\u016d": "u",\n  "\\u016f": "u",\n  "\\u0171": "u",\n  "\\u0173": "u",\n  "\\u0174": "W",\n  "\\u0175": "w",\n  "\\u0176": "Y",\n  "\\u0177": "y",\n  "\\u0178": "Y",\n  "\\u0179": "Z",\n  "\\u017b": "Z",\n  "\\u017d": "Z",\n  "\\u017a": "z",\n  "\\u017c": "z",\n  "\\u017e": "z",\n  "\\u0132": "IJ",\n  "\\u0133": "ij",\n  "\\u0152": "Oe",\n  "\\u0153": "oe",\n  "\\u0149": "\'n",\n  "\\u017f": "s",\n};\n\n/**\n * Used by `deburr` to convert Latin-1 Supplement and Latin Extended-A\n * letters to basic Latin letters.\n *\n * @private\n * @param {string} letter The matched letter to deburr.\n * @returns {string} Returns the deburred letter.\n */\nconst deburrLetter = basePropertyOf(deburredLetters);\n/** Used to match Latin Unicode letters (excluding mathematical operators). */\nconst reLatin = /[\\xc0-\\xd6\\xd8-\\xf6\\xf8-\\xff\\u0100-\\u017f]/g;\n\n/** Used to compose unicode character classes. */\nconst rsComboMarksRange = "\\\\u0300-\\\\u036f";\nconst reComboHalfMarksRange = "\\\\ufe20-\\\\ufe2f";\nconst rsComboSymbolsRange = "\\\\u20d0-\\\\u20ff";\nconst rsComboMarksExtendedRange = "\\\\u1ab0-\\\\u1aff";\nconst rsComboMarksSupplementRange = "\\\\u1dc0-\\\\u1dff";\nconst rsComboRange =\n  rsComboMarksRange +\n  reComboHalfMarksRange +\n  rsComboSymbolsRange +\n  rsComboMarksExtendedRange +\n  rsComboMarksSupplementRange;\n\n/** Used to compose unicode capture groups. */\nconst rsCombo = `[${rsComboRange}]`;\n\n/**\n * Used to match [combining diacritical marks](https://en.wikipedia.org/wiki/Combining_Diacritical_Marks) and\n * [combining diacritical marks for symbols](https://en.wikipedia.org/wiki/Combining_Diacritical_Marks_for_Symbols).\n */\nconst reComboMark = RegExp(rsCombo, "g");\n\n/**\n * Deburrs `string` by converting\n * [Latin-1 Supplement](https://en.wikipedia.org/wiki/Latin-1_Supplement_(Unicode_block)#Character_table)\n * and [Latin Extended-A](https://en.wikipedia.org/wiki/Latin_Extended-A)\n * letters to basic Latin letters and removing\n * [combining diacritical marks](https://en.wikipedia.org/wiki/Combining_Diacritical_Marks).\n *\n * @category String\n * @param {string} [string=\'\'] The string to deburr.\n * @returns {string} Returns the deburred string.\n * @example\n *\n * deburr(\'déjà vu\')\n * // => \'deja vu\'\n */\nfunction deburr(string) {\n  if (!Array.isArray(string))\n    return (\n      string && string.replace(reLatin, deburrLetter).replace(reComboMark, "")\n    );\n  let results = "";\n  for (var i = 0; i < string.length; i++) {\n    results +=\n      string[i] &&\n      string[i].replace(reLatin, deburrLetter).replace(reComboMark, "");\n    if (i !== string.length - 1) {\n      results += ",";\n    }\n  }\n  return results;\n}\n\nfunction handleSearchIconClick(e) {\n  if (e) {\n    e.preventDefault();\n    e.stopPropagation();\n  }\n  const popupWrapper = document.querySelector(".bx-313-header-popup__wrapper");\n\n  window.box313IsExpanded = !window.box313IsExpanded;\n  if (window.box313IsExpanded) {\n    popupWrapper.style.display = "block";\n  } else {\n    popupWrapper.style.display = "none";\n    document.querySelector(".bx-313-global-nav-search-popup").style.display =\n      "none";\n  }\n  if (PUBLICATION && !window.globalNavSearchTriggered) {\n    if (!window.box313IsSearchFormClicked) {\n      const urlParts = PUBLICATION.split("/");\n      const country = urlParts && urlParts.length > 2 ? urlParts[1] : null;\n      const language = urlParts && urlParts.length > 2 ? urlParts[2] : null;\n      if (country && language) {\n        let promises = [\n          fetch(\n            `${HOST}/service/search-keywords?country=${country}&language=${language}`\n          )\n            .then((response) => {\n              return response.json();\n            })\n            .then((results) => results.results),\n        ];\n        if (language !== "english") {\n          promises.push(\n            fetch(\n              `${HOST}/service/search-keywords?country=${country}&language=english`\n            )\n              .then((response) => {\n                return response.json();\n              })\n              .then((results) => results.results)\n          );\n        }\n        Promise.all(promises)\n          .then(([searchKeywords, englishKeywords]) => {\n            if (\n              searchKeywords &&\n              searchKeywords.length &&\n              (language === "english" ||\n                (language !== "english" &&\n                  englishKeywords &&\n                  englishKeywords.length))\n            ) {\n              window.box313SearchKeywordsResults = formatCollection(\n                searchKeywords\n              );\n              window.box313EnglishKeywordsResults = englishKeywords;\n              sendBoxeverEvent("VIEWED");\n              window.globalNavSearchTriggered = true;\n              window.box313IsSearchFormClicked = true;\n              bindSearchInputEvents(e);\n            }\n          })\n          .catch((error) => console.log(error));\n      }\n    } else if (e) {\n      bindSearchInputEvents(e);\n    }\n  } else {\n    bindSearchInputEvents(e);\n  }\n}\n\nfunction bindSearchInputEvents(e) {\n  const searchInput = getSearchInput();\n  if (searchInput) {\n    if (window.box313SelectedItem) {\n      searchInput.value = window.box313SelectedItem.content.title;\n\n      findSuggestions(searchInput.value, true).then((suggestions) => {\n        renderPopUp(\n          suggestions &&\n            suggestions.listCollection &&\n            suggestions.listCollection.length > 0\n            ? suggestions.listCollection[0]\n            : []\n        );\n      });\n    } else if (isLargeSearchTerm(searchInput.value)) {\n      findSuggestions(searchInput.value).then((suggestions) => {\n        renderPopUp(\n          suggestions &&\n            suggestions.listCollection &&\n            suggestions.listCollection.length > 0\n            ? suggestions.listCollection[0]\n            : []\n        );\n      });\n    }\n    searchInput.select();\n  }\n}\nfunction setFocusToFirstSuggestion() {\n  const firstSuggestionElement = document.querySelector(\n    ".bx-313-auto-suggest__item"\n  );\n  if (firstSuggestionElement) {\n    firstSuggestionElement.focus();\n  }\n}\nfunction handleInputKeys(ev) {\n  if (ev.keyCode === codes.arrowUp || ev.keyCode === codes.arrowDown) {\n    ev.preventDefault();\n\n    setFocusToFirstSuggestion();\n  } else if (ev.keyCode === codes.enter) {\n    ev.preventDefault();\n    handleInputBlur(ev);\n  } else if (ev.keyCode === codes.tab) {\n    ev.preventDefault();\n    const searchBtn = document.querySelector(".bx-313-header-search__btn-cta");\n    if (searchBtn) {\n      searchBtn.focus();\n    }\n    handleInputBlur(ev);\n  }\n}\nfunction handleInputFocus(focusEvent) {\n  if (window.box313SelectedItem) {\n    focusEvent.target.value = window.box313SelectedItem.content.title;\n\n    findSuggestions(window.box313SelectedItem.content.title, true).then(\n      (suggestions) => {\n        renderPopUp(\n          suggestions &&\n            suggestions.listCollection &&\n            suggestions.listCollection.length > 0\n            ? suggestions.listCollection[0]\n            : []\n        );\n      }\n    );\n  }\n  const clearInputElement = document.querySelector(\n    ".bx-313-input-field__button-icon"\n  );\n\n  if (focusEvent.target.value !== "") {\n    clearInputElement.style.display = "block";\n  } else {\n    clearInputElement.style.display = "none";\n  }\n\n  focusEvent.target.select();\n  const inputFieldWrapper = document.querySelector(".bx-313-input-field");\n  if (inputFieldWrapper) {\n    inputFieldWrapper.classList.add("bx-313-input-field--focus");\n    inputFieldWrapper.classList.add("bx-313-input-field--active");\n  }\n}\nfunction getSearchInput() {\n  return document.querySelector(".bx-313-input-field__input");\n}\nfunction handleInputBlur(blurEvent) {\n  const searchContainer = document.querySelector(".bx-nav-search");\n  if (\n    isLargeSearchTerm(blurEvent.target.value) &&\n    (!blurEvent.relatedTarget ||\n      !(\n        blurEvent.relatedTarget &&\n        (blurEvent.relatedTarget === searchContainer ||\n          childOf(blurEvent.relatedTarget, searchContainer))\n      ))\n  ) {\n    const popupElement = getPopUpContainer();\n    if (popupElement) {\n      popupElement.style.display = "none";\n    }\n    if (\n      window.box313State &&\n      window.box313State.listCollection &&\n      window.box313State.listCollection.length &&\n      window.box313State.listCollection[0] &&\n      window.box313State.listCollection[0].length\n    ) {\n      const searchBtn = document.querySelector(\n        ".bx-313-header-search__btn-cta"\n      );\n      if (searchBtn) {\n        searchBtn.focus();\n      }\n\n      if (\n        window.box313State.listCollection[0][0] &&\n        window.box313State.listCollection[0][0].content &&\n        window.box313State.listCollection[0][0].content.title\n      ) {\n        if (!window.box313SelectedItem) {\n          window.box313SelectedItem = window.box313State.listCollection[0][0];\n          handleSearchCTA();\n\n          blurEvent.target.value =\n            window.box313State.listCollection[0][0].content.title;\n        } else {\n          blurEvent.target.value = window.box313SelectedItem.content.title;\n        }\n      } else {\n        blurEvent.target.value = "";\n        window.box313SelectedItem = null;\n        handleSearchCTA();\n      }\n    } else {\n      if (isLargeSearchTerm(blurEvent.target.value)) {\n        renderInputInlineError();\n      }\n      blurEvent.target.value = "";\n\n      window.box313SelectedItem = null;\n      handleSearchCTA();\n    }\n  }\n  const inputFieldWrapper = document.querySelector(".bx-313-input-field");\n  if (inputFieldWrapper) {\n    inputFieldWrapper.classList.remove("bx-313-input-field--focus");\n    if (blurEvent.target.value === "") {\n      inputFieldWrapper.classList.remove("bx-313-input-field--active");\n    }\n  }\n}\n\nfunction renderInputInlineError() {\n  const inlineErrorElement = document.querySelector(\n    ".bx-313-global-nav-search-input__errored-msg"\n  );\n  if (!inlineErrorElement) {\n    const error = `<p role="region" aria-live="polite" class="bx-313-global-nav-search-input__errored-msg" tabindex="-1">\n        No results, Please try another keyword\n        </p>`;\n    const inputWrapperElement = document.querySelector(\n      ".bx-313-header-search__input .bx-313-input-field"\n    );\n    if (inputWrapperElement) {\n      inputWrapperElement.insertAdjacentHTML("beforeend", error);\n      inputWrapperElement.classList.add(\n        "bx-313-global-nav-search-input__errored"\n      );\n    }\n  }\n}\nfunction removeInlineError() {\n  const inputWrapperElement = document.querySelector(\n    ".bx-313-header-search__input .bx-313-input-field"\n  );\n  if (inputWrapperElement) {\n    inputWrapperElement.classList.remove(\n      "bx-313-global-nav-search-input__errored"\n    );\n    const errorElement = document.querySelector(\n      ".bx-313-global-nav-search-input__errored-msg"\n    );\n    if (errorElement && errorElement.parentNode) {\n      errorElement.parentNode.removeChild(errorElement);\n    }\n  }\n}\nfunction handleInputChange(inputEvent) {\n  const clearInputElement = document.querySelector(\n    ".bx-313-input-field__button-icon"\n  );\n  if (inputEvent.target.value === "") {\n    clearInputElement.style.display = "none";\n  } else {\n    clearInputElement.style.display = "block";\n  }\n  removeInlineError();\n\n  findSuggestions(inputEvent.target.value)\n    .then((suggestions) => {\n      renderPopUp(\n        suggestions &&\n          suggestions.listCollection &&\n          suggestions.listCollection.length > 0\n          ? suggestions.listCollection[0]\n          : []\n      );\n    })\n    .catch((error) => console.log(error));\n}\nfunction getIndexOfOccurence(source, term) {\n  return source.indexOf(term);\n}\n\nfunction findSuggestions(value, ignoreValue) {\n  return new Promise((resolve) => {\n    const stateData = {\n      listCollection: [],\n      listCollectionExpand: [],\n      findWords: [],\n    };\n    if (\n      window.box313SearchKeywordsResults &&\n      window.box313SearchKeywordsResults.length &&\n      isLargeSearchTerm(value)\n    ) {\n      const searchValue = ignoreValue ? "" : value.toLowerCase();\n      const searchResult = [];\n\n      if (searchValue) {\n        const trimmedSearchValue = deburr(searchValue)\n          .replace(/,/g, " ")\n          .trim();\n        const strArr = trimmedSearchValue.split(" ").filter((word) => !!word);\n\n        let searchCollection = [];\n\n        while (strArr.length > 0) {\n          searchCollection.push(strArr.join(" "));\n          strArr.pop();\n          searchCollection = [trimmedSearchValue].concat(\n            searchCollection.filter(\n              (v) =>\n                !!v &&\n                v !== trimmedSearchValue &&\n                v.length >= SEARCH_TERM_MIN_LENGTH\n            )\n          );\n          let searchLength = searchCollection.length;\n          window.box313SearchKeywordsResults.forEach(\n            (groupCollection, groupCollectionIndex) => {\n              const findCollection = {};\n              const priorityData = {};\n              const otherData = {};\n\n              for (let i = 0, l = groupCollection.length; i < l; i += 1) {\n                const current = groupCollection[i].searchData;\n                let searchCount = 0;\n                let isFind = false;\n                let isFindInPriority = false;\n                current.isPriority = false;\n                while (!isFind && searchCount < searchLength) {\n                  const searchTermStr = searchCollection[searchCount];\n                  for (let n = 0, m = current.priority.length; n < m; n += 1) {\n                    const searchSourceStr = current.priority[n];\n                    const index = getIndexOfOccurence(\n                      searchSourceStr,\n                      searchTermStr\n                    );\n                    if (index > -1) {\n                      if (searchCount === 0) {\n                        searchLength = 1;\n                      }\n                      saveFoundPriority(\n                        priorityData,\n                        groupCollection[i],\n                        searchCount,\n                        n,\n                        index\n                      );\n\n                      current.isPriority = true;\n\n                      isFindInPriority = true;\n                      isFind = true;\n                      findCollection[searchCollection[searchCount]] = true;\n                      break;\n                    }\n                  }\n                  if (\n                    !isFindInPriority &&\n                    searchCollection[searchCount].length >=\n                      SEARCH_TERM_MIN_LENGTH\n                  ) {\n                    for (let n = 0, m = current.other.length; n < m; n += 1) {\n                      const searchSourceStr = current.other[n];\n                      const index = getIndexOfOccurence(\n                        searchSourceStr,\n                        searchTermStr\n                      );\n\n                      if (index > -1) {\n                        saveFoundOther(\n                          otherData,\n                          groupCollection[i],\n                          searchCount\n                        );\n\n                        isFind = true;\n\n                        break;\n                      }\n                    }\n                  }\n\n                  searchCount += 1;\n                }\n              }\n              const priority = normalizePriority(priorityData);\n              const other =\n                normalizeOther(otherData, !!priorityData[0]) || groupCollection;\n\n              searchResult[groupCollectionIndex] = priority.concat(other);\n\n              stateData.findWords = stateData.findWords.concat(\n                searchCollection.filter((word) => findCollection[word])\n              );\n            }\n          );\n          stateData.listCollection = searchResult;\n        }\n      } else {\n        stateData.listCollection = window.box313SearchKeywordsResults;\n      }\n    }\n    window.box313State = stateData;\n    resolve(stateData);\n  });\n}\nfunction sortNumber(a, b) {\n  return a - b;\n}\nfunction normalizePriority(data) {\n  const result = [];\n  // show results for full search string or matched words\n  const wordKeys = data[0] ? [0] : Object.keys(data).sort(sortNumber);\n  wordKeys.forEach((word) => {\n    const orderKeys = Object.keys(data[word]).sort(sortNumber);\n\n    orderKeys.forEach((order) => {\n      const indexKeys = Object.keys(data[word][order]).sort(sortNumber);\n\n      indexKeys.forEach((index) => {\n        data[word][order][index].forEach((item) => {\n          result.push(item);\n        });\n      });\n    });\n  });\n\n  return result;\n}\nfunction normalizeOther(data, isFindFullInPriority) {\n  let result = [];\n  const wordKeys =\n    isFindFullInPriority && data[0] ? [0] : Object.keys(data).sort(sortNumber);\n\n  wordKeys.forEach((word) => {\n    result = result.concat(data[word]);\n  });\n\n  return result;\n}\nfunction saveFoundOther(storage, item, wordOrder) {\n  if (!storage[wordOrder]) {\n    storage[wordOrder] = [];\n  }\n\n  storage[wordOrder].push(item);\n}\nfunction saveFoundPriority(storage, item, wordOrder, order, index) {\n  if (!storage[wordOrder]) {\n    storage[wordOrder] = {};\n  }\n\n  if (!storage[wordOrder][order]) {\n    storage[wordOrder][order] = {};\n  }\n\n  if (!storage[wordOrder][order][index]) {\n    storage[wordOrder][order][index] = [];\n  }\n\n  storage[wordOrder][order][index].push(item);\n}\nfunction getProp(object, path, defaultVal) {\n  const _path = Array.isArray(path)\n    ? path\n    : path.split(".").filter((i) => i.length);\n\n  if (!_path.length) {\n    return object === undefined ? defaultVal : object;\n  }\n\n  return getProp(object[_path.shift()], _path, defaultVal);\n}\nfunction formatCollection(collection) {\n  const formattedCollection = [];\n  collection.forEach((itemData) => {\n    const search = {\n      priority: [],\n      other: [],\n      isPriority: false,\n    };\n    FILTER_COLLECTION.priority.forEach((key) => {\n      search.priority.push(\n        deburr(getProp(itemData, key, "")).replace(/,/g, " ")\n      );\n    });\n    if (FILTER_COLLECTION.other) {\n      FILTER_COLLECTION.other.forEach((key) => {\n        search.other.push(\n          deburr(getProp(itemData, key, "")).replace(/,/g, " ")\n        );\n      });\n    }\n\n    search.priority = normalizeSearchData(search.priority);\n    search.other = normalizeSearchData(search.other);\n    itemData.searchData = search;\n    if (!formattedCollection.length) {\n      formattedCollection.push([itemData]);\n    } else {\n      formattedCollection[0].push(itemData);\n    }\n  });\n  return formattedCollection;\n}\nfunction normalizeSearchData(data) {\n  return data\n    .reduce((a, b) => a.concat(b), [])\n    .filter((item) => !!item)\n    .map((item) => item.toLowerCase());\n}\nfunction isLargeSearchTerm(value) {\n  return !!value && value.length >= SEARCH_TERM_MIN_LENGTH;\n}\nfunction getPopUpContainer() {\n  return document.querySelector(".bx-313-global-nav-search-popup");\n}\nfunction getPopoverLeft(element) {\n  const popoverContainer = getPopUpContainer();\n\n  let leftPosition = 0;\n\n  if (element) {\n    const { width: elementWidth, left: elementLeft } = getDimensions(\n      element,\n      document.documentElement\n    );\n    const leftOffset = elementLeft;\n    leftPosition = leftOffset;\n  }\n\n  return leftPosition;\n}\nfunction renderPopUp(suggestions) {\n  const searchInput = getSearchInput();\n  const popupElement = getPopUpContainer();\n  if (popupElement) {\n    if (searchInput && isLargeSearchTerm(searchInput.value)) {\n      const suggestionsListElement = document.querySelector(\n        ".bx-313-auto-suggest__list"\n      );\n\n      if (suggestionsListElement && suggestions && suggestions.length) {\n        let suggestionsHTML = "";\n        for (var i = 0; i < suggestions.length; i++) {\n          suggestionsHTML += renderSuggestion(suggestions[i], i);\n        }\n        suggestionsListElement.innerHTML = suggestionsHTML;\n      } else {\n        suggestionsListElement.innerHTML = renderNoMatchFound();\n      }\n      const popoverWrapper = document.querySelector(".bx-313-popover");\n      if (popoverWrapper) {\n        const inputWrapper = document.querySelector(\n          ".bx-313-header-search__input"\n        );\n        let topOffset = 10;\n        const opWrapper = document.querySelector(".operational-updates");\n        if (opWrapper && typeof __EK__ !== "undefined") {\n          topOffset = topOffset - opWrapper.offsetHeight;\n        }\n        const opWrapperBEX = document.querySelector(\n          ".operational-update__wrapper"\n        );\n        if (opWrapperBEX && typeof __INITIAL_STATE__ !== "undefined") {\n          topOffset = topOffset - opWrapperBEX.offsetHeight;\n        }\n        popoverWrapper.style.top =\n          getPopoverTop(inputWrapper, topOffset) + "px";\n        // if(!popoverWrapper.style.left)\n        popoverWrapper.style.left =\n          getPopoverLeft(document.querySelector(".bx-313-input-field")) + "px";\n        popoverWrapper.style.width =\n          getPopoverWidth(document.querySelector(".bx-313-input-field")) + "px";\n      }\n      if (window.box313IsExpanded)\n        popupElement.style.display = "block";\n    } else {\n      popupElement.style.display = "none";\n    }\n  }\n}\nfunction getPopoverWidth(element) {\n  const { width: elementWidth } = getDimensions(\n    element,\n    document.documentElement\n  );\n  return elementWidth;\n}\nfunction renderNoMatchFound() {\n  return `<div class="bx-313-auto-suggest__not-found">\n        <p class="bx-313-auto-suggest__not-found-heading">\n            <b>No match found</b>\n        </p>\n        </div>`;\n}\nfunction handleSuggestionKeyDown(ev) {\n  ev.preventDefault();\n\n  if (ev.keyCode === codes.arrowDown) {\n    if (ev.target.nextSibling) {\n      ev.target.nextSibling.focus();\n    }\n  } else if (ev.keyCode === codes.arrowUp) {\n    if (ev.target.previousSibling) {\n      ev.target.previousSibling.focus();\n    }\n  } else if (ev.keyCode === codes.enter || ev.keyCode === codes.tab) {\n    handleSuggestionSelect(ev);\n  }\n}\nfunction renderSuggestion(suggestion, index) {\n  if (suggestion && suggestion.content && suggestion.content.title) {\n    return `<button type="button" data-index="${index}" onblur="handleNavSearchSuggestionBlur(event)" onclick="handleNavSearchSuggestionClick(event)" role="option" aria-selected="false"\n                                         class="bx-313-auto-suggest__item">\n                                       <strong>${suggestion.content.title}</strong>\n                                    </button>`;\n  }\n  return "";\n}\nfunction getDimensions(element, root) {\n  let scrollY = window.pageYOffset;\n  let scrollX = window.pageXOffset;\n\n  if (root && root !== document.documentElement) {\n    scrollY = root.scrollTop;\n    scrollX = root.scrollLeft;\n  }\n\n  const bounding = element.getBoundingClientRect();\n  const { offsetHeight: height, offsetWidth: width } = element;\n  const left = bounding.left + scrollX;\n  const top = bounding.top + scrollY;\n  const right = left + width;\n  const bottom = top + height;\n\n  return {\n    left,\n    right,\n    top,\n    bottom,\n    width,\n    height,\n  };\n}\nfunction isInViewport(el) {\n  const rect = el.getBoundingClientRect();\n  return (\n    rect.top >= 0 &&\n    rect.left >= 0 &&\n    rect.bottom <=\n      (window.innerHeight || document.documentElement.clientHeight) &&\n    rect.right <= (window.innerWidth || document.documentElement.clientWidth)\n  );\n}\nfunction getScrollableWrapperOffset() {\n  const popoverContainer = getPopUpContainer();\n  if (popoverContainer) {\n    return getDimensions(popoverContainer, document.documentElement);\n  }\n\n  return {\n    top: 0,\n    left: 0,\n    bottom: 0,\n    right: 0,\n  };\n}\nfunction getPopoverTop(element, verticalSpace) {\n  let topPosition = 0;\n\n  if (element) {\n    const { bottom: elementBottom } = getDimensions(\n      element,\n      document.documentElement\n    );\n\n    topPosition = elementBottom + verticalSpace;\n  }\n\n  return topPosition;\n}\nfunction runVariant() {\n  if (PUBLICATION && !window.globalNavSearchTriggered) {\n    const searchElementWrapper = getHeaderSearchWrapper();\n    if (searchElementWrapper) {\n      searchElementWrapper.insertAdjacentHTML(\n        "beforeend",\n        \'<div class="bx-nav-search"></div>\'\n      );\n\n      insertHTMLAfter(".bx-nav-search");\n      const searchBtn = getHeaderSearchBtn();\n      searchBtn.addEventListener("click", handleSearchIconClick);\n      const popupWrapper = document.querySelector(\n        ".bx-313-header-popup__wrapper"\n      );\n      if (popupWrapper) {\n        popupWrapper.style.top =\n          searchBtn.offsetTop + searchBtn.offsetHeight + "px";\n      }\n      const inputWrapper = getSearchInput();\n      if (inputWrapper) {\n        inputWrapper.addEventListener("input", handleInputChange);\n        inputWrapper.addEventListener("focus", handleInputFocus);\n        inputWrapper.addEventListener("blur", handleInputBlur);\n        inputWrapper.addEventListener("keydown", handleInputKeys);\n      }\n      const clearInputElement = document.querySelector(\n        ".bx-313-input-field__button-icon"\n      );\n      if (clearInputElement) {\n        clearInputElement.addEventListener("click", function (e) {\n          e.preventDefault();\n          const inputElement = document.querySelector(\n            ".bx-313-input-field__input"\n          );\n          if (inputElement) {\n            inputElement.value = "";\n            clearInputElement.style.display = "none";\n            window.box313SelectedItem = null;\n            handleSearchCTA();\n            const popupContainer = getPopUpContainer();\n            if (popupContainer) {\n              popupContainer.style.display = "none";\n            }\n            inputElement.focus();\n          }\n        });\n      }\n\n      const closePupupBtn = document.querySelector(\n        ".bx-313-header-popup__close"\n      );\n      if (closePupupBtn) {\n        closePupupBtn.addEventListener("click", function (e) {\n          e.preventDefault();\n          searchBtn.click();\n          searchBtn.focus();\n        });\n      }\n\n      document.addEventListener("click", function (event) {\n        var searchContainer = document.querySelector(".bx-nav-search");\n        if (searchContainer) {\n          if (\n            searchContainer !== event.target &&\n            !childOf(event.target, searchContainer) &&\n            searchBtn !== event.target &&\n            !childOf(event.target, searchBtn)\n          ) {\n            const popupWrapper = document.querySelector(\n              ".bx-313-header-popup__wrapper"\n            );\n            if (window.box313IsExpanded) {\n              window.box313IsExpanded = false;\n              popupWrapper.style.display = "none";\n              document.querySelector(\n                ".bx-313-global-nav-search-popup"\n              ).style.display = "none";\n            }\n          }\n        }\n      });\n\n      document.addEventListener(\n        "scroll",\n        function () {\n          const inputWrapper = getSearchInput();\n          if (inputWrapper) {\n            if (!isInViewport(inputWrapper)) {\n              const popupContainer = getPopUpContainer();\n              if (popupContainer) {\n                popupContainer.style.display = "none";\n              }\n            }\n          }\n        },\n        {\n          passive: true,\n        }\n      );\n      document.addEventListener("keydown", function (e) {\n        if (e.target.classList.contains("bx-313-auto-suggest__item")) {\n          handleSuggestionKeyDown(e);\n        }\n      });\n      const submitBtn = document.querySelector(\n        ".bx-313-header-search__btn-cta"\n      );\n      if (submitBtn) {\n        submitBtn.addEventListener("click", function (e) {\n          if (e && e.currentTarget) {\n            if (e.currentTarget.dataset) {\n              if (e.currentTarget.dataset.href) {\n                const popupElement = getPopUpContainer();\n                if (popupElement) {\n                  popupElement.style.display = "none";\n                }\n                let target = "_self";\n                if (e.currentTarget.dataset.target) {\n                  target = e.currentTarget.dataset.target;\n                }\n                sendBoxeverEvent("CLICKED");\n                window.open(e.currentTarget.dataset.href, target);\n              }\n            }\n          }\n        });\n      }\n      handleSearchIconClick();\n    }\n  }\n}\nconst getTcmId = (key) => {\n  if (key) {\n    const splittedKey = key.split("/");\n    if (splittedKey && splittedKey.length) {\n      return splittedKey[splittedKey.length - 1];\n    }\n  }\n  return "";\n};\nconst getDefaultRedirectUrl = (val, keywords) => {\n  const redirectURL = keywords.find((keyword) => {\n    if (keyword && keyword.content && keyword.content.redirectLink)\n      return getTcmId(keyword.content.redirectLink.key) === val;\n    return false;\n  });\n  if (\n    redirectURL &&\n    redirectURL.content &&\n    redirectURL.content.redirectLink &&\n    redirectURL.content.redirectLink.content &&\n    redirectURL.content.redirectLink.content.externalLink\n  )\n    return redirectURL.content.redirectLink.content.externalLink;\n  return "";\n};\n\nfunction handleSearchCTA() {\n  const submitBtn = document.querySelector(".bx-313-header-search__btn-cta");\n  if (submitBtn) {\n    if (window.box313SelectedItem) {\n      const urlParts = PUBLICATION.split("/");\n      const language = urlParts && urlParts.length > 2 ? urlParts[2] : null;\n      const newValue = window.box313SelectedItem.content.title;\n      let tcmId = "";\n      let isRedirect = false;\n      let languageRedirectUrl = "";\n      let target = "_self";\n      let externalLink = "";\n      if (window.box313SelectedItem.content) {\n        if (window.box313SelectedItem.content.redirectLink) {\n          tcmId = getTcmId(window.box313SelectedItem.content.redirectLink.key);\n          if (window.box313SelectedItem.content.redirectLink.content) {\n            if (\n              window.box313SelectedItem.content.redirectLink.content\n                .externalLink\n            ) {\n              languageRedirectUrl = window.box313SelectedItem.content.redirectLink.content.externalLink.replace(\n                language,\n                "english"\n              );\n\n              externalLink =\n                window.box313SelectedItem.content.redirectLink.content\n                  .externalLink;\n            }\n            if (window.box313SelectedItem.content.redirectLink.content.target) {\n              target =\n                window.box313SelectedItem.content.redirectLink.content.target;\n            }\n          }\n        }\n        if (\n          window.box313SelectedItem.content.doRedirect &&\n          window.box313SelectedItem.content.doRedirect.length\n        ) {\n          isRedirect = window.box313SelectedItem.content.doRedirect[0];\n        }\n      }\n      let defaultRedirectUrl = "";\n      if (language !== "english") {\n        defaultRedirectUrl = getDefaultRedirectUrl(\n          tcmId,\n          window.box313EnglishKeywordsResults\n        );\n      }\n      const reDirectURL = languageRedirectUrl || defaultRedirectUrl;\n      if (isRedirect) {\n        const redirectInfoElement = document.querySelector(\n          ".bx-313-global-nav-search-info"\n        );\n        if (redirectInfoElement) {\n          redirectInfoElement.style.display = "flex";\n          const redirectLink = document.querySelector(\n            ".bx-313-global-nav-search-info__link"\n          );\n          if (redirectLink) {\n            redirectLink.href = reDirectURL;\n            redirectLink.target = "_self";\n          }\n        }\n      } else if (externalLink) {\n        const redirectInfoElement = document.querySelector(\n          ".bx-313-global-nav-search-info"\n        );\n        if (redirectInfoElement) {\n          redirectInfoElement.style.display = "none";\n        }\n        submitBtn.dataset.href = externalLink;\n        submitBtn.dataset.target = target;\n      } else {\n        const redirectInfoElement = document.querySelector(\n          ".bx-313-global-nav-search-info"\n        );\n        if (redirectInfoElement) {\n          redirectInfoElement.style.display = "none";\n        }\n      }\n    } else {\n      submitBtn.dataset.href = "";\n      submitBtn.dataset.target = "";\n    }\n  }\n}\nfunction getHeaderSearchBtn() {\n  if (typeof __INITIAL_STATE__ !== "undefined" && __INITIAL_STATE__)\n    return document.querySelector(\n      ".header-buttons__item--search .header-popup__btn"\n    );\n  if (typeof __EK__ !== "undefined")\n    return document.querySelector(\n      ".js-website-search .js-search-selector-list-item-link"\n    );\n  return document.querySelector(\n    ".ek-global-navigation__secondarymenu--search .search-selector-list-item-link"\n  );\n}\nfunction getHeaderSearchWrapper() {\n  if (typeof __INITIAL_STATE__ !== "undefined" && __INITIAL_STATE__)\n    return document.querySelector(".header-buttons__item--search");\n  if (typeof __EK__ !== "undefined")\n    return document.querySelector(".js-website-search");\n  return document.querySelector(".ek-global-navigation__secondarymenu--search");\n}\nwindow.handleNavSearchSuggestionBlur = function (event) {\n  if (\n    !event.relatedTarget ||\n    (event.relatedTarget &&\n      !event.relatedTarget.classList.contains("bx-313-auto-suggest__item"))\n  ) {\n    handleSuggestionSelect(event);\n  }\n};\nwindow.handleNavSearchSuggestionClick = function (event) {\n  handleSuggestionSelect(event);\n};\nfunction handleSuggestionSelect(event) {\n  if (\n    window.box313State &&\n    window.box313State.listCollection &&\n    window.box313State.listCollection.length &&\n    window.box313State.listCollection[0] &&\n    window.box313State.listCollection[0].length\n  ) {\n    window.box313SelectedItem =\n      window.box313State.listCollection[0][event.target.dataset.index];\n    handleSearchCTA();\n    const searchBtn = document.querySelector(".bx-313-header-search__btn-cta");\n    if (searchBtn) {\n      searchBtn.focus();\n    }\n    const searchInput = getSearchInput();\n    if (searchInput) {\n      searchInput.value =\n        window.box313State.listCollection[0][\n          event.target.dataset.index\n        ].content.title;\n    }\n    const popoverContainer = getPopUpContainer();\n    if (popoverContainer) {\n      popoverContainer.style.display = "none";\n    }\n  }\n}\nfunction childOf(node, ancestor) {\n  var child = node;\n  while (child !== null) {\n    if (child === ancestor) return true;\n    child = child.parentNode;\n  }\n  return false;\n}\nfunction getPublication() {\n  if (typeof __INITIAL_STATE__ !== "undefined" && __INITIAL_STATE__) {\n    return `/${__INITIAL_STATE__.urlparser.results.country}/${__INITIAL_STATE__.urlparser.results.language}`;\n  }\n  if (typeof __EK__ !== "undefined" && __EK__) {\n    return `/${__EK__.urlparser.country}/${__EK__.urlparser.language}`;\n  }\n  const publicationMetaElement = document.querySelector(\n    \'meta[name="PublishURL"]\'\n  );\n  if (publicationMetaElement) {\n    if (publicationMetaElement.content !== "/english") {\n      return publicationMetaElement.content;\n    } else {\n      return "/global/english";\n    }\n  }\n  return null;\n}\nconst HOST = "https://www.emirates.com";\nconst SEARCH_TERM_MIN_LENGTH =\n  "1";\nconst PUBLICATION = getPublication();\nconst FILTER_COLLECTION = {\n  priority: ["content.keywords"],\n  other: ["analytics.title"],\n};\nif (typeof window.globalNavSearchTriggered === "undefined") {\n  window.box313SearchKeywordsResults = null;\n  window.box313EnglishKeywordsResults = null;\n  window.box313State = {};\n  window.box313IsExpanded = false;\n  window.box313SelectedItem = null;\n  window.box313IsSearchFormClicked = false;\n  window.globalNavSearchTriggered = false;\n  runVariant();\n}\n'}}]},{ref:"764ce6f0-56d7-45fe-9414-54b965105c70",name:"EM-201 c--a33-bd4travel-poc (IBE)",revision:8,archived:!1,target:{script:"(function(window, isDevMode) {\n  var _CNAME_ = 'lc-a33';\n  var _SNAME_ = 'renderer';\n  var safeLog = debug(_CNAME_)(_SNAME_);\n\n  safeLog.info();\n\n  /**\n   * ! IMPORTANT !\n   * Before code review please check if all business requirements are met.\n   * Please refer to README.md#business-requirements to see checklist for a standard campaign for Emirates.\n   *\n   * Platform Notes:\n   * - In order to trigger experience - call `targetingPassed()` method.\n   * - In order to provide better debugging - please log every failed targeting rule with a separate log message.\n   *\n   * Dev Notes:\n   * - amend flow rules according to ATs\n   * - amend page targeting according to ATs\n   * - add metrics according to ATs\n   * - amend when `triggerExperience` is called according to ATs\n   */\n\n  try {\n    // targeting logic goes here\n    var FLOW_RULES = [\n      {\n        name: 'Run once (script was already executed on the page)',\n        handler: isFirstRun,\n      },\n      {\n        name: 'Browser (not IE)',\n        handler: function() { return !isIE(); },\n      },\n      {\n        name: 'Device (Desktop)',\n        handler: isDesktop,\n      },\n    ];\n\n    var isFlowValid = checkFlowTargeting(FLOW_RULES);\n    var isPageValid = isPricePage();\n    var generated = false;\n\n    if (!isFlowValid) {\n      return false;\n    }\n\n    // init metrics on all pages for valid flow\n    initMetrics(isPageValid);\n\n    if (!isPageValid) {\n      safeLog.error('Page targeting was not met');\n      return false;\n    }\n\n    runGeneration();\n    onSearchChange(runGeneration);\n\n    // eslint-disable-next-line no-inner-declarations\n    function runGeneration(data) {\n      if (!isBD4Travel(data)) {\n        safeLog.error('Exclusions: Not a BD4 Travel Page');\n        return;\n      }\n\n      if (generated) {\n        window.dispatchEvent(new CustomEvent(_CNAME_ + '-gen'));\n        return;\n      }\n\n      // run experience only on campaign pages\n      generated = true;\n      triggerExperience();\n    }\n  } catch (err) {\n    safeLog.error(err);\n  }\n\n  return false;\n\n  function initMetrics(isCampaignPage) {\n    if (isCampaignPage) {\n      window.addEventListener('click', function(e) {\n        if (isBD4TravelEl(e.target)) {\n          trackMetric('widget-click', { value: 1 });\n        }\n      }, true);\n    }\n  }\n\n  /** Actions */\n\n  /**\n   * Triggers the experience with a fallback for local development\n   * or in case if there is no async targeting in Boxever platform\n   * @returns {Boolean} Resolves to true in case if async targeting is not in place\n   */\n  function triggerExperience() {\n    if (isDevMode) {\n      safeLog.ok();\n      window.dispatchEvent(new CustomEvent(_CNAME_ + '-gen'));\n      return true;\n    }\n\n    try {\n      targetingPassed();\n    } catch (err) {\n      safeLog.info('Method targetingPassed is not yet available');\n    }\n\n    return true;\n  }\n\n  /**\n   * Checks flow targeting rules provided including:\n   * - a function to be checked and\n   * - a rule name to be displayed in case if check fails\n   * and resolves to true if flow is valid\n   * @param {Array<Object>} rules Set of rules to be checked\n   * @returns {Boolean} Resolves to true if targeting check passes\n   */\n  function checkFlowTargeting(rules) {\n    var failed = false;\n\n    for (var i = 0; i < rules.length; i++) {\n      var ruleName = rules[i].name;\n      var handler = rules[i].handler;\n\n      if (!handler()) {\n        safeLog.error('Targeting rules were not met: ', ruleName);\n        failed = true;\n        break;\n      }\n    }\n\n    return !failed;\n  }\n\n  /**\n   * Tracks Boxever metric with specified key and attributes\n   *\n   * Example usage:\n   *\n   * trackMetric('cta-click', { value: 1 });\n   *\n   * @param {String} eventName Custom event name\n   * @param {Object} attrs Custom event attributes\n   * @returns {void}\n   */\n  function trackMetric(eventName, attrs) { // eslint-disable-line no-unused-vars\n    var event = Object.assign({}, (attrs || {}), {\n      type: _CNAME_ + '-' + eventName,\n    });\n\n    trackEvent(event, function(data) {\n      safeLog.ok(data, event);\n    });\n  }\n\n  /**\n   * Boxever API wrapper to fire custom event\n   * @param {Object} event Event object containing event key and attributes\n   * @param {Function} cb Callback function that will receive API response as a parameter\n   * @returns {void}\n   */\n  function trackEvent(event, cb) {\n    var baseEvent = {\n      browser_id: window.Boxever.getID(),\n      channel: 'WEB',\n      pos: window.Boxever.pointOfSale,\n    };\n    var customEvent = Object.assign({}, baseEvent, event);\n\n    safeLog.info(customEvent);\n    window._boxeverq = window._boxeverq || [];\n    window._boxeverq.push(function() {\n      window.Boxever.eventCreate(customEvent, cb || function() {}, 'json');\n    });\n  }\n\n  /** Helpers */\n\n  function isFirstRun() {\n    var wasExecuted = retrieve('executed');\n\n    if (!wasExecuted) {\n      store('executed', true);\n    }\n\n    return !wasExecuted;\n  }\n\n  function isIE() {\n    return (/msie|trident/gi).test(window.navigator.userAgent);\n  }\n\n  function isDesktop() {\n    return getDLProp('platformType') === 'Desktop';\n  }\n\n  function isBD4Travel(data) {\n    var TRIP_ROUTES = [\n      {\n        origins: [\n          { pos: 'US', lang: 'EN' },\n          { pos: 'GB', lang: 'EN' },\n          { pos: 'AE', lang: 'EN' },\n        ],\n        destinations: [\n          'SEZ',\n          'MRU',\n          'MLE',\n          'DPS',\n        ],\n      },\n      {\n        origins: [\n          { pos: 'US', lang: 'EN' },\n          { pos: 'GB', lang: 'EN' },\n        ],\n        destinations: [\n          // {\n          //   code: 'DXB',\n          //   durationDaysMin: 3,\n          //   durationDaysMax: 10,\n          // },\n          'DXB',\n        ],\n      }\n    ];\n    var TRIP_TYPES = ['return'];\n\n    var isValid = isTripTypeValid() && isTripRouteValid();\n\n    return isValid;\n\n    function isTripTypeValid() {\n      return createRegExp(TRIP_TYPES).test(getValue('flightTripType'));\n    }\n\n    function isTripRouteValid() {\n      var pos = getValue('originCountryflightRoute');\n      var lang = getValue('languageCode');\n      var dest = getValue('destinationAirportFlightRoute');\n      var tripDuration = getValue('searchTripDurationIBE');\n      var duration = Number(((/\\d+/).exec(tripDuration) || [])[0]) || 0;\n\n      return TRIP_ROUTES.some(function(route) {\n        return isOriginValid(route.origins, { pos: pos, lang: lang })\n          && isDestinationValid(route.destinations, { dest: dest, duration: duration });\n      });\n    }\n\n    function isOriginValid(origins, selected) {\n      return origins.some(function(origin) {\n        return createRegExp(origin.pos).test(selected.pos)\n          && createRegExp(origin.lang).test(selected.lang);\n      });\n    }\n\n    function isDestinationValid(destinations, selected) {\n      return destinations.some(function(destination) {\n        if (typeof destination === 'object') {\n          return createRegExp(destination.code).test(selected.dest)\n            && (!destination.durationDaysMin || selected.duration >= destination.durationDaysMin)\n            && (!destination.durationDaysMax || selected.duration <= destination.durationDaysMax);\n        }\n\n        return createRegExp(destination).test(selected.dest);\n      });\n    }\n\n    /**\n     * Get dataLayer value by key\n     *\n     * On first run - all values are accessible from dataLayer[0],\n     * on async search change - most values available in new dataLayer event\n     * (that is being passed as parameter here),\n     * except for trip duration which is overwritten in dataLayer[0] item\n     *\n     * @param {String} key Data key to\n     * @return {Any} Data value\n     */\n    function getValue(key) {\n      var defaultSource = (window.dataLayer || [])[0] || {};\n      var source = data || defaultSource;\n      return source[key] || defaultSource[key];\n    }\n  }\n  \n  function createRegExp(values) {\n    var regExp = \"^(\" + (Array.isArray(values) ? values.join(\"|\") : values) + \")$\";\n    return new RegExp(regExp, \"gi\");\n  }\n\n  function isPricePage() {\n    return (/select a price/gi).test(getDLProp('pageName'));\n  }\n\n  function isBD4TravelEl(el) {\n    return el && el.matches && el.matches('.bd4-experience-grid, .bd4-experience-grid *');\n  }\n\n  function getDLProp(key, recent) {\n    var matches = (window.dataLayer || []).filter(function(chunk) {\n      return !!chunk[key];\n    });\n    var dataIndex = recent ? (matches.length - 1) : 0;\n\n    return dataIndex !== -1 ? (matches[dataIndex] || {})[key] : null;\n  }\n\n  function store(key, value) {\n    retrieve();\n    window.lc[_CNAME_][key] = value;\n  }\n\n  function retrieve(key) {\n    window.lc = window.lc || {};\n    window.lc[_CNAME_] = window.lc[_CNAME_] || {};\n    return key ? window.lc[_CNAME_][key] : window.lc[_CNAME_];\n  }\n\n  function onSearchChange(cb) {\n    overrideDLPush();\n    window.addEventListener('lc:gtm-event', function(e) {\n      var event = e.detail;\n      if (event.label === 'Modify Search Results') {\n        cb(event);\n      }\n    });\n  }\n\n  function overrideDLPush() {\n    window.lc = window.lc || {};\n    window.lc.overrides = window.lc.overrides || {};\n\n    if (!window.lc.overrides.dataLayerPush) {\n      window.lc.overrides.dataLayerPush = true;\n      window.dataLayer.push = (function(fn) {\n        return function() {\n          var args = [].slice.call(arguments);\n          var eventObject = args[0];\n\n          if (eventObject && !(eventObject.event && eventObject.event.includes('lc:'))) {\n            window.dispatchEvent(new CustomEvent('lc:gtm-event', {\n              detail: eventObject\n            }));\n          }\n\n          return fn.apply(this, args);\n        };\n      })(window.dataLayer.push);\n    }\n  }\n\n  /* LC safe debug */\n  function debug(u){var n={info:\"blue\",ok:\"green\",error:\"red\"};return function(t){return Object.keys(n).reduce(function(r,e){var o=n[e];r[e]=function(){if(!c())return;var r=(new Date).toTimeString().replace(/\\s(.*)/,\"\");var n=\"%c\"+u+\":\"+e+\" [\"+r+\"] \"+(t||\"\");console.info.apply(this,[n,\"color: \"+o].concat(Array.prototype.slice.call(arguments)))};return r},{})};function c(){return document.cookie.indexOf(\"lc-qa=1\")!==-1||window.location.href.indexOf(\"lc-qa=1\")!==-1}} // eslint-disable-line\n})(typeof unsafeWindow === 'undefined' ? window : unsafeWindow, typeof unsafeWindow !== 'undefined');\n// eslint-disable-next-line spaced-comment\n//# sourceURL=c--a33-renderer.js",targetPages:[]},traffic:{type:"advancedTraffic",allocationLow:1,allocationHigh:120,splits:[{ref:"9848ae4d-53a4-469a-961f-da89a55824b7",lowSplit:1,highSplit:60},{ref:"dff54ca0-aab9-49a3-96ad-d82af19ced55",lowSplit:61,highSplit:120}]},variants:[{ref:"9848ae4d-53a4-469a-961f-da89a55824b7",name:"Original",assets:{css:"",html:"",js:"(function(window, isDevMode) {\n  var _CNAME_ = 'lc-a33';\n  var _SNAME_ = 'default';\n  var safeLog = debug(_CNAME_)(_SNAME_);\n\n  safeLog.info();\n\n  try {\n    // variant code goes here\n    addQMIntegration();\n\n    // QA\n    window.addEventListener('bd4ti.bx', function(e) {\n      safeLog.ok('QA event:', e);\n    });\n\n    if (isDevMode) {\n      window.addEventListener(_CNAME_ + '-gen', runVariant);\n    } else {\n      runVariant();\n      window.addEventListener(_CNAME_ + '-gen', runVariant);\n    }\n  } catch (err) {\n    safeLog.error(err);\n  }\n\n  function addQMIntegration() {\n    document.body.classList.add(_CNAME_ + '--' + _SNAME_);\n  }\n\n  function runVariant() {\n    var key = 'bd4ti.bx';\n    var value = 'not-shown' || _SNAME_;\n\n    safeLog.ok();\n\n    store([key, _CNAME_].join('.'), value);\n    setCookie([key, _CNAME_].join('.'), value, 30);\n    window.localStorage.setItem([key, _CNAME_].join('.'), value);\n    window.dispatchEvent(new CustomEvent(key, { detail: {\n      experience: _CNAME_,\n      variation: value,\n    }}));\n  }\n\n  function store(name, value) {\n    var keys = name.split('.');\n\n    keys.reduce(function(acc, key, i) {\n      acc[key] = (i === keys.length - 1) ? value : (acc[key] || {});\n      return acc[key];\n    }, window);\n  }\n\n  function setCookie(name, value, days) {\n    var date = new Date();\n    date.setTime(date.getTime() + 24 * 60 * 60 * 1000 * days);\n    document.cookie = name + '=' + value + ';path=/;expires=' + date.toGMTString();\n  }\n\n  /* LC safe debug */\n  function debug(u){var n={info:\"blue\",ok:\"green\",error:\"red\"};return function(t){return Object.keys(n).reduce(function(r,e){var o=n[e];r[e]=function(){if(!c())return;var r=(new Date).toTimeString().replace(/\\s(.*)/,\"\");var n=\"%c\"+u+\":\"+e+\" [\"+r+\"] \"+(t||\"\");console.info.apply(this,[n,\"color: \"+o].concat(Array.prototype.slice.call(arguments)))};return r},{})};function c(){return document.cookie.indexOf(\"lc-qa=1\")!==-1||window.location.href.indexOf(\"lc-qa=1\")!==-1}} // eslint-disable-line\n})(typeof unsafeWindow === 'undefined' ? window : unsafeWindow, typeof unsafeWindow !== 'undefined');\n// eslint-disable-next-line spaced-comment\n//# sourceURL=c--a33-default.js\n"}},{ref:"dff54ca0-aab9-49a3-96ad-d82af19ced55",name:"Variant 1",assets:{css:"",html:"",js:"(function(window, isDevMode) {\n  var _CNAME_ = 'lc-a33';\n  var _SNAME_ = 'variant-1';\n  var safeLog = debug(_CNAME_)(_SNAME_);\n\n  safeLog.info();\n\n  try {\n    // variant code goes here\n    addQMIntegration();\n\n    // QA\n    window.addEventListener('bd4ti.bx', function(e) {\n      safeLog.ok('QA event:', e);\n    });\n\n    if (isDevMode) {\n      window.addEventListener(_CNAME_ + '-gen', runVariant);\n    } else {\n      runVariant();\n      window.addEventListener(_CNAME_ + '-gen', runVariant);\n    }\n  } catch (err) {\n    safeLog.error(err);\n  }\n\n  function addQMIntegration() {\n    document.body.classList.add(_CNAME_ + '--' + _SNAME_);\n  }\n\n  function runVariant() {\n    var key = 'bd4ti.bx';\n    var value = 'shown' || _SNAME_;\n\n    safeLog.ok();\n\n    store([key, _CNAME_].join('.'), value);\n    setCookie([key, _CNAME_].join('.'), value, 30);\n    window.localStorage.setItem([key, _CNAME_].join('.'), value);\n    window.dispatchEvent(new CustomEvent(key, { detail: {\n      experience: _CNAME_,\n      variation: value,\n    }}));\n  }\n\n  function store(name, value) {\n    var keys = name.split('.');\n\n    keys.reduce(function(acc, key, i) {\n      acc[key] = (i === keys.length - 1) ? value : (acc[key] || {});\n      return acc[key];\n    }, window);\n  }\n\n  function setCookie(name, value, days) {\n    var date = new Date();\n    date.setTime(date.getTime() + 24 * 60 * 60 * 1000 * days);\n    document.cookie = name + '=' + value + ';path=/;expires=' + date.toGMTString();\n  }\n\n  /* LC safe debug */\n  function debug(u){var n={info:\"blue\",ok:\"green\",error:\"red\"};return function(t){return Object.keys(n).reduce(function(r,e){var o=n[e];r[e]=function(){if(!c())return;var r=(new Date).toTimeString().replace(/\\s(.*)/,\"\");var n=\"%c\"+u+\":\"+e+\" [\"+r+\"] \"+(t||\"\");console.info.apply(this,[n,\"color: \"+o].concat(Array.prototype.slice.call(arguments)))};return r},{})};function c(){return document.cookie.indexOf(\"lc-qa=1\")!==-1||window.location.href.indexOf(\"lc-qa=1\")!==-1}} // eslint-disable-line\n})(typeof unsafeWindow === 'undefined' ? window : unsafeWindow, typeof unsafeWindow !== 'undefined');\n// eslint-disable-next-line spaced-comment\n//# sourceURL=c--a33-variant.js\n"}}]},{ref:"18161c16-01ed-464a-8fa0-180e1f6d0b42",name:"EM-185 c--d31-payment-options (IBE)",revision:26,archived:!1,target:{script:"(function(window, isDevMode) {\n  var _CNAME_ = 'lc-d31';\n  var _SNAME_ = 'renderer';\n  var safeLog = debug(_CNAME_)(_SNAME_);\n\n  safeLog.info();\n\n  /**\n   * ! IMPORTANT !\n   * Before code review please check if all business requirements are met.\n   * Please refer to README.md#business-requirements to see checklist for a standard campaign for Emirates.\n   *\n   * Platform Notes:\n   * - In order to trigger experience - call `targetingPassed()` method.\n   * - In order to provide better debugging - please log every failed targeting rule with a separate log message.\n   *\n   * Dev Notes:\n   * - amend flow rules according to ATs\n   * - amend page targeting according to ATs\n   * - add metrics according to ATs\n   * - amend when `triggerExperience` is called according to ATs\n   */\n\n  try {\n    // targeting logic goes here\n    var FLOW_RULES = [\n      {\n        name: 'Run once (script was already executed on the page)',\n        handler: isFirstRun,\n      },\n      {\n        name: 'Browser (not IE)',\n        handler: function() { return !isIE(); },\n      },\n      {\n        name: 'Device (Desktop)',\n        handler: isDesktop,\n      },\n      {\n        name: 'Language (Eng)',\n        handler: isEngLang,\n      },\n      {\n        name: 'POS (not US)',\n        handler: function() { return !isUS(); },\n      },\n      // {\n      //   name: 'Login state (not logged in)',\n      //   handler: function() { return isLoggedOut(); },\n      // },\n      // {\n      //   name: 'Not a BD4travel Page',\n      //   handler: function() { return !isBD4Travel(); }, // NOTE: does not have required info to be checked on URP page\n      // }\n    ];\n\n    var isPageValid = isUrpPaymentPage();\n\n    if (!isPageValid) {\n      safeLog.error('Page targeting was not met');\n      return false;\n    }\n\n    return waitFor(function() {\n      return (window.dataLayer && window.dataLayer.length) // page data\n        && getDLItem('event', 'URPParameters') // flight data\n        && (!isDevMode || window.Boxever); // dev mode only check\n    })\n      .then(runGeneration)\n      .catch(function() {\n        safeLog.error('dataLayer is not ready in time');\n      });\n\n    function runGeneration() { // eslint-disable-line no-inner-declarations\n      var isFlowValid = checkFlowTargeting(FLOW_RULES);\n\n      if (!isFlowValid) {\n        return false;\n      }\n\n      // run experience only on campaign pages\n      return waitFor(getPaymentsEl)\n        .then(function(paymentsEl) {\n          var isShown = true;\n          generate();\n          onPaymentOptionChange(function(paymentOption) {\n            if (paymentOption === 'HMF') {\n              isShown = false;\n              return window.dispatchEvent(new CustomEvent(_CNAME_ + '-clear'));\n            }\n\n            if (isShown) return null;\n\n            isShown = true;\n            paymentsEl.classList.add(_CNAME_ + '--masked');\n            return setTimeout(function() {\n              window.dispatchEvent(new CustomEvent(_CNAME_ + '-gen'));\n              paymentsEl.classList.remove(_CNAME_ + '--masked');\n            }, 0);\n          });\n        })\n        .catch(function() {\n          safeLog.error('Payments element was not found');\n        });\n    }\n\n    function generate() { // eslint-disable-line no-inner-declarations\n      if (isDevMode) {\n        window.dispatchEvent(new CustomEvent(_CNAME_ + '-gen'));\n      } else {\n        triggerExperience();\n      }\n    }\n  } catch (err) {\n    safeLog.error(err);\n  }\n\n  return false;\n\n  function getPaymentsEl() {\n    return document.querySelector('.urp-payment-details__details-wrapper');\n  }\n\n  function onPaymentOptionChange(cb) {\n    var paymentOptionsEl = document.querySelector('.urp-payment-options');\n    var prevSelectedOption = getSelectedOptionName();\n\n    if (!paymentOptionsEl) {\n      safeLog.error('Payment options block was not found');\n      return;\n    }\n\n    observe(paymentOptionsEl, function() {\n      var nextSelectedOption = getSelectedOptionName();\n      if (nextSelectedOption === prevSelectedOption) return;\n      prevSelectedOption = nextSelectedOption;\n      cb(nextSelectedOption);\n    });\n\n    function getSelectedOptionName() {\n      var selectedPaymentOptionEl = paymentOptionsEl && paymentOptionsEl.querySelector('.option-block[aria-selected=\"true\"]');\n      return getName(selectedPaymentOptionEl);\n    }\n\n    function getName(optionEl) {\n      return optionEl && optionEl.getAttribute('name');\n    }\n  }\n\n  /** Actions */\n\n  /**\n   * Triggers the experience with a fallback for local development\n   * or in case if there is no async targeting in Boxever platform\n   * @returns {Boolean} Resolves to true in case if async targeting is not in place\n   */\n  function triggerExperience() {\n    try {\n      targetingPassed();\n    } catch (err) {\n      safeLog.info('Method targetingPassed is not yet available');\n    }\n\n    return true;\n  }\n\n  /**\n   * Checks flow targeting rules provided including:\n   * - a function to be checked and\n   * - a rule name to be displayed in case if check fails\n   * and resolves to true if flow is valid\n   * @param {Array<Object>} rules Set of rules to be checked\n   * @returns {Boolean} Resolves to true if targeting check passes\n   */\n  function checkFlowTargeting(rules) {\n    var failed = false;\n\n    for (var i = 0; i < rules.length; i++) {\n      var ruleName = rules[i].name;\n      var handler = rules[i].handler;\n\n      if (!handler()) {\n        safeLog.error('Targeting rules were not met: ', ruleName);\n        failed = true;\n        break;\n      }\n    }\n\n    return !failed;\n  }\n\n  /**\n   * Tracks Boxever metric with specified key and attributes\n   *\n   * Example usage:\n   *\n   * trackMetric('cta-click', { value: 1 });\n   *\n   * @param {String} eventName Custom event name\n   * @param {Object} attrs Custom event attributes\n   * @returns {void}\n   */\n  function trackMetric(eventName, attrs) { // eslint-disable-line no-unused-vars\n    var event = Object.assign({}, (attrs || {}), {\n      type: _CNAME_ + '-' + eventName,\n    });\n\n    trackEvent(event, function(data) {\n      safeLog.ok(data, event);\n    });\n  }\n\n  /**\n   * Boxever API wrapper to fire custom event\n   * @param {Object} event Event object containing event key and attributes\n   * @param {Function} cb Callback function that will receive API response as a parameter\n   * @returns {void}\n   */\n  function trackEvent(event, cb) {\n    var baseEvent = {\n      browser_id: window.Boxever.getID(),\n      channel: 'WEB',\n      pos: window.Boxever.pointOfSale,\n    };\n    var customEvent = Object.assign({}, baseEvent, event);\n\n    safeLog.info(customEvent);\n    window._boxeverq = window._boxeverq || [];\n    window._boxeverq.push(function() {\n      window.Boxever.eventCreate(customEvent, cb || function() {}, 'json');\n    });\n  }\n\n  /** Helpers */\n\n  function isFirstRun() {\n    var wasExecuted = retrieve('executed');\n\n    if (!wasExecuted) {\n      store('executed', true);\n    }\n\n    return !wasExecuted;\n  }\n\n  function isIE() {\n    return (/msie|trident/gi).test(window.navigator.userAgent);\n  }\n\n  function isDesktop() {\n    return getDLProp('platformType') === 'Desktop';\n  }\n\n  function isEngLang() {\n    return (/^en($|-.*)/i).test(getDLProp('languageCode'));\n  }\n\n  function isUS() {\n    return getDLProp('originCountry') === 'US'\n      || getDLProp('originCountryflightRoute') === 'US';\n  }\n\n  // function isLoggedOut() {\n  //   var loginState = getDLProp('visitorLoginState');\n  //   return !!loginState && (/logged out/gi).test(loginState);\n  // }\n\n  function isUrpPaymentPage() {\n    // pageCategory: \"URP\"\n    // pageName: \"/ Payment\"\n    // 'https://payment.uat.emirates.dev/payment/'; // staging\n    // 'https://payment.emirates.com/payment'; // prod\n    return (/payment(.*)\\.emirates\\.(.*)\\/payment/gi).test(window.location.href);\n  }\n\n  function isBD4Travel(data) { // eslint-disable-line no-unused-vars\n    var TRIP_ROUTES = [\n      {\n        origins: [\n          { pos: 'US', lang: 'EN' },\n          { pos: 'GB', lang: 'EN' },\n          { pos: 'AE', lang: 'EN' },\n        ],\n        destinations: [\n          'SEZ',\n          'MRU',\n          'MLE',\n          'DPS',\n        ],\n      },\n      {\n        origins: [\n          { pos: 'US', lang: 'EN' },\n          { pos: 'GB', lang: 'EN' },\n        ],\n        destinations: [\n          // {\n          //   code: 'DXB',\n          //   durationDaysMin: 3,\n          //   durationDaysMax: 10,\n          // },\n          'DXB',\n        ],\n      }\n    ];\n    var TRIP_TYPES = ['return'];\n\n    var isValid = isTripTypeValid() && isTripRouteValid();\n\n    return isValid;\n\n    function isTripTypeValid() {\n      return createRegExp(TRIP_TYPES).test(getValue('flightTripType')); // TODO: does not work\n    }\n\n    function isTripRouteValid() {\n      var pos = getValue('originCountryflightRoute');\n      var lang = getValue('languageCode');\n      var dest = getValue('destinationAirportFlightRoute');\n      var tripDuration = getValue('searchTripDurationIBE'); // TODO: does not work\n      var duration = Number(((/\\d+/).exec(tripDuration) || [])[0]) || 0;\n\n      return TRIP_ROUTES.some(function(route) {\n        return isOriginValid(route.origins, { pos: pos, lang: lang })\n          && isDestinationValid(route.destinations, { dest: dest, duration: duration });\n      });\n    }\n\n    function isOriginValid(origins, selected) {\n      return origins.some(function(origin) {\n        return createRegExp(origin.pos).test(selected.pos)\n          && createRegExp(origin.lang).test(selected.lang);\n      });\n    }\n\n    function isDestinationValid(destinations, selected) {\n      return destinations.some(function(destination) {\n        if (typeof destination === 'object') {\n          return createRegExp(destination.code).test(selected.dest)\n            && (!destination.durationDaysMin || selected.duration >= destination.durationDaysMin)\n            && (!destination.durationDaysMax || selected.duration <= destination.durationDaysMax);\n        }\n\n        return createRegExp(destination).test(selected.dest);\n      });\n    }\n\n    /**\n     * Get dataLayer value by key\n     *\n     * On first run - all values are accessible from dataLayer[0],\n     * on async search change - most values available in new dataLayer event\n     * (that is being passed as parameter here),\n     * except for trip duration which is overwritten in dataLayer[0] item\n     *\n     * @param {String} key Data key to\n     * @return {Any} Data value\n     */\n    function getValue(key) {\n      return data && data[key] || getDLProp(key);\n    }\n  }\n\n  function getDLProp(key, recent) {\n    var matches = (window.dataLayer || []).filter(function(chunk) {\n      return !!chunk[key];\n    });\n    var dataIndex = recent ? (matches.length - 1) : 0;\n\n    return dataIndex !== -1 ? (matches[dataIndex] || {})[key] : null;\n  }\n\n  function getDLItem(key, value, recent, strict) {\n    var matches = (window.dataLayer || []).filter(function(chunk) {\n      return !!chunk[key] && (\n        strict\n          ? chunk[key] === value\n          : chunk[key].indexOf(value) !== -1\n      );\n    });\n    var dataIndex = recent ? (matches.length - 1) : 0;\n\n    return dataIndex !== -1 ? matches[dataIndex] : null;\n  }\n\n  function store(key, value) {\n    retrieve();\n    window.lc[_CNAME_][key] = value;\n  }\n\n  function retrieve(key) {\n    window.lc = window.lc || {};\n    window.lc[_CNAME_] = window.lc[_CNAME_] || {};\n    return key ? window.lc[_CNAME_][key] : window.lc[_CNAME_];\n  }\n\n  function createRegExp(values) {\n    // Boxever pre-publish validation fix\n    /* eslint-disable quotes */\n    var regExp = \"^(\" + (Array.isArray(values) ? values.join(\"|\") : values) + \")$\";\n    return (new RegExp(regExp, \"gi\"));\n    /* eslint-enable quotes */\n  }\n\n  function observe(targetNode, callback, attrs) {\n    if (!targetNode || !callback) return null;\n    var config = attrs || { attributes: true, childList: true, subtree: true };\n    var observer = new MutationObserver(callback);\n    observer.observe(targetNode, config);\n    return observer;\n  }\n\n  function waitFor(condition, timeout) {\n    var stopTime = typeof timeout === 'number' ? timeout : 7000;\n    var stop = false;\n\n    window.setTimeout(function() {\n      stop = true;\n    }, stopTime);\n\n    return new Promise(function(resolve, reject) {\n      (function _innerWaitFor() {\n        var value = condition();\n\n        if (stop) {\n          reject();\n        } else if (value) {\n          resolve(value);\n        } else {\n          window.setTimeout(_innerWaitFor, 50);\n        }\n      })();\n    });\n  }\n\n  /* LC safe debug */\n  function debug(u){var n={info:\"blue\",ok:\"green\",error:\"red\"};return function(t){return Object.keys(n).reduce(function(r,e){var o=n[e];r[e]=function(){if(!c())return;var r=(new Date).toTimeString().replace(/\\s(.*)/,\"\");var n=\"%c\"+u+\":\"+e+\" [\"+r+\"] \"+(t||\"\");console.info.apply(this,[n,\"color: \"+o].concat(Array.prototype.slice.call(arguments)))};return r},{})};function c(){return document.cookie.indexOf(\"lc-qa=1\")!==-1||window.location.href.indexOf(\"lc-qa=1\")!==-1}} // eslint-disable-line\n})(typeof unsafeWindow === 'undefined' ? window : unsafeWindow, typeof unsafeWindow !== 'undefined');\n// eslint-disable-next-line spaced-comment\n//# sourceURL=c--d31-renderer.js",targetPages:[{operator:"Contains",value:"https://payment.emirates.com/payment"}]},traffic:{type:"advancedTraffic",allocationLow:1,allocationHigh:120,splits:[{ref:"e9908bff-6368-4b38-9f61-92d60619f120",lowSplit:1,highSplit:40},{ref:"c5b16b8c-3acd-4dab-a4a2-0a024bfe8105",lowSplit:41,highSplit:79},{ref:"0c891b19-bb9c-4e99-a598-2a727e28c9c9",lowSplit:80,highSplit:120}]},variants:[{ref:"e9908bff-6368-4b38-9f61-92d60619f120",name:"Original",assets:{css:"/** style your Experience with CSS */",html:"",js:'(function(window) {\n  var _CNAME_ = \'lc-d31\';\n  var _SNAME_ = \'default\';\n  var safeLog = debug(_CNAME_)(_SNAME_);\n\n  safeLog.info();\n\n  try {\n    // default code goes here\n    addQMIntegration();\n  } catch (err) {\n    safeLog.error(err);\n  }\n\n  function addQMIntegration() {\n    document.body.classList.add(_CNAME_ + \'--\' + _SNAME_);\n  }\n\n  /* LC safe debug */\n  function debug(u){var n={info:"blue",ok:"green",error:"red"};return function(t){return Object.keys(n).reduce(function(r,e){var o=n[e];r[e]=function(){if(!c())return;var r=(new Date).toTimeString().replace(/\\s(.*)/,"");var n="%c"+u+":"+e+" ["+r+"] "+(t||"");console.info.apply(this,[n,"color: "+o].concat(Array.prototype.slice.call(arguments)))};return r},{})};function c(){return document.cookie.indexOf("lc-qa=1")!==-1||window.location.href.indexOf("lc-qa=1")!==-1}} // eslint-disable-line\n})(window);\n// eslint-disable-next-line spaced-comment\n//# sourceURL=c--d31-default.js\n'}},{ref:"c5b16b8c-3acd-4dab-a4a2-0a024bfe8105",name:"Variant 1",assets:{css:".lc-d31-other-options-tab .accordion-item-body {\n  padding: 20px;\n  border-top: 1px solid #d8d8d8;\n}\n\n.lc-d31-other-options-tab .other-options-tab__accordion-item-title {\n  outline: none;\n}\n\n.lc-d31-other-options-tab .accordion img.card-number-input__icon {\n  max-width: initial;\n}\n\n.lc-d31-urp-options .other-options-tab__accordion-item-title .radio-button__radio {\n  background: url(https://fly10.ek.aero/Images/manage_account/fare_families/add_city_row_btn.png) 20px center no-repeat;\n}\n\n.lc-d31-urp-options .other-options-tab__accordion-item-title.expanded .radio-button__radio {\n  background: url(https://fly10.ek.aero/Images/manage_account/payment_section/red_minus_btn.png) 20px center no-repeat;\n}\n\n.lc-d31-urp-options .radio-button__radio .radio-icon {\n  visibility: hidden;\n}\n\n.lc-d31-other-options-tab .radio-button__radio.nofocus {\n  -webkit-box-shadow: none;\n  box-shadow: none;\n}\n\n/* Utils */\n\n.lc-d31--relative {\n  position: relative;\n}\n\n.lc-d31--hidden {\n  display: none;\n}\n\n.lc-d31--invisible {\n  position: absolute;\n  left: -1000px;\n}\n\n.lc-d31--masked {\n  opacity: 0;\n}\n",html:"",js:"(function(window, isDevMode) {\n  var _CNAME_ = 'lc-d31';\n  var _SNAME_ = 'variant-1';\n  var CONFIG = {\n    'variant-1': { collapsibleOptions: false },\n    'variant-2': { collapsibleOptions: true },\n  };\n  var safeLog = debug(_CNAME_)(_SNAME_);\n  var clearVariantHandlers = [];\n  var variantConfig = CONFIG[_SNAME_];\n\n  safeLog.info();\n\n  try {\n    addQMIntegration();\n\n    if (!isDevMode) {\n      runVariant();\n    }\n\n    window.addEventListener(_CNAME_ + '-gen', runVariant);\n    window.addEventListener(_CNAME_ + '-clear', clearVariant);\n  } catch (err) {\n    safeLog.error(err);\n  }\n\n  function clearVariant() {\n    clearVariantHandlers.forEach(function(fn) { fn(); });\n    clearVariantHandlers = [];\n  }\n\n  function runVariant() {\n    safeLog.ok();\n\n    var paymentsEl = getPaymentsEl();\n    var paymentOptionsSwitchEl = paymentsEl.querySelector('.heading-tabs');\n    var primarySwitchEl = paymentsEl.querySelector('.heading-tabs__item:first-of-type button button');\n    var otherSwitchEl = paymentsEl.querySelector('.heading-tabs__item:last-of-type button button');\n    var paymentOptionsEl = paymentsEl.querySelector('.urp-payment-details__details-wrapper-content-details');\n    var paymentSummaryEl = paymentsEl.querySelector('.urp-payment-details__details-wrapper-breakdown .payment-summary__wrapper');\n    var paymentCTAEl = document.querySelector('.confirmation__cta');\n    var handlePrimaryOptionClick = function(optionEl) {\n      var canBeCollapsed = variantConfig.collapsibleOptions\n        && optionEl.classList.contains('expanded');\n\n      return canBeCollapsed\n        ? unselect(optionEl)\n        : primarySwitchEl.click();\n    };\n    var handleOtherOptionClick = function(i) {\n      otherSwitchEl.click();\n      if (i === 0) return;\n      clickDefaultOption(paymentOptionsEl, i);\n    };\n    var hideDefaultTitle = function() {\n      var titleElems = paymentOptionsEl.querySelectorAll('.other-options-tab__title');\n      var lastTitle = titleElems.length > 1 ? titleElems[titleElems.length - 1] : null;\n\n      if (lastTitle) {\n        hide(lastTitle);\n      }\n\n      clearVariantHandlers.push(function() {\n        show(lastTitle);\n      });\n    };\n    var alignSummaryWithLcTitle = function() {\n      paymentSummaryEl.classList.add('other-payment-options');\n      clearVariantHandlers.push(function() {\n        paymentSummaryEl.classList.remove('other-payment-options');\n      });\n    };\n\n    otherSwitchEl.click();\n\n    var lcOptions = createLcOptions(\n      paymentOptionsEl.querySelector('.other-options-tab').cloneNode(true),\n      handlePrimaryOptionClick,\n      handleOtherOptionClick\n    );\n    var allLcOptionsElems = lcOptions.allOptionsElems;\n    var primaryLcOptionEl = lcOptions.primaryOptionEl;\n    var otherLcOptionsElems = lcOptions.otherOptionsElems;\n    var lcContainerEl = lcOptions.containerEl;\n    var primaryLcOptionBodyEl = primaryLcOptionEl.querySelector('.accordion-item-body');\n    var wrapCCOption = function() {\n      var ccOptionEl = paymentOptionsEl.querySelector('.credit-card-tab');\n      primaryLcOptionBodyEl.appendChild(ccOptionEl);\n    };\n    var restoreCCOption = function() {\n      var ccOptionEl = paymentOptionsEl.querySelector('.credit-card-tab');\n      ccOptionEl && lcContainerEl.insertAdjacentElement('afterEnd', ccOptionEl); // put it back for React's sake\n    };\n\n    primarySwitchEl.addEventListener('click', function() {\n      allLcOptionsElems.forEach(unselect);\n      otherLcOptionsElems.forEach(show);\n      select(primaryLcOptionEl);\n      nextTick(function() {\n        wrapCCOption();\n        alignSummaryWithLcTitle();\n        disableSwitcherA11y(primarySwitchEl);\n      });\n    });\n    otherSwitchEl.addEventListener('click', function() {\n      allLcOptionsElems.forEach(unselect);\n      otherLcOptionsElems.forEach(hide);\n      restoreCCOption();\n      nextTick(function() {\n        hideDefaultTitle();\n        disableSwitcherA11y(otherSwitchEl);\n      });\n    });\n\n    primarySwitchEl.click();\n\n    if (!paymentCTAEl) {\n      safeLog.error('Page CTA was not found');\n      restoreCCOption();\n      return;\n    }\n\n    paymentOptionsSwitchEl.classList.add(_CNAME_ + '--invisible');\n    paymentOptionsSwitchEl.querySelectorAll('button').forEach(disableA11y);\n    paymentOptionsEl.insertAdjacentElement('afterBegin', lcContainerEl);\n\n    if (variantConfig.collapsibleOptions) {\n      paymentOptionsEl.classList.add(_CNAME_ + '-urp-options');\n      unselect(primaryLcOptionEl);\n      window.addEventListener('click', handleDefaultOptionToggling, true);\n    }\n\n    clearVariantHandlers.push(function() {\n      restoreCCOption();\n      paymentOptionsSwitchEl.classList.remove(_CNAME_ + '--invisible');\n      lcContainerEl.remove();\n\n      if (variantConfig.collapsibleOptions) {\n        paymentOptionsEl.classList.remove(_CNAME_ + '-urp-options');\n        window.removeEventListener('click', handleDefaultOptionToggling, true);\n      }\n    });\n  }\n\n  function handleDefaultOptionToggling(e) {\n    if (isDefaultOptionLabel(e.target)) {\n      toggleDefaultOption(\n        e.target,\n        select,\n        unselect\n      );\n    }\n\n    if (isLcModifiedDefaultOption(e.target)) {\n      var labelEl = e.target.closest('.radio-button__radio');\n\n      if (!labelEl) {\n        safeLog.error('Label element was not found on the toggled option');\n      } else {\n        labelEl.classList.add('nofocus');\n      }\n    }\n  }\n\n  function toggleDefaultOption(el, expand, collapse) {\n    var optionEl = el.closest('.accordion-item-cntnr');\n    var isVariantExpanded = optionEl.classList.contains(_CNAME_ + '-expanded');\n    var isVariantCollapsed = optionEl.classList.contains(_CNAME_ + '-collapsed');\n    var isDefaultExpanded = optionEl.classList.contains('expanded');\n\n    nextTick(function() {\n      if (isVariantExpanded || isVariantCollapsed) {\n        if (isVariantExpanded) {\n          optionEl.classList.remove(_CNAME_ + '-expanded');\n          optionEl.classList.add(_CNAME_ + '-collapsed');\n          collapse(optionEl);\n          return;\n        }\n\n        optionEl.classList.add(_CNAME_ + '-expanded');\n        optionEl.classList.remove(_CNAME_ + '-collapsed');\n        expand(optionEl);\n        return;\n      }\n\n      if (isDefaultExpanded) {\n        optionEl.classList.add(_CNAME_ + '-collapsed');\n        collapse(optionEl);\n        return;\n      }\n    });\n  }\n\n  function isDefaultOptionLabel(el) {\n    return el && el.matches([\n      '.' + _CNAME_ + '-urp-options .other-options-tab .accordion-item-cntnr .radio-button__radio',\n      '.' + _CNAME_ + '-urp-options .other-options-tab .accordion-item-cntnr .radio-button__radio *',\n    ].join(', '));\n  }\n\n  function isLcModifiedDefaultOption(el) {\n    return el.matches([\n      '.' + _CNAME_ + '-collapsed',\n      '.' + _CNAME_ + '-collapsed *',\n      '.' + _CNAME_ + '-expanded',\n      '.' + _CNAME_ + '-expanded *',\n    ].join(', '));\n  }\n\n  function disableSwitcherA11y(switcherTabEl) {\n    [switcherTabEl].concat(switcherTabEl.parentNode).forEach(disableA11y);\n  }\n\n  function disableA11y(el) {\n    var tabIndex = el.getAttribute('tabIndex');\n    el.setAttribute('tabIndex', -1);\n    clearVariantHandlers.push(function() {\n      enableA11y(el, tabIndex);\n    });\n  }\n\n  function enableA11y(el, tabIndex) {\n    if (!tabIndex) {\n      return el.removeAttribute('tabIndex');\n    }\n    return el.setAttribute('tabIndex', tabIndex);\n  }\n\n  function createLcOptions(protoEl, switchToPrimary, switchToOther) {\n    var accordionEl = protoEl.querySelector('.accordion');\n    var optionsElems = Array.from(accordionEl.children);\n    var hasDomesticCardOption = optionsElems.some(isDomesticCardOption);\n    var primaryOptionTitle = hasDomesticCardOption ? 'International credit or debit cards' : 'Credit/Debit Card';\n\n    var otherOptionsElems = optionsElems.map(function(el, i) {\n      return createLcOtherOptionEl(el, function() { switchToOther(i); });\n    });\n    var primaryOptionEl = createLcPrimaryOptionEl(\n      otherOptionsElems[0].cloneNode(true),\n      primaryOptionTitle,\n      function(optionEl) { switchToPrimary(optionEl); }\n    );\n    var allOptionsElems = [primaryOptionEl].concat(otherOptionsElems);\n\n    handleFocusedState(allOptionsElems);\n    protoEl.className = protoEl.className.replace('other', _CNAME_ + '-other');\n    accordionEl.innerHTML = '';\n    allOptionsElems.forEach(function(el) {\n      accordionEl.appendChild(el);\n    });\n\n    return {\n      allOptionsElems: allOptionsElems,\n      primaryOptionEl: primaryOptionEl,\n      otherOptionsElems: otherOptionsElems,\n      containerEl: protoEl,\n    };\n  }\n\n  function handleFocusedState(optionsElems) {\n    var labelsElems = optionsElems.map(function(el) {\n      return el.children[0].querySelector('.radio-button__radio');\n    });\n\n    window.addEventListener('click', handleClick, true);\n    window.addEventListener('keydown', handleKeydown, true);\n    clearVariantHandlers.push(function() {\n      window.removeEventListener('click', handleClick, true);\n      window.removeEventListener('keydown', handleKeydown, true);\n    });\n\n    function handleClick() {\n      labelsElems.forEach(function(itemEl) {\n        itemEl.classList.add('nofocus');\n      });\n    }\n\n    function handleKeydown() {\n      var lcNofocusElems = document.querySelectorAll([\n        '.' + _CNAME_ + '-collapsed .nofocus',\n        '.' + _CNAME_ + '-expanded .nofocus',\n      ].join(', '));\n\n      lcNofocusElems.forEach(function(itemEl) {\n        itemEl.classList.remove('nofocus');\n      });\n      labelsElems.forEach(function(itemEl) {\n        itemEl.classList.remove('nofocus');\n      });\n    }\n  }\n\n  function isDomesticCardOption(el) {\n    var titleEl = el.children[0].querySelector('.radio-block__radio-content p');\n    return (/domestic/gi).test(titleEl.textContent);\n  }\n\n  function clickDefaultOption(optionsContainerEl, i) {\n    var newAccordionEl = optionsContainerEl.querySelector('.other-options-tab .accordion');\n    var newLabelEl = newAccordionEl.children[i].children[0].querySelector('.radio-button__radio');\n    newLabelEl.click();\n  }\n\n  function createLcOtherOptionEl(protoEl, handleClick) {\n    var bodyEl = protoEl.querySelector('.accordion-item-body');\n    var labelEl = protoEl.children[0].querySelector('.radio-button__radio');\n    var inputEl = protoEl.children[0].querySelector('.radio-button__input.hidden-control');\n\n    bodyEl.innerHTML = '';\n    bodyEl.style.overflow = 'initial';\n    unselect(protoEl);\n    labelEl.addEventListener('click', handleClick);\n    labelEl.addEventListener('keydown', function(e) {\n      if (e.keyCode !== 32) return;\n      handleClick(e);\n    });\n    inputEl.remove();\n    enableA11y(labelEl, '0');\n\n    return protoEl;\n  }\n\n  function createLcPrimaryOptionEl(protoEl, title, handleClick) {\n    var ICON_LINK = 'https://fly10.ek.aero/english/images/06_Debit_Credit_Card_tcm233-2064524.png';\n    var imgEl = protoEl.children[0].querySelector('.radio-block__radio-content img');\n    var titleEl = protoEl.children[0].querySelector('.radio-block__radio-content p');\n    var labelEl = protoEl.children[0].querySelector('.radio-button__radio');\n\n    protoEl.querySelectorAll('[data-name*=\"PTYPES_\"], [name*=\"PTYPES_\"]').forEach(function(dataEl) {\n      // fixes dummy option focusable\n      if (dataEl.dataset.name) {\n        dataEl.dataset.name = dataEl.dataset.name.replace(/PTYPES_(.*)/gi, 'PTYPES_CC');\n      }\n      // fixes real clicked option focusable\n      if (dataEl.getAttribute('name')) {\n        dataEl.setAttribute('name', dataEl.getAttribute('name').replace(/PTYPES_(.*)/gi, 'PTYPES_CC'));\n      }\n    });\n\n    titleEl.textContent = title;\n\n    if (imgEl) {\n      imgEl.src = ICON_LINK;\n    } else {\n      titleEl.insertAdjacentHTML('afterEnd', '<img class=\"other-options-tab__accordion-item-title-icon\" aria-hidden=\"false\" src=\"' + ICON_LINK + '\">');\n    }\n\n    labelEl.addEventListener('click', function() {\n      handleClick(protoEl);\n    });\n    labelEl.addEventListener('keydown', function(e) {\n      if (e.keyCode !== 32) return;\n      handleClick(protoEl);\n    });\n\n    return protoEl;\n  }\n\n  function select(cloneSectionEl) {\n    var cloneContentEl = cloneSectionEl.children[1];\n    var cloneBodyEl = cloneContentEl.querySelector('.accordion-item-body');\n    var cloneLabelEl = cloneSectionEl.querySelector('.radio-button__radio');\n    var cloneRadioEl = cloneLabelEl.querySelector('.radio-icon');\n    var titleEl = cloneSectionEl.querySelector('.other-options-tab__accordion-item-title');\n\n    cloneSectionEl.classList.add('expanded');\n    titleEl.classList.add('expanded');\n    cloneContentEl.classList.remove('hide');\n    cloneBodyEl.classList.add('open-item');\n    cloneBodyEl.style.maxHeight = '';\n    cloneRadioEl.classList.add('radio-icon--checked');\n  }\n\n  function unselect(cloneSectionEl) {\n    var cloneContentEl = cloneSectionEl.children[1];\n    var cloneBodyEl = cloneContentEl.querySelector('.accordion-item-body');\n    var cloneLabelEl = cloneSectionEl.querySelector('.radio-button__radio');\n    var cloneRadioEl = cloneLabelEl.querySelector('.radio-icon');\n    var titleEl = cloneSectionEl.querySelector('.other-options-tab__accordion-item-title');\n\n    cloneSectionEl.classList.remove('expanded');\n    titleEl.classList.remove('expanded');\n    cloneContentEl.classList.add('hide');\n    cloneBodyEl.classList.remove('open-item');\n    cloneBodyEl.style.maxHeight = '0px';\n    cloneRadioEl.classList.remove('radio-icon--checked');\n  }\n\n  function getPaymentsEl() {\n    return document.querySelector('.urp-payment-details__details-wrapper');\n  }\n\n  function hide(el) {\n    el && el.classList && el.classList.add(_CNAME_ + '--hidden');\n  }\n\n  function show(el) {\n    el && el.classList && el.classList.remove(_CNAME_ + '--hidden');\n  }\n\n  function nextTick(cb) {\n    return setTimeout(cb, 0);\n  }\n\n  function addQMIntegration() {\n    document.body.classList.add(_CNAME_ + '--' + _SNAME_);\n  }\n\n  /* LC safe debug */\n  function debug(u){var n={info:\"blue\",ok:\"green\",error:\"red\"};return function(t){return Object.keys(n).reduce(function(r,e){var o=n[e];r[e]=function(){if(!c())return;var r=(new Date).toTimeString().replace(/\\s(.*)/,\"\");var n=\"%c\"+u+\":\"+e+\" [\"+r+\"] \"+(t||\"\");console.info.apply(this,[n,\"color: \"+o].concat(Array.prototype.slice.call(arguments)))};return r},{})};function c(){return document.cookie.indexOf(\"lc-qa=1\")!==-1||window.location.href.indexOf(\"lc-qa=1\")!==-1}} // eslint-disable-line\n})(typeof unsafeWindow === 'undefined' ? window : unsafeWindow, typeof unsafeWindow !== 'undefined');\n// eslint-disable-next-line spaced-comment\n//# sourceURL=c--d31-variant.js\n"}},{ref:"0c891b19-bb9c-4e99-a598-2a727e28c9c9",name:"Variant 2",assets:{css:".lc-d31-other-options-tab .accordion-item-body {\n  padding: 20px;\n  border-top: 1px solid #d8d8d8;\n}\n\n.lc-d31-other-options-tab .other-options-tab__accordion-item-title {\n  outline: none;\n}\n\n.lc-d31-other-options-tab .accordion img.card-number-input__icon {\n  max-width: initial;\n}\n\n.lc-d31-urp-options .other-options-tab__accordion-item-title .radio-button__radio {\n  background: url(https://fly10.ek.aero/Images/manage_account/fare_families/add_city_row_btn.png) 20px center no-repeat;\n}\n\n.lc-d31-urp-options .other-options-tab__accordion-item-title.expanded .radio-button__radio {\n  background: url(https://fly10.ek.aero/Images/manage_account/payment_section/red_minus_btn.png) 20px center no-repeat;\n}\n\n.lc-d31-urp-options .radio-button__radio .radio-icon {\n  visibility: hidden;\n}\n\n.lc-d31-other-options-tab .radio-button__radio.nofocus {\n  -webkit-box-shadow: none;\n  box-shadow: none;\n}\n\n/* Utils */\n\n.lc-d31--relative {\n  position: relative;\n}\n\n.lc-d31--hidden {\n  display: none;\n}\n\n.lc-d31--invisible {\n  position: absolute;\n  left: -1000px;\n}\n\n.lc-d31--masked {\n  opacity: 0;\n}\n",html:"",js:"(function(window, isDevMode) {\n  var _CNAME_ = 'lc-d31';\n  var _SNAME_ = 'variant-2';\n  var CONFIG = {\n    'variant-1': { collapsibleOptions: false },\n    'variant-2': { collapsibleOptions: true },\n  };\n  var safeLog = debug(_CNAME_)(_SNAME_);\n  var clearVariantHandlers = [];\n  var variantConfig = CONFIG[_SNAME_];\n\n  safeLog.info();\n\n  try {\n    addQMIntegration();\n\n    if (!isDevMode) {\n      runVariant();\n    }\n\n    window.addEventListener(_CNAME_ + '-gen', runVariant);\n    window.addEventListener(_CNAME_ + '-clear', clearVariant);\n  } catch (err) {\n    safeLog.error(err);\n  }\n\n  function clearVariant() {\n    clearVariantHandlers.forEach(function(fn) { fn(); });\n    clearVariantHandlers = [];\n  }\n\n  function runVariant() {\n    safeLog.ok();\n\n    var paymentsEl = getPaymentsEl();\n    var paymentOptionsSwitchEl = paymentsEl.querySelector('.heading-tabs');\n    var primarySwitchEl = paymentsEl.querySelector('.heading-tabs__item:first-of-type button button');\n    var otherSwitchEl = paymentsEl.querySelector('.heading-tabs__item:last-of-type button button');\n    var paymentOptionsEl = paymentsEl.querySelector('.urp-payment-details__details-wrapper-content-details');\n    var paymentSummaryEl = paymentsEl.querySelector('.urp-payment-details__details-wrapper-breakdown .payment-summary__wrapper');\n    var paymentCTAEl = document.querySelector('.confirmation__cta');\n    var handlePrimaryOptionClick = function(optionEl) {\n      var canBeCollapsed = variantConfig.collapsibleOptions\n        && optionEl.classList.contains('expanded');\n\n      return canBeCollapsed\n        ? unselect(optionEl)\n        : primarySwitchEl.click();\n    };\n    var handleOtherOptionClick = function(i) {\n      otherSwitchEl.click();\n      if (i === 0) return;\n      clickDefaultOption(paymentOptionsEl, i);\n    };\n    var hideDefaultTitle = function() {\n      var titleElems = paymentOptionsEl.querySelectorAll('.other-options-tab__title');\n      var lastTitle = titleElems.length > 1 ? titleElems[titleElems.length - 1] : null;\n\n      if (lastTitle) {\n        hide(lastTitle);\n      }\n\n      clearVariantHandlers.push(function() {\n        show(lastTitle);\n      });\n    };\n    var alignSummaryWithLcTitle = function() {\n      paymentSummaryEl.classList.add('other-payment-options');\n      clearVariantHandlers.push(function() {\n        paymentSummaryEl.classList.remove('other-payment-options');\n      });\n    };\n\n    otherSwitchEl.click();\n\n    var lcOptions = createLcOptions(\n      paymentOptionsEl.querySelector('.other-options-tab').cloneNode(true),\n      handlePrimaryOptionClick,\n      handleOtherOptionClick\n    );\n    var allLcOptionsElems = lcOptions.allOptionsElems;\n    var primaryLcOptionEl = lcOptions.primaryOptionEl;\n    var otherLcOptionsElems = lcOptions.otherOptionsElems;\n    var lcContainerEl = lcOptions.containerEl;\n    var primaryLcOptionBodyEl = primaryLcOptionEl.querySelector('.accordion-item-body');\n    var wrapCCOption = function() {\n      var ccOptionEl = paymentOptionsEl.querySelector('.credit-card-tab');\n      primaryLcOptionBodyEl.appendChild(ccOptionEl);\n    };\n    var restoreCCOption = function() {\n      var ccOptionEl = paymentOptionsEl.querySelector('.credit-card-tab');\n      ccOptionEl && lcContainerEl.insertAdjacentElement('afterEnd', ccOptionEl); // put it back for React's sake\n    };\n\n    primarySwitchEl.addEventListener('click', function() {\n      allLcOptionsElems.forEach(unselect);\n      otherLcOptionsElems.forEach(show);\n      select(primaryLcOptionEl);\n      nextTick(function() {\n        wrapCCOption();\n        alignSummaryWithLcTitle();\n        disableSwitcherA11y(primarySwitchEl);\n      });\n    });\n    otherSwitchEl.addEventListener('click', function() {\n      allLcOptionsElems.forEach(unselect);\n      otherLcOptionsElems.forEach(hide);\n      restoreCCOption();\n      nextTick(function() {\n        hideDefaultTitle();\n        disableSwitcherA11y(otherSwitchEl);\n      });\n    });\n\n    primarySwitchEl.click();\n\n    if (!paymentCTAEl) {\n      safeLog.error('Page CTA was not found');\n      restoreCCOption();\n      return;\n    }\n\n    paymentOptionsSwitchEl.classList.add(_CNAME_ + '--invisible');\n    paymentOptionsSwitchEl.querySelectorAll('button').forEach(disableA11y);\n    paymentOptionsEl.insertAdjacentElement('afterBegin', lcContainerEl);\n\n    if (variantConfig.collapsibleOptions) {\n      paymentOptionsEl.classList.add(_CNAME_ + '-urp-options');\n      unselect(primaryLcOptionEl);\n      window.addEventListener('click', handleDefaultOptionToggling, true);\n    }\n\n    clearVariantHandlers.push(function() {\n      restoreCCOption();\n      paymentOptionsSwitchEl.classList.remove(_CNAME_ + '--invisible');\n      lcContainerEl.remove();\n\n      if (variantConfig.collapsibleOptions) {\n        paymentOptionsEl.classList.remove(_CNAME_ + '-urp-options');\n        window.removeEventListener('click', handleDefaultOptionToggling, true);\n      }\n    });\n  }\n\n  function handleDefaultOptionToggling(e) {\n    if (isDefaultOptionLabel(e.target)) {\n      toggleDefaultOption(\n        e.target,\n        select,\n        unselect\n      );\n    }\n\n    if (isLcModifiedDefaultOption(e.target)) {\n      var labelEl = e.target.closest('.radio-button__radio');\n\n      if (!labelEl) {\n        safeLog.error('Label element was not found on the toggled option');\n      } else {\n        labelEl.classList.add('nofocus');\n      }\n    }\n  }\n\n  function toggleDefaultOption(el, expand, collapse) {\n    var optionEl = el.closest('.accordion-item-cntnr');\n    var isVariantExpanded = optionEl.classList.contains(_CNAME_ + '-expanded');\n    var isVariantCollapsed = optionEl.classList.contains(_CNAME_ + '-collapsed');\n    var isDefaultExpanded = optionEl.classList.contains('expanded');\n\n    nextTick(function() {\n      if (isVariantExpanded || isVariantCollapsed) {\n        if (isVariantExpanded) {\n          optionEl.classList.remove(_CNAME_ + '-expanded');\n          optionEl.classList.add(_CNAME_ + '-collapsed');\n          collapse(optionEl);\n          return;\n        }\n\n        optionEl.classList.add(_CNAME_ + '-expanded');\n        optionEl.classList.remove(_CNAME_ + '-collapsed');\n        expand(optionEl);\n        return;\n      }\n\n      if (isDefaultExpanded) {\n        optionEl.classList.add(_CNAME_ + '-collapsed');\n        collapse(optionEl);\n        return;\n      }\n    });\n  }\n\n  function isDefaultOptionLabel(el) {\n    return el && el.matches([\n      '.' + _CNAME_ + '-urp-options .other-options-tab .accordion-item-cntnr .radio-button__radio',\n      '.' + _CNAME_ + '-urp-options .other-options-tab .accordion-item-cntnr .radio-button__radio *',\n    ].join(', '));\n  }\n\n  function isLcModifiedDefaultOption(el) {\n    return el.matches([\n      '.' + _CNAME_ + '-collapsed',\n      '.' + _CNAME_ + '-collapsed *',\n      '.' + _CNAME_ + '-expanded',\n      '.' + _CNAME_ + '-expanded *',\n    ].join(', '));\n  }\n\n  function disableSwitcherA11y(switcherTabEl) {\n    [switcherTabEl].concat(switcherTabEl.parentNode).forEach(disableA11y);\n  }\n\n  function disableA11y(el) {\n    var tabIndex = el.getAttribute('tabIndex');\n    el.setAttribute('tabIndex', -1);\n    clearVariantHandlers.push(function() {\n      enableA11y(el, tabIndex);\n    });\n  }\n\n  function enableA11y(el, tabIndex) {\n    if (!tabIndex) {\n      return el.removeAttribute('tabIndex');\n    }\n    return el.setAttribute('tabIndex', tabIndex);\n  }\n\n  function createLcOptions(protoEl, switchToPrimary, switchToOther) {\n    var accordionEl = protoEl.querySelector('.accordion');\n    var optionsElems = Array.from(accordionEl.children);\n    var hasDomesticCardOption = optionsElems.some(isDomesticCardOption);\n    var primaryOptionTitle = hasDomesticCardOption ? 'International credit or debit cards' : 'Credit/Debit Card';\n\n    var otherOptionsElems = optionsElems.map(function(el, i) {\n      return createLcOtherOptionEl(el, function() { switchToOther(i); });\n    });\n    var primaryOptionEl = createLcPrimaryOptionEl(\n      otherOptionsElems[0].cloneNode(true),\n      primaryOptionTitle,\n      function(optionEl) { switchToPrimary(optionEl); }\n    );\n    var allOptionsElems = [primaryOptionEl].concat(otherOptionsElems);\n\n    handleFocusedState(allOptionsElems);\n    protoEl.className = protoEl.className.replace('other', _CNAME_ + '-other');\n    accordionEl.innerHTML = '';\n    allOptionsElems.forEach(function(el) {\n      accordionEl.appendChild(el);\n    });\n\n    return {\n      allOptionsElems: allOptionsElems,\n      primaryOptionEl: primaryOptionEl,\n      otherOptionsElems: otherOptionsElems,\n      containerEl: protoEl,\n    };\n  }\n\n  function handleFocusedState(optionsElems) {\n    var labelsElems = optionsElems.map(function(el) {\n      return el.children[0].querySelector('.radio-button__radio');\n    });\n\n    window.addEventListener('click', handleClick, true);\n    window.addEventListener('keydown', handleKeydown, true);\n    clearVariantHandlers.push(function() {\n      window.removeEventListener('click', handleClick, true);\n      window.removeEventListener('keydown', handleKeydown, true);\n    });\n\n    function handleClick() {\n      labelsElems.forEach(function(itemEl) {\n        itemEl.classList.add('nofocus');\n      });\n    }\n\n    function handleKeydown() {\n      var lcNofocusElems = document.querySelectorAll([\n        '.' + _CNAME_ + '-collapsed .nofocus',\n        '.' + _CNAME_ + '-expanded .nofocus',\n      ].join(', '));\n\n      lcNofocusElems.forEach(function(itemEl) {\n        itemEl.classList.remove('nofocus');\n      });\n      labelsElems.forEach(function(itemEl) {\n        itemEl.classList.remove('nofocus');\n      });\n    }\n  }\n\n  function isDomesticCardOption(el) {\n    var titleEl = el.children[0].querySelector('.radio-block__radio-content p');\n    return (/domestic/gi).test(titleEl.textContent);\n  }\n\n  function clickDefaultOption(optionsContainerEl, i) {\n    var newAccordionEl = optionsContainerEl.querySelector('.other-options-tab .accordion');\n    var newLabelEl = newAccordionEl.children[i].children[0].querySelector('.radio-button__radio');\n    newLabelEl.click();\n  }\n\n  function createLcOtherOptionEl(protoEl, handleClick) {\n    var bodyEl = protoEl.querySelector('.accordion-item-body');\n    var labelEl = protoEl.children[0].querySelector('.radio-button__radio');\n    var inputEl = protoEl.children[0].querySelector('.radio-button__input.hidden-control');\n\n    bodyEl.innerHTML = '';\n    bodyEl.style.overflow = 'initial';\n    unselect(protoEl);\n    labelEl.addEventListener('click', handleClick);\n    labelEl.addEventListener('keydown', function(e) {\n      if (e.keyCode !== 32) return;\n      handleClick(e);\n    });\n    inputEl.remove();\n    enableA11y(labelEl, '0');\n\n    return protoEl;\n  }\n\n  function createLcPrimaryOptionEl(protoEl, title, handleClick) {\n    var ICON_LINK = 'https://fly10.ek.aero/english/images/06_Debit_Credit_Card_tcm233-2064524.png';\n    var imgEl = protoEl.children[0].querySelector('.radio-block__radio-content img');\n    var titleEl = protoEl.children[0].querySelector('.radio-block__radio-content p');\n    var labelEl = protoEl.children[0].querySelector('.radio-button__radio');\n\n    protoEl.querySelectorAll('[data-name*=\"PTYPES_\"], [name*=\"PTYPES_\"]').forEach(function(dataEl) {\n      // fixes dummy option focusable\n      if (dataEl.dataset.name) {\n        dataEl.dataset.name = dataEl.dataset.name.replace(/PTYPES_(.*)/gi, 'PTYPES_CC');\n      }\n      // fixes real clicked option focusable\n      if (dataEl.getAttribute('name')) {\n        dataEl.setAttribute('name', dataEl.getAttribute('name').replace(/PTYPES_(.*)/gi, 'PTYPES_CC'));\n      }\n    });\n\n    titleEl.textContent = title;\n\n    if (imgEl) {\n      imgEl.src = ICON_LINK;\n    } else {\n      titleEl.insertAdjacentHTML('afterEnd', '<img class=\"other-options-tab__accordion-item-title-icon\" aria-hidden=\"false\" src=\"' + ICON_LINK + '\">');\n    }\n\n    labelEl.addEventListener('click', function() {\n      handleClick(protoEl);\n    });\n    labelEl.addEventListener('keydown', function(e) {\n      if (e.keyCode !== 32) return;\n      handleClick(protoEl);\n    });\n\n    return protoEl;\n  }\n\n  function select(cloneSectionEl) {\n    var cloneContentEl = cloneSectionEl.children[1];\n    var cloneBodyEl = cloneContentEl.querySelector('.accordion-item-body');\n    var cloneLabelEl = cloneSectionEl.querySelector('.radio-button__radio');\n    var cloneRadioEl = cloneLabelEl.querySelector('.radio-icon');\n    var titleEl = cloneSectionEl.querySelector('.other-options-tab__accordion-item-title');\n\n    cloneSectionEl.classList.add('expanded');\n    titleEl.classList.add('expanded');\n    cloneContentEl.classList.remove('hide');\n    cloneBodyEl.classList.add('open-item');\n    cloneBodyEl.style.maxHeight = '';\n    cloneRadioEl.classList.add('radio-icon--checked');\n  }\n\n  function unselect(cloneSectionEl) {\n    var cloneContentEl = cloneSectionEl.children[1];\n    var cloneBodyEl = cloneContentEl.querySelector('.accordion-item-body');\n    var cloneLabelEl = cloneSectionEl.querySelector('.radio-button__radio');\n    var cloneRadioEl = cloneLabelEl.querySelector('.radio-icon');\n    var titleEl = cloneSectionEl.querySelector('.other-options-tab__accordion-item-title');\n\n    cloneSectionEl.classList.remove('expanded');\n    titleEl.classList.remove('expanded');\n    cloneContentEl.classList.add('hide');\n    cloneBodyEl.classList.remove('open-item');\n    cloneBodyEl.style.maxHeight = '0px';\n    cloneRadioEl.classList.remove('radio-icon--checked');\n  }\n\n  function getPaymentsEl() {\n    return document.querySelector('.urp-payment-details__details-wrapper');\n  }\n\n  function hide(el) {\n    el && el.classList && el.classList.add(_CNAME_ + '--hidden');\n  }\n\n  function show(el) {\n    el && el.classList && el.classList.remove(_CNAME_ + '--hidden');\n  }\n\n  function nextTick(cb) {\n    return setTimeout(cb, 0);\n  }\n\n  function addQMIntegration() {\n    document.body.classList.add(_CNAME_ + '--' + _SNAME_);\n  }\n\n  /* LC safe debug */\n  function debug(u){var n={info:\"blue\",ok:\"green\",error:\"red\"};return function(t){return Object.keys(n).reduce(function(r,e){var o=n[e];r[e]=function(){if(!c())return;var r=(new Date).toTimeString().replace(/\\s(.*)/,\"\");var n=\"%c\"+u+\":\"+e+\" [\"+r+\"] \"+(t||\"\");console.info.apply(this,[n,\"color: \"+o].concat(Array.prototype.slice.call(arguments)))};return r},{})};function c(){return document.cookie.indexOf(\"lc-qa=1\")!==-1||window.location.href.indexOf(\"lc-qa=1\")!==-1}} // eslint-disable-line\n})(typeof unsafeWindow === 'undefined' ? window : unsafeWindow, typeof unsafeWindow !== 'undefined');\n// eslint-disable-next-line spaced-comment\n//# sourceURL=c--d31-variant.js\n"}}]},{ref:"3b973b4d-b297-4420-bdfb-b73a2394773f",name:"EM-155 c--d30-persistent-basket [v2] (IBE)",revision:4,archived:!1,target:{script:"(function(window, isDevMode) {\n  var _CNAME_ = 'lc-d30';\n  var _SNAME_ = 'renderer';\n  var safeLog = debug(_CNAME_)(_SNAME_);\n\n  safeLog.info();\n\n  /**\n   * ! IMPORTANT !\n   * Before code review please check if all business requirements are met.\n   * Please refer to README.md#business-requirements to see checklist for a standard campaign for Emirates.\n   *\n   * Platform Notes:\n   * - In order to trigger experience - call `targetingPassed()` method.\n   * - In order to provide better debugging - please log every failed targeting rule with a separate log message.\n   *\n   * Dev Notes:\n   * - amend flow rules according to ATs\n   * - amend page targeting according to ATs\n   * - add metrics according to ATs\n   * - amend when `triggerExperience` is called according to ATs\n   */\n\n  try {\n    // if (!isLcQa()) return; // sandbox only\n\n    // targeting logic goes here\n    var FLOW_RULES = [\n      {\n        name: 'Run once (script was already executed on the page)',\n        handler: isFirstRun,\n      },\n      {\n        name: 'Browser (not IE)',\n        handler: function() { return !isIE(); },\n      },\n      {\n        name: 'Device (Desktop)',\n        handler: isDesktop,\n      },\n      {\n        name: 'Language (Eng)',\n        handler: isEngLang,\n      },\n      {\n        name: 'POS (not US)',\n        handler: function(data) { return !isUS(data); },\n        async: true,\n      },\n      {\n        name: 'same POS and POO',\n        handler: isSameSiteOriginCountry,\n        async: true,\n      },\n      {\n        name: 'Trip type (one way and return)',\n        handler: function() { return isTripTypeOneOf(['one way', 'return']); },\n      },\n      {\n        name: 'Airline type (not Interline)',\n        handler: function() { return !isInterline(); },\n      }\n    ];\n\n    var generated = false; // for campaigns on select flight page\n\n    waitFor(function() { return window.dataLayer && window.dataLayer.length; })\n      .then(start)\n      .catch(function(err) {\n        safeLog.info('dataLayer was not found on the page', err);\n      });\n\n    // eslint-disable-next-line no-inner-declarations\n    function start() {\n      var isFlowValid = checkFlowTargeting(FLOW_RULES);\n      var isPageValid = isPricePage()\n        || isPassengerDetailsPage()\n        || isExtrasPage();\n\n      if (!isFlowValid) {\n        return false;\n      }\n\n      // init metrics on all pages for valid flow,\n      // and pass indicator of campaign page if needed\n      initMetrics(isPageValid);\n\n      if (!isPageValid) {\n        safeLog.error('Page targeting was not met');\n        return false;\n      }\n\n      // run experience only on campaign pages\n      runGeneration();\n\n      // re-run generation on async search change\n      if (isPricePage()) {\n        var asyncRules = FLOW_RULES.filter(function(rule) { return !!rule.async; });\n\n        onSearchChange(function(data) { return runGeneration(data, asyncRules); });\n        onDateChange(function(data) { return runGeneration(data, asyncRules); });\n      }\n\n      return true;\n    }\n\n    // eslint-disable-next-line no-inner-declarations\n    function runGeneration(data, rulesToBeReChecked) {\n      var isFlowStillValid = (!rulesToBeReChecked || !rulesToBeReChecked.length)\n        || checkFlowTargeting(rulesToBeReChecked, data);\n\n      if (!isFlowStillValid || isBD4Travel(data)) {\n        if (isFlowStillValid) {\n          safeLog.error('Exclusions: BD4 Travel Page');\n        }\n\n        if (generated) {\n          window.dispatchEvent(new CustomEvent(_CNAME_ + '-clear'));\n        }\n\n        return;\n      }\n\n      if (generated) {\n        window.dispatchEvent(new CustomEvent(_CNAME_ + '-clear'));\n        window.dispatchEvent(new CustomEvent(_CNAME_ + '-gen'));\n        return;\n      }\n\n      // trigger Boxever for variant code only once\n      generated = true;\n\n      if (isDevMode) {\n        window.dispatchEvent(new CustomEvent(_CNAME_ + '-gen'));\n      } else {\n        triggerExperience();\n      }\n    }\n  } catch (err) {\n    safeLog.error(err);\n  }\n\n  function initMetrics(isCampaignPage) {\n    // add metrics\n    if (isCampaignPage) {\n      window.addEventListener('click', function(e) {\n        if (isBasketLink(e.target)) {\n          return trackMetric('basket-link-click', { value: 1 });\n        }\n\n        if (isBasketSectionToggle(e.target) && isBasketSectionExpanded(e.target)) {\n          return trackMetric('basket-section-expanded', { value: 1 });\n        }\n\n        if (isChangeSearchLink(e.target)) {\n          return trackMetric('change-search-link-click', { value: 1 });\n        }\n\n        if (isPricePage()) {\n          if (isFareConditionsLink(e.target)) {\n            return trackMetric('fare-conditions-link-click', { value: 1 });\n          }\n\n          if (isBaggageAllowanceLink(e.target)) {\n            return trackMetric('baggage-allowance-link-click', { value: 1 });\n          }\n\n          if (isSkywardsLabel(e.target)) {\n            return setTimeout(function() { // input is checked on next tick\n              if (!isSkywardsChecked()) return;\n              trackMetric('classic-reward-applied', { value: 1 });\n            }, 0);\n          }\n\n          if (isCurrencyOption(e.target)) {\n            return trackMetric('currency-conversion-applied', { value: 1 });\n          }\n        }\n\n        if (isExtrasPage()) {\n          if (isEditPassengersLink(e.target)) {\n            return trackMetric('edit-passengers-link-click', { value: 1 });\n          }\n        }\n\n        return null;\n      });\n\n      if (isPassengerDetailsPage()) {\n        trackMetric('next-step-2-passengers', { value: 1 });\n      }\n\n      if (isExtrasPage()) {\n        trackMetric('next-step-3-extras', { value: 1 });\n\n        window.addEventListener('click', function(e) {\n          if (isRemoveExtraLink(e.target)) {\n            trackMetric('remove-extra-link-click', { value: 1 });\n          }\n        }, true);\n      }\n    } else if (isPaymentPage()) {\n      trackMetric('next-step-4-payment', { value: 1 });\n    }\n  }\n\n  /** Actions */\n\n  /**\n   * Triggers the experience with a fallback for local development\n   * or in case if there is no async targeting in Boxever platform\n   * @returns {Boolean} Resolves to true in case if async targeting is not in place\n   */\n  function triggerExperience() {\n    try {\n      targetingPassed();\n    } catch (err) {\n      safeLog.info('Method targetingPassed is not yet available');\n    }\n\n    return true;\n  }\n\n  /**\n   * Checks flow targeting rules provided including:\n   * - a function to be checked and\n   * - a rule name to be displayed in case if check fails\n   * and resolves to true if flow is valid\n   * @param {Array<Object>} rules Set of rules to be checked\n   * @param {Object} data Optional data to be passed to checks handlers\n   * @returns {Boolean} Resolves to true if targeting check passes\n   */\n  function checkFlowTargeting(rules, data) {\n    var failed = false;\n\n    for (var i = 0; i < rules.length; i++) {\n      var ruleName = rules[i].name;\n      var handler = rules[i].handler;\n\n      if (!handler(data)) {\n        safeLog.error('Targeting rules were not met: ', ruleName);\n        failed = true;\n        break;\n      }\n    }\n\n    return !failed;\n  }\n\n  /**\n   * Tracks Boxever metric with specified key and attributes\n   *\n   * Example usage:\n   *\n   * trackMetric('cta-click', { value: 1 });\n   *\n   * @param {String} eventName Custom event name\n   * @param {Object} attrs Custom event attributes\n   * @returns {void}\n   */\n  function trackMetric(eventName, attrs) { // eslint-disable-line no-unused-vars\n    var event = Object.assign({}, (attrs || {}), {\n      type: _CNAME_ + '-' + eventName,\n    });\n\n    trackEvent(event, function(data) {\n      safeLog.ok(data, event);\n    });\n  }\n\n  /**\n   * Boxever API wrapper to fire custom event\n   * @param {Object} event Event object containing event key and attributes\n   * @param {Function} cb Callback function that will receive API response as a parameter\n   * @returns {void}\n   */\n  function trackEvent(event, cb) {\n    var baseEvent = {\n      browser_id: window.Boxever.getID(),\n      channel: 'WEB',\n      pos: window.Boxever.pointOfSale,\n    };\n    var customEvent = Object.assign({}, baseEvent, event);\n\n    safeLog.info(customEvent);\n    window._boxeverq = window._boxeverq || [];\n    window._boxeverq.push(function() {\n      window.Boxever.eventCreate(customEvent, cb || function() {}, 'json');\n    });\n  }\n\n  /** Helpers */\n\n  function isFirstRun() {\n    var wasExecuted = retrieve('executed');\n\n    if (!wasExecuted) {\n      store('executed', true);\n    }\n\n    return !wasExecuted;\n  }\n\n  function isIE() {\n    return (/msie|trident/gi).test(window.navigator.userAgent);\n  }\n\n  function isDesktop() {\n    return getDLProp('platformType') === 'Desktop';\n  }\n\n  function isEngLang() {\n    return (/^en($|-.*)/i).test(getDLProp('languageCode'));\n  }\n\n  function getOriginCountry(data) {\n    return getDLProp('originCountryflightRoute', true, data) || getDLProp('originCountry');\n  }\n\n  function isUS(data) {\n    return getOriginCountry(data) === 'US' || getDLProp('countryCode') === 'US';\n  }\n\n  function isSameSiteOriginCountry(data) {\n    var siteCountry = getDLProp('countryCode');\n    var originCountry = getOriginCountry(data);\n    return siteCountry === 'GLOBAL' || siteCountry === originCountry;\n  }\n\n  function isTripTypeOneOf(tripTypes) {\n    return createRegExp(tripTypes).test(getDLProp('flightTripType'));\n  }\n\n  function isInterline() {\n    return getDLProp('airlineType') === 'Interline';\n  }\n\n  function isPricePage() {\n    return (/select a price/gi).test(getDLProp('pageName'));\n  }\n\n  function isPassengerDetailsPage() {\n    return (/enter passenger details/gi).test(getDLProp('pageName'));\n  }\n\n  function isExtrasPage() {\n    return (/choose extras/gi).test(getDLProp('pageName'));\n  }\n\n  function isPaymentPage() {\n    return (/\\/ payment \\//gi).test(getDLProp('pageName'));\n  }\n\n  function isFareConditionsLink(el) {\n    return el.matches('.tc-anchor-container a[data-link*=\"fare conditions\"], .tc-anchor-container a[data-link*=\"fare conditions\"] *');\n  }\n\n  function isBaggageAllowanceLink(el) {\n    return el.matches('.tc-anchor-container a[data-link*=\"baggage allowance\"], .tc-anchor-container a[data-link*=\"baggage allowance\"] *');\n  }\n\n  function isEditPassengersLink(el) {\n    return el.matches('.' + _CNAME_ + '-edit-passengers, .' + _CNAME_ + '-edit-passengers *');\n  }\n\n  function isRemoveExtraLink(el) {\n    return el.matches('.ts-sc__box .ts-sc__extras [data-extra-id] a, .ts-sc__box .ts-sc__extras [data-extra-id] a *');\n  }\n\n  function isCurrencyOption(el) {\n    return el.matches('.ts-sf__suggested li[data-value]:not(.ts-hide), .ts-sf__suggested li[data-value]:not(.ts-hide) *');\n  }\n\n  function isSkywardsLabel(el) {\n    return isVariantSkywardsLabel(el) || isDefaultSkywardsLabel(el);\n  }\n\n  function isVariantSkywardsLabel(el) {\n    return el.matches('.' + _CNAME_ + '-skywards__checkbox, .' + _CNAME_ + '-skywards__checkbox *');\n  }\n\n  function isDefaultSkywardsLabel(el) {\n    return el.matches('#dvPayMethodsContainer #dvPoMiles label, #dvPayMethodsContainer #dvPoMiles label *');\n  }\n\n  function isSkywardsChecked() {\n    var skywardsEl = document.getElementById('dvPayMethodsContainer');\n    var inputEl = skywardsEl && skywardsEl.querySelector('.ts-checkbox input');\n\n    return inputEl && inputEl.checked;\n  }\n\n  function isBasketLink(el) {\n    return el.matches('.ts-sc__footer a, .ts-sc__footer a *');\n  }\n\n  function isChangeSearchLink(el) {\n    return el.matches('[data-link=\"Change search\"], [data-link=\"Change search\"] *');\n  }\n\n  function isBasketSectionToggle(el) {\n    return el.matches('.' + _CNAME_ + '-basket-item .toggle, .' + _CNAME_ + '-basket-item .toggle *');\n  }\n\n  function isBasketSectionExpanded(el) {\n    var sectionEl = el.closest('.' + _CNAME_ + '-basket-item');\n    return sectionEl && sectionEl.classList.contains(_CNAME_ + '-basket-item--expanded');\n  }\n\n  function isLcQa() { // eslint-disable-line no-unused-vars\n    return document.cookie.indexOf('lc-qa=1') !== -1 || window.location.href.indexOf('lc-qa=1') !== -1;\n  }\n\n  function isBD4Travel(data) {\n    var TRIP_ROUTES = [\n      {\n        origins: [\n          { pos: 'US', lang: 'EN' },\n          { pos: 'GB', lang: 'EN' },\n          { pos: 'AE', lang: 'EN' },\n        ],\n        destinations: [\n          'SEZ',\n          'MRU',\n          'MLE',\n          'DPS',\n        ],\n      },\n      {\n        origins: [\n          { pos: 'US', lang: 'EN' },\n          { pos: 'GB', lang: 'EN' },\n        ],\n        destinations: [\n          // {\n          //   code: 'DXB',\n          //   durationDaysMin: 3,\n          //   durationDaysMax: 10,\n          // },\n          'DXB',\n        ],\n      }\n    ];\n    var TRIP_TYPES = ['return'];\n\n    var isValid = isTripTypeValid() && isTripRouteValid();\n\n    return isValid;\n\n    function isTripTypeValid() {\n      return createRegExp(TRIP_TYPES).test(getValue('flightTripType'));\n    }\n\n    function isTripRouteValid() {\n      var pos = getValue('originCountryflightRoute');\n      var lang = getValue('languageCode');\n      var dest = getValue('destinationAirportFlightRoute');\n      var tripDuration = getValue('searchTripDurationIBE');\n      var duration = Number(((/\\d+/).exec(tripDuration) || [])[0]) || 0;\n\n      return TRIP_ROUTES.some(function(route) {\n        return isOriginValid(route.origins, { pos: pos, lang: lang })\n          && isDestinationValid(route.destinations, { dest: dest, duration: duration });\n      });\n    }\n\n    function isOriginValid(origins, selected) {\n      return origins.some(function(origin) {\n        return createRegExp(origin.pos).test(selected.pos)\n          && createRegExp(origin.lang).test(selected.lang);\n      });\n    }\n\n    function isDestinationValid(destinations, selected) {\n      return destinations.some(function(destination) {\n        if (typeof destination === 'object') {\n          return createRegExp(destination.code).test(selected.dest)\n            && (!destination.durationDaysMin || selected.duration >= destination.durationDaysMin)\n            && (!destination.durationDaysMax || selected.duration <= destination.durationDaysMax);\n        }\n\n        return createRegExp(destination).test(selected.dest);\n      });\n    }\n\n    /**\n     * Get dataLayer value by key\n     *\n     * On first run - all values are accessible from dataLayer[0],\n     * on async search change - most values available in new dataLayer event\n     * (that is being passed as parameter here),\n     * except for trip duration which is overwritten in dataLayer[0] item\n     *\n     * @param {String} key Data key to\n     * @return {Any} Data value\n     */\n    function getValue(key) {\n      var defaultSource = (window.dataLayer || [])[0] || {};\n      var source = data || defaultSource;\n      return source[key] || defaultSource[key];\n    }\n  }\n\n  function getDLProp(key, recent, dataObj) {\n    if (dataObj && dataObj[key]) {\n      return dataObj[key];\n    }\n\n    var matches = (window.dataLayer || []).filter(function(chunk) {\n      return !!chunk[key];\n    });\n    var dataIndex = recent ? (matches.length - 1) : 0;\n\n    return dataIndex !== -1 ? (matches[dataIndex] || {})[key] : null;\n  }\n\n  function store(key, value) {\n    retrieve();\n    window.lc[_CNAME_][key] = value;\n  }\n\n  function retrieve(key) {\n    window.lc = window.lc || {};\n    window.lc[_CNAME_] = window.lc[_CNAME_] || {};\n    return key ? window.lc[_CNAME_][key] : window.lc[_CNAME_];\n  }\n\n  function createRegExp(values) {\n    // Boxever pre-publish validation fix\n    /* eslint-disable quotes */\n    var regExp = \"^(\" + (Array.isArray(values) ? values.join(\"|\") : values) + \")$\";\n    return (new RegExp(regExp, \"gi\"));\n    /* eslint-enable quotes */\n  }\n\n  function onSearchChange(cb) {\n    overrideDLPush();\n    window.addEventListener('lc:gtm-event', function(e) {\n      var event = e.detail;\n      if (event.label === 'Modify Search Results') {\n        cb(event);\n      }\n    });\n  }\n\n  function onDateChange(cb) {\n    overrideDLPush();\n    window.addEventListener('lc:gtm-event', function(e) {\n      var event = e.detail;\n      if (event.action === 'Search Type' && event.event === 'DataPush.IBE_searchFlightsDecisionTypeIBE') {\n        cb(event);\n      }\n    });\n  }\n\n  function overrideDLPush() {\n    window.lc = window.lc || {};\n    window.lc.overrides = window.lc.overrides || {};\n\n    if (!window.lc.overrides.dataLayerPush) {\n      window.lc.overrides.dataLayerPush = true;\n      window.dataLayer.push = (function(fn) {\n        return function() {\n          var args = [].slice.call(arguments);\n          var eventObject = args[0];\n\n          if (eventObject && !(eventObject.event && eventObject.event.includes('lc:'))) {\n            window.dispatchEvent(new CustomEvent('lc:gtm-event', {\n              detail: eventObject\n            }));\n          }\n\n          return fn.apply(this, args);\n        };\n      })(window.dataLayer.push);\n    }\n  }\n\n  function waitFor(condition, timeout) {\n    var stopTime = typeof timeout === 'number' ? timeout : 7000;\n    var stop = false;\n\n    window.setTimeout(function() {\n      stop = true;\n    }, stopTime);\n\n    return new Promise(function(resolve, reject) {\n      (function _innerWaitFor() {\n        var value = condition();\n\n        if (stop) {\n          reject();\n        } else if (value) {\n          resolve(value);\n        } else {\n          window.setTimeout(_innerWaitFor, 50);\n        }\n      })();\n    });\n  }\n\n  /* LC safe debug */\n  function debug(u){var n={info:\"blue\",ok:\"green\",error:\"red\"};return function(t){return Object.keys(n).reduce(function(r,e){var o=n[e];r[e]=function(){if(!c())return;var r=(new Date).toTimeString().replace(/\\s(.*)/,\"\");var n=\"%c\"+u+\":\"+e+\" [\"+r+\"] \"+(t||\"\");console.info.apply(this,[n,\"color: \"+o].concat(Array.prototype.slice.call(arguments)))};return r},{})};function c(){return document.cookie.indexOf(\"lc-qa=1\")!==-1||window.location.href.indexOf(\"lc-qa=1\")!==-1}} // eslint-disable-line\n})(typeof unsafeWindow === 'undefined' ? window : unsafeWindow, typeof unsafeWindow !== 'undefined');\n// eslint-disable-next-line spaced-comment\n//# sourceURL=c--d30-renderer.js",targetPages:[]},traffic:{type:"advancedTraffic",allocationLow:1,allocationHigh:80,splits:[{ref:"fbadc9b9-be39-401d-934f-1dd81fcf967c",lowSplit:1,highSplit:27},{ref:"31597c8b-d8fd-4cab-aad8-6ea8839b9422",lowSplit:28,highSplit:54},{ref:"42b7e99e-3ce6-4d0b-8f29-03e17fc6203a",lowSplit:55,highSplit:80}]},variants:[{ref:"fbadc9b9-be39-401d-934f-1dd81fcf967c",name:"1 - Persistent Basket",assets:{css:'/* Page layout */\nbody[data-lc-d30*="variant"] {\n  min-width: 1200px; /* extras-page */\n}\n\n.lc-d30-grid {\n  display: grid;\n  grid-gap: 16px;\n  grid-template-columns: 1fr 300px;\n  grid-template-areas: "main right";\n  width: 100%;\n  margin: 0 auto;\n}\n\n.lc-d30-grid__item--main {\n  z-index: 1;\n  grid-area: main;\n}\n\n.lc-d30-grid__item--right {\n  z-index: 0;\n  grid-area: right;\n}\n\n.lc-d30-grid--price-page .lc-d30-grid__item--right {\n  padding-top: 30px;\n}\n\n.lc-d30-grid--extras-page .lc-d30-grid__item--right {\n  padding-bottom: 24px;\n}\n\n.lc-d30-grid--extras-page + #mainContentAccess .ts-extra--sel-seats [data-ts-seat-sel-nav] {\n  display: none;\n}\n\n/* default fixes - select price */\n\n.lc-d30-grid .ts-fbr-flight-list-container h1,\n.lc-d30-grid .ts-fbr-flight-list-container h2,\n.lc-d30-grid .ts-fbr-flight-list-container h3 {\n  margin-bottom: 9px;\n  padding: 0;\n  color: #333;\n}\n\n.lc-d30-grid .ts-fbr-flight-list__header {\n  position: relative;\n}\n\n.lc-d30-grid .ts-fbr-flight-list-row__option-brands-container {\n  float: left;\n}\n\n.lc-d30-grid .ts-fbr-flight-list-row__option-brands-container::after,\n.lc-d30-grid .ts-fbr-flight-list-row__option-brands-container::before {\n  right: 80%;\n}\n\n@media only screen and (max-width: 1256px) {\n  .lc-d30-grid .ts-fbr-option__information {\n    transform: scale(0.7);\n    transform-origin: top right;\n  }\n}\n\n/* default fixes - passengers */\n\n.lc-d30-grid__item--main > * {\n  max-width: 100% !important;\n  box-sizing: border-box;\n}\n\n.lc-d30-grid__item--main fieldset {\n  min-width: unset;\n}\n\n.lc-d30-grid__item--main .airline-programme-wrapper .ts-ffb__ctnr {\n  min-width: unset;\n  max-width: 100%;\n  box-sizing: border-box;\n}\n\n@media only screen and (max-width: 1451px) {\n  .lc-d30-grid__item--main .airline-programme-wrapper .ts-ffb input.restrict-number {\n    margin: 18px 18px 0 0;\n  }\n}\n\n/* default fixes - extras */\n\n.lc-d30-grid__item--main.ts-choose-extras,\n.lc-d30-grid__item--main .ts-pgc__core .ts-cntnr,\n.lc-d30-grid__item--main .ts-pgc__core .ts-upgrade-row,\n.lc-d30-grid__item--main .ts-pgc__core .ts-choose-extras {\n  width: unset;\n}\n\n.lc-d30-grid__item--main .ts-pgc__core {\n  width: unset !important;\n}\n\n.lc-d30-grid + #mainContentAccess .ts-pa {\n  width: 1100px;\n  margin: 25px auto 0;\n}\n\n.lc-d30-grid__item--main #divUpgradesInfo ul {\n  display: grid;\n  grid-auto-flow: column;\n  grid-auto-columns: 1fr;\n  grid-gap: 16px;\n}\n\n.lc-d30-grid__item--main #divUpgradesInfo ul:after {\n  content: none;\n}\n\n.lc-d30-grid__item--main #divUpgradesInfo li {\n  margin-right: 0;\n}\n\n.lc-d30-grid__item--main #divUpgradesInfo .ts-cwh--col1,\n.lc-d30-grid__item--main #divUpgradesInfo .ts-cwh--col2,\n.lc-d30-grid__item--main #divUpgradesInfo .ts-cwh--col3,\n.lc-d30-grid__item--main #divUpgradesInfo .ts-cwh--col4,\n.lc-d30-grid__item--main #divUpgradesInfo .ts-cwh--col5,\n.lc-d30-grid__item--main #divUpgradesInfo .ts-cwh--col6 {\n  width: unset;\n}\n\n.lc-d30-grid__item--main #divUpgrades .ts-ur__cell--upgrade {\n  white-space: nowrap;\n}\n\n.lc-d30-grid__item--main .ts-cwi__img-cnt {\n  position: relative;\n  width: 33%;\n}\n.lc-d30-grid__item--main .ts-cwi__img-cnt-core {\n  width: 100%;\n  display: flex;\n  justify-content: center;\n}\n\nbody[data-lc-d30*="variant"] .ts-choose-extras .ts-pgc.ts-pgc--bgcp-white,\nbody[data-lc-d30*="variant"] .ts-choose-extras .ts-pgc.ts-pgc--bgcp-white .ts-pgc__core,\nbody[data-lc-d30*="variant"] .ts-choose-extras .ts-pgc.ts-pgc--bgcp-white.ts-pgc--t-fixed .ts-pgc__core ,\n.lc-d30-grid--extras-page .ts-pgc.ts-pgc--bgcp-white,\n.lc-d30-grid--extras-page .ts-pgc.ts-pgc--bgcp-white .ts-pgc__core,\n.lc-d30-grid--extras-page .ts-pgc.ts-pgc--bgcp-white.ts-pgc--t-fixed .ts-pgc__core {\n  background-color: #f6f6f6;\n}\n\n.lc-d30-grid__item--main .ts-pgc:first-of-type {\n  padding-top: 0;\n}\n\n/* Page width */\n\n/*\nflights container base width => 1100px\nsidebar width => 300px\nspace between flights and sidebar => 16px\nmin required spacing on the sides of the page => 2 x 50px\n*/\n\n.lc-d30-grid {\n  grid-gap: 16px;\n  grid-template-columns: calc(100% - 300px - 16px) 300px;\n}\n\nbody[data-lc-d30*="variant"] .ts-choose-flight#mainContainer,\nbody[data-lc-d30*="variant"] .ts-choose-extras#mainContainer {\n  max-width: calc(1100px + 16px + 300px + 50px * 2);\n  width: 100%;\n  margin: 0 auto;\n  padding-left: 50px;\n  padding-right: 50px;\n  box-sizing: border-box;\n}\n\n.ts-choose-extras#mainContainer + .lc-d30-grid {\n  max-width: calc(1100px + 16px + 300px + 50px * 2);\n  padding-left: 50px;\n  padding-right: 50px;\n  box-sizing: border-box;\n}\n\n.ts-choose-extras#mainContainer + .lc-d30-grid,\n.ts-choose-extras#mainContainer + .lc-d30-grid + #mainContentAccess .ts-pa {\n  max-width: calc(1100px + 16px + 300px + 50px * 2);\n  width: 100%;\n  padding-left: 50px;\n  padding-right: 50px;\n  box-sizing: border-box;\n}\n\nbody[data-lc-d30*="variant"] .ts-choose-flight#mainContainer,\nbody[data-lc-d30*="variant"] .ek.ek-wrapper.new-global-nav .global-navigation-wrapper .navigation-skinny,\nbody[data-lc-d30*="variant"] .ek.ek-wrapper.new-ek-footer.navigation-skinny .container {\n  max-width: calc(1100px + 16px + 300px + 50px * 2);\n  width: 100%;\n}\n\nbody[data-lc-d30*="variant"] .ts-tm__cntnr {\n  max-width: calc(1100px + 16px + 300px);\n  width: calc(100% - 50px * 2);\n}\n\nbody[data-lc-d30*="variant"] .ts-choose-flight#mainContainer .fare-families-container {\n  width: 100%;\n}\n\nbody[data-lc-d30*="variant"] .ts-cyc-currency-selector.predictive-select-container {\n  float: right;\n}\n\nbody[data-lc-d30*="variant"] .warning-container {\n  width: 100% !important;\n}\n\n\n/* SRP - lowest price, currency conversion, skyward miles */\n\n.lc-d30-srp {\n  display: grid;\n  grid-template-columns: 1fr;\n  grid-auto-flow: column;\n  grid-auto-columns: auto;\n  grid-gap: 20px;\n  align-items: center;\n  margin: 10px 0;\n  padding: 0 10px;\n  border-radius: 3px;\n  background-color: #ffffff;\n}\n\n.lc-d30-srp,\n.lc-d30-srp > * {\n  position: relative;\n}\n\n.lc-d30-srp .lc-d30-lowest-price::after {\n  content: \'\';\n  position: absolute;\n  top: 8px;\n  bottom: 8px;\n  right: 0;\n  display: block;\n  width: 1px;\n  background-color: #d1d1d1;\n}\n\n.lc-d30-srp #CCContainer {\n  z-index: 10;\n  position: absolute;\n  right: -10px;\n  display: inline-block;\n  display: none;\n  padding:  10px;\n  border-radius: 4px;\n  box-shadow: 0 2px 4px 2px rgb(0 0 0 / 19%);\n  background: #fff;\n}\n\n.lc-d30-srp .lc-d30-converter--enabled + #CCContainer {\n  display: inline-block;\n}\n\n.lc-d30-srp #CCContainer .ts-cyc-container-column:first-of-type {\n  display: none\n}\n\n.lc-d30-srp #CCContainer .ts-cyc-container {\n  margin-bottom: 0;\n}\n\n.lc-d30-srp #CCContainer .ts-icon-clear {\n  top: 30px; /* input height / 2 */\n}\n\n.lc-d30-srp #CCContainer .ts-sf__suggested {\n  position: relative;\n  margin: 9px -10px 0;\n  width: auto;\n  box-shadow: none;\n}\n\n.lc-d30-srp #CCContainer .ts-sf__suggested .ts-options-label {\n  margin-right: 10px;\n  margin-left: 10px;\n}\n\n.lc-d30-srp #CCContainer .ts-sf__suggested ul li {\n  padding-right: 10px;\n  padding-right: 10px;\n}\n\n.lc-d30-srp #CCContainer .ts-sf--opened:before,\n.lc-d30-srp #CCContainer .ts-sf--opened:after {\n  content: none;\n}\n\n.lc-d30-srp .lc-d30-converter:before,\n.lc-d30-srp .lc-d30-converter:after {\n  content: \'\';\n  position: absolute;\n  bottom: -15px;\n  right: -11px;\n  width: 20px;\n  height: 20px;\n  transform: translateX(-50%) rotate(45deg);\n  box-shadow: 0 2px 4px 2px rgb(0 0 0 / 19%);\n}\n\n.lc-d30-srp .lc-d30-converter:after {\n  z-index: 102;\n  bottom: 0px;\n  right: -7px;\n  width: 0;\n  height: 0;\n  transform: rotate(0deg) translateX(-8px);\n  box-shadow: none;\n  border: solid 8px #fff;\n  border-color: transparent transparent #fff transparent;\n}\n\n.lc-d30-srp .lc-d30-converter:not(.lc-d30-converter--enabled):before,\n.lc-d30-srp .lc-d30-converter:not(.lc-d30-converter--enabled):after {\n  display: none;\n}\n\n/* Basket */\n\nbody[data-lc-d30*="variant"] [data-ts-comp="ShoppingCart"],\nbody[data-lc-d30*="variant"] [data-ts-comp="ShoppingCart"] .ts-sc__wrapper,\nbody[data-lc-d30*="variant"] [data-ts-comp="ShoppingCart"] .ts-sc__wrapper.ts-sc__wrapper--fixed {\n  position: absolute;\n  /* top: -1000%; */\n  left: -1000%;\n}\n\n.lc-d30-basket {\n  position: sticky;\n  top: 0;\n\n  display: grid;\n  grid-template-columns: 1fr;\n  grid-template-rows: auto 1fr auto;\n\n  max-height: 100vh;\n  height: 700px; /* approx */\n  overflow: hidden;\n\n  border-top-left-radius: 3px;\n  border-top-right-radius: 3px;\n  background-color: #e5e5e5;\n}\n\n.lc-d30-basket:not(.ts-sc--is-empty) .lc-d30-basket__empty-state {\n  display: none;\n}\n\n.lc-d30-basket.ts-sc--is-empty .lc-d30-basket__content {\n  display: none;\n}\n\n/* Basket - change search */\n\n.lc-d30-search {\n  float: none;\n  padding: 10px;\n  border-radius: 3px;\n  background-color: #ffffff;\n  color: #333333;\n\n  /* font-family: HelveticaNeue-Light, "Helvetica Neue Light", "Helvetica Neue", Helvetica, Arial, "Lucida Grande", sans-serif; */\n  font-size: 14.1px;\n  font-weight: normal;\n  font-stretch: normal;\n  font-style: normal;\n  line-height: normal;\n  letter-spacing: normal;\n}\n\n.lc-d30-search.ts-sc__left p:first-child {\n  margin-top: 0;\n}\n\n.lc-d30-search .ts-sc__srch {\n  display: block;\n  margin-left: 0;\n  margin-top: 6px;\n}\n\n.lc-d30-search .ts-sc__label-pax .ts-sc__bullet:last-of-type {\n  display: none;\n}\n\n.lc-d30-search a[data-link="Change search"] {\n  display: block;\n  margin: 6px 0 0;\n  color: #c60c30;\n}\n\n.lc-d30-search .ts-sc__label-search {\n  font-weight: 700;\n}\n\n.lc-d30-search .ts-sc__label-search span {\n  font-weight: 300;\n}\n\n/* Basket - selection */\n\n.lc-d30-basket__content {\n  padding: 10px 10px;\n  overflow-y: scroll;\n  font-family: HelveticaNeue-Light, "Helvetica Neue Light", "Helvetica Neue", Helvetica, Arial, "Lucida Grande", sans-serif;\n  font-size: 14px;\n}\n\n.lc-d30-basket__empty-state {\n  display: flex;\n  flex-direction: column;\n  justify-content: center;\n  align-items: center;\n  overflow-y: hidden;\n\n  margin: 10px 10px;\n  padding: 0;\n  background-color: #fff;\n}\n\n.lc-d30-basket .ts-sc__empty {\n  width: 100%;\n  margin-bottom: 0;\n}\n\n.lc-d30-basket-item {\n  margin-bottom: 16px;\n  border-radius: 3px;\n  /* box-shadow: 0 2px 4px 2px rgba(0, 0, 0, 0.09); */\n  background-color: #ffffff;\n  color: #333333;\n}\n\n.lc-d30-basket-item:last-child {\n  margin-bottom: 0;\n}\n\n.lc-d30-basket-item .toggle {\n  cursor: pointer;\n}\n\n.lc-d30-basket-item__header {\n  position: relative;\n  display: grid;\n  grid-auto-flow: column;\n  grid-template-columns: auto 1fr auto auto;\n  grid-gap: 10px;\n  align-content: center;\n  align-items: center;\n  overflow: hidden;\n  padding: 10px;\n\n  border-radius: 3px;\n  box-shadow: 0 2px 4px 2px rgb(0 0 0 / 9%);\n  background-color: #ffffff;\n}\n\n.lc-d30-basket-item__header::before {\n  content: \'\';\n  display: none;\n  position: absolute;\n  width: 3px;\n  height: 100%;\n  background-color: #c60c30;\n}\n\n.lc-d30-basket-item--expanded .lc-d30-basket-item__header::before {\n  display: block;\n}\n\n.lc-d30-basket-item__title {\n  color: #333333;\n  letter-spacing: normal;\n  font-family: HelveticaNeue-Light, "Helvetica Neue Light", "Helvetica Neue", Helvetica, Arial, "Lucida Grande", sans-serif;\n  font-size: 14px;\n  font-weight: bold;\n  font-stretch: normal;\n  font-style: normal;\n  line-height: normal;\n}\n\n.lc-d30-basket-item__sub {\n  color: #333333;\n  text-align: right;\n  letter-spacing: normal;\n  font-family: HelveticaNeue-Light, "Helvetica Neue Light", "Helvetica Neue", Helvetica, Arial, "Lucida Grande", sans-serif;\n  font-size: 14px;\n  font-weight: bold;\n  font-stretch: normal;\n  font-style: normal;\n  line-height: normal;\n}\n\n.lc-d30-basket-item--passengers .lc-d30-basket-item__sub {\n  white-space: pre;\n}\n\n.lc-d30-basket-item__icon {\n  position: relative;\n  width: 38px;\n  height: 38px;\n  border-radius: 50%;\n  background-color: #d8d8d8;\n}\n\n.lc-d30-basket-item__icon svg {\n  position: absolute;\n  top: 50%;\n  left: 50%;\n  transform: translate(-50%, -50%);\n  display: block;\n  width: 24px;\n  height: 24px;\n  fill: #333333;\n}\n\n.lc-d30-basket-item__toggle {\n  transition: transform .2s ease-out;\n  transform: rotate(0deg);\n}\n\n.lc-d30-basket-item--expanded .lc-d30-basket-item__toggle {\n  transform: rotate(-180deg);\n}\n\n.lc-d30-basket-item__toggle svg {\n  display: block;\n  fill: #c60c30;\n}\n\n.lc-d30-basket-item--expanded .lc-d30-basket-item__body {\n  display: block;\n}\n\n.lc-d30-basket-item__body {\n  display: none;\n}\n\n.lc-d30-basket-item__content {\n  padding: 10px;\n}\n\n/* Basket - TnCs */\n\n.lc-d30-basket.ts-sc--is-empty .lc-d30-basket__footer {\n  padding: 0 10px 10px;\n}\n\n.lc-d30-basket:not(.ts-sc--is-empty) .tc-anchor-container {\n  display: none;\n}\n\n.lc-d30-basket:not(.ts-sc--is-empty) .lc-d30-basket__grand-total {\n  display: block !important;\n}\n\n.lc-d30-basket__grand-total br {\n  display: none;\n}\n\n.lc-d30-basket__grand-total .data-sb-total {\n  display: flex;\n  flex-direction: column;\n  justify-content: flex-end;\n}\n\n.lc-d30-basket__grand-total .data-sb-total > * {\n  float: none !important;\n  display: block;\n  width: 100%;\n  max-width: 100%;\n  text-align: right;\n  white-space: nowrap;\n}\n\n.lc-d30-basket .tc-anchor-container {\n  margin-bottom: 0;\n  padding: 0;\n}\n\n.lc-d30-basket .ts-fbr-booking-conditions-announce {\n  margin-bottom: 0;\n}\n\n.lc-d30-basket__fare-links.ts-sc__footer {\n  display: block;\n  background-color: #fff;\n}\n\n/* Basket links */\n\n.lc-d30-basket a {\n  text-decoration: underline;\n  color: #333333;\n}\n\n/* Flights */\n\n.lc-d30-basket-item--flights .ts-sc__title {\n  float: none;\n  width: 100%;\n  display: grid;\n  grid-template-columns: 1fr 100px;\n  font-family: HelveticaNeue-Light, "Helvetica Neue Light", "Helvetica Neue", Helvetica, Arial, "Lucida Grande", sans-serif;\n  font-size: 14px;\n}\n\n.lc-d30-basket-item--flights .ts-sc__title + strong {\n  display: block;\n  margin-top: -15px;\n  font-family: HelveticaNeue-Light, "Helvetica Neue Light", "Helvetica Neue", Helvetica, Arial, "Lucida Grande", sans-serif;\n  font-size: 16px;\n}\n\n.lc-d30-basket-item--flights .ts-sc__flght-dtls {\n  text-align: right;\n}\n\n.lc-d30-basket-item--flights .pYQ {\n  margin: 10px 0 15px;\n}\n\n.lc-d30-ts-sc__flights:after {\n  content: \'\';\n  display: table;\n  clear: both;\n}\n\n.lc-d30-basket-item--flights .ts-fs {\n  margin-right: 0;\n  width: 100%\n}\n\n.lc-d30-basket-item--flights .ts-fs:not(:last-child) {\n  margin-bottom: 20px;\n}\n\n/* Flight */\n\n.lc-d30-basket-item--flights .ts-fs {\n  border: 1px solid black;\n  border-radius: 5px;\n  color: #333333\n}\n\n.lc-d30-basket-item--flights .ts-fs.ts-fs--economy {\n  border-color: #1f5a2d;\n}\n.lc-d30-basket-item--flights .ts-fs.ts-fs--business {\n  border-color: #305291;\n}\n.lc-d30-basket-item--flights .ts-fs.ts-fs--first {\n  border-color: #b14242;\n}\n\n.lc-d30-basket-item--flights .ts-fs__date {\n  margin: 0 10px;\n  font-size: 12px;\n  font-weight: bold;\n}\n\n.lc-d30-basket-item--flights .ts-fs--economy .ts-fs__container,\n.lc-d30-basket-item--flights .ts-fs--business .ts-fs__container,\n.lc-d30-basket-item--flights .ts-fs--first .ts-fs__container {\n  background-color: #fff;\n  color: #333333;\n}\n\n.lc-d30-basket-item--flights .ts-fs__container::before {\n  content: \'\';\n  display: block;\n  margin: 0 10px;\n  border-top: 1px solid #d5d5d5;\n}\n\n.lc-d30-basket-item--flights .ts-fs__path:before,\n.lc-d30-basket-item--flights .ts-fs__path:after {\n  /* background-color: #666666; */\n  background-color: #bbb;\n}\n\n.lc-d30-basket-item--flights .ts-fs__time {\n  padding: 0 10px;\n}\n\n.lc-d30-basket-item--flights .ts-fs__time p {\n  color: #333333;\n  font-size: 12px;\n}\n\n.lc-d30-basket-item--flights .ts-fs__time time {\n  font-size: 15px;\n}\n\n.lc-d30-basket-item--flights .ts-fs .ts-fs__class {\n  margin: 0;\n  color: #fff;\n  text-align: center;\n}\n\n.lc-d30-basket-item--flights .ts-fs--economy .ts-fs__class {\n  background-color: #1f5a2d;\n}\n.lc-d30-basket-item--flights .ts-fs--business .ts-fs__class {\n  background-color: #305291;\n}\n.lc-d30-basket-item--flights .ts-fs--first .ts-fs__class {\n  background-color: #b14242;\n}\n\n/* Passengers */\n\n.lc-d30-passengers__list .ts-sc__item {\n  float: none;\n}\n\n.lc-d30-passengers__list .ts-sc__item:first-child {\n  margin-top: 0;\n}\n\n.lc-d30-passenger {\n  display: grid;\n  grid-gap: 4px;\n  grid-template-columns: 1fr auto;\n  grid-template-areas:\n    "main main"\n    "left right";\n}\n\n.lc-d30-passenger__name,\n.lc-d30-passenger > *:first-child {\n  grid-area: main;\n}\n\n.lc-d30-passenger__dob {\n  grid-area: left;\n}\n\n.lc-d30-passenger__ff,\n.lc-d30-passenger .ts-sc__skywards {\n  grid-area: right;\n  float: none;\n}\n\n.lc-d30-passenger .ts-sc__skywards span {\n  width: unset;\n  margin-left: 0;\n}\n\n.lc-d30-passenger__name,\n.lc-d30-passenger__ff,\n.lc-d30-passenger__dob,\n.lc-d30-passenger .ts-sc__skywards {\n  display: grid;\n  grid-auto-flow: column;\n  grid-gap: 2px;\n  justify-content: start;\n}\n\n/* Extras */\n\n.lc-d30-basket-item--extras .ts-sc__nsrnc {\n  display: block;\n  margin-bottom: 0;\n  background-color: unset;\n}\n\n.lc-d30-basket-item--extras .ts-sc__header {\n  padding:  0;\n}\n\n.lc-d30-basket-item--extras .ts-sc__ins_container,\n.lc-d30-basket-item--extras .ts-sc__title,\n.lc-d30-basket-item--extras .ts-sc__total {\n  margin: 0;\n}\n\n.lc-d30-basket-item--extras .ts-sc__title {\n  font-size: 14px;\n}\n\n.lc-d30-basket-item--extras [data-extra-id=""] + [data-extra-id]:not([data-extra-id=""]) {\n  margin-top: 13px;\n}\n\n/* LOWEST PRICE */\n\n.lc-d30-lowest-price .ts-lp {\n  margin: 0;\n  padding: 10px 12px 9px;\n  box-shadow: none;\n  background-color: transparent;\n}\n\n.lc-d30-lowest-price .ts-lp,\n.lc-d30-lowest-price .ts-lp * {\n  text-align: left;\n}\n\n.lc-d30-lowest-price__title {\n  display: grid;\n  grid-auto-flow: column;\n  justify-content: start;\n  grid-gap: 5px;\n}\n\n.lc-d30-lowest-price__title .ts-lp__title,\n.lc-d30-lowest-price__title .ts-lp__price {\n  margin: 0 0 4px;\n  font-size: 16px;\n  font-weight: 700;\n  line-height: 1;\n}\n\n.lc-d30-lowest-price__title .ts-lp__title {\n  color: #bc996e;\n}\n\n.lc-d30-lowest-price .ts-lowest-price {\n  margin: 0;\n}\n\n.lc-d30-lowest-price .ts-lowest-price .price br {\n  display: none;\n}\n\n/* Skywards */\n\n.lc-d30-skywards {\n  display: grid;\n  grid-gap: 0 10px;\n  grid-template-columns: auto 1fr;\n  grid-template-areas:\n    "checkbox title"\n    "checkbox text";\n  align-content: start;\n  color: #333333;\n  font-family: HelveticaNeue-Light, "Helvetica Neue Light", "Helvetica Neue", Helvetica, Arial, "Lucida Grande", sans-serif;\n  font-size: 12px;\n  font-weight: 300;\n}\n\n.lc-d30-skywards__checkbox {\n  grid-area: checkbox;\n  align-self: center;\n  cursor: pointer;\n}\n\n.lc-d30-skywards__title {\n  grid-area: title;\n  font-weight: 700;\n}\n\n.lc-d30-skywards__text {\n  grid-area: text;\n  font-size: 10px;\n}\n\n.lc-d30-skywards input {\n  display: none;\n}\n\n.lc-d30-skywards input:checked + label:before {\n  background: url(data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0idXRmLTgiPz4KPCFET0NUWVBFIHN2ZyBQVUJMSUMgIi0vL1czQy8vRFREIFNWRyAxLjEvL0VOIiAiaHR0cDovL3d3dy53My5vcmcvR3JhcGhpY3MvU1ZHLzEuMS9EVEQvc3ZnMTEuZHRkIj4KPHN2ZyB2ZXJzaW9uPSIxLjEiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIgeG1sbnM6eGxpbms9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkveGxpbmsiIHdpZHRoPSIxNiIgaGVpZ2h0PSIxNiIgdmlld0JveD0iMCAwIDE2IDE2Ij4KPHBhdGggZmlsbD0iI2Q3MjAyNyIgZD0iTTEzLjUgMmwtNy41IDcuNS0zLjUtMy41LTIuNSAyLjUgNiA2IDEwLTEweiI+PC9wYXRoPgo8L3N2Zz4K) no-repeat 50%;\n}\n\n.lc-d30-skywards input + label:before {\n  content: \'\';\n  display: block;\n  width: 24px;\n  height: 24px;\n  border: .1rem solid #666;\n  box-shadow: inset 0.4rem 0.4rem 0 0 #f6f6f6;\n  border-radius: .3rem;\n}\n\n/* Currency converter */\n\n.lc-d30-converter {\n  display: grid;\n  grid-auto-flow: column;\n  align-items: center;\n}\n\n.lc-d30-converter__icon {\n  margin-right: 5px;\n}\n\n.lc-d30-converter__icon svg {\n  display: block;\n  width: 40px;\n  height: 40px;\n}\n\n.lc-d30-converter__title {\n  font-family: HelveticaNeue-Light, "Helvetica Neue Light", "Helvetica Neue", Helvetica, Arial, "Lucida Grande", sans-serif;\n  font-size: 14px;\n  color: #333333;\n}\n\n.lc-d30-converter__select {\n  cursor: pointer;\n  text-decoration: underline;\n  font-weight: 700;\n}\n\n.lc-d30-converter__toggle {\n  transition: transform .2s ease-out;\n  transform: rotate(0deg);\n}\n\n.lc-d30-converter--enabled .lc-d30-converter__toggle {\n  transform: rotate(-180deg);\n}\n\n.lc-d30-converter__toggle svg {\n  display: block;\n  fill: #333333;\n}\n\n/* Utils */\n\n.lc-d30--hidden {\n  display: none !important;\n}\n',html:"",js:"(function(window, isDevMode) {\n  var _CNAME_ = 'lc-d30';\n  var _SNAME_ = 'variant-1';\n  var CONFIG = {\n    'variant-1': { selectFlightOptions: false, persistentBasket: true },\n    'variant-2': { selectFlightOptions: true, persistentBasket: true },\n  };\n  var ICONS = {\n    arrow: '<svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 24 24\" fill=\"black\" width=\"18px\" height=\"18px\"><path d=\"M0 0h24v24H0V0z\" fill=\"none\"/><path d=\"M7.41 8.59L12 13.17l4.59-4.58L18 10l-6 6-6-6 1.41-1.41z\"/></svg>',\n    account: '<svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 24 24\" fill=\"black\" width=\"18px\" height=\"18px\"><path d=\"M0 0h24v24H0V0z\" fill=\"none\"/><path d=\"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zM7.07 18.28c.43-.9 3.05-1.78 4.93-1.78s4.51.88 4.93 1.78C15.57 19.36 13.86 20 12 20s-3.57-.64-4.93-1.72zm11.29-1.45c-1.43-1.74-4.9-2.33-6.36-2.33s-4.93.59-6.36 2.33C4.62 15.49 4 13.82 4 12c0-4.41 3.59-8 8-8s8 3.59 8 8c0 1.82-.62 3.49-1.64 4.83zM12 6c-1.94 0-3.5 1.56-3.5 3.5S10.06 13 12 13s3.5-1.56 3.5-3.5S13.94 6 12 6zm0 5c-.83 0-1.5-.67-1.5-1.5S11.17 8 12 8s1.5.67 1.5 1.5S12.83 11 12 11z\"/></svg>',\n    currency: '<svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 24 24\" fill=\"black\" width=\"18px\" height=\"18px\"><path d=\"M0 0h24v24H0z\" fill=\"none\"/><path d=\"M11 17h2v-1h1c.55 0 1-.45 1-1v-3c0-.55-.45-1-1-1h-3v-1h4V8h-2V7h-2v1h-1c-.55 0-1 .45-1 1v3c0 .55.45 1 1 1h3v1H9v2h2v1zm9-13H4c-1.11 0-1.99.89-1.99 2L2 18c0 1.11.89 2 2 2h16c1.11 0 2-.89 2-2V6c0-1.11-.89-2-2-2zm0 14H4V6h16v12z\"/></svg>',\n    flight: '<svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 24 24\" fill=\"black\" width=\"18px\" height=\"18px\"><path d=\"M0 0h24v24H0z\" fill=\"none\"/><path d=\"M21 16v-2l-8-5V3.5c0-.83-.67-1.5-1.5-1.5S10 2.67 10 3.5V9l-8 5v2l8-2.5V19l-2 1.5V22l3.5-1 3.5 1v-1.5L13 19v-5.5l8 2.5z\"/></svg>',\n    work: '<svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 24 24\" fill=\"black\" width=\"18px\" height=\"18px\"><path d=\"M0 0h24v24H0V0z\" fill=\"none\"/><path d=\"M20 6h-4V4c0-1.11-.89-2-2-2h-4c-1.11 0-2 .89-2 2v2H4c-1.11 0-1.99.89-1.99 2L2 19c0 1.11.89 2 2 2h16c1.11 0 2-.89 2-2V8c0-1.11-.89-2-2-2zm-6 0h-4V4h4v2z\"/></svg>',\n  };\n  var safeLog = debug(_CNAME_)(_SNAME_);\n  var clearVariantHandlers = [];\n\n  safeLog.info();\n\n  try {\n    // variant code goes here\n    addQMIntegration();\n\n    if (!isDevMode) {\n      runVariant();\n    }\n\n    window.addEventListener(_CNAME_ + '-gen', runVariant);\n    window.addEventListener(_CNAME_ + '-clear', clearVariant);\n  } catch (err) {\n    safeLog.error(err);\n  }\n\n  function clearVariant() {\n    document.body.removeAttribute('data-' + _CNAME_);\n    clearVariantHandlers.forEach(function(fn) { fn(); });\n    clearVariantHandlers = [];\n  }\n\n  function runVariant() {\n    var options = CONFIG[_SNAME_];\n    safeLog.ok();\n    document.body.setAttribute('data-' + _CNAME_, _SNAME_);\n\n    if (isPricePage() && options.selectFlightOptions) {\n      waitFor(getSRPElems)\n        .then(function(params) {\n          var selectors = params[0];\n          var elems = params[1];\n\n          combineSelectFlightOptions(selectors, elems);\n          hidePageHeading();\n          updateLowestPrice();\n          if (!isSkywardsHidden()) {\n            updateSkywards();\n          }\n          updateCurrencyConverter();\n        })\n        .catch(function() {\n          safeLog.error('SRP default elements were not found on a page');\n        });\n    }\n\n    if (options.persistentBasket) {\n      onPageLoad(function() {\n        var sidebarEl = createSidebarEl();\n        var newBasketEl = changeBasket();\n        sidebarEl.appendChild(newBasketEl);\n      });\n    }\n  }\n\n  function getPageData() {\n    switch (true) {\n      case isPricePage(): return { pageName: 'price-page', contentEl: getFlightsContentEl() };\n      case isPassengerDetailsPage(): return { pageName: 'passenger-details-page', contentEl: getPassengersContentEl() };\n      case isExtrasPage(): return { pageName: 'extras-page', contentEl: getExtrasContentEl() };\n      default: return null;\n    }\n\n    function getFlightsContentEl() {\n      return document.querySelector('[data-ts-comp=\"FbrListContainer\"]');\n    }\n\n    function getPassengersContentEl() {\n      var wrapEl = document.createElement('div');\n      var headingEl = document.querySelector('.review-inner-header');\n      var contentElems = getNextUntil(headingEl, '.ts-pa');\n\n      if (!headingEl) return null;\n\n      headingEl.insertAdjacentElement('beforeBegin', wrapEl);\n      [headingEl].concat(contentElems).forEach(function(el) {\n        wrapEl.appendChild(el);\n      });\n\n      return wrapEl;\n    }\n\n    function getExtrasContentEl() {\n      var extrasEl = document.querySelector('#mainContainer + .ts-choose-extras');\n      var actionsEl = extrasEl && extrasEl.querySelector('.ts-pa');\n      var actionsContainerEl = actionsEl && actionsEl.closest('#mainContentAccess');\n      var benefitsEl = extrasEl && extrasEl.querySelector('[data-ts-comp=\"FlightBenefits\"]');\n      var benefitsContainerEl = benefitsEl && benefitsEl.closest('.ts-pgc');\n\n      if (extrasEl && actionsContainerEl) {\n        extrasEl.insertAdjacentElement('afterEnd', actionsContainerEl);\n      }\n\n      if (extrasEl && benefitsContainerEl) {\n        extrasEl.previousElementSibling.insertAdjacentElement('beforeEnd', benefitsContainerEl);\n      }\n\n      return extrasEl;\n    }\n  }\n\n  function createSidebarEl() {\n    var pageData = getPageData();\n    var contentEl = pageData.contentEl;\n    var gridEl = createEl('<div class=\"<%_CNAME_%>-grid <%_CNAME_%>-grid--<%pageName%>\"></div>', { pageName: pageData.pageName });\n    var rightSidebarEl = createEl('<div class=\"<%_CNAME_%>-grid__item <%_CNAME_%>-grid__item--right\"></div>');\n\n    if (!contentEl) {\n      safeLog.error('Content element was not found');\n      return null;\n    }\n\n    contentEl.classList.add(_CNAME_ + '-grid__item', _CNAME_ + '-grid__item--main');\n    contentEl.insertAdjacentElement('beforeBegin', gridEl);\n    gridEl.appendChild(contentEl);\n    gridEl.appendChild(rightSidebarEl);\n\n    clearVariantHandlers.push(function() {\n      contentEl.classList.remove(_CNAME_ + '-grid__item', _CNAME_ + '-grid__item--main');\n      gridEl.insertAdjacentElement('beforeBegin', contentEl);\n      gridEl.remove();\n    });\n\n    return rightSidebarEl;\n  }\n\n  function hidePageHeading() {\n    var pageTitleEl = document.querySelector('.ts-title');\n    var stepsEl = document.querySelector('.ts-pb');\n\n    pageTitleEl && pageTitleEl.classList.add(_CNAME_ + '--hidden');\n    stepsEl && stepsEl.parentNode.classList.add(_CNAME_ + '--hidden');\n\n    clearVariantHandlers.push(function() {\n      pageTitleEl && pageTitleEl.classList.remove(_CNAME_ + '--hidden');\n      stepsEl && stepsEl.parentNode.classList.remove(_CNAME_ + '--hidden');\n    });\n  }\n\n  // It's required to have elements in the order they appear on a page,\n  // and selectors in the order they need to appear in combined SRP element\n  function getSRPElems() {\n    var selectors = ['#LowestPriceContainer', (isSkywardsHidden() ? '' : '#dvPayMethodsContainer'), '#CCContainer'].filter(Boolean);\n    var elems = Array.from(document.querySelectorAll(selectors.join(', ')));\n\n    return (elems && elems.length) ? ([selectors, elems]) : null;\n  }\n\n  function combineSelectFlightOptions(selectors, elems) {\n    var srpEl = createEl('<div class=\"<%_CNAME_%>-srp\"></div>');\n    var prevEl = elems.filter(Boolean)[0].previousElementSibling;\n\n    clearVariantHandlers.push((function() {\n      var prevElems = elems.map(function(el) { return el.previousElementSibling; });\n      return function() {\n        elems.forEach(function(item, i) {\n          if (!prevElems[i]) {\n            safeLog.error('Default previous element was not found');\n            return;\n          }\n          prevElems[i].insertAdjacentElement('afterEnd', item);\n        });\n      };\n    })());\n\n    selectors.forEach(function(selector) {\n      var el = elems.find(function(item) { return item.matches(selector); });\n      var itemEl = createEl('<div></div>');\n      if (!el) return;\n      itemEl.appendChild(el);\n      srpEl.appendChild(itemEl);\n    });\n\n    if (prevEl) {\n      prevEl.insertAdjacentElement('afterEnd', srpEl);\n      clearVariantHandlers.push(function() {\n        srpEl.remove();\n      });\n    }\n\n    return srpEl;\n  }\n\n  function updateLowestPrice() {\n    var lowestPriceEl = document.getElementById('LowestPriceContainer');\n\n    if (!lowestPriceEl) {\n      safeLog.error('Lowest price element was not found, selector: #LowestPriceContainer');\n      return;\n    }\n\n    lowestPriceEl.classList.add(_CNAME_ + '-lowest-price');\n    changeLowestPriceTitle(lowestPriceEl);\n    changeLowestPriceText(lowestPriceEl);\n    clearVariantHandlers.push(function() {\n      lowestPriceEl.classList.remove(_CNAME_ + '-lowest-price');\n    });\n  }\n\n  function changeLowestPriceTitle(lowestPriceEl) {\n    var titleEl = lowestPriceEl.querySelector('.ts-lp__title');\n    var lowestPriceValueElems = lowestPriceEl.querySelectorAll('.ts-lp__price');\n    var containerEl = createEl('<div class=\"<%_CNAME_%>-lowest-price__title\"></div>');\n    var passengerCount = getPassengersCount() || 'all';\n    var elemToBeMoved = [titleEl].concat(Array.from(lowestPriceValueElems));\n\n    clearVariantHandlers.push((function() {\n      var prevElems = elemToBeMoved.map(function(el) { return el.previousElementSibling; });\n      var parentElems = elemToBeMoved.map(function(el) { return el.parentNode; });\n      var origTitleText = titleEl.textContent;\n\n      return function() {\n        elemToBeMoved.forEach(function(el, i) {\n          if (prevElems[i]) {\n            return prevElems[i].insertAdjacentElement('afterEnd', el);\n          }\n\n          return parentElems[i].insertAdjacentElement('afterBegin', el);\n        });\n        containerEl.remove();\n        titleEl.textContent = origTitleText;\n      };\n    })());\n\n    titleEl.insertAdjacentElement('beforebegin', containerEl);\n    elemToBeMoved.forEach(function(el) {\n      containerEl.appendChild(el);\n    });\n\n    titleEl.textContent = 'Lowest total price for '\n      + passengerCount + ' passenger' + getPassengersEnding(passengerCount);\n  }\n\n  function changeLowestPriceText(lowestPriceEl) {\n    var textEl = lowestPriceEl.querySelector('.ts-lp > p:last-of-type');\n    var copyEl = textEl.cloneNode(true);\n    var requiredText = textEl.textContent\n      .trim()\n      .replace(/^.+(include)/, '')\n      .replace(/( for ).*$/, '');\n\n    copyEl.textContent = 'Inclusive of' + requiredText + '.';\n    textEl.classList.add(_CNAME_ + '--hidden');\n    textEl.insertAdjacentElement('beforebegin', copyEl);\n\n    clearVariantHandlers.push(function() {\n      copyEl.remove();\n      textEl.classList.remove(_CNAME_ + '--hidden');\n    });\n  }\n\n  function updateSkywards() {\n    var skywardsEl = document.getElementById('dvPayMethodsContainer');\n\n    if (!skywardsEl) {\n      safeLog.ok('Skywards miles element is not available');\n      return;\n    }\n\n    var labelEl = skywardsEl.querySelector('.ts-checkbox label');\n    var inputEl = skywardsEl.querySelector('.ts-checkbox input');\n    var copyInputEl = inputEl.cloneNode(true);\n    var inputElHTML = (copyInputEl.removeAttribute('id'), copyInputEl.outerHTML);\n\n    /* eslint-disable indent */\n    var newSkywardsEl = createEl([\n      '<div class=\"<%_CNAME_%>-skywards\">',\n        inputElHTML,\n        '<label for=\"<%for%>\" class=\"<%_CNAME_%>-skywards__checkbox\"></label>',\n        '<p class=\"<%_CNAME_%>-skywards__title\"><%title%></p>',\n        '<p class=\"<%_CNAME_%>-skywards__text\"><%text%></p>',\n      '</div>'\n    ].join(''), {\n      title: 'Use my Classic rewards',\n      text: '(you have ' + getUserSkywardsMiles() + ' skyward miles)',\n      for: labelEl && labelEl.getAttribute('for') || 'rbPMMiles',\n    });\n    /* eslint-enable indent */\n    var newLabelEl = newSkywardsEl.querySelector('label');\n    var newInputEl = newSkywardsEl.querySelector('input');\n\n    // trigger update for variant element\n    newLabelEl.addEventListener('click', function() {\n      setTimeout(function() {\n        newInputEl.checked = inputEl.checked;\n      }, 0);\n    });\n    skywardsEl.classList.add(_CNAME_ + '--hidden');\n    skywardsEl.insertAdjacentElement('beforeBegin', newSkywardsEl);\n    clearVariantHandlers.push(function() {\n      skywardsEl.classList.remove(_CNAME_ + '--hidden');\n      newSkywardsEl.remove();\n    });\n  }\n\n  function updateCurrencyConverter() {\n    var ccEl = document.getElementById('CCContainer');\n    var ccSelectEl = ccEl && ccEl.querySelector('.ts-sf');\n    var ccInputEl = ccSelectEl && ccSelectEl.querySelector('.ts-sf input');\n\n    if (!ccEl) {\n      safeLog.error('Currency conversion element was not found');\n      return;\n    }\n\n    var lcConverter = new CurrencyConverter({\n      iconHTML: ICONS.currency,\n      title: 'You are viewing totals in',\n      currencyCode: getValue(),\n      onClick: function(isEnabled) {\n        if (isEnabled) {\n          lcConverter.disable();\n          return;\n        }\n\n        setTimeout(function() {\n          lcConverter.enable();\n          ccInputEl.dispatchEvent(new UIEvent('focus'));\n        }, 0);\n      },\n    });\n\n    onCurConversion(function() {\n      lcConverter.disable();\n      lcConverter.update(getValue());\n    }, false);\n\n    observe(ccSelectEl, function() {\n      if (ccSelectEl.classList.contains('ts-sf--opened')) return;\n      lcConverter.disable();\n    });\n\n    ccEl.insertAdjacentElement('beforeBegin', lcConverter.el);\n\n    function getValue() {\n      // currency conversion applied\n      if (ccInputEl.value) {\n        var curCode = ccInputEl.value.match(/\\((.*?)\\)/);\n        return curCode && curCode[1] || ccInputEl.value;\n      }\n\n      // default page currency\n      var ccTextEl = ccEl.querySelector('#ltViewPricesIn strong');\n      return ccTextEl.textContent.trim();\n    }\n  }\n\n  function changeBasket() {\n    var BASKET_SECTIONS = [\n      {\n        iconHTML: ICONS.flight,\n        key: 'flights',\n        title: 'Flights',\n        getContentEl: getBasketFlightsContentEl,\n        getTotalsEl: getBasketFlightsTotalsEl,\n        pages: [isPricePage, isPassengerDetailsPage, isExtrasPage],\n        expanded: isPricePage(),\n      },\n      {\n        iconHTML: ICONS.account,\n        key: 'passengers',\n        title: 'Passengers',\n        getContentEl: getBasketPassengersContentEl,\n        getTotalsEl: getBasketPassengersTotalsEl,\n        pages: [isPassengerDetailsPage, isExtrasPage],\n        expanded: isPassengerDetailsPage(),\n      },\n      {\n        iconHTML: ICONS.work,\n        key: 'extras',\n        title: 'Extras',\n        getContentEl: getBasketExtrasContentEl,\n        getTotalsEl: getBasketExtrasTotalsEl,\n        pages: [isExtrasPage],\n        expanded: isExtrasPage(),\n      },\n    ];\n\n    var lcBasket = new BasketWidget();\n    var lcSections = BASKET_SECTIONS\n      .filter(function(section) {\n        return section.pages.some(function(pageCheck) {\n          return pageCheck();\n        });\n      })\n      .map(function(item) {\n        return new Section(item);\n      });\n    var lcSectionsEl = document.createDocumentFragment();\n\n    lcSections.forEach(function(section) {\n      lcSectionsEl.appendChild(section.el);\n    });\n\n    lcBasket.setEmptyState(isPricePage());\n    lcBasket.setContent(lcSectionsEl);\n\n    if (isPricePage()) {\n      waitFor(function() {\n        return window.$ && window.$.fn && window.$.subscribe;\n      }).then(function() {\n        window.$.subscribe('fbr:fare:selected', handleFlightSelect);\n        clearVariantHandlers.push(function() {\n          window.$.unsubscribe(['fbr:fare:selected', handleFlightSelect]);\n        });\n\n        function handleFlightSelect() {\n          lcBasket.setEmptyState(false);\n          lcSections[0].triggerUpdate();\n        }\n      }).catch(function(err) {\n        safeLog.error(err);\n      });\n    }\n\n    // if (isPassengerDetailsPage()) {\n    //   // passenger page dynamic fields update is resolved within fields themselves\n    // }\n\n    if (isExtrasPage()) {\n      waitFor(function() {\n        return window.$ && window.$.fn && window.$.subscribe;\n      }).then(function() {\n        window.$.subscribe('sc:extra:added', lcSections[2].triggerUpdate);\n        window.$.subscribe('sc:extra:updated', lcSections[2].triggerUpdate);\n        window.$.subscribe('sc:extra:removed', lcSections[2].triggerUpdate);\n\n        // Insurance seems to be disabled in default atm\n        // window.$.subscribe('sc:insurance:added', lcSections[2].triggerUpdate);\n        // window.$.subscribe('sc:insurance:removed', lcSections[2].triggerUpdate);\n        // window.$.subscribe('sc:insurance:updated', lcSections[2].triggerUpdate);\n      }).catch(function(err) {\n        safeLog.error(err);\n      });\n    }\n\n    return lcBasket.el;\n  }\n\n  /* Classes */\n\n  function BasketWidget() {\n    var defaultBasketEl = getBasketEl();\n    var contentEl = null;\n\n    this.el = createBasket();\n    this.setContent = setContent.bind(this);\n    this.setEmptyState = setEmptyState.bind(this);\n\n    function createBasket() {\n      var newBasketEl = createEl([\n        '<div class=\"<%_CNAME_%>-basket ts-sc ts-sc--is-empty\">',\n        '<div class=\"<%_CNAME_%>-basket__header\"></div>',\n        '<div class=\"<%_CNAME_%>-basket__content\"></div>',\n        '<div class=\"<%_CNAME_%>-basket__empty-state\"></div>',\n        '<div class=\"<%_CNAME_%>-basket__footer\"></div>',\n        '</div>'\n      ].join(''));\n\n      contentEl = newBasketEl.querySelector('.' + _CNAME_ + '-basket__content');\n\n      if (!defaultBasketEl) {\n        safeLog.error('Basket element was not found, selector: [data-ts-comp=\"ShoppingCart\"]');\n      }\n\n      addChangeSearch();\n      addEmptyState();\n      addFareLinks();\n      addTnc();\n\n      if (isPricePage()) {\n        onPageLoad(addGrandTotal);\n      } else {\n        addGrandTotal();\n      }\n\n      // setTimeout(updateHeight, 0);\n      // window.addEventListener('resize', updateHeight);\n\n      return newBasketEl;\n\n      // function updateHeight() {\n      //   var size = newBasketEl.getBoundingClientRect();\n      //   // var height = window.innerHeight - size.top - window.scrollY;\n      //   var height = window.innerHeight - size.top;\n      //   newBasketEl.style.height = height + 'px';\n      // }\n\n      function addChangeSearch() {\n        var changeSearchEl = defaultBasketEl && defaultBasketEl.querySelector('.ts-sc__left');\n        var titleEl = changeSearchEl && changeSearchEl.querySelector('.ts-sc__label-search');\n\n        if (!changeSearchEl) {\n          safeLog.error('Change search element was not found');\n          return;\n        }\n\n        changeSearchEl.classList.add(_CNAME_ + '-search');\n        newBasketEl.querySelector('.' + _CNAME_ + '-basket__header').appendChild(changeSearchEl);\n\n        titleEl.innerHTML = titleEl.innerHTML.replace(\n          new RegExp(titleEl.dataset.i18n, \"gm\"), // eslint-disable-line quotes\n          '<span>' + titleEl.dataset.i18n + '</span>');\n      }\n\n      function addTnc() {\n        var tncEl = document.querySelector('.tc-anchor-container');\n        if (tncEl) {\n          clearVariantHandlers.push((function() {\n            var defaultNextEl = tncEl.nextElementSibling;\n            return function() {\n              defaultNextEl.insertAdjacentElement('beforeBegin', tncEl);\n            };\n          })());\n          newBasketEl.querySelector('.' + _CNAME_ + '-basket__footer').appendChild(tncEl);\n        }\n      }\n\n      function addFareLinks() {\n        var fareLinksEl = defaultBasketEl && defaultBasketEl.querySelector('.ts-sc__footer');\n        if (fareLinksEl) {\n          var tncLink = fareLinksEl.querySelector('.SB-TC-block');\n\n          fareLinksEl.classList.add(_CNAME_ + '-basket__fare-links');\n          fareLinksEl.insertAdjacentElement('beforeEnd', tncLink);\n          newBasketEl.querySelector('.' + _CNAME_ + '-basket__footer').appendChild(fareLinksEl);\n        }\n      }\n\n      function addGrandTotal() {\n        var grandTotalEl = defaultBasketEl && defaultBasketEl.querySelector('.ts-sc__grnd-ttl');\n        if (grandTotalEl) {\n          grandTotalEl.classList.add(_CNAME_ + '-basket__grand-total');\n          newBasketEl.querySelector('.' + _CNAME_ + '-basket__footer').appendChild(grandTotalEl);\n        }\n      }\n\n      function addEmptyState() {\n        var emptyStateEl = defaultBasketEl && defaultBasketEl.querySelector('.ts-sc__empty');\n        if (emptyStateEl) {\n          newBasketEl.querySelector('.' + _CNAME_ + '-basket__empty-state').appendChild(emptyStateEl);\n        }\n      }\n    }\n\n    function setEmptyState(isEmpty) {\n      if (isEmpty) {\n        this.el.classList.add('ts-sc--is-empty');\n      } else {\n        this.el.classList.remove('ts-sc--is-empty');\n      }\n    }\n\n    function setContent(el) {\n      contentEl.innerHTML = '';\n      contentEl.appendChild(el);\n    }\n  }\n\n  function Section(params) {\n    var options = params || {};\n\n    this.el = create();\n    this.triggerUpdate = update.bind(this);\n    this.triggerUpdate();\n\n    function update() {\n      var sectionSubEl = this.el.querySelector('.' + _CNAME_ + '-basket-item__sub');\n      var sectionContentEl = this.el.querySelector('.' + _CNAME_ + '-basket-item__content');\n      var totalsEl = options.getTotalsEl();\n      var contentEl = options.getContentEl();\n\n      safeLog.info(options.key, 'updated');\n\n      sectionSubEl.innerHTML = '';\n      sectionSubEl.appendChild(totalsEl);\n\n      sectionContentEl.innerHTML = '';\n      sectionContentEl.appendChild(contentEl);\n    }\n\n    function create() {\n      /* eslint-disable indent */\n      var html = [\n        '<div class=\"<%_CNAME_%>-basket-item <%_CNAME_%>-basket-item--<%key%>\">',\n          '<div class=\"<%_CNAME_%>-basket-item__header toggle\">',\n            '<span class=\"<%_CNAME_%>-basket-item__icon\"><%icon%></span>',\n            '<span class=\"<%_CNAME_%>-basket-item__title\"><%title%></span>',\n            '<span class=\"<%_CNAME_%>-basket-item__sub\"></span>',\n            '<span class=\"<%_CNAME_%>-basket-item__toggle\">',\n              ICONS.arrow,\n            '</span>',\n          '</div>',\n          '<div class=\"<%_CNAME_%>-basket-item__body\">',\n            '<div class=\"<%_CNAME_%>-basket-item__content\"></div>',\n          '</div>',\n        '</div>'\n      ].join('');\n      /* eslint-enable indent */\n\n      var sectionEl = createEl(html, {\n        icon: options.iconHTML,\n        title: options.title,\n        key: options.key,\n      });\n      var sectionToggleEl = sectionEl.querySelector('.toggle');\n\n      sectionToggleEl.addEventListener('click', function() {\n        sectionEl.classList.toggle(_CNAME_ + '-basket-item--expanded');\n      });\n\n      if (options.expanded) {\n        sectionEl.classList.add(_CNAME_ + '-basket-item--expanded');\n      }\n\n      return sectionEl;\n    }\n  }\n\n  function CurrencyConverter(options) {\n    var attrs = options || {};\n    this.el = null;\n    this.currencyEl = null;\n    this.update = update.bind(this);\n    this.enable = enable.bind(this);\n    this.disable = disable.bind(this);\n\n    create.apply(this);\n\n    function create() {\n      var el = createEl([\n        /* eslint-disable indent */\n        '<div class=\"<%_CNAME_%>-converter\">',\n          '<span class=\"<%_CNAME_%>-converter__icon\"><%iconHTML%></span>',\n          '<p class=\"<%_CNAME_%>-converter__title\">',\n            '<%title%> ',\n            '<span class=\"<%_CNAME_%>-converter__select\"><%currencyCode%></span>',\n          '</p>',\n          '<span class=\"<%_CNAME_%>-converter__toggle\">',\n            ICONS.arrow,\n          '</span>',\n        '</div>'\n        /* eslint-enable indent */\n      ].join(''), {\n        iconHTML: attrs.iconHTML || '',\n        title: attrs.title || '',\n        currencyCode: attrs.currencyCode || '',\n      });\n      var currencyEl = el.querySelector('.' + _CNAME_ + '-converter__select');\n\n      currencyEl.addEventListener('click', function() {\n        var isEnabled = el.classList.contains(el.classList[0] + '--enabled');\n        options.onClick && options.onClick(isEnabled);\n      });\n\n      this.el = el;\n      this.currencyEl = currencyEl;\n\n      return el;\n    }\n\n    function update(currencyCode) {\n      this.currencyEl.textContent = currencyCode;\n    }\n\n    function enable() {\n      this.el.classList.add(this.el.classList[0] + '--enabled');\n    }\n\n    function disable() {\n      this.el.classList.remove(this.el.classList[0] + '--enabled');\n    }\n  }\n\n  function getBasketEl() {\n    return document.querySelector('[data-ts-comp=\"ShoppingCart\"]');\n  }\n\n  function getBasketFlightsContentEl() {\n    var containerEl = document.createDocumentFragment();\n    var titleEl = document.querySelector('.ts-sc__box .ts-sc__title').cloneNode(true);\n    var totalEl = getBasketFlightsTotalsEl();\n    var conditionsEl = document.querySelector('.pYQ').cloneNode(true);\n    var flightsEl = document.querySelector('.ts-sc__flights').cloneNode(true);\n    var imgElems = flightsEl.querySelectorAll('.ts-fs__path img');\n    var defaultFlightDetailsLink = document.querySelector('.ts-sc__box .ts-sc__flght-dtls');\n    var cloneFlightDetailsLink = titleEl.querySelector('.ts-sc__flght-dtls');\n\n    flightsEl.className = _CNAME_ + '-ts-sc__flights'; // prevent internal validation confusion\n\n    imgElems.forEach(function(imgEl) {\n      imgEl.src = 'https://fly10.ek.aero/Images/farebrand_refresh/flight@2x.png';\n    });\n\n    cloneFlightDetailsLink.addEventListener('click', function(e) {\n      e.preventDefault();\n      defaultFlightDetailsLink.click();\n    });\n\n    [titleEl, totalEl, conditionsEl, flightsEl].forEach(function(copyEl) {\n      containerEl.appendChild(copyEl);\n    });\n\n    return containerEl;\n  }\n\n  function getBasketFlightsTotalsEl() {\n    var el = document.querySelector('.sbox-flight-total strong');\n    var copyEl = el && el.cloneNode(true);\n\n    if (isPricePage() || !copyEl.textContent.trim()) {\n      observe(el, function(mutations, observer) {\n        if (!copyEl.parentNode) {\n          observer.disconnect();\n          return;\n        }\n\n        if (copyEl.textContent !== el.textContent) {\n          copyEl.textContent = el.textContent;\n        }\n      });\n    }\n\n    return copyEl;\n  }\n\n  function getBasketExtrasContentEl() {\n    var el = document.querySelector('.ts-sc__extras');\n\n    if (!el) {\n      safeLog.error('Extras element was not found');\n      return null;\n    }\n\n    var copyEl = el.cloneNode(true);\n    var seatsEl = copyEl.querySelector('.extra-seat-container');\n    var titleEl = copyEl.querySelector('.ts-sc__title strong');\n    var totalEl = copyEl.querySelector('.ts-sc__total');\n    var totalValueEl = copyEl.querySelector('.ts-sc__total .trip-extra-total');\n    var origRemoveElems = el.querySelectorAll('[data-extra-id] a');\n    var copyRemoveElems = copyEl.querySelectorAll('[data-extra-id] a');\n\n    totalEl.innerHTML = '';\n    totalEl.appendChild(totalValueEl);\n    titleEl.textContent = 'Extras:';\n    seatsEl.classList.remove('extra-seat-container');\n\n    copyRemoveElems.forEach(function(copyRemoveEl, i) {\n      copyRemoveEl.classList.add(_CNAME_ + '-remove-extra');\n      copyRemoveEl.addEventListener('click', function(e) {\n        e.preventDefault();\n        origRemoveElems[i].click();\n      });\n    });\n\n    return copyEl;\n  }\n\n  function getBasketExtrasTotalsEl() {\n    var el = document.querySelector('.ts-sc__extras .trip-extra-total');\n    var copyEl = el && el.cloneNode(true);\n\n    if (!copyEl) {\n      safeLog.error('Extras basket element was not found');\n      return null;\n    }\n\n    return copyEl;\n  }\n\n  function getBasketPassengersTotalsEl() {\n    var passengersCountEl = document.querySelector('.ts-sc__passengers > div:first-child > strong:last-of-type');\n    var copyEl = passengersCountEl && passengersCountEl.cloneNode(true);\n\n    if (copyEl) {\n      copyEl.textContent = copyEl.textContent.replace(/,/gm, ',\\n');\n      return copyEl;\n    }\n\n    var text = ['Adults', 'Children', 'Infants', 'Teenagers']\n      .map(function(group) {\n        var count = Number(getDLProp('numberOf' + group + 'Flight'));\n        var slug = count === 1 ? getSingular(group) : group;\n        return count ? (count + ' ' + slug) : null;\n      })\n      .filter(Boolean)\n      .join(',\\n');\n\n    return createEl('<strong><%passengers%></strong>', { passengers: text });\n\n    function getSingular(plural) {\n      if ((/s$/gm).test(plural)) {\n        return plural.substr(0, plural.length - 1);\n      }\n\n      if (plural === 'Children') {\n        return 'Child';\n      }\n\n      return plural;\n    }\n  }\n\n  function getBasketPassengersContentEl() {\n    var containerEl = document.createDocumentFragment();\n    var listEl = createEl('<div class=\"<%_CNAME_%>-passengers__list\"></div>');\n    var defaultPassengerElems = document.querySelectorAll('.ts-sc__passengers .ts-sc__item');\n    var defaultEditDetailsLink = document.querySelector('.ts-sc__passengers > div:first-child > a');\n    var cloneEditDetailsLink = defaultEditDetailsLink && defaultEditDetailsLink.cloneNode(true);\n    var passengerElems = null;\n\n    if (isPassengerDetailsPage()) {\n      var passengersCount = Number(getDLProp('passengerCount') || 0);\n      passengerElems = Array.from(Array(passengersCount)).map(createPassengerEl);\n    } else {\n      passengerElems = Array.from(defaultPassengerElems).map(adjustPassengerEl);\n    }\n\n    passengerElems.forEach(function(el) {\n      listEl.appendChild(el);\n    });\n\n    containerEl.appendChild(listEl);\n\n    if (isExtrasPage() && cloneEditDetailsLink) {\n      cloneEditDetailsLink.classList.add(_CNAME_ + '-edit-passengers'); // for metric\n      cloneEditDetailsLink.addEventListener('click', function(e) {\n        e.preventDefault();\n        defaultEditDetailsLink.click();\n      });\n      containerEl.appendChild(cloneEditDetailsLink);\n    }\n\n    return containerEl;\n  }\n\n  function adjustPassengerEl(el, i) {\n    var passengerEl = el.cloneNode(true);\n    var passengerDetail = restorePassengerDetail(i);\n    var nameEl = createEl('<span class=\"<%_CNAME_%>-passenger__name\"></span>');\n    var dobEl = createEl('<span class=\"<%_CNAME_%>-passenger__dob\"></span>');\n    var ffEl = passengerEl.querySelector('.ts-sc__skywards');\n\n    nameEl.textContent = passengerEl.firstChild.textContent;\n    passengerEl.removeChild(passengerEl.firstChild);\n\n    Object.keys(passengerDetail)\n      .filter(function(key) {\n        return ['day', 'month', 'year'].indexOf(key) !== -1;\n      })\n      .forEach(function(key) {\n        dobEl.appendChild(createEl('<span><%value%></span>', { value: passengerDetail[key] }));\n      });\n\n    if (passengerDetail.ffCode && ffEl) {\n      var ffCodeEl = createEl('<span><%ffCode%></span>', { ffCode: passengerDetail.ffCode });\n      ffEl.insertAdjacentElement('afterBegin', ffCodeEl);\n    }\n\n    passengerEl.classList.add(_CNAME_ + '-passenger');\n    passengerEl.insertAdjacentElement('afterBegin', nameEl);\n    passengerEl.insertAdjacentElement('beforeEnd', dobEl);\n\n    return passengerEl;\n  }\n\n  function createPassengerEl(passenger, i) {\n    var contentPassengerEl = document.querySelector('[id*=\"Pax' + (i + 1) + '\"][id*=\"paxdiv\"]');\n    var useAccountInfoEl = (contentPassengerEl || document).querySelector('input[id*=\"Pax' + (i + 1) + '\"][class*=\"ts-autofill-checkbox\"]');\n    var basketPassengerEl = createEl('<div class=\"<%_CNAME_%>-passenger ts-sc__item\" paxid=\"<%id%>\"></div>', { id: i + 1 });\n\n    // Passenger Name\n    var nameEl = createEl('<span class=\"<%_CNAME_%>-passenger__name\"></span>');\n    var firstNameEl = createInputField(contentPassengerEl, 'input[id*=\"Pax' + (i + 1) + '\"][class*=\"first-name\"]', 'Passenger Name');\n    var lastNameEl = createInputField(contentPassengerEl, 'input[id*=\"Pax' + (i + 1) + '\"][class*=\"last-name\"]', '');\n\n    if (firstNameEl && lastNameEl) {\n      nameEl.appendChild(firstNameEl);\n      nameEl.appendChild(lastNameEl);\n\n      firstNameEl.onUpdate(function() { lastNameEl.update(); });\n      lastNameEl.onUpdate(function() { firstNameEl.update(); });\n    }\n\n    // Passenger Frequent Flyer Program\n    var ffEl = createEl('<span class=\"<%_CNAME_%>-passenger__ff\"></span>');\n    var ffNoEl = createInputField(contentPassengerEl, 'input[id*=\"Pax' + (i + 1) + '\"][id*=\"FFNo\"]', '');\n    var ffCodeEl = createSelectField(\n      contentPassengerEl,\n      '.ts-ffb .custom-select-box select[id*=\"Pax' + (i + 1) + '\"]',\n      '.ts-ffb .custom-select-box .chosen-single'\n    );\n\n    if (ffCodeEl && ffNoEl) {\n      ffEl.appendChild(ffCodeEl);\n      ffEl.appendChild(ffNoEl);\n\n      storePassengerDetail(i, 'ffCode', ffCodeEl.textContent);\n      ffCodeEl.onUpdate(function(value) {\n        storePassengerDetail(i, 'ffCode', value);\n      });\n    }\n\n    // Passenger DOB\n    var dobEl = createEl('<span class=\"<%_CNAME_%>-passenger__dob\"></span>');\n    var dobDayEl = createSelectField(\n      contentPassengerEl,\n      '.birthdate-holder .custom-select-box:nth-of-type(1) select[id*=\"Pax' + (i + 1) + '\"][class*=\"birthday-dropdown\"]',\n      '.birthdate-holder .custom-select-box:nth-of-type(1) .chosen-single'\n    );\n    var dobMonthEl = createSelectField(\n      contentPassengerEl,\n      '.birthdate-holder .custom-select-box:nth-of-type(2) select[id*=\"Pax' + (i + 1) + '\"][class*=\"birthday-dropdown\"]',\n      '.birthdate-holder .custom-select-box:nth-of-type(2) .chosen-single',\n      true\n    );\n    var dobYearEl = createSelectField(\n      contentPassengerEl,\n      '.birthdate-holder .custom-select-box:nth-of-type(3) select[id*=\"Pax' + (i + 1) + '\"][class*=\"birthday-dropdown\"]',\n      '.birthdate-holder .custom-select-box:nth-of-type(3) .chosen-single'\n    );\n\n    if (dobDayEl && dobMonthEl && dobYearEl) {\n      dobEl.appendChild(dobDayEl);\n      dobEl.appendChild(dobMonthEl);\n      dobEl.appendChild(dobYearEl);\n\n      [\n        { key: 'day', el: dobDayEl },\n        { key: 'month', el: dobMonthEl },\n        { key: 'year', el: dobYearEl },\n      ].forEach(function(field) {\n        storePassengerDetail(i, field.key, field.el.textContent);\n        field.el.onUpdate(function(value) {\n          storePassengerDetail(i, field.key, value);\n        });\n      });\n    }\n\n    // Use Emirates Skywards account info\n    if (useAccountInfoEl) {\n      useAccountInfoEl.addEventListener('change', function() {\n        firstNameEl && firstNameEl.update();\n        lastNameEl && lastNameEl.update();\n        ffNoEl && ffNoEl.update();\n      });\n    }\n\n    basketPassengerEl.appendChild(nameEl);\n    basketPassengerEl.appendChild(ffEl);\n    basketPassengerEl.appendChild(dobEl);\n\n    return basketPassengerEl;\n  }\n\n  function createSelectField(parentEl, inputSelector, fieldSelector, shouldTakeLabel) {\n    var fieldEl = document.createElement('span');\n    var inputEl = (parentEl || document).querySelector(inputSelector);\n    var defaultFieldEl = (parentEl || document).querySelector(fieldSelector);\n    var defaultFieldSelectionEl = defaultFieldEl && defaultFieldEl.querySelector('span');\n    var updateHandlers = [];\n\n    if (!inputEl || !defaultFieldEl) {\n      safeLog.error('input not found');\n      return null;\n    }\n\n    updateValue();\n    observe(defaultFieldEl, function() {\n      var value = getValue();\n      updateValue();\n      updateHandlers.forEach(function(fn) { fn(value); });\n    }, { childList: true, subtree: true });\n    fieldEl.onUpdate = function(fn) {\n      updateHandlers.push(fn);\n    };\n\n    return fieldEl;\n\n    function updateValue() {\n      fieldEl.textContent = getValue();\n    }\n\n    function getValue() {\n      if (shouldTakeLabel) {\n        return defaultFieldSelectionEl && defaultFieldSelectionEl.textContent || '';\n      }\n\n      if (inputEl.value === '0' || inputEl.value === 'none') {\n        return '';\n      }\n\n      return inputEl.value;\n    }\n  }\n\n  function createInputField(parentEl, inputSelector, initialValue) {\n    var fieldEl = document.createElement('span');\n    var inputEl = (parentEl || document).querySelector(inputSelector);\n    var updateHandlers = [];\n\n    if (!inputEl) {\n      safeLog.error('input not found');\n      return null;\n    }\n\n    updateValue(initialValue);\n    inputEl.addEventListener('change', function() {\n      setTimeout(updateValue, 0);\n      updateHandlers.forEach(function(fn) { fn(inputEl.value); });\n    });\n    fieldEl.update = updateValue;\n    fieldEl.onUpdate = function(fn) {\n      updateHandlers.push(fn);\n    };\n\n    return fieldEl;\n\n    function updateValue(text) {\n      fieldEl.textContent = inputEl.value || text;\n    }\n  }\n\n  function onCurConversion(cb, runOnInit) {\n    waitFor(function() {\n      return document.querySelector('.summary-converted-curr-container');\n    })\n      .then(function(curConvertedEl) {\n        if (runOnInit) {\n          cb();\n        }\n\n        observe(curConvertedEl, function() {\n          cb();\n        });\n      })\n      .catch(function() {\n        safeLog.error('Converted currency element was not found');\n      });\n  }\n\n  function getPassengersCount() {\n    var passengersCountEl = document.querySelector('.passengerSummary');\n    var passengersCountText = passengersCountEl && passengersCountEl.textContent || '';\n\n    return passengersCountText.match(/\\d+/)[0] || getDLProp('passengerCountFlight');\n  }\n\n  function getPassengersEnding(passengerCount) {\n    return parseInt(passengerCount, 10) === 1 ? '' : 's';\n  }\n\n  function getUserSkywardsMiles() {\n    var milesEl = document.querySelector('.skywards-user-miles-title');\n    return milesEl && milesEl.textContent.trim() || 0;\n  }\n\n  /* Checks */\n  function isSkywardsHidden() {\n    var skywardsEl = document.getElementById('dvPayMethodsContainer');\n    var skywardsContentEl = skywardsEl && skywardsEl.querySelector('#dvPayMethodsContainer .ts-rsm');\n    return !skywardsContentEl || isHidden(skywardsContentEl);\n  }\n\n  function isHidden(el) {\n    // https://developer.mozilla.org/en-US/docs/Web/API/HTMLElement/offsetParent\n    return el.offsetParent === null;\n  }\n\n  function isPricePage() {\n    return (/select a price/gi).test(getDLProp('pageName'));\n  }\n\n  function isPassengerDetailsPage() {\n    return (/enter passenger details/gi).test(getDLProp('pageName'));\n  }\n\n  function isExtrasPage() {\n    return (/choose extras/gi).test(getDLProp('pageName'));\n  }\n\n  function storePassengerDetail(passengerIndex, key, value) {\n    var data = restore('passengers') || [];\n    data[passengerIndex] = data[passengerIndex] || {};\n    data[passengerIndex][key] = value;\n    store('passengers', data);\n  }\n\n  function restorePassengerDetail(passengerIndex) {\n    var data = restore('passengers') || [];\n    return data[passengerIndex] ? data[passengerIndex] : {};\n  }\n\n  /* Utils */\n\n  function store(key, value) {\n    try {\n      window.sessionStorage.setItem(_CNAME_ + '-' + key, JSON.stringify(value));\n    } catch (err) {\n      safeLog.error('Session storage error:', err);\n    }\n  }\n\n  function restore(key) {\n    try {\n      var data = window.sessionStorage.getItem(_CNAME_ + '-' + key);\n      return data ? JSON.parse(data) : null;\n    } catch (err) {\n      safeLog.error('Session storage error:', err);\n    }\n    return null;\n  }\n\n  function getNextUntil(el, selector) {\n    var items = [];\n\n    return (function getNext(elem) {\n      var nextEl = elem && elem.nextElementSibling;\n\n      if (!elem || !nextEl) return items;\n\n      if (selector && nextEl.matches(selector)) {\n        return items;\n      }\n\n      items.push(nextEl);\n      return getNext(nextEl);\n    })(el);\n  }\n\n  function getDLProp(key, recent) {\n    var matches = (window.dataLayer || []).filter(function(chunk) {\n      return !!chunk[key];\n    });\n    var dataIndex = recent ? (matches.length - 1) : 0;\n\n    return dataIndex !== -1 ? (matches[dataIndex] || {})[key] : null;\n  }\n\n  function createEl(html, params) {\n    var container = document.createElement('div');\n    container.innerHTML = tmpl(html, params);\n    return container.firstElementChild;\n  }\n\n  function tmpl(template, obj) {\n    var params = Object.assign({}, obj, {\n      _CNAME_: _CNAME_,\n    });\n    var newHtml = Object.keys(params).reduce(function(acc, key) {\n      return acc.replace(new RegExp(\"<%\" + key + \"%>\", \"g\"), params[key]); // eslint-disable-line quotes\n    }, template);\n\n    return newHtml;\n  }\n\n  function addQMIntegration() {\n    document.body.classList.add(_CNAME_ + '--' + _SNAME_);\n  }\n\n  function observe(targetNode, callback, attrs) {\n    if (!targetNode || !callback) return null;\n    var config = attrs || { attributes: true, childList: true, subtree: true };\n    var observer = new MutationObserver(callback);\n    observer.observe(targetNode, config);\n    return observer;\n  }\n\n  function waitFor(condition, timeout) {\n    var stopTime = typeof timeout === 'number' ? timeout : 7000;\n    var stop = false;\n\n    window.setTimeout(function() {\n      stop = true;\n    }, stopTime);\n\n    return new Promise(function(resolve, reject) {\n      (function _innerWaitFor() {\n        var value = condition();\n\n        if (stop) {\n          reject();\n        } else if (value) {\n          resolve(value);\n        } else {\n          window.setTimeout(_innerWaitFor, 50);\n        }\n      })();\n    });\n  }\n\n  function onPageLoad(cb) {\n    if (document.readyState === 'loading') {\n      document.addEventListener('DOMContentLoaded', cb);\n    } else {\n      cb();\n    }\n  }\n\n  /* LC safe debug */\n  function debug(u){var n={info:\"blue\",ok:\"green\",error:\"red\"};return function(t){return Object.keys(n).reduce(function(r,e){var o=n[e];r[e]=function(){if(!c())return;var r=(new Date).toTimeString().replace(/\\s(.*)/,\"\");var n=\"%c\"+u+\":\"+e+\" [\"+r+\"] \"+(t||\"\");console.info.apply(this,[n,\"color: \"+o].concat(Array.prototype.slice.call(arguments)))};return r},{})};function c(){return document.cookie.indexOf(\"lc-qa=1\")!==-1||window.location.href.indexOf(\"lc-qa=1\")!==-1}} // eslint-disable-line\n})(typeof unsafeWindow === 'undefined' ? window : unsafeWindow, typeof unsafeWindow !== 'undefined');\n// eslint-disable-next-line spaced-comment\n//# sourceURL=c--d30-variant.js\n"}},{ref:"31597c8b-d8fd-4cab-aad8-6ea8839b9422",name:"2 - Persistent Basket + SRP",assets:{css:'/* Page layout */\nbody[data-lc-d30*="variant"] {\n  min-width: 1200px; /* extras-page */\n}\n\n.lc-d30-grid {\n  display: grid;\n  grid-gap: 16px;\n  grid-template-columns: 1fr 300px;\n  grid-template-areas: "main right";\n  width: 100%;\n  margin: 0 auto;\n}\n\n.lc-d30-grid__item--main {\n  z-index: 1;\n  grid-area: main;\n}\n\n.lc-d30-grid__item--right {\n  z-index: 0;\n  grid-area: right;\n}\n\n.lc-d30-grid--price-page .lc-d30-grid__item--right {\n  padding-top: 30px;\n}\n\n.lc-d30-grid--extras-page .lc-d30-grid__item--right {\n  padding-bottom: 24px;\n}\n\n.lc-d30-grid--extras-page + #mainContentAccess .ts-extra--sel-seats [data-ts-seat-sel-nav] {\n  display: none;\n}\n\n/* default fixes - select price */\n\n.lc-d30-grid .ts-fbr-flight-list-container h1,\n.lc-d30-grid .ts-fbr-flight-list-container h2,\n.lc-d30-grid .ts-fbr-flight-list-container h3 {\n  margin-bottom: 9px;\n  padding: 0;\n  color: #333;\n}\n\n.lc-d30-grid .ts-fbr-flight-list__header {\n  position: relative;\n}\n\n.lc-d30-grid .ts-fbr-flight-list-row__option-brands-container {\n  float: left;\n}\n\n.lc-d30-grid .ts-fbr-flight-list-row__option-brands-container::after,\n.lc-d30-grid .ts-fbr-flight-list-row__option-brands-container::before {\n  right: 80%;\n}\n\n@media only screen and (max-width: 1256px) {\n  .lc-d30-grid .ts-fbr-option__information {\n    transform: scale(0.7);\n    transform-origin: top right;\n  }\n}\n\n/* default fixes - passengers */\n\n.lc-d30-grid__item--main > * {\n  max-width: 100% !important;\n  box-sizing: border-box;\n}\n\n.lc-d30-grid__item--main fieldset {\n  min-width: unset;\n}\n\n.lc-d30-grid__item--main .airline-programme-wrapper .ts-ffb__ctnr {\n  min-width: unset;\n  max-width: 100%;\n  box-sizing: border-box;\n}\n\n@media only screen and (max-width: 1451px) {\n  .lc-d30-grid__item--main .airline-programme-wrapper .ts-ffb input.restrict-number {\n    margin: 18px 18px 0 0;\n  }\n}\n\n/* default fixes - extras */\n\n.lc-d30-grid__item--main.ts-choose-extras,\n.lc-d30-grid__item--main .ts-pgc__core .ts-cntnr,\n.lc-d30-grid__item--main .ts-pgc__core .ts-upgrade-row,\n.lc-d30-grid__item--main .ts-pgc__core .ts-choose-extras {\n  width: unset;\n}\n\n.lc-d30-grid__item--main .ts-pgc__core {\n  width: unset !important;\n}\n\n.lc-d30-grid + #mainContentAccess .ts-pa {\n  width: 1100px;\n  margin: 25px auto 0;\n}\n\n.lc-d30-grid__item--main #divUpgradesInfo ul {\n  display: grid;\n  grid-auto-flow: column;\n  grid-auto-columns: 1fr;\n  grid-gap: 16px;\n}\n\n.lc-d30-grid__item--main #divUpgradesInfo ul:after {\n  content: none;\n}\n\n.lc-d30-grid__item--main #divUpgradesInfo li {\n  margin-right: 0;\n}\n\n.lc-d30-grid__item--main #divUpgradesInfo .ts-cwh--col1,\n.lc-d30-grid__item--main #divUpgradesInfo .ts-cwh--col2,\n.lc-d30-grid__item--main #divUpgradesInfo .ts-cwh--col3,\n.lc-d30-grid__item--main #divUpgradesInfo .ts-cwh--col4,\n.lc-d30-grid__item--main #divUpgradesInfo .ts-cwh--col5,\n.lc-d30-grid__item--main #divUpgradesInfo .ts-cwh--col6 {\n  width: unset;\n}\n\n.lc-d30-grid__item--main #divUpgrades .ts-ur__cell--upgrade {\n  white-space: nowrap;\n}\n\n.lc-d30-grid__item--main .ts-cwi__img-cnt {\n  position: relative;\n  width: 33%;\n}\n.lc-d30-grid__item--main .ts-cwi__img-cnt-core {\n  width: 100%;\n  display: flex;\n  justify-content: center;\n}\n\nbody[data-lc-d30*="variant"] .ts-choose-extras .ts-pgc.ts-pgc--bgcp-white,\nbody[data-lc-d30*="variant"] .ts-choose-extras .ts-pgc.ts-pgc--bgcp-white .ts-pgc__core,\nbody[data-lc-d30*="variant"] .ts-choose-extras .ts-pgc.ts-pgc--bgcp-white.ts-pgc--t-fixed .ts-pgc__core ,\n.lc-d30-grid--extras-page .ts-pgc.ts-pgc--bgcp-white,\n.lc-d30-grid--extras-page .ts-pgc.ts-pgc--bgcp-white .ts-pgc__core,\n.lc-d30-grid--extras-page .ts-pgc.ts-pgc--bgcp-white.ts-pgc--t-fixed .ts-pgc__core {\n  background-color: #f6f6f6;\n}\n\n.lc-d30-grid__item--main .ts-pgc:first-of-type {\n  padding-top: 0;\n}\n\n/* Page width */\n\n/*\nflights container base width => 1100px\nsidebar width => 300px\nspace between flights and sidebar => 16px\nmin required spacing on the sides of the page => 2 x 50px\n*/\n\n.lc-d30-grid {\n  grid-gap: 16px;\n  grid-template-columns: calc(100% - 300px - 16px) 300px;\n}\n\nbody[data-lc-d30*="variant"] .ts-choose-flight#mainContainer,\nbody[data-lc-d30*="variant"] .ts-choose-extras#mainContainer {\n  max-width: calc(1100px + 16px + 300px + 50px * 2);\n  width: 100%;\n  margin: 0 auto;\n  padding-left: 50px;\n  padding-right: 50px;\n  box-sizing: border-box;\n}\n\n.ts-choose-extras#mainContainer + .lc-d30-grid {\n  max-width: calc(1100px + 16px + 300px + 50px * 2);\n  padding-left: 50px;\n  padding-right: 50px;\n  box-sizing: border-box;\n}\n\n.ts-choose-extras#mainContainer + .lc-d30-grid,\n.ts-choose-extras#mainContainer + .lc-d30-grid + #mainContentAccess .ts-pa {\n  max-width: calc(1100px + 16px + 300px + 50px * 2);\n  width: 100%;\n  padding-left: 50px;\n  padding-right: 50px;\n  box-sizing: border-box;\n}\n\nbody[data-lc-d30*="variant"] .ts-choose-flight#mainContainer,\nbody[data-lc-d30*="variant"] .ek.ek-wrapper.new-global-nav .global-navigation-wrapper .navigation-skinny,\nbody[data-lc-d30*="variant"] .ek.ek-wrapper.new-ek-footer.navigation-skinny .container {\n  max-width: calc(1100px + 16px + 300px + 50px * 2);\n  width: 100%;\n}\n\nbody[data-lc-d30*="variant"] .ts-tm__cntnr {\n  max-width: calc(1100px + 16px + 300px);\n  width: calc(100% - 50px * 2);\n}\n\nbody[data-lc-d30*="variant"] .ts-choose-flight#mainContainer .fare-families-container {\n  width: 100%;\n}\n\nbody[data-lc-d30*="variant"] .ts-cyc-currency-selector.predictive-select-container {\n  float: right;\n}\n\nbody[data-lc-d30*="variant"] .warning-container {\n  width: 100% !important;\n}\n\n\n/* SRP - lowest price, currency conversion, skyward miles */\n\n.lc-d30-srp {\n  display: grid;\n  grid-template-columns: 1fr;\n  grid-auto-flow: column;\n  grid-auto-columns: auto;\n  grid-gap: 20px;\n  align-items: center;\n  margin: 10px 0;\n  padding: 0 10px;\n  border-radius: 3px;\n  background-color: #ffffff;\n}\n\n.lc-d30-srp,\n.lc-d30-srp > * {\n  position: relative;\n}\n\n.lc-d30-srp .lc-d30-lowest-price::after {\n  content: \'\';\n  position: absolute;\n  top: 8px;\n  bottom: 8px;\n  right: 0;\n  display: block;\n  width: 1px;\n  background-color: #d1d1d1;\n}\n\n.lc-d30-srp #CCContainer {\n  z-index: 10;\n  position: absolute;\n  right: -10px;\n  display: inline-block;\n  display: none;\n  padding:  10px;\n  border-radius: 4px;\n  box-shadow: 0 2px 4px 2px rgb(0 0 0 / 19%);\n  background: #fff;\n}\n\n.lc-d30-srp .lc-d30-converter--enabled + #CCContainer {\n  display: inline-block;\n}\n\n.lc-d30-srp #CCContainer .ts-cyc-container-column:first-of-type {\n  display: none\n}\n\n.lc-d30-srp #CCContainer .ts-cyc-container {\n  margin-bottom: 0;\n}\n\n.lc-d30-srp #CCContainer .ts-icon-clear {\n  top: 30px; /* input height / 2 */\n}\n\n.lc-d30-srp #CCContainer .ts-sf__suggested {\n  position: relative;\n  margin: 9px -10px 0;\n  width: auto;\n  box-shadow: none;\n}\n\n.lc-d30-srp #CCContainer .ts-sf__suggested .ts-options-label {\n  margin-right: 10px;\n  margin-left: 10px;\n}\n\n.lc-d30-srp #CCContainer .ts-sf__suggested ul li {\n  padding-right: 10px;\n  padding-right: 10px;\n}\n\n.lc-d30-srp #CCContainer .ts-sf--opened:before,\n.lc-d30-srp #CCContainer .ts-sf--opened:after {\n  content: none;\n}\n\n.lc-d30-srp .lc-d30-converter:before,\n.lc-d30-srp .lc-d30-converter:after {\n  content: \'\';\n  position: absolute;\n  bottom: -15px;\n  right: -11px;\n  width: 20px;\n  height: 20px;\n  transform: translateX(-50%) rotate(45deg);\n  box-shadow: 0 2px 4px 2px rgb(0 0 0 / 19%);\n}\n\n.lc-d30-srp .lc-d30-converter:after {\n  z-index: 102;\n  bottom: 0px;\n  right: -7px;\n  width: 0;\n  height: 0;\n  transform: rotate(0deg) translateX(-8px);\n  box-shadow: none;\n  border: solid 8px #fff;\n  border-color: transparent transparent #fff transparent;\n}\n\n.lc-d30-srp .lc-d30-converter:not(.lc-d30-converter--enabled):before,\n.lc-d30-srp .lc-d30-converter:not(.lc-d30-converter--enabled):after {\n  display: none;\n}\n\n/* Basket */\n\nbody[data-lc-d30*="variant"] [data-ts-comp="ShoppingCart"],\nbody[data-lc-d30*="variant"] [data-ts-comp="ShoppingCart"] .ts-sc__wrapper,\nbody[data-lc-d30*="variant"] [data-ts-comp="ShoppingCart"] .ts-sc__wrapper.ts-sc__wrapper--fixed {\n  position: absolute;\n  /* top: -1000%; */\n  left: -1000%;\n}\n\n.lc-d30-basket {\n  position: sticky;\n  top: 0;\n\n  display: grid;\n  grid-template-columns: 1fr;\n  grid-template-rows: auto 1fr auto;\n\n  max-height: 100vh;\n  height: 700px; /* approx */\n  overflow: hidden;\n\n  border-top-left-radius: 3px;\n  border-top-right-radius: 3px;\n  background-color: #e5e5e5;\n}\n\n.lc-d30-basket:not(.ts-sc--is-empty) .lc-d30-basket__empty-state {\n  display: none;\n}\n\n.lc-d30-basket.ts-sc--is-empty .lc-d30-basket__content {\n  display: none;\n}\n\n/* Basket - change search */\n\n.lc-d30-search {\n  float: none;\n  padding: 10px;\n  border-radius: 3px;\n  background-color: #ffffff;\n  color: #333333;\n\n  /* font-family: HelveticaNeue-Light, "Helvetica Neue Light", "Helvetica Neue", Helvetica, Arial, "Lucida Grande", sans-serif; */\n  font-size: 14.1px;\n  font-weight: normal;\n  font-stretch: normal;\n  font-style: normal;\n  line-height: normal;\n  letter-spacing: normal;\n}\n\n.lc-d30-search.ts-sc__left p:first-child {\n  margin-top: 0;\n}\n\n.lc-d30-search .ts-sc__srch {\n  display: block;\n  margin-left: 0;\n  margin-top: 6px;\n}\n\n.lc-d30-search .ts-sc__label-pax .ts-sc__bullet:last-of-type {\n  display: none;\n}\n\n.lc-d30-search a[data-link="Change search"] {\n  display: block;\n  margin: 6px 0 0;\n  color: #c60c30;\n}\n\n.lc-d30-search .ts-sc__label-search {\n  font-weight: 700;\n}\n\n.lc-d30-search .ts-sc__label-search span {\n  font-weight: 300;\n}\n\n/* Basket - selection */\n\n.lc-d30-basket__content {\n  padding: 10px 10px;\n  overflow-y: scroll;\n  font-family: HelveticaNeue-Light, "Helvetica Neue Light", "Helvetica Neue", Helvetica, Arial, "Lucida Grande", sans-serif;\n  font-size: 14px;\n}\n\n.lc-d30-basket__empty-state {\n  display: flex;\n  flex-direction: column;\n  justify-content: center;\n  align-items: center;\n  overflow-y: hidden;\n\n  margin: 10px 10px;\n  padding: 0;\n  background-color: #fff;\n}\n\n.lc-d30-basket .ts-sc__empty {\n  width: 100%;\n  margin-bottom: 0;\n}\n\n.lc-d30-basket-item {\n  margin-bottom: 16px;\n  border-radius: 3px;\n  /* box-shadow: 0 2px 4px 2px rgba(0, 0, 0, 0.09); */\n  background-color: #ffffff;\n  color: #333333;\n}\n\n.lc-d30-basket-item:last-child {\n  margin-bottom: 0;\n}\n\n.lc-d30-basket-item .toggle {\n  cursor: pointer;\n}\n\n.lc-d30-basket-item__header {\n  position: relative;\n  display: grid;\n  grid-auto-flow: column;\n  grid-template-columns: auto 1fr auto auto;\n  grid-gap: 10px;\n  align-content: center;\n  align-items: center;\n  overflow: hidden;\n  padding: 10px;\n\n  border-radius: 3px;\n  box-shadow: 0 2px 4px 2px rgb(0 0 0 / 9%);\n  background-color: #ffffff;\n}\n\n.lc-d30-basket-item__header::before {\n  content: \'\';\n  display: none;\n  position: absolute;\n  width: 3px;\n  height: 100%;\n  background-color: #c60c30;\n}\n\n.lc-d30-basket-item--expanded .lc-d30-basket-item__header::before {\n  display: block;\n}\n\n.lc-d30-basket-item__title {\n  color: #333333;\n  letter-spacing: normal;\n  font-family: HelveticaNeue-Light, "Helvetica Neue Light", "Helvetica Neue", Helvetica, Arial, "Lucida Grande", sans-serif;\n  font-size: 14px;\n  font-weight: bold;\n  font-stretch: normal;\n  font-style: normal;\n  line-height: normal;\n}\n\n.lc-d30-basket-item__sub {\n  color: #333333;\n  text-align: right;\n  letter-spacing: normal;\n  font-family: HelveticaNeue-Light, "Helvetica Neue Light", "Helvetica Neue", Helvetica, Arial, "Lucida Grande", sans-serif;\n  font-size: 14px;\n  font-weight: bold;\n  font-stretch: normal;\n  font-style: normal;\n  line-height: normal;\n}\n\n.lc-d30-basket-item--passengers .lc-d30-basket-item__sub {\n  white-space: pre;\n}\n\n.lc-d30-basket-item__icon {\n  position: relative;\n  width: 38px;\n  height: 38px;\n  border-radius: 50%;\n  background-color: #d8d8d8;\n}\n\n.lc-d30-basket-item__icon svg {\n  position: absolute;\n  top: 50%;\n  left: 50%;\n  transform: translate(-50%, -50%);\n  display: block;\n  width: 24px;\n  height: 24px;\n  fill: #333333;\n}\n\n.lc-d30-basket-item__toggle {\n  transition: transform .2s ease-out;\n  transform: rotate(0deg);\n}\n\n.lc-d30-basket-item--expanded .lc-d30-basket-item__toggle {\n  transform: rotate(-180deg);\n}\n\n.lc-d30-basket-item__toggle svg {\n  display: block;\n  fill: #c60c30;\n}\n\n.lc-d30-basket-item--expanded .lc-d30-basket-item__body {\n  display: block;\n}\n\n.lc-d30-basket-item__body {\n  display: none;\n}\n\n.lc-d30-basket-item__content {\n  padding: 10px;\n}\n\n/* Basket - TnCs */\n\n.lc-d30-basket.ts-sc--is-empty .lc-d30-basket__footer {\n  padding: 0 10px 10px;\n}\n\n.lc-d30-basket:not(.ts-sc--is-empty) .tc-anchor-container {\n  display: none;\n}\n\n.lc-d30-basket:not(.ts-sc--is-empty) .lc-d30-basket__grand-total {\n  display: block !important;\n}\n\n.lc-d30-basket__grand-total br {\n  display: none;\n}\n\n.lc-d30-basket__grand-total .data-sb-total {\n  display: flex;\n  flex-direction: column;\n  justify-content: flex-end;\n}\n\n.lc-d30-basket__grand-total .data-sb-total > * {\n  float: none !important;\n  display: block;\n  width: 100%;\n  max-width: 100%;\n  text-align: right;\n  white-space: nowrap;\n}\n\n.lc-d30-basket .tc-anchor-container {\n  margin-bottom: 0;\n  padding: 0;\n}\n\n.lc-d30-basket .ts-fbr-booking-conditions-announce {\n  margin-bottom: 0;\n}\n\n.lc-d30-basket__fare-links.ts-sc__footer {\n  display: block;\n  background-color: #fff;\n}\n\n/* Basket links */\n\n.lc-d30-basket a {\n  text-decoration: underline;\n  color: #333333;\n}\n\n/* Flights */\n\n.lc-d30-basket-item--flights .ts-sc__title {\n  float: none;\n  width: 100%;\n  display: grid;\n  grid-template-columns: 1fr 100px;\n  font-family: HelveticaNeue-Light, "Helvetica Neue Light", "Helvetica Neue", Helvetica, Arial, "Lucida Grande", sans-serif;\n  font-size: 14px;\n}\n\n.lc-d30-basket-item--flights .ts-sc__title + strong {\n  display: block;\n  margin-top: -15px;\n  font-family: HelveticaNeue-Light, "Helvetica Neue Light", "Helvetica Neue", Helvetica, Arial, "Lucida Grande", sans-serif;\n  font-size: 16px;\n}\n\n.lc-d30-basket-item--flights .ts-sc__flght-dtls {\n  text-align: right;\n}\n\n.lc-d30-basket-item--flights .pYQ {\n  margin: 10px 0 15px;\n}\n\n.lc-d30-ts-sc__flights:after {\n  content: \'\';\n  display: table;\n  clear: both;\n}\n\n.lc-d30-basket-item--flights .ts-fs {\n  margin-right: 0;\n  width: 100%\n}\n\n.lc-d30-basket-item--flights .ts-fs:not(:last-child) {\n  margin-bottom: 20px;\n}\n\n/* Flight */\n\n.lc-d30-basket-item--flights .ts-fs {\n  border: 1px solid black;\n  border-radius: 5px;\n  color: #333333\n}\n\n.lc-d30-basket-item--flights .ts-fs.ts-fs--economy {\n  border-color: #1f5a2d;\n}\n.lc-d30-basket-item--flights .ts-fs.ts-fs--business {\n  border-color: #305291;\n}\n.lc-d30-basket-item--flights .ts-fs.ts-fs--first {\n  border-color: #b14242;\n}\n\n.lc-d30-basket-item--flights .ts-fs__date {\n  margin: 0 10px;\n  font-size: 12px;\n  font-weight: bold;\n}\n\n.lc-d30-basket-item--flights .ts-fs--economy .ts-fs__container,\n.lc-d30-basket-item--flights .ts-fs--business .ts-fs__container,\n.lc-d30-basket-item--flights .ts-fs--first .ts-fs__container {\n  background-color: #fff;\n  color: #333333;\n}\n\n.lc-d30-basket-item--flights .ts-fs__container::before {\n  content: \'\';\n  display: block;\n  margin: 0 10px;\n  border-top: 1px solid #d5d5d5;\n}\n\n.lc-d30-basket-item--flights .ts-fs__path:before,\n.lc-d30-basket-item--flights .ts-fs__path:after {\n  /* background-color: #666666; */\n  background-color: #bbb;\n}\n\n.lc-d30-basket-item--flights .ts-fs__time {\n  padding: 0 10px;\n}\n\n.lc-d30-basket-item--flights .ts-fs__time p {\n  color: #333333;\n  font-size: 12px;\n}\n\n.lc-d30-basket-item--flights .ts-fs__time time {\n  font-size: 15px;\n}\n\n.lc-d30-basket-item--flights .ts-fs .ts-fs__class {\n  margin: 0;\n  color: #fff;\n  text-align: center;\n}\n\n.lc-d30-basket-item--flights .ts-fs--economy .ts-fs__class {\n  background-color: #1f5a2d;\n}\n.lc-d30-basket-item--flights .ts-fs--business .ts-fs__class {\n  background-color: #305291;\n}\n.lc-d30-basket-item--flights .ts-fs--first .ts-fs__class {\n  background-color: #b14242;\n}\n\n/* Passengers */\n\n.lc-d30-passengers__list .ts-sc__item {\n  float: none;\n}\n\n.lc-d30-passengers__list .ts-sc__item:first-child {\n  margin-top: 0;\n}\n\n.lc-d30-passenger {\n  display: grid;\n  grid-gap: 4px;\n  grid-template-columns: 1fr auto;\n  grid-template-areas:\n    "main main"\n    "left right";\n}\n\n.lc-d30-passenger__name,\n.lc-d30-passenger > *:first-child {\n  grid-area: main;\n}\n\n.lc-d30-passenger__dob {\n  grid-area: left;\n}\n\n.lc-d30-passenger__ff,\n.lc-d30-passenger .ts-sc__skywards {\n  grid-area: right;\n  float: none;\n}\n\n.lc-d30-passenger .ts-sc__skywards span {\n  width: unset;\n  margin-left: 0;\n}\n\n.lc-d30-passenger__name,\n.lc-d30-passenger__ff,\n.lc-d30-passenger__dob,\n.lc-d30-passenger .ts-sc__skywards {\n  display: grid;\n  grid-auto-flow: column;\n  grid-gap: 2px;\n  justify-content: start;\n}\n\n/* Extras */\n\n.lc-d30-basket-item--extras .ts-sc__nsrnc {\n  display: block;\n  margin-bottom: 0;\n  background-color: unset;\n}\n\n.lc-d30-basket-item--extras .ts-sc__header {\n  padding:  0;\n}\n\n.lc-d30-basket-item--extras .ts-sc__ins_container,\n.lc-d30-basket-item--extras .ts-sc__title,\n.lc-d30-basket-item--extras .ts-sc__total {\n  margin: 0;\n}\n\n.lc-d30-basket-item--extras .ts-sc__title {\n  font-size: 14px;\n}\n\n.lc-d30-basket-item--extras [data-extra-id=""] + [data-extra-id]:not([data-extra-id=""]) {\n  margin-top: 13px;\n}\n\n/* LOWEST PRICE */\n\n.lc-d30-lowest-price .ts-lp {\n  margin: 0;\n  padding: 10px 12px 9px;\n  box-shadow: none;\n  background-color: transparent;\n}\n\n.lc-d30-lowest-price .ts-lp,\n.lc-d30-lowest-price .ts-lp * {\n  text-align: left;\n}\n\n.lc-d30-lowest-price__title {\n  display: grid;\n  grid-auto-flow: column;\n  justify-content: start;\n  grid-gap: 5px;\n}\n\n.lc-d30-lowest-price__title .ts-lp__title,\n.lc-d30-lowest-price__title .ts-lp__price {\n  margin: 0 0 4px;\n  font-size: 16px;\n  font-weight: 700;\n  line-height: 1;\n}\n\n.lc-d30-lowest-price__title .ts-lp__title {\n  color: #bc996e;\n}\n\n.lc-d30-lowest-price .ts-lowest-price {\n  margin: 0;\n}\n\n.lc-d30-lowest-price .ts-lowest-price .price br {\n  display: none;\n}\n\n/* Skywards */\n\n.lc-d30-skywards {\n  display: grid;\n  grid-gap: 0 10px;\n  grid-template-columns: auto 1fr;\n  grid-template-areas:\n    "checkbox title"\n    "checkbox text";\n  align-content: start;\n  color: #333333;\n  font-family: HelveticaNeue-Light, "Helvetica Neue Light", "Helvetica Neue", Helvetica, Arial, "Lucida Grande", sans-serif;\n  font-size: 12px;\n  font-weight: 300;\n}\n\n.lc-d30-skywards__checkbox {\n  grid-area: checkbox;\n  align-self: center;\n  cursor: pointer;\n}\n\n.lc-d30-skywards__title {\n  grid-area: title;\n  font-weight: 700;\n}\n\n.lc-d30-skywards__text {\n  grid-area: text;\n  font-size: 10px;\n}\n\n.lc-d30-skywards input {\n  display: none;\n}\n\n.lc-d30-skywards input:checked + label:before {\n  background: url(data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0idXRmLTgiPz4KPCFET0NUWVBFIHN2ZyBQVUJMSUMgIi0vL1czQy8vRFREIFNWRyAxLjEvL0VOIiAiaHR0cDovL3d3dy53My5vcmcvR3JhcGhpY3MvU1ZHLzEuMS9EVEQvc3ZnMTEuZHRkIj4KPHN2ZyB2ZXJzaW9uPSIxLjEiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIgeG1sbnM6eGxpbms9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkveGxpbmsiIHdpZHRoPSIxNiIgaGVpZ2h0PSIxNiIgdmlld0JveD0iMCAwIDE2IDE2Ij4KPHBhdGggZmlsbD0iI2Q3MjAyNyIgZD0iTTEzLjUgMmwtNy41IDcuNS0zLjUtMy41LTIuNSAyLjUgNiA2IDEwLTEweiI+PC9wYXRoPgo8L3N2Zz4K) no-repeat 50%;\n}\n\n.lc-d30-skywards input + label:before {\n  content: \'\';\n  display: block;\n  width: 24px;\n  height: 24px;\n  border: .1rem solid #666;\n  box-shadow: inset 0.4rem 0.4rem 0 0 #f6f6f6;\n  border-radius: .3rem;\n}\n\n/* Currency converter */\n\n.lc-d30-converter {\n  display: grid;\n  grid-auto-flow: column;\n  align-items: center;\n}\n\n.lc-d30-converter__icon {\n  margin-right: 5px;\n}\n\n.lc-d30-converter__icon svg {\n  display: block;\n  width: 40px;\n  height: 40px;\n}\n\n.lc-d30-converter__title {\n  font-family: HelveticaNeue-Light, "Helvetica Neue Light", "Helvetica Neue", Helvetica, Arial, "Lucida Grande", sans-serif;\n  font-size: 14px;\n  color: #333333;\n}\n\n.lc-d30-converter__select {\n  cursor: pointer;\n  text-decoration: underline;\n  font-weight: 700;\n}\n\n.lc-d30-converter__toggle {\n  transition: transform .2s ease-out;\n  transform: rotate(0deg);\n}\n\n.lc-d30-converter--enabled .lc-d30-converter__toggle {\n  transform: rotate(-180deg);\n}\n\n.lc-d30-converter__toggle svg {\n  display: block;\n  fill: #333333;\n}\n\n/* Utils */\n\n.lc-d30--hidden {\n  display: none !important;\n}\n',html:"\x3c!-- define the structure and content of your Experience in HTML e.g.--\x3e\n<div>My Content</div>\n\x3c!-- Use dynamic Guest variables, type ctrl+space or guest to explore available entities.--\x3e\n\x3c!-- Type 'd' to see decisioning helpers --\x3e\n",js:"(function(window, isDevMode) {\n  var _CNAME_ = 'lc-d30';\n  var _SNAME_ = 'variant-2';\n  var CONFIG = {\n    'variant-1': { selectFlightOptions: false, persistentBasket: true },\n    'variant-2': { selectFlightOptions: true, persistentBasket: true },\n  };\n  var ICONS = {\n    arrow: '<svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 24 24\" fill=\"black\" width=\"18px\" height=\"18px\"><path d=\"M0 0h24v24H0V0z\" fill=\"none\"/><path d=\"M7.41 8.59L12 13.17l4.59-4.58L18 10l-6 6-6-6 1.41-1.41z\"/></svg>',\n    account: '<svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 24 24\" fill=\"black\" width=\"18px\" height=\"18px\"><path d=\"M0 0h24v24H0V0z\" fill=\"none\"/><path d=\"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zM7.07 18.28c.43-.9 3.05-1.78 4.93-1.78s4.51.88 4.93 1.78C15.57 19.36 13.86 20 12 20s-3.57-.64-4.93-1.72zm11.29-1.45c-1.43-1.74-4.9-2.33-6.36-2.33s-4.93.59-6.36 2.33C4.62 15.49 4 13.82 4 12c0-4.41 3.59-8 8-8s8 3.59 8 8c0 1.82-.62 3.49-1.64 4.83zM12 6c-1.94 0-3.5 1.56-3.5 3.5S10.06 13 12 13s3.5-1.56 3.5-3.5S13.94 6 12 6zm0 5c-.83 0-1.5-.67-1.5-1.5S11.17 8 12 8s1.5.67 1.5 1.5S12.83 11 12 11z\"/></svg>',\n    currency: '<svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 24 24\" fill=\"black\" width=\"18px\" height=\"18px\"><path d=\"M0 0h24v24H0z\" fill=\"none\"/><path d=\"M11 17h2v-1h1c.55 0 1-.45 1-1v-3c0-.55-.45-1-1-1h-3v-1h4V8h-2V7h-2v1h-1c-.55 0-1 .45-1 1v3c0 .55.45 1 1 1h3v1H9v2h2v1zm9-13H4c-1.11 0-1.99.89-1.99 2L2 18c0 1.11.89 2 2 2h16c1.11 0 2-.89 2-2V6c0-1.11-.89-2-2-2zm0 14H4V6h16v12z\"/></svg>',\n    flight: '<svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 24 24\" fill=\"black\" width=\"18px\" height=\"18px\"><path d=\"M0 0h24v24H0z\" fill=\"none\"/><path d=\"M21 16v-2l-8-5V3.5c0-.83-.67-1.5-1.5-1.5S10 2.67 10 3.5V9l-8 5v2l8-2.5V19l-2 1.5V22l3.5-1 3.5 1v-1.5L13 19v-5.5l8 2.5z\"/></svg>',\n    work: '<svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 24 24\" fill=\"black\" width=\"18px\" height=\"18px\"><path d=\"M0 0h24v24H0V0z\" fill=\"none\"/><path d=\"M20 6h-4V4c0-1.11-.89-2-2-2h-4c-1.11 0-2 .89-2 2v2H4c-1.11 0-1.99.89-1.99 2L2 19c0 1.11.89 2 2 2h16c1.11 0 2-.89 2-2V8c0-1.11-.89-2-2-2zm-6 0h-4V4h4v2z\"/></svg>',\n  };\n  var safeLog = debug(_CNAME_)(_SNAME_);\n  var clearVariantHandlers = [];\n\n  safeLog.info();\n\n  try {\n    // variant code goes here\n    addQMIntegration();\n\n    if (!isDevMode) {\n      runVariant();\n    }\n\n    window.addEventListener(_CNAME_ + '-gen', runVariant);\n    window.addEventListener(_CNAME_ + '-clear', clearVariant);\n  } catch (err) {\n    safeLog.error(err);\n  }\n\n  function clearVariant() {\n    document.body.removeAttribute('data-' + _CNAME_);\n    clearVariantHandlers.forEach(function(fn) { fn(); });\n    clearVariantHandlers = [];\n  }\n\n  function runVariant() {\n    var options = CONFIG[_SNAME_];\n    safeLog.ok();\n    document.body.setAttribute('data-' + _CNAME_, _SNAME_);\n\n    if (isPricePage() && options.selectFlightOptions) {\n      waitFor(getSRPElems)\n        .then(function(params) {\n          var selectors = params[0];\n          var elems = params[1];\n\n          combineSelectFlightOptions(selectors, elems);\n          hidePageHeading();\n          updateLowestPrice();\n          if (!isSkywardsHidden()) {\n            updateSkywards();\n          }\n          updateCurrencyConverter();\n        })\n        .catch(function() {\n          safeLog.error('SRP default elements were not found on a page');\n        });\n    }\n\n    if (options.persistentBasket) {\n      onPageLoad(function() {\n        var sidebarEl = createSidebarEl();\n        var newBasketEl = changeBasket();\n        sidebarEl.appendChild(newBasketEl);\n      });\n    }\n  }\n\n  function getPageData() {\n    switch (true) {\n      case isPricePage(): return { pageName: 'price-page', contentEl: getFlightsContentEl() };\n      case isPassengerDetailsPage(): return { pageName: 'passenger-details-page', contentEl: getPassengersContentEl() };\n      case isExtrasPage(): return { pageName: 'extras-page', contentEl: getExtrasContentEl() };\n      default: return null;\n    }\n\n    function getFlightsContentEl() {\n      return document.querySelector('[data-ts-comp=\"FbrListContainer\"]');\n    }\n\n    function getPassengersContentEl() {\n      var wrapEl = document.createElement('div');\n      var headingEl = document.querySelector('.review-inner-header');\n      var contentElems = getNextUntil(headingEl, '.ts-pa');\n\n      if (!headingEl) return null;\n\n      headingEl.insertAdjacentElement('beforeBegin', wrapEl);\n      [headingEl].concat(contentElems).forEach(function(el) {\n        wrapEl.appendChild(el);\n      });\n\n      return wrapEl;\n    }\n\n    function getExtrasContentEl() {\n      var extrasEl = document.querySelector('#mainContainer + .ts-choose-extras');\n      var actionsEl = extrasEl && extrasEl.querySelector('.ts-pa');\n      var actionsContainerEl = actionsEl && actionsEl.closest('#mainContentAccess');\n      var benefitsEl = extrasEl && extrasEl.querySelector('[data-ts-comp=\"FlightBenefits\"]');\n      var benefitsContainerEl = benefitsEl && benefitsEl.closest('.ts-pgc');\n\n      if (extrasEl && actionsContainerEl) {\n        extrasEl.insertAdjacentElement('afterEnd', actionsContainerEl);\n      }\n\n      if (extrasEl && benefitsContainerEl) {\n        extrasEl.previousElementSibling.insertAdjacentElement('beforeEnd', benefitsContainerEl);\n      }\n\n      return extrasEl;\n    }\n  }\n\n  function createSidebarEl() {\n    var pageData = getPageData();\n    var contentEl = pageData.contentEl;\n    var gridEl = createEl('<div class=\"<%_CNAME_%>-grid <%_CNAME_%>-grid--<%pageName%>\"></div>', { pageName: pageData.pageName });\n    var rightSidebarEl = createEl('<div class=\"<%_CNAME_%>-grid__item <%_CNAME_%>-grid__item--right\"></div>');\n\n    if (!contentEl) {\n      safeLog.error('Content element was not found');\n      return null;\n    }\n\n    contentEl.classList.add(_CNAME_ + '-grid__item', _CNAME_ + '-grid__item--main');\n    contentEl.insertAdjacentElement('beforeBegin', gridEl);\n    gridEl.appendChild(contentEl);\n    gridEl.appendChild(rightSidebarEl);\n\n    clearVariantHandlers.push(function() {\n      contentEl.classList.remove(_CNAME_ + '-grid__item', _CNAME_ + '-grid__item--main');\n      gridEl.insertAdjacentElement('beforeBegin', contentEl);\n      gridEl.remove();\n    });\n\n    return rightSidebarEl;\n  }\n\n  function hidePageHeading() {\n    var pageTitleEl = document.querySelector('.ts-title');\n    var stepsEl = document.querySelector('.ts-pb');\n\n    pageTitleEl && pageTitleEl.classList.add(_CNAME_ + '--hidden');\n    stepsEl && stepsEl.parentNode.classList.add(_CNAME_ + '--hidden');\n\n    clearVariantHandlers.push(function() {\n      pageTitleEl && pageTitleEl.classList.remove(_CNAME_ + '--hidden');\n      stepsEl && stepsEl.parentNode.classList.remove(_CNAME_ + '--hidden');\n    });\n  }\n\n  // It's required to have elements in the order they appear on a page,\n  // and selectors in the order they need to appear in combined SRP element\n  function getSRPElems() {\n    var selectors = ['#LowestPriceContainer', (isSkywardsHidden() ? '' : '#dvPayMethodsContainer'), '#CCContainer'].filter(Boolean);\n    var elems = Array.from(document.querySelectorAll(selectors.join(', ')));\n\n    return (elems && elems.length) ? ([selectors, elems]) : null;\n  }\n\n  function combineSelectFlightOptions(selectors, elems) {\n    var srpEl = createEl('<div class=\"<%_CNAME_%>-srp\"></div>');\n    var prevEl = elems.filter(Boolean)[0].previousElementSibling;\n\n    clearVariantHandlers.push((function() {\n      var prevElems = elems.map(function(el) { return el.previousElementSibling; });\n      return function() {\n        elems.forEach(function(item, i) {\n          if (!prevElems[i]) {\n            safeLog.error('Default previous element was not found');\n            return;\n          }\n          prevElems[i].insertAdjacentElement('afterEnd', item);\n        });\n      };\n    })());\n\n    selectors.forEach(function(selector) {\n      var el = elems.find(function(item) { return item.matches(selector); });\n      var itemEl = createEl('<div></div>');\n      if (!el) return;\n      itemEl.appendChild(el);\n      srpEl.appendChild(itemEl);\n    });\n\n    if (prevEl) {\n      prevEl.insertAdjacentElement('afterEnd', srpEl);\n      clearVariantHandlers.push(function() {\n        srpEl.remove();\n      });\n    }\n\n    return srpEl;\n  }\n\n  function updateLowestPrice() {\n    var lowestPriceEl = document.getElementById('LowestPriceContainer');\n\n    if (!lowestPriceEl) {\n      safeLog.error('Lowest price element was not found, selector: #LowestPriceContainer');\n      return;\n    }\n\n    lowestPriceEl.classList.add(_CNAME_ + '-lowest-price');\n    changeLowestPriceTitle(lowestPriceEl);\n    changeLowestPriceText(lowestPriceEl);\n    clearVariantHandlers.push(function() {\n      lowestPriceEl.classList.remove(_CNAME_ + '-lowest-price');\n    });\n  }\n\n  function changeLowestPriceTitle(lowestPriceEl) {\n    var titleEl = lowestPriceEl.querySelector('.ts-lp__title');\n    var lowestPriceValueElems = lowestPriceEl.querySelectorAll('.ts-lp__price');\n    var containerEl = createEl('<div class=\"<%_CNAME_%>-lowest-price__title\"></div>');\n    var passengerCount = getPassengersCount() || 'all';\n    var elemToBeMoved = [titleEl].concat(Array.from(lowestPriceValueElems));\n\n    clearVariantHandlers.push((function() {\n      var prevElems = elemToBeMoved.map(function(el) { return el.previousElementSibling; });\n      var parentElems = elemToBeMoved.map(function(el) { return el.parentNode; });\n      var origTitleText = titleEl.textContent;\n\n      return function() {\n        elemToBeMoved.forEach(function(el, i) {\n          if (prevElems[i]) {\n            return prevElems[i].insertAdjacentElement('afterEnd', el);\n          }\n\n          return parentElems[i].insertAdjacentElement('afterBegin', el);\n        });\n        containerEl.remove();\n        titleEl.textContent = origTitleText;\n      };\n    })());\n\n    titleEl.insertAdjacentElement('beforebegin', containerEl);\n    elemToBeMoved.forEach(function(el) {\n      containerEl.appendChild(el);\n    });\n\n    titleEl.textContent = 'Lowest total price for '\n      + passengerCount + ' passenger' + getPassengersEnding(passengerCount);\n  }\n\n  function changeLowestPriceText(lowestPriceEl) {\n    var textEl = lowestPriceEl.querySelector('.ts-lp > p:last-of-type');\n    var copyEl = textEl.cloneNode(true);\n    var requiredText = textEl.textContent\n      .trim()\n      .replace(/^.+(include)/, '')\n      .replace(/( for ).*$/, '');\n\n    copyEl.textContent = 'Inclusive of' + requiredText + '.';\n    textEl.classList.add(_CNAME_ + '--hidden');\n    textEl.insertAdjacentElement('beforebegin', copyEl);\n\n    clearVariantHandlers.push(function() {\n      copyEl.remove();\n      textEl.classList.remove(_CNAME_ + '--hidden');\n    });\n  }\n\n  function updateSkywards() {\n    var skywardsEl = document.getElementById('dvPayMethodsContainer');\n\n    if (!skywardsEl) {\n      safeLog.ok('Skywards miles element is not available');\n      return;\n    }\n\n    var labelEl = skywardsEl.querySelector('.ts-checkbox label');\n    var inputEl = skywardsEl.querySelector('.ts-checkbox input');\n    var copyInputEl = inputEl.cloneNode(true);\n    var inputElHTML = (copyInputEl.removeAttribute('id'), copyInputEl.outerHTML);\n\n    /* eslint-disable indent */\n    var newSkywardsEl = createEl([\n      '<div class=\"<%_CNAME_%>-skywards\">',\n        inputElHTML,\n        '<label for=\"<%for%>\" class=\"<%_CNAME_%>-skywards__checkbox\"></label>',\n        '<p class=\"<%_CNAME_%>-skywards__title\"><%title%></p>',\n        '<p class=\"<%_CNAME_%>-skywards__text\"><%text%></p>',\n      '</div>'\n    ].join(''), {\n      title: 'Use my Classic rewards',\n      text: '(you have ' + getUserSkywardsMiles() + ' skyward miles)',\n      for: labelEl && labelEl.getAttribute('for') || 'rbPMMiles',\n    });\n    /* eslint-enable indent */\n    var newLabelEl = newSkywardsEl.querySelector('label');\n    var newInputEl = newSkywardsEl.querySelector('input');\n\n    // trigger update for variant element\n    newLabelEl.addEventListener('click', function() {\n      setTimeout(function() {\n        newInputEl.checked = inputEl.checked;\n      }, 0);\n    });\n    skywardsEl.classList.add(_CNAME_ + '--hidden');\n    skywardsEl.insertAdjacentElement('beforeBegin', newSkywardsEl);\n    clearVariantHandlers.push(function() {\n      skywardsEl.classList.remove(_CNAME_ + '--hidden');\n      newSkywardsEl.remove();\n    });\n  }\n\n  function updateCurrencyConverter() {\n    var ccEl = document.getElementById('CCContainer');\n    var ccSelectEl = ccEl && ccEl.querySelector('.ts-sf');\n    var ccInputEl = ccSelectEl && ccSelectEl.querySelector('.ts-sf input');\n\n    if (!ccEl) {\n      safeLog.error('Currency conversion element was not found');\n      return;\n    }\n\n    var lcConverter = new CurrencyConverter({\n      iconHTML: ICONS.currency,\n      title: 'You are viewing totals in',\n      currencyCode: getValue(),\n      onClick: function(isEnabled) {\n        if (isEnabled) {\n          lcConverter.disable();\n          return;\n        }\n\n        setTimeout(function() {\n          lcConverter.enable();\n          ccInputEl.dispatchEvent(new UIEvent('focus'));\n        }, 0);\n      },\n    });\n\n    onCurConversion(function() {\n      lcConverter.disable();\n      lcConverter.update(getValue());\n    }, false);\n\n    observe(ccSelectEl, function() {\n      if (ccSelectEl.classList.contains('ts-sf--opened')) return;\n      lcConverter.disable();\n    });\n\n    ccEl.insertAdjacentElement('beforeBegin', lcConverter.el);\n\n    function getValue() {\n      // currency conversion applied\n      if (ccInputEl.value) {\n        var curCode = ccInputEl.value.match(/\\((.*?)\\)/);\n        return curCode && curCode[1] || ccInputEl.value;\n      }\n\n      // default page currency\n      var ccTextEl = ccEl.querySelector('#ltViewPricesIn strong');\n      return ccTextEl.textContent.trim();\n    }\n  }\n\n  function changeBasket() {\n    var BASKET_SECTIONS = [\n      {\n        iconHTML: ICONS.flight,\n        key: 'flights',\n        title: 'Flights',\n        getContentEl: getBasketFlightsContentEl,\n        getTotalsEl: getBasketFlightsTotalsEl,\n        pages: [isPricePage, isPassengerDetailsPage, isExtrasPage],\n        expanded: isPricePage(),\n      },\n      {\n        iconHTML: ICONS.account,\n        key: 'passengers',\n        title: 'Passengers',\n        getContentEl: getBasketPassengersContentEl,\n        getTotalsEl: getBasketPassengersTotalsEl,\n        pages: [isPassengerDetailsPage, isExtrasPage],\n        expanded: isPassengerDetailsPage(),\n      },\n      {\n        iconHTML: ICONS.work,\n        key: 'extras',\n        title: 'Extras',\n        getContentEl: getBasketExtrasContentEl,\n        getTotalsEl: getBasketExtrasTotalsEl,\n        pages: [isExtrasPage],\n        expanded: isExtrasPage(),\n      },\n    ];\n\n    var lcBasket = new BasketWidget();\n    var lcSections = BASKET_SECTIONS\n      .filter(function(section) {\n        return section.pages.some(function(pageCheck) {\n          return pageCheck();\n        });\n      })\n      .map(function(item) {\n        return new Section(item);\n      });\n    var lcSectionsEl = document.createDocumentFragment();\n\n    lcSections.forEach(function(section) {\n      lcSectionsEl.appendChild(section.el);\n    });\n\n    lcBasket.setEmptyState(isPricePage());\n    lcBasket.setContent(lcSectionsEl);\n\n    if (isPricePage()) {\n      waitFor(function() {\n        return window.$ && window.$.fn && window.$.subscribe;\n      }).then(function() {\n        window.$.subscribe('fbr:fare:selected', handleFlightSelect);\n        clearVariantHandlers.push(function() {\n          window.$.unsubscribe(['fbr:fare:selected', handleFlightSelect]);\n        });\n\n        function handleFlightSelect() {\n          lcBasket.setEmptyState(false);\n          lcSections[0].triggerUpdate();\n        }\n      }).catch(function(err) {\n        safeLog.error(err);\n      });\n    }\n\n    // if (isPassengerDetailsPage()) {\n    //   // passenger page dynamic fields update is resolved within fields themselves\n    // }\n\n    if (isExtrasPage()) {\n      waitFor(function() {\n        return window.$ && window.$.fn && window.$.subscribe;\n      }).then(function() {\n        window.$.subscribe('sc:extra:added', lcSections[2].triggerUpdate);\n        window.$.subscribe('sc:extra:updated', lcSections[2].triggerUpdate);\n        window.$.subscribe('sc:extra:removed', lcSections[2].triggerUpdate);\n\n        // Insurance seems to be disabled in default atm\n        // window.$.subscribe('sc:insurance:added', lcSections[2].triggerUpdate);\n        // window.$.subscribe('sc:insurance:removed', lcSections[2].triggerUpdate);\n        // window.$.subscribe('sc:insurance:updated', lcSections[2].triggerUpdate);\n      }).catch(function(err) {\n        safeLog.error(err);\n      });\n    }\n\n    return lcBasket.el;\n  }\n\n  /* Classes */\n\n  function BasketWidget() {\n    var defaultBasketEl = getBasketEl();\n    var contentEl = null;\n\n    this.el = createBasket();\n    this.setContent = setContent.bind(this);\n    this.setEmptyState = setEmptyState.bind(this);\n\n    function createBasket() {\n      var newBasketEl = createEl([\n        '<div class=\"<%_CNAME_%>-basket ts-sc ts-sc--is-empty\">',\n        '<div class=\"<%_CNAME_%>-basket__header\"></div>',\n        '<div class=\"<%_CNAME_%>-basket__content\"></div>',\n        '<div class=\"<%_CNAME_%>-basket__empty-state\"></div>',\n        '<div class=\"<%_CNAME_%>-basket__footer\"></div>',\n        '</div>'\n      ].join(''));\n\n      contentEl = newBasketEl.querySelector('.' + _CNAME_ + '-basket__content');\n\n      if (!defaultBasketEl) {\n        safeLog.error('Basket element was not found, selector: [data-ts-comp=\"ShoppingCart\"]');\n      }\n\n      addChangeSearch();\n      addEmptyState();\n      addFareLinks();\n      addTnc();\n\n      if (isPricePage()) {\n        onPageLoad(addGrandTotal);\n      } else {\n        addGrandTotal();\n      }\n\n      // setTimeout(updateHeight, 0);\n      // window.addEventListener('resize', updateHeight);\n\n      return newBasketEl;\n\n      // function updateHeight() {\n      //   var size = newBasketEl.getBoundingClientRect();\n      //   // var height = window.innerHeight - size.top - window.scrollY;\n      //   var height = window.innerHeight - size.top;\n      //   newBasketEl.style.height = height + 'px';\n      // }\n\n      function addChangeSearch() {\n        var changeSearchEl = defaultBasketEl && defaultBasketEl.querySelector('.ts-sc__left');\n        var titleEl = changeSearchEl && changeSearchEl.querySelector('.ts-sc__label-search');\n\n        if (!changeSearchEl) {\n          safeLog.error('Change search element was not found');\n          return;\n        }\n\n        changeSearchEl.classList.add(_CNAME_ + '-search');\n        newBasketEl.querySelector('.' + _CNAME_ + '-basket__header').appendChild(changeSearchEl);\n\n        titleEl.innerHTML = titleEl.innerHTML.replace(\n          new RegExp(titleEl.dataset.i18n, \"gm\"), // eslint-disable-line quotes\n          '<span>' + titleEl.dataset.i18n + '</span>');\n      }\n\n      function addTnc() {\n        var tncEl = document.querySelector('.tc-anchor-container');\n        if (tncEl) {\n          clearVariantHandlers.push((function() {\n            var defaultNextEl = tncEl.nextElementSibling;\n            return function() {\n              defaultNextEl.insertAdjacentElement('beforeBegin', tncEl);\n            };\n          })());\n          newBasketEl.querySelector('.' + _CNAME_ + '-basket__footer').appendChild(tncEl);\n        }\n      }\n\n      function addFareLinks() {\n        var fareLinksEl = defaultBasketEl && defaultBasketEl.querySelector('.ts-sc__footer');\n        if (fareLinksEl) {\n          var tncLink = fareLinksEl.querySelector('.SB-TC-block');\n\n          fareLinksEl.classList.add(_CNAME_ + '-basket__fare-links');\n          fareLinksEl.insertAdjacentElement('beforeEnd', tncLink);\n          newBasketEl.querySelector('.' + _CNAME_ + '-basket__footer').appendChild(fareLinksEl);\n        }\n      }\n\n      function addGrandTotal() {\n        var grandTotalEl = defaultBasketEl && defaultBasketEl.querySelector('.ts-sc__grnd-ttl');\n        if (grandTotalEl) {\n          grandTotalEl.classList.add(_CNAME_ + '-basket__grand-total');\n          newBasketEl.querySelector('.' + _CNAME_ + '-basket__footer').appendChild(grandTotalEl);\n        }\n      }\n\n      function addEmptyState() {\n        var emptyStateEl = defaultBasketEl && defaultBasketEl.querySelector('.ts-sc__empty');\n        if (emptyStateEl) {\n          newBasketEl.querySelector('.' + _CNAME_ + '-basket__empty-state').appendChild(emptyStateEl);\n        }\n      }\n    }\n\n    function setEmptyState(isEmpty) {\n      if (isEmpty) {\n        this.el.classList.add('ts-sc--is-empty');\n      } else {\n        this.el.classList.remove('ts-sc--is-empty');\n      }\n    }\n\n    function setContent(el) {\n      contentEl.innerHTML = '';\n      contentEl.appendChild(el);\n    }\n  }\n\n  function Section(params) {\n    var options = params || {};\n\n    this.el = create();\n    this.triggerUpdate = update.bind(this);\n    this.triggerUpdate();\n\n    function update() {\n      var sectionSubEl = this.el.querySelector('.' + _CNAME_ + '-basket-item__sub');\n      var sectionContentEl = this.el.querySelector('.' + _CNAME_ + '-basket-item__content');\n      var totalsEl = options.getTotalsEl();\n      var contentEl = options.getContentEl();\n\n      safeLog.info(options.key, 'updated');\n\n      sectionSubEl.innerHTML = '';\n      sectionSubEl.appendChild(totalsEl);\n\n      sectionContentEl.innerHTML = '';\n      sectionContentEl.appendChild(contentEl);\n    }\n\n    function create() {\n      /* eslint-disable indent */\n      var html = [\n        '<div class=\"<%_CNAME_%>-basket-item <%_CNAME_%>-basket-item--<%key%>\">',\n          '<div class=\"<%_CNAME_%>-basket-item__header toggle\">',\n            '<span class=\"<%_CNAME_%>-basket-item__icon\"><%icon%></span>',\n            '<span class=\"<%_CNAME_%>-basket-item__title\"><%title%></span>',\n            '<span class=\"<%_CNAME_%>-basket-item__sub\"></span>',\n            '<span class=\"<%_CNAME_%>-basket-item__toggle\">',\n              ICONS.arrow,\n            '</span>',\n          '</div>',\n          '<div class=\"<%_CNAME_%>-basket-item__body\">',\n            '<div class=\"<%_CNAME_%>-basket-item__content\"></div>',\n          '</div>',\n        '</div>'\n      ].join('');\n      /* eslint-enable indent */\n\n      var sectionEl = createEl(html, {\n        icon: options.iconHTML,\n        title: options.title,\n        key: options.key,\n      });\n      var sectionToggleEl = sectionEl.querySelector('.toggle');\n\n      sectionToggleEl.addEventListener('click', function() {\n        sectionEl.classList.toggle(_CNAME_ + '-basket-item--expanded');\n      });\n\n      if (options.expanded) {\n        sectionEl.classList.add(_CNAME_ + '-basket-item--expanded');\n      }\n\n      return sectionEl;\n    }\n  }\n\n  function CurrencyConverter(options) {\n    var attrs = options || {};\n    this.el = null;\n    this.currencyEl = null;\n    this.update = update.bind(this);\n    this.enable = enable.bind(this);\n    this.disable = disable.bind(this);\n\n    create.apply(this);\n\n    function create() {\n      var el = createEl([\n        /* eslint-disable indent */\n        '<div class=\"<%_CNAME_%>-converter\">',\n          '<span class=\"<%_CNAME_%>-converter__icon\"><%iconHTML%></span>',\n          '<p class=\"<%_CNAME_%>-converter__title\">',\n            '<%title%> ',\n            '<span class=\"<%_CNAME_%>-converter__select\"><%currencyCode%></span>',\n          '</p>',\n          '<span class=\"<%_CNAME_%>-converter__toggle\">',\n            ICONS.arrow,\n          '</span>',\n        '</div>'\n        /* eslint-enable indent */\n      ].join(''), {\n        iconHTML: attrs.iconHTML || '',\n        title: attrs.title || '',\n        currencyCode: attrs.currencyCode || '',\n      });\n      var currencyEl = el.querySelector('.' + _CNAME_ + '-converter__select');\n\n      currencyEl.addEventListener('click', function() {\n        var isEnabled = el.classList.contains(el.classList[0] + '--enabled');\n        options.onClick && options.onClick(isEnabled);\n      });\n\n      this.el = el;\n      this.currencyEl = currencyEl;\n\n      return el;\n    }\n\n    function update(currencyCode) {\n      this.currencyEl.textContent = currencyCode;\n    }\n\n    function enable() {\n      this.el.classList.add(this.el.classList[0] + '--enabled');\n    }\n\n    function disable() {\n      this.el.classList.remove(this.el.classList[0] + '--enabled');\n    }\n  }\n\n  function getBasketEl() {\n    return document.querySelector('[data-ts-comp=\"ShoppingCart\"]');\n  }\n\n  function getBasketFlightsContentEl() {\n    var containerEl = document.createDocumentFragment();\n    var titleEl = document.querySelector('.ts-sc__box .ts-sc__title').cloneNode(true);\n    var totalEl = getBasketFlightsTotalsEl();\n    var conditionsEl = document.querySelector('.pYQ').cloneNode(true);\n    var flightsEl = document.querySelector('.ts-sc__flights').cloneNode(true);\n    var imgElems = flightsEl.querySelectorAll('.ts-fs__path img');\n    var defaultFlightDetailsLink = document.querySelector('.ts-sc__box .ts-sc__flght-dtls');\n    var cloneFlightDetailsLink = titleEl.querySelector('.ts-sc__flght-dtls');\n\n    flightsEl.className = _CNAME_ + '-ts-sc__flights'; // prevent internal validation confusion\n\n    imgElems.forEach(function(imgEl) {\n      imgEl.src = 'https://fly10.ek.aero/Images/farebrand_refresh/flight@2x.png';\n    });\n\n    cloneFlightDetailsLink.addEventListener('click', function(e) {\n      e.preventDefault();\n      defaultFlightDetailsLink.click();\n    });\n\n    [titleEl, totalEl, conditionsEl, flightsEl].forEach(function(copyEl) {\n      containerEl.appendChild(copyEl);\n    });\n\n    return containerEl;\n  }\n\n  function getBasketFlightsTotalsEl() {\n    var el = document.querySelector('.sbox-flight-total strong');\n    var copyEl = el && el.cloneNode(true);\n\n    if (isPricePage() || !copyEl.textContent.trim()) {\n      observe(el, function(mutations, observer) {\n        if (!copyEl.parentNode) {\n          observer.disconnect();\n          return;\n        }\n\n        if (copyEl.textContent !== el.textContent) {\n          copyEl.textContent = el.textContent;\n        }\n      });\n    }\n\n    return copyEl;\n  }\n\n  function getBasketExtrasContentEl() {\n    var el = document.querySelector('.ts-sc__extras');\n\n    if (!el) {\n      safeLog.error('Extras element was not found');\n      return null;\n    }\n\n    var copyEl = el.cloneNode(true);\n    var seatsEl = copyEl.querySelector('.extra-seat-container');\n    var titleEl = copyEl.querySelector('.ts-sc__title strong');\n    var totalEl = copyEl.querySelector('.ts-sc__total');\n    var totalValueEl = copyEl.querySelector('.ts-sc__total .trip-extra-total');\n    var origRemoveElems = el.querySelectorAll('[data-extra-id] a');\n    var copyRemoveElems = copyEl.querySelectorAll('[data-extra-id] a');\n\n    totalEl.innerHTML = '';\n    totalEl.appendChild(totalValueEl);\n    titleEl.textContent = 'Extras:';\n    seatsEl.classList.remove('extra-seat-container');\n\n    copyRemoveElems.forEach(function(copyRemoveEl, i) {\n      copyRemoveEl.classList.add(_CNAME_ + '-remove-extra');\n      copyRemoveEl.addEventListener('click', function(e) {\n        e.preventDefault();\n        origRemoveElems[i].click();\n      });\n    });\n\n    return copyEl;\n  }\n\n  function getBasketExtrasTotalsEl() {\n    var el = document.querySelector('.ts-sc__extras .trip-extra-total');\n    var copyEl = el && el.cloneNode(true);\n\n    if (!copyEl) {\n      safeLog.error('Extras basket element was not found');\n      return null;\n    }\n\n    return copyEl;\n  }\n\n  function getBasketPassengersTotalsEl() {\n    var passengersCountEl = document.querySelector('.ts-sc__passengers > div:first-child > strong:last-of-type');\n    var copyEl = passengersCountEl && passengersCountEl.cloneNode(true);\n\n    if (copyEl) {\n      copyEl.textContent = copyEl.textContent.replace(/,/gm, ',\\n');\n      return copyEl;\n    }\n\n    var text = ['Adults', 'Children', 'Infants', 'Teenagers']\n      .map(function(group) {\n        var count = Number(getDLProp('numberOf' + group + 'Flight'));\n        var slug = count === 1 ? getSingular(group) : group;\n        return count ? (count + ' ' + slug) : null;\n      })\n      .filter(Boolean)\n      .join(',\\n');\n\n    return createEl('<strong><%passengers%></strong>', { passengers: text });\n\n    function getSingular(plural) {\n      if ((/s$/gm).test(plural)) {\n        return plural.substr(0, plural.length - 1);\n      }\n\n      if (plural === 'Children') {\n        return 'Child';\n      }\n\n      return plural;\n    }\n  }\n\n  function getBasketPassengersContentEl() {\n    var containerEl = document.createDocumentFragment();\n    var listEl = createEl('<div class=\"<%_CNAME_%>-passengers__list\"></div>');\n    var defaultPassengerElems = document.querySelectorAll('.ts-sc__passengers .ts-sc__item');\n    var defaultEditDetailsLink = document.querySelector('.ts-sc__passengers > div:first-child > a');\n    var cloneEditDetailsLink = defaultEditDetailsLink && defaultEditDetailsLink.cloneNode(true);\n    var passengerElems = null;\n\n    if (isPassengerDetailsPage()) {\n      var passengersCount = Number(getDLProp('passengerCount') || 0);\n      passengerElems = Array.from(Array(passengersCount)).map(createPassengerEl);\n    } else {\n      passengerElems = Array.from(defaultPassengerElems).map(adjustPassengerEl);\n    }\n\n    passengerElems.forEach(function(el) {\n      listEl.appendChild(el);\n    });\n\n    containerEl.appendChild(listEl);\n\n    if (isExtrasPage() && cloneEditDetailsLink) {\n      cloneEditDetailsLink.classList.add(_CNAME_ + '-edit-passengers'); // for metric\n      cloneEditDetailsLink.addEventListener('click', function(e) {\n        e.preventDefault();\n        defaultEditDetailsLink.click();\n      });\n      containerEl.appendChild(cloneEditDetailsLink);\n    }\n\n    return containerEl;\n  }\n\n  function adjustPassengerEl(el, i) {\n    var passengerEl = el.cloneNode(true);\n    var passengerDetail = restorePassengerDetail(i);\n    var nameEl = createEl('<span class=\"<%_CNAME_%>-passenger__name\"></span>');\n    var dobEl = createEl('<span class=\"<%_CNAME_%>-passenger__dob\"></span>');\n    var ffEl = passengerEl.querySelector('.ts-sc__skywards');\n\n    nameEl.textContent = passengerEl.firstChild.textContent;\n    passengerEl.removeChild(passengerEl.firstChild);\n\n    Object.keys(passengerDetail)\n      .filter(function(key) {\n        return ['day', 'month', 'year'].indexOf(key) !== -1;\n      })\n      .forEach(function(key) {\n        dobEl.appendChild(createEl('<span><%value%></span>', { value: passengerDetail[key] }));\n      });\n\n    if (passengerDetail.ffCode && ffEl) {\n      var ffCodeEl = createEl('<span><%ffCode%></span>', { ffCode: passengerDetail.ffCode });\n      ffEl.insertAdjacentElement('afterBegin', ffCodeEl);\n    }\n\n    passengerEl.classList.add(_CNAME_ + '-passenger');\n    passengerEl.insertAdjacentElement('afterBegin', nameEl);\n    passengerEl.insertAdjacentElement('beforeEnd', dobEl);\n\n    return passengerEl;\n  }\n\n  function createPassengerEl(passenger, i) {\n    var contentPassengerEl = document.querySelector('[id*=\"Pax' + (i + 1) + '\"][id*=\"paxdiv\"]');\n    var useAccountInfoEl = (contentPassengerEl || document).querySelector('input[id*=\"Pax' + (i + 1) + '\"][class*=\"ts-autofill-checkbox\"]');\n    var basketPassengerEl = createEl('<div class=\"<%_CNAME_%>-passenger ts-sc__item\" paxid=\"<%id%>\"></div>', { id: i + 1 });\n\n    // Passenger Name\n    var nameEl = createEl('<span class=\"<%_CNAME_%>-passenger__name\"></span>');\n    var firstNameEl = createInputField(contentPassengerEl, 'input[id*=\"Pax' + (i + 1) + '\"][class*=\"first-name\"]', 'Passenger Name');\n    var lastNameEl = createInputField(contentPassengerEl, 'input[id*=\"Pax' + (i + 1) + '\"][class*=\"last-name\"]', '');\n\n    if (firstNameEl && lastNameEl) {\n      nameEl.appendChild(firstNameEl);\n      nameEl.appendChild(lastNameEl);\n\n      firstNameEl.onUpdate(function() { lastNameEl.update(); });\n      lastNameEl.onUpdate(function() { firstNameEl.update(); });\n    }\n\n    // Passenger Frequent Flyer Program\n    var ffEl = createEl('<span class=\"<%_CNAME_%>-passenger__ff\"></span>');\n    var ffNoEl = createInputField(contentPassengerEl, 'input[id*=\"Pax' + (i + 1) + '\"][id*=\"FFNo\"]', '');\n    var ffCodeEl = createSelectField(\n      contentPassengerEl,\n      '.ts-ffb .custom-select-box select[id*=\"Pax' + (i + 1) + '\"]',\n      '.ts-ffb .custom-select-box .chosen-single'\n    );\n\n    if (ffCodeEl && ffNoEl) {\n      ffEl.appendChild(ffCodeEl);\n      ffEl.appendChild(ffNoEl);\n\n      storePassengerDetail(i, 'ffCode', ffCodeEl.textContent);\n      ffCodeEl.onUpdate(function(value) {\n        storePassengerDetail(i, 'ffCode', value);\n      });\n    }\n\n    // Passenger DOB\n    var dobEl = createEl('<span class=\"<%_CNAME_%>-passenger__dob\"></span>');\n    var dobDayEl = createSelectField(\n      contentPassengerEl,\n      '.birthdate-holder .custom-select-box:nth-of-type(1) select[id*=\"Pax' + (i + 1) + '\"][class*=\"birthday-dropdown\"]',\n      '.birthdate-holder .custom-select-box:nth-of-type(1) .chosen-single'\n    );\n    var dobMonthEl = createSelectField(\n      contentPassengerEl,\n      '.birthdate-holder .custom-select-box:nth-of-type(2) select[id*=\"Pax' + (i + 1) + '\"][class*=\"birthday-dropdown\"]',\n      '.birthdate-holder .custom-select-box:nth-of-type(2) .chosen-single',\n      true\n    );\n    var dobYearEl = createSelectField(\n      contentPassengerEl,\n      '.birthdate-holder .custom-select-box:nth-of-type(3) select[id*=\"Pax' + (i + 1) + '\"][class*=\"birthday-dropdown\"]',\n      '.birthdate-holder .custom-select-box:nth-of-type(3) .chosen-single'\n    );\n\n    if (dobDayEl && dobMonthEl && dobYearEl) {\n      dobEl.appendChild(dobDayEl);\n      dobEl.appendChild(dobMonthEl);\n      dobEl.appendChild(dobYearEl);\n\n      [\n        { key: 'day', el: dobDayEl },\n        { key: 'month', el: dobMonthEl },\n        { key: 'year', el: dobYearEl },\n      ].forEach(function(field) {\n        storePassengerDetail(i, field.key, field.el.textContent);\n        field.el.onUpdate(function(value) {\n          storePassengerDetail(i, field.key, value);\n        });\n      });\n    }\n\n    // Use Emirates Skywards account info\n    if (useAccountInfoEl) {\n      useAccountInfoEl.addEventListener('change', function() {\n        firstNameEl && firstNameEl.update();\n        lastNameEl && lastNameEl.update();\n        ffNoEl && ffNoEl.update();\n      });\n    }\n\n    basketPassengerEl.appendChild(nameEl);\n    basketPassengerEl.appendChild(ffEl);\n    basketPassengerEl.appendChild(dobEl);\n\n    return basketPassengerEl;\n  }\n\n  function createSelectField(parentEl, inputSelector, fieldSelector, shouldTakeLabel) {\n    var fieldEl = document.createElement('span');\n    var inputEl = (parentEl || document).querySelector(inputSelector);\n    var defaultFieldEl = (parentEl || document).querySelector(fieldSelector);\n    var defaultFieldSelectionEl = defaultFieldEl && defaultFieldEl.querySelector('span');\n    var updateHandlers = [];\n\n    if (!inputEl || !defaultFieldEl) {\n      safeLog.error('input not found');\n      return null;\n    }\n\n    updateValue();\n    observe(defaultFieldEl, function() {\n      var value = getValue();\n      updateValue();\n      updateHandlers.forEach(function(fn) { fn(value); });\n    }, { childList: true, subtree: true });\n    fieldEl.onUpdate = function(fn) {\n      updateHandlers.push(fn);\n    };\n\n    return fieldEl;\n\n    function updateValue() {\n      fieldEl.textContent = getValue();\n    }\n\n    function getValue() {\n      if (shouldTakeLabel) {\n        return defaultFieldSelectionEl && defaultFieldSelectionEl.textContent || '';\n      }\n\n      if (inputEl.value === '0' || inputEl.value === 'none') {\n        return '';\n      }\n\n      return inputEl.value;\n    }\n  }\n\n  function createInputField(parentEl, inputSelector, initialValue) {\n    var fieldEl = document.createElement('span');\n    var inputEl = (parentEl || document).querySelector(inputSelector);\n    var updateHandlers = [];\n\n    if (!inputEl) {\n      safeLog.error('input not found');\n      return null;\n    }\n\n    updateValue(initialValue);\n    inputEl.addEventListener('change', function() {\n      setTimeout(updateValue, 0);\n      updateHandlers.forEach(function(fn) { fn(inputEl.value); });\n    });\n    fieldEl.update = updateValue;\n    fieldEl.onUpdate = function(fn) {\n      updateHandlers.push(fn);\n    };\n\n    return fieldEl;\n\n    function updateValue(text) {\n      fieldEl.textContent = inputEl.value || text;\n    }\n  }\n\n  function onCurConversion(cb, runOnInit) {\n    waitFor(function() {\n      return document.querySelector('.summary-converted-curr-container');\n    })\n      .then(function(curConvertedEl) {\n        if (runOnInit) {\n          cb();\n        }\n\n        observe(curConvertedEl, function() {\n          cb();\n        });\n      })\n      .catch(function() {\n        safeLog.error('Converted currency element was not found');\n      });\n  }\n\n  function getPassengersCount() {\n    var passengersCountEl = document.querySelector('.passengerSummary');\n    var passengersCountText = passengersCountEl && passengersCountEl.textContent || '';\n\n    return passengersCountText.match(/\\d+/)[0] || getDLProp('passengerCountFlight');\n  }\n\n  function getPassengersEnding(passengerCount) {\n    return parseInt(passengerCount, 10) === 1 ? '' : 's';\n  }\n\n  function getUserSkywardsMiles() {\n    var milesEl = document.querySelector('.skywards-user-miles-title');\n    return milesEl && milesEl.textContent.trim() || 0;\n  }\n\n  /* Checks */\n  function isSkywardsHidden() {\n    var skywardsEl = document.getElementById('dvPayMethodsContainer');\n    var skywardsContentEl = skywardsEl && skywardsEl.querySelector('#dvPayMethodsContainer .ts-rsm');\n    return !skywardsContentEl || isHidden(skywardsContentEl);\n  }\n\n  function isHidden(el) {\n    // https://developer.mozilla.org/en-US/docs/Web/API/HTMLElement/offsetParent\n    return el.offsetParent === null;\n  }\n\n  function isPricePage() {\n    return (/select a price/gi).test(getDLProp('pageName'));\n  }\n\n  function isPassengerDetailsPage() {\n    return (/enter passenger details/gi).test(getDLProp('pageName'));\n  }\n\n  function isExtrasPage() {\n    return (/choose extras/gi).test(getDLProp('pageName'));\n  }\n\n  function storePassengerDetail(passengerIndex, key, value) {\n    var data = restore('passengers') || [];\n    data[passengerIndex] = data[passengerIndex] || {};\n    data[passengerIndex][key] = value;\n    store('passengers', data);\n  }\n\n  function restorePassengerDetail(passengerIndex) {\n    var data = restore('passengers') || [];\n    return data[passengerIndex] ? data[passengerIndex] : {};\n  }\n\n  /* Utils */\n\n  function store(key, value) {\n    try {\n      window.sessionStorage.setItem(_CNAME_ + '-' + key, JSON.stringify(value));\n    } catch (err) {\n      safeLog.error('Session storage error:', err);\n    }\n  }\n\n  function restore(key) {\n    try {\n      var data = window.sessionStorage.getItem(_CNAME_ + '-' + key);\n      return data ? JSON.parse(data) : null;\n    } catch (err) {\n      safeLog.error('Session storage error:', err);\n    }\n    return null;\n  }\n\n  function getNextUntil(el, selector) {\n    var items = [];\n\n    return (function getNext(elem) {\n      var nextEl = elem && elem.nextElementSibling;\n\n      if (!elem || !nextEl) return items;\n\n      if (selector && nextEl.matches(selector)) {\n        return items;\n      }\n\n      items.push(nextEl);\n      return getNext(nextEl);\n    })(el);\n  }\n\n  function getDLProp(key, recent) {\n    var matches = (window.dataLayer || []).filter(function(chunk) {\n      return !!chunk[key];\n    });\n    var dataIndex = recent ? (matches.length - 1) : 0;\n\n    return dataIndex !== -1 ? (matches[dataIndex] || {})[key] : null;\n  }\n\n  function createEl(html, params) {\n    var container = document.createElement('div');\n    container.innerHTML = tmpl(html, params);\n    return container.firstElementChild;\n  }\n\n  function tmpl(template, obj) {\n    var params = Object.assign({}, obj, {\n      _CNAME_: _CNAME_,\n    });\n    var newHtml = Object.keys(params).reduce(function(acc, key) {\n      return acc.replace(new RegExp(\"<%\" + key + \"%>\", \"g\"), params[key]); // eslint-disable-line quotes\n    }, template);\n\n    return newHtml;\n  }\n\n  function addQMIntegration() {\n    document.body.classList.add(_CNAME_ + '--' + _SNAME_);\n  }\n\n  function observe(targetNode, callback, attrs) {\n    if (!targetNode || !callback) return null;\n    var config = attrs || { attributes: true, childList: true, subtree: true };\n    var observer = new MutationObserver(callback);\n    observer.observe(targetNode, config);\n    return observer;\n  }\n\n  function waitFor(condition, timeout) {\n    var stopTime = typeof timeout === 'number' ? timeout : 7000;\n    var stop = false;\n\n    window.setTimeout(function() {\n      stop = true;\n    }, stopTime);\n\n    return new Promise(function(resolve, reject) {\n      (function _innerWaitFor() {\n        var value = condition();\n\n        if (stop) {\n          reject();\n        } else if (value) {\n          resolve(value);\n        } else {\n          window.setTimeout(_innerWaitFor, 50);\n        }\n      })();\n    });\n  }\n\n  function onPageLoad(cb) {\n    if (document.readyState === 'loading') {\n      document.addEventListener('DOMContentLoaded', cb);\n    } else {\n      cb();\n    }\n  }\n\n  /* LC safe debug */\n  function debug(u){var n={info:\"blue\",ok:\"green\",error:\"red\"};return function(t){return Object.keys(n).reduce(function(r,e){var o=n[e];r[e]=function(){if(!c())return;var r=(new Date).toTimeString().replace(/\\s(.*)/,\"\");var n=\"%c\"+u+\":\"+e+\" [\"+r+\"] \"+(t||\"\");console.info.apply(this,[n,\"color: \"+o].concat(Array.prototype.slice.call(arguments)))};return r},{})};function c(){return document.cookie.indexOf(\"lc-qa=1\")!==-1||window.location.href.indexOf(\"lc-qa=1\")!==-1}} // eslint-disable-line\n})(typeof unsafeWindow === 'undefined' ? window : unsafeWindow, typeof unsafeWindow !== 'undefined');\n// eslint-disable-next-line spaced-comment\n//# sourceURL=c--d30-variant.js\n"}},{ref:"42b7e99e-3ce6-4d0b-8f29-03e17fc6203a",name:"Original",assets:{css:"",html:"",js:'(function(window) {\n  var _CNAME_ = \'lc-d30\';\n  var _SNAME_ = \'default\';\n  var safeLog = debug(_CNAME_)(_SNAME_);\n\n  safeLog.info();\n\n  try {\n    // default code goes here\n    addQMIntegration();\n  } catch (err) {\n    safeLog.error(err);\n  }\n\n  function addQMIntegration() {\n    document.body.classList.add(_CNAME_ + \'--\' + _SNAME_);\n  }\n\n  /* LC safe debug */\n  function debug(u){var n={info:"blue",ok:"green",error:"red"};return function(t){return Object.keys(n).reduce(function(r,e){var o=n[e];r[e]=function(){if(!c())return;var r=(new Date).toTimeString().replace(/\\s(.*)/,"");var n="%c"+u+":"+e+" ["+r+"] "+(t||"");console.info.apply(this,[n,"color: "+o].concat(Array.prototype.slice.call(arguments)))};return r},{})};function c(){return document.cookie.indexOf("lc-qa=1")!==-1||window.location.href.indexOf("lc-qa=1")!==-1}} // eslint-disable-line\n})(window);\n// eslint-disable-next-line spaced-comment\n//# sourceURL=c--d30-default.js\n'}}]},{ref:"6013ac08-7cff-436c-af6b-a40d3fc6ffa6",name:"Box-286 Skywards login prompt home page (EK.com)",revision:139,archived:!1,target:{script:'function filter() {\n  if (dataLayer && dataLayer.length > 0) {\n    var datalayerData = dataLayer[0];\n\n    if (\n      (!cookieComplianceEnabled ||\n        (cookieComplianceEnabled &&\n          OnetrustActiveGroups.indexOf(cookieComplianceFunctionalGroup) > -1\n        )\n      ) &&\n      datalayerData.visitorLoginState === "Logged Out" &&\n      datalayerData.pageCategory === "Home")\n    {\n      targetingPassed();\n    }\n  }\n}\n\nvar cookieComplianceEnabled = true;\nvar cookieComplianceFunctionalGroup = "C0002";\nif (cookieComplianceEnabled) {\n  window.addEventListener("OneTrustGroupsUpdated", function (e) {\n    if (OnetrustActiveGroups.indexOf(cookieComplianceFunctionalGroup) > -1) {\n      filter();\n    } else {\n      //Hide experience wrapper if functional group is disabled\n      const wrapper =  document.querySelectorAll(".bx-skywards-login-container");\n      if(wrapper) {\n          wrapper.forEach(e => { e.style.display = "none"; });\n      }\n    }\n  });\n}\nfilter();',targetPages:[]},traffic:{type:"advancedTraffic",allocationLow:1,allocationHigh:120,splits:[{ref:"d75df517-7abe-46b3-b40d-f9052a4bf324",lowSplit:1,highSplit:0},{ref:"abb49c5b-e933-436a-8b18-0b38e0dee1a6",lowSplit:1,highSplit:6},{ref:"e5b4fabd-3df3-4e74-8444-48102271218c",lowSplit:7,highSplit:120}]},variants:[{ref:"d75df517-7abe-46b3-b40d-f9052a4bf324",name:"Original",assets:{css:"/** style your Experience with CSS */",html:"\x3c!-- define the structure and content of your Experience in HTML e.g.--\x3e\n<div>My Content</div>\n\x3c!-- Use dynamic Guest variables, type ctrl+space or guest to explore available entities.--\x3e\n\x3c!-- Type 'd' to see decisioning helpers --\x3e\n",js:"// You can choose how you want to add your HTML by using insertHTMLBefore, insertHTMLAfter, or replaceHTML methods\n// e.g insertHTMLAfter('#.someClassName'); or insertHTMLAfter('body'); or replaceHTML('#myPageId')\n\n/*\n\n(function () {\n  // Add statements here\n})();\n\n*/"}},{ref:"e5b4fabd-3df3-4e74-8444-48102271218c",name:"Skywards prompt after products block",assets:{css:':root {\n  --font-helvetica: HelveticaNeue,Helvetica Neue,Helvetica,Lucida Grande,sans-serif;\n  --font-helvetica-light: HelveticaNeue-Light,Helvetica Neue Light,Helvetica Neue,Helvetica,Arial,Lucida Grande,sans-serif;\n  --font-ek-bold: EmiratesSB-Bold, helvetica, arial, sans-serif;\n  --text-color: #333333;\n  --white-color: #FFFFFF;\n  --red-color: #c60c30;\n  --gray-color: #666666;\n}\n\n .bx-skywards-login-container {\n     display: flex;\n     flex-direction: column;\n     align-items: center;\n     position: relative;\n }\n \n .bx-skywards-login-tier-wrapper {\n     height: 100%;\n }\n \n.bx-skywards-login-tier-logo {\n    width: 75px;\n    height: 75px;\n    border: 5px solid var(--white-color);\n    border-radius: 50%;\n    box-shadow: 0 2px 4px 0 rgba(0, 0, 0, 0.5);\n    z-index: 1;\n    position: relative;\n}\n\n.bx-skywards-signup-tier-logo {\n    border: none;\n    border-radius: 0;\n    box-shadow: none;\n    width: 260px;\n    height: 100%;\n}\n\n.bx-skywards-login-body-container {\n    display: flex;\n    flex-direction: column;\n}\n\n.bx-skywards-login-title {\n    font-weight: 700;\n    margin: 0 0 15px 0;\n}\n\n.bx-skywards-body {\n    font-family: var(--font-helvetica);\n    font-size: 20px;\n    line-height: 24px;\n    color: var(--white-color);\n}\n\n.bx-skywards-signup-body {\n    font-size: 14px;\n    line-height: 18px;\n}\n\n.bx-skywards-signup-title {\n    font-size: 16px;\n    line-height: 20px;\n}\n\n.bx-skywards-login-body {\n    font-family: var(--font-helvetica);\n    font-size: 20px;\n    line-height: 24px;\n    color: var(--white-color);\n    text-align: center;\n    width: 100%;\n    position: relative;\n    overflow: hidden;\n    background: #000;\n    z-index: 0;\n    border-radius: 5px;\n}\n.bx-skywards-signup-body-wrapper {\n    background: #000;\n}\n.bx-skywards-login__cta {\n    text-align: center;\n    font-weight: 700;\n    cursor: pointer;\n    min-width: 150px;\n    padding: 5px 20px;\n    font-size: 1.4rem;\n    line-height: 1.8rem;\n    box-shadow: 0 2px 1px 0 rgba(0,0,0,.1);\n    border: .1rem solid var(--text-color);\n    background: var(--white-color);\n    color: var(--text-color);\n    text-decoration: none;\n    appearance: none!important;\n    white-space: normal;\n    font-style: normal;\n    border-radius: .3rem;\n    font-family: var(--font-helvetica);\n    z-index: 1;\n}\n\n.bx-skywards-background-mobile {\n    display: none;\n}\n\n.bx-skywards-login__cta:hover {\n    box-shadow: 0 0 0.6rem 0 rgba(0,0,0,.5);\n}\n\n@media only screen and (min-width: 769px) {\n    .widget.js-widget {\n        margin-bottom: 25px;\n    }\n    .product-block-wrapper {\n        margin: 25px auto;\n    }\n    .bx-skywards-login-container {\n        max-width: 1100px;\n        margin: 25px auto;\n        flex-direction: row;\n        justify-content: space-between;\n    }\n    .bx-skywards-login-body {\n        display: flex;\n        align-items: center;\n        padding: 10px 20px 10px 130px;\n        margin-left: -90px;\n        min-height: 65px;\n        min-width: 100%;\n        justify-content: space-between;\n        text-align: left;\n    }\n    \n    .bx-skywards-signup-body-wrapper {\n        margin-left: -260px;\n        padding: 5px 20px 5px 290px;\n    }\n    .bx-skywards-login-title {\n        margin: 0;\n    }\n    \n    .bx-skywards-login-body-container {\n        display: block;\n    }\n    \n    .bx-skywards-signup-body-container {\n        display: flex;\n        flex-direction: column;\n    }\n    \n    .bx-skywards-login__cta {\n        margin-left: 20px;\n    }\n    \n    html[dir="rtl"] .bx-skywards-login-body {\n        text-align: right;\n        margin-right: -90px;\n        margin-left: 0;\n        padding: 10px 130px 10px 20px;\n    }\n    html[dir="rtl"] .bx-skywards-signup-body-wrapper {\n        margin-right: -260px;\n        padding: 5px 290px 5px 20px;\n    }\n    .bx-skywards-login-tier-logo {\n        left: 20px;\n        border: 5px solid var(--white-color);\n        position: relative;\n        z-index: 1;\n        min-width: 90px;\n        min-height: 90px;\n    }\n    \n    .bx-skywards-signup-tier-logo {\n        left: 20px;\n        border: none;\n        min-width: inherit;\n        min-height: inherit;\n    }\n    html[dir="rtl"] .bx-skywards-login__cta {\n        margin-right: 20px;\n        margin-left: 0;\n    }\n    html[dir="rtl"] .bx-skywards-login-tier-logo {\n        right: 20px;\n    }\n    .bx-skywards-background {\n        position: absolute;\n        top: 0;\n        width: 100%;\n        right: 0;\n        opacity: .3;\n    }\n    }\n}\n\n@media only screen and (max-width: 768px) { \n   .bx-skywards-login-wrapper {\n    background: #666;\n    margin: 20px 10px;\n}\n\n.bx-skywards-login-body{\n    margin: 20px 10px 0 10px;\n\n}\n.bx-skywards-login-body-container {\n    margin-bottom: 20px;\n}\n.bx-skywards-body {\n    font-size: 14px;\n    line-height: 18px;\n}\n.bx-skywards-login-title{\n    font-size: 16px;\n    line-height: 20px;\n}\n.bx-skywards-login__cta {\n    display: block;\n}\n}\n\n\n@media only screen and (max-width: 1023px) and (min-width: 769px) {\n    .bx-skywards-login-container{\n        padding: 0 30px;\n    }\n    .bx-skywards-background {\n        position: absolute;\n        top: 0;\n        width: 100%;\n        right: 0;\n        opacity: .3;\n        height: 100%;\n    }\n}\n@media only screen and (width: 1024px) {\n    .bx-skywards-login-container{\n        padding: 0 50px;   \n    }\n}\n@media only screen and (max-width: 768px) {\n    .bx-skywards-login-container {\n        background-color: #000;\n        padding: 15px 10px;\n        margin: 20px 10px;\n        border-radius: 5px;\n    }\n    .bx-skywards-signup-container {\n        background-color: #000;\n    }\n    .bx-skywards-background-mobile {\n        position: absolute;\n        top: 0;\n        width: 100%;\n        right: 0;\n        bottom: 0;\n        opacity: .2;\n        left: 0;\n        height: 100%;\n        object-fit: cover;\n        display: block;\n    }\n    .bx-skywards-login-body-container {\n        margin-bottom: 20px;\n        margin-top: 10px;\n        align-items: center;\n    }\n    .bx-skywards-login__cta {\n        display: inline-block;\n    }\n    .bx-skywards-background {\n        display: none;\n    }\n    .bx-skywards-login-body {\n        background: transparent;\n    }\n    .bx-skywards-signup-body-wrapper {\n        background: transparent;\n    }\n    .bx-skywards-body{\n        width: calc(100% - 50px);\n\n    }\n}',html:'<div class="bx-skywards-login-container {{#unless guest.tier}}bx-skywards-signup-container{{/unless}}">\r\n    <img class="bx-skywards-background-mobile bx-skywards-tier-background">\r\n    <img loading="lazy" alt="" class="bx-skywards-login-tier-logo {{#unless guest.tier}}bx-skywards-signup-tier-logo{{/unless}}">\r\n    <div class="bx-skywards-login-body {{#unless guest.tier}}bx-skywards-signup-body-wrapper{{/unless}}">\r\n        <img class="bx-skywards-background bx-skywards-tier-background">\r\n        <div class="bx-skywards-login-body-container bx-skywards-signup-body-container">\r\n            <span id="bx-skywards-title" class="bx-skywards-login-title bx-skywards-signup-title"></span>\r\n            <span id="bx-skywards-body" class="bx-skywards-body bx-skywards-signup-body"></span>\r\n        </div>\r\n        <a id="bx-login-prompt-cta" class="bx-skywards-login__cta"></a>\r\n    </div>\r\n</div>',js:'function sendBoxeverEvent(eventType) {\n  var event = {\n    channel: "WEB",\n    type: eventType,\n    page: dataLayer[0].pageName,\n    pos: _boxever_settings.pointOfSale,\n    browser_id: Boxever.getID(),\n  };\n  Boxever.eventCreate(event, function (data) {}, "json");\n}\n\n  let wrapper = "";\n  if (dataLayer && dataLayer[0] && dataLayer[0].pageName === "/ Home") {\n    wrapper = document.querySelector(".product-block-wrapper");\n  } else {\n    wrapper = document.getElementById("maincontent").firstChild;\n  }\n  if (wrapper) {\n    let publication = "";\n    if (dataLayer && dataLayer[0] && dataLayer[0].pageName === "/ Home") {\n      publication = `${__EK__.urlparser.country}/${__EK__.urlparser.language}`;\n    } else {\n      publication = `${__INITIAL_STATE__.urlparser.results.countryCompat}/${__INITIAL_STATE__.urlparser.results.language}`;\n    }\n    const RESOURCE_KEYS_ENDPOINT = `https://www.emirates.com/service/content/api/v4.0/resources/eol/${publication}/Experiences/Skywards-Sign-Up/EK`;\n\n    const tiersLogos = {\n      blue: "Experiences/Skywards-Sign-Up/EK/skywards-coin-blue-image",\n      silver: "Experiences/Skywards-Sign-Up/EK/skywards-coin-silver-image",\n      gold: "Experiences/Skywards-Sign-Up/EK/skywards-coin-gold-image",\n      platinum: "Experiences/Skywards-Sign-Up/EK/skywards-coin-platinum-image",\n      all: "Experiences/Skywards-Sign-Up/EK/signup-tier-image",\n    };\n\n    const tiersColors = {\n      blue: "#000",\n      silver: "#000",\n      gold: "#000",\n      platinum: "#000",\n      default: "#000",\n    };\n\n    const LOGIN_RESOURCE_MAP = {\n      ctaLabel: "Experiences/Skywards-Sign-Up/EK/login-cta-label__text",\n      title: "Experiences/Skywards-Sign-Up/EK/login-header-title__text",\n      body: "Experiences/Skywards-Sign-Up/EK/login-body__text",\n      ctaLink: "Experiences/Skywards-Sign-Up/EK/login__url",\n    };\n\n    const SIGNUP_RESOURCE_MAP = {\n      ctaLabel: "Experiences/Skywards-Sign-Up/EK/signup-cta-label__text",\n      ctaLink: "Experiences/Skywards-Sign-Up/EK/sign-up-cta__link",\n      title: "Experiences/Skywards-Sign-Up/EK/signup-header-title__text",\n      body: "Experiences/Skywards-Sign-Up/EK/signup-body__text",\n    };\n    fetch(RESOURCE_KEYS_ENDPOINT)\n      .then((response) => {\n        return response.json();\n      })\n      .then((results) => {\n        let resources = null;\n        if (results) {\n          resources = results.results;\n        }\n        if (resources) {\n          let mappedResources = {};\n          let resourceMap = SIGNUP_RESOURCE_MAP;\n          if ("{{guest.tier}}") {\n            resourceMap = LOGIN_RESOURCE_MAP;\n            sendBoxeverEvent("BOX286_LOGIN_VIEWED");\n          } else {\n            sendBoxeverEvent("BOX286_SIGNUP_VIEWED");\n          }\n          for (var key of Object.keys(resourceMap)) {\n            if (resourceMap[key] in resources) {\n              mappedResources[key] = resources[resourceMap[key]];\n            } else {\n              mappedResources[key] = "";\n            }\n          }\n          wrapper.insertAdjacentHTML(\n            "afterend",\n            \'<div class="bx-skywards-login-wrapper"></div>\'\n          );\n          insertHTMLAfter(".bx-skywards-login-wrapper");\n          let cta = document.getElementById("bx-login-prompt-cta");\n          if (cta) {\n            cta.innerHTML = mappedResources["ctaLabel"];\n            cta.href = "{{guest.tier}}"\n              ? mappedResources["ctaLink"].url\n              : `${mappedResources["ctaLink"].url}&prscode=AHPW7`;\n            cta.addEventListener("click", () => {\n              if ("{{guest.tier}}") {\n                sendBoxeverEvent("BOX286_LOGIN_CLICKED");\n              } else {\n                sendBoxeverEvent("BOX286_SIGNUP_CLICKED");\n              }\n            });\n          }\n          let titleElement = document.getElementById("bx-skywards-title");\n          if (titleElement) {\n            titleElement.innerHTML = mappedResources["title"];\n          }\n          let bodyElement = document.getElementById("bx-skywards-body");\n          if (bodyElement) {\n            bodyElement.innerHTML = mappedResources["body"];\n          }\n          let tierLogoElement = document.querySelector(\n            ".bx-skywards-login-tier-logo"\n          );\n          if (tierLogoElement) {\n            if (\n              "{{guest.tier}}" &&\n              "{{guest.tier}}".toLowerCase() in tiersLogos\n            ) {\n              tierLogoElement.src =\n                resources[tiersLogos["{{guest.tier}}".toLowerCase()]].url;\n            } else {\n              tierLogoElement.src = resources[tiersLogos["all"]].url;\n            }\n          }\n          let backgroundImage = document.querySelectorAll(\n            ".bx-skywards-tier-background"\n          );\n          if (backgroundImage && backgroundImage.length) {\n            backgroundImage.forEach(\n              (image) =>\n                (image.src = resources["Experiences/Skywards-Sign-Up/EK/background-tier-image"].url)\n            );\n          }\n        }\n      })\n      .catch((error) => {\n        console.log(error, "Error fetching resource keys list");\n      });\n  }\n\n'}},{ref:"abb49c5b-e933-436a-8b18-0b38e0dee1a6",name:"Skywards prompt before products block",assets:{css:':root {\n  --font-helvetica: HelveticaNeue,Helvetica Neue,Helvetica,Lucida Grande,sans-serif;\n  --font-helvetica-light: HelveticaNeue-Light,Helvetica Neue Light,Helvetica Neue,Helvetica,Arial,Lucida Grande,sans-serif;\n  --font-ek-bold: EmiratesSB-Bold, helvetica, arial, sans-serif;\n  --text-color: #333333;\n  --white-color: #FFFFFF;\n  --red-color: #c60c30;\n  --gray-color: #666666;\n}\n\n .bx-skywards-login-container {\n     display: flex;\n     flex-direction: column;\n     align-items: center;\n     position: relative;\n }\n \n .bx-skywards-login-tier-wrapper {\n     height: 100%;\n }\n \n.bx-skywards-login-tier-logo {\n    width: 75px;\n    height: 75px;\n    border: 5px solid var(--white-color);\n    border-radius: 50%;\n    box-shadow: 0 2px 4px 0 rgba(0, 0, 0, 0.5);\n    z-index: 1;\n    position: relative;\n}\n\n.bx-skywards-signup-tier-logo {\n    border: none;\n    border-radius: 0;\n    box-shadow: none;\n    width: 260px;\n    height: 100%;\n}\n\n.bx-skywards-login-body-container {\n    display: flex;\n    flex-direction: column;\n}\n\n.bx-skywards-login-title {\n    font-weight: 700;\n    margin: 0 0 15px 0;\n}\n\n.bx-skywards-body {\n    font-family: var(--font-helvetica);\n    font-size: 20px;\n    line-height: 24px;\n    color: var(--white-color);\n}\n\n.bx-skywards-signup-body {\n    font-size: 14px;\n    line-height: 18px;\n}\n\n.bx-skywards-signup-title {\n    font-size: 16px;\n    line-height: 20px;\n}\n\n.bx-skywards-login-body {\n    font-family: var(--font-helvetica);\n    font-size: 20px;\n    line-height: 24px;\n    color: var(--white-color);\n    text-align: center;\n    width: 100%;\n    position: relative;\n    overflow: hidden;\n    background: #000;\n    z-index: 0;\n    border-radius: 5px;\n}\n.bx-skywards-signup-body-wrapper {\n    background: #000;\n}\n.bx-skywards-login__cta {\n    text-align: center;\n    font-weight: 700;\n    cursor: pointer;\n    min-width: 150px;\n    padding: 5px 20px;\n    font-size: 1.4rem;\n    line-height: 1.8rem;\n    box-shadow: 0 2px 1px 0 rgba(0,0,0,.1);\n    border: .1rem solid var(--text-color);\n    background: var(--white-color);\n    color: var(--text-color);\n    text-decoration: none;\n    appearance: none!important;\n    white-space: normal;\n    font-style: normal;\n    border-radius: .3rem;\n    font-family: var(--font-helvetica);\n    z-index: 1;\n}\n\n.bx-skywards-background-mobile {\n    display: none;\n}\n\n.bx-skywards-login__cta:hover {\n    box-shadow: 0 0 0.6rem 0 rgba(0,0,0,.5);\n}\n\n@media only screen and (min-width: 769px) {\n    .widget.js-widget {\n        margin-bottom: 25px;\n    }\n    .product-block-wrapper {\n        margin: 25px auto;\n    }\n    .bx-skywards-login-container {\n        max-width: 1100px;\n        margin: 25px auto;\n        flex-direction: row;\n        justify-content: space-between;\n    }\n    .bx-skywards-login-body {\n        display: flex;\n        align-items: center;\n        padding: 10px 20px 10px 130px;\n        margin-left: -90px;\n        min-height: 65px;\n        min-width: 100%;\n        justify-content: space-between;\n        text-align: left;\n    }\n    \n    .bx-skywards-signup-body-wrapper {\n        margin-left: -260px;\n        padding: 5px 20px 5px 290px;\n    }\n    .bx-skywards-login-title {\n        margin: 0;\n    }\n    \n    .bx-skywards-login-body-container {\n        display: block;\n    }\n    \n    .bx-skywards-signup-body-container {\n        display: flex;\n        flex-direction: column;\n    }\n    \n    .bx-skywards-login__cta {\n        margin-left: 20px;\n    }\n    \n    html[dir="rtl"] .bx-skywards-login-body {\n        text-align: right;\n        margin-right: -90px;\n        margin-left: 0;\n        padding: 10px 130px 10px 20px;\n    }\n    html[dir="rtl"] .bx-skywards-signup-body-wrapper {\n        margin-right: -260px;\n        padding: 5px 290px 5px 20px;\n    }\n    .bx-skywards-login-tier-logo {\n        left: 20px;\n        border: 5px solid var(--white-color);\n        position: relative;\n        z-index: 1;\n        min-width: 90px;\n        min-height: 90px;\n    }\n    \n    .bx-skywards-signup-tier-logo {\n        left: 20px;\n        border: none;\n        min-width: inherit;\n        min-height: inherit;\n    }\n    html[dir="rtl"] .bx-skywards-login__cta {\n        margin-right: 20px;\n        margin-left: 0;\n    }\n    html[dir="rtl"] .bx-skywards-login-tier-logo {\n        right: 20px;\n    }\n    .bx-skywards-background {\n        position: absolute;\n        top: 0;\n        width: 100%;\n        right: 0;\n        opacity: .3;\n    }\n    }\n}\n\n@media only screen and (max-width: 768px) { \n   .bx-skywards-login-wrapper {\n    background: #666;\n    margin: 20px 10px;\n}\n\n.bx-skywards-login-body{\n    margin: 20px 10px 0 10px;\n\n}\n.bx-skywards-login-body-container {\n    margin-bottom: 20px;\n}\n.bx-skywards-body {\n    font-size: 14px;\n    line-height: 18px;\n}\n.bx-skywards-login-title{\n    font-size: 16px;\n    line-height: 20px;\n}\n.bx-skywards-login__cta {\n    display: block;\n}\n}\n\n\n@media only screen and (max-width: 1023px) and (min-width: 769px) {\n    .bx-skywards-login-container{\n        padding: 0 30px;\n    }\n    .bx-skywards-background {\n        position: absolute;\n        top: 0;\n        width: 100%;\n        right: 0;\n        opacity: .3;\n        height: 100%;\n    }\n}\n@media only screen and (width: 1024px) {\n    .bx-skywards-login-container{\n        padding: 0 50px;   \n    }\n}\n@media only screen and (max-width: 768px) {\n    .bx-skywards-login-container{\n        background-color: #000;\n        padding: 15px 10px;\n        margin: 20px 10px;\n        border-radius: 5px;\n    }\n    .bx-skywards-signup-container {\n        background-color: #000;\n    }\n    .bx-skywards-background-mobile {\n        position: absolute;\n        top: 0;\n        width: 100%;\n        right: 0;\n        bottom: 0;\n        opacity: .2;\n        left: 0;\n        height: 100%;\n        object-fit: cover;\n        display: block;\n    }\n    .bx-skywards-login-body-container {\n        margin-bottom: 20px;\n        margin-top: 10px;\n        align-items: center;\n    }\n    .bx-skywards-login__cta {\n        display: inline-block;\n    }\n    .bx-skywards-background {\n        display: none;\n    }\n    .bx-skywards-login-body {\n        background: transparent;\n    }\n    .bx-skywards-signup-body-wrapper {\n        background: transparent;\n    }\n    .bx-skywards-body{\n        width: calc(100% - 50px);\n\n    }\n}',html:'<div class="bx-skywards-login-container {{#unless guest.tier}}bx-skywards-signup-container{{/unless}}">\r\n    <img class="bx-skywards-background-mobile bx-skywards-tier-background">\r\n    <img loading="lazy" alt="" class="bx-skywards-login-tier-logo {{#unless guest.tier}}bx-skywards-signup-tier-logo{{/unless}}">\r\n    <div class="bx-skywards-login-body {{#unless guest.tier}}bx-skywards-signup-body-wrapper{{/unless}}">\r\n        <img class="bx-skywards-background bx-skywards-tier-background">\r\n        <div class="bx-skywards-login-body-container bx-skywards-signup-body-container">\r\n            <span id="bx-skywards-title" class="bx-skywards-login-title bx-skywards-signup-title"></span>\r\n            <span id="bx-skywards-body" class="bx-skywards-body bx-skywards-signup-body"></span>\r\n        </div>\r\n        <a id="bx-login-prompt-cta" class="bx-skywards-login__cta"></a>\r\n    </div>\r\n</div>',js:'function sendBoxeverEvent(eventType) {\n  var event = {\n    channel: "WEB",\n    type: eventType,\n    page: dataLayer[0].pageName,\n    pos: _boxever_settings.pointOfSale,\n    browser_id: Boxever.getID(),\n  };\n  Boxever.eventCreate(event, function (data) {}, "json");\n}\n\n  let wrapper = "";\n  if (dataLayer && dataLayer[0] && dataLayer[0].pageName === "/ Home") {\n    wrapper = document.querySelector(".product-block-wrapper");\n  } else {\n    wrapper = document.getElementById("maincontent").firstChild;\n  }\n  if (wrapper) {\n    let publication = "";\n    if (dataLayer && dataLayer[0] && dataLayer[0].pageName === "/ Home") {\n      publication = `${__EK__.urlparser.country}/${__EK__.urlparser.language}`;\n    } else {\n      publication = `${__INITIAL_STATE__.urlparser.results.countryCompat}/${__INITIAL_STATE__.urlparser.results.language}`;\n    }\n    const RESOURCE_KEYS_ENDPOINT = `https://www.emirates.com/service/content/api/v4.0/resources/eol/${publication}/Experiences/Skywards-Sign-Up/EK`;\n\n    const tiersLogos = {\n      blue: "Experiences/Skywards-Sign-Up/EK/skywards-coin-blue-image",\n      silver: "Experiences/Skywards-Sign-Up/EK/skywards-coin-silver-image",\n      gold: "Experiences/Skywards-Sign-Up/EK/skywards-coin-gold-image",\n      platinum: "Experiences/Skywards-Sign-Up/EK/skywards-coin-platinum-image",\n      all: "Experiences/Skywards-Sign-Up/EK/signup-tier-image",\n    };\n\n    const tiersColors = {\n      blue: "#000",\n      silver: "#000",\n      gold: "#000",\n      platinum: "#000",\n      default: "#000",\n    };\n\n    const LOGIN_RESOURCE_MAP = {\n      ctaLabel: "Experiences/Skywards-Sign-Up/EK/login-cta-label__text",\n      title: "Experiences/Skywards-Sign-Up/EK/login-header-title__text",\n      body: "Experiences/Skywards-Sign-Up/EK/login-body__text",\n      ctaLink: "Experiences/Skywards-Sign-Up/EK/login__url",\n    };\n\n    const SIGNUP_RESOURCE_MAP = {\n      ctaLabel: "Experiences/Skywards-Sign-Up/EK/signup-cta-label__text",\n      ctaLink: "Experiences/Skywards-Sign-Up/EK/sign-up-cta__link",\n      title: "Experiences/Skywards-Sign-Up/EK/signup-header-title__text",\n      body: "Experiences/Skywards-Sign-Up/EK/signup-body__text",\n    };\n    fetch(RESOURCE_KEYS_ENDPOINT)\n      .then((response) => {\n        return response.json();\n      })\n      .then((results) => {\n        let resources = null;\n        if (results) {\n          resources = results.results;\n        }\n        if (resources) {\n          let mappedResources = {};\n          let resourceMap = SIGNUP_RESOURCE_MAP;\n          if ("{{guest.tier}}") {\n            resourceMap = LOGIN_RESOURCE_MAP;\n            sendBoxeverEvent("BOX286_LOGIN_VIEWED");\n          } else {\n            sendBoxeverEvent("BOX286_SIGNUP_VIEWED");\n          }\n          for (var key of Object.keys(resourceMap)) {\n            if (resourceMap[key] in resources) {\n              mappedResources[key] = resources[resourceMap[key]];\n            } else {\n              mappedResources[key] = "";\n            }\n          }\n          wrapper.insertAdjacentHTML(\n            "beforebegin",\n            \'<div class="bx-skywards-login-wrapper"></div>\'\n          );\n          insertHTMLBefore(".bx-skywards-login-wrapper");\n          let cta = document.getElementById("bx-login-prompt-cta");\n          if (cta) {\n            cta.innerHTML = mappedResources["ctaLabel"];\n            cta.href = "{{guest.tier}}"\n              ? mappedResources["ctaLink"].url\n              : `${mappedResources["ctaLink"].url}&prscode=AHPW7`;\n            cta.addEventListener("click", () => {\n              if ("{{guest.tier}}") {\n                sendBoxeverEvent("BOX286_LOGIN_CLICKED");\n              } else {\n                sendBoxeverEvent("BOX286_SIGNUP_CLICKED");\n              }\n            });\n          }\n          let titleElement = document.getElementById("bx-skywards-title");\n          if (titleElement) {\n            titleElement.innerHTML = mappedResources["title"];\n          }\n          let bodyElement = document.getElementById("bx-skywards-body");\n          if (bodyElement) {\n            bodyElement.innerHTML = mappedResources["body"];\n          }\n          let tierLogoElement = document.querySelector(\n            ".bx-skywards-login-tier-logo"\n          );\n          if (tierLogoElement) {\n            if (\n              "{{guest.tier}}" &&\n              "{{guest.tier}}".toLowerCase() in tiersLogos\n            ) {\n              tierLogoElement.src =\n                resources[tiersLogos["{{guest.tier}}".toLowerCase()]].url;\n            } else {\n              tierLogoElement.src = resources[tiersLogos["all"]].url;\n            }\n          }\n          let backgroundImage = document.querySelectorAll(\n            ".bx-skywards-tier-background"\n          );\n          if (backgroundImage && backgroundImage.length) {\n            backgroundImage.forEach(\n              (image) =>\n                (image.src = resources["Experiences/Skywards-Sign-Up/EK/background-tier-image"].url)\n            );\n          }\n        }\n      })\n      .catch((error) => {\n        console.log(error, "Error fetching resource keys list");\n      });\n  }\n\n'}}]},{ref:"1205a155-6e4f-427c-85ba-923c13de901c",name:"BOX-174 Booking Widget Recent Searches",revision:30,archived:!1,target:{script:"",targetPages:[{operator:"Contains",value:"/book/book-a-flight.aspx"}]},traffic:{type:"advancedTraffic",allocationLow:1,allocationHigh:120,splits:[{ref:"c216a7f7-6df8-436d-abc4-2ee2b6e78234",lowSplit:1,highSplit:24},{ref:"51de4311-fa10-401f-952b-14595f358abf",lowSplit:25,highSplit:48},{ref:"b8802c54-866b-4c80-894f-260d85268143",lowSplit:49,highSplit:72},{ref:"d9dd0220-3626-46b9-94f2-86913aa297b4",lowSplit:73,highSplit:96},{ref:"77bab3fc-a29a-4cd3-a5ac-e811a3068d18",lowSplit:97,highSplit:120}]},variants:[{ref:"51de4311-fa10-401f-952b-14595f358abf",name:"One line With Cabin Class",assets:{css:':root {\n  --font-helvetica: HelveticaNeue, Helvetica Neue, Helvetica, Lucida Grande,\n    sans-serif;\n  --font-helvetica-light: HelveticaNeue-Light, Helvetica Neue Light,\n    Helvetica Neue, Helvetica, Arial, Lucida Grande, sans-serif;\n  --font-ek-bold: EmiratesSB-Bold, helvetica, arial, sans-serif;\n  --text-color: #333333;\n  --white-color: #ffffff;\n  --red-color: #c60c30;\n  --gray-color: #c7c7c7;\n}\n\n/* Hide recent searches group under origin dropdown*/\nsection.recent-searches-group {\n    display: none !important;\n}\n\n.bx-search-results-row {\n  display: flex;\n  flex-direction: row;\n  margin: 10px 0 0;\n  flex-wrap: wrap;\n}\n\n\n.bx-search-results-row__item {\n  background: #e6e9ef !important;\n  margin-right: 10px;\n  margin-top: 10px;\n  border-radius: 2px;\n  padding: 10px;\n  color: #333333;\n  font-family: var(--font-helvetica);\n  -moz-user-select: none;\n  -khtml-user-select: none;\n  -webkit-user-select: none;\n  -ms-user-select: none;\n  user-select: none;\n  font-size: 12px;\n  line-height: 16px;\n  flex: 0 0 auto;\n  display: flex;\n  align-items: center;\n    justify-content: space-between;\n}\n.bx-search-results-row__item-hidden {\n    display: none;\n}\nhtml[dir="rtl"] .bx-search-results-row__item {\n      margin-left: 10px;\n      margin-right: 0;\n}\n\n.bx-search-results-row__item:hover {\n  text-decoration: none;\n  background: var(--gray-color) !important;\n  cursor: pointer;\n}\n\n.bx-search-results-row__item a:hover, .bx-search-results-row__item a:focus {\n  text-decoration: none;\n}\n.ek a.bx-search-results-row__link:not([tabindex=\'-1\']):not(.panel-disabled):focus {\n    outline: none !important;\n}\n\n.bx-search-results-row__link {\n  text-decoration: none;\n  display: flex;\n  align-items: center;\n}\n.bx-search-results-row__link-ond {\n  font-weight: 700;\n  display: flex;\n}\n.bx-search-results-row__link-icon {\n  font-size: 12px;\n  margin: 0 3px;\n  vertical-align: baseline !important;\n}\n.bx-search-results-row__link-ond:after {\n  content: ".";\n  margin: 0 3px;\n  transform: translate(0px, calc(-50% + 4px));\n}\n.bx-search-results-row__link-date:after {\n  content: "|";\n  margin: 0 5px;\n}\n.bx-search-results-row__link-date-no-cabin-class {\n    margin-right: 15px;\n}\nhtml[dir="rtl"] .bx-search-results-row__link-date-no-cabin-class {\n    margin-left: 15px;\n    margin-right: 0;\n}\n.bx-search-results-row__link-pax {\n  vertical-align: baseline !important;\n}\n.bx-search-results-row__link-cabin {\n  margin: 0 10px;\n}\n.bx-search-results-row__link-cabin.bx-search-results-row__link-cabin-y {\n  color: #32753a;\n}\n.bx-search-results-row__link-cabin.bx-search-results-row__link-cabin-j {\n  color: #406dc0;\n}\n.bx-search-results-row__link-cabin.bx-search-results-row__link-cabin-f {\n  color: #d54141;\n}\n.bx-search-results-row__link-remove-icon {\n  border-radius: 50%;\n  background: white;\n  display: inline-block;\n  width: 15px;\n  height: 15px;\n  padding: 4px;\n  vertical-align: text-bottom;\n}\n.bx-search-results-row__link-remove-icon .icon {\n  font-size: 6px;\n}\n.bx-search-results-row__link-remove-icon:hover {\nbox-shadow: 0px 0px 3px 3px rgb(0 0 0 / 40%);\n}\n@media only screen and (max-width: 991px) {\n    .bx-search-results-row__item-hidden {\n        display: flex;\n}\n.bx-search-results-row {\n    overflow-x: scroll;\n    margin: 0px 0 10px;\n    flex-wrap: nowrap;\n}\n.bx-search-results-row__item {\n    font-size: 10px;\n    line-height: 10px;\n    height: 38px;\n\n}\n  .bx-search-results-row__link-icon {\n    font-size: 10px;\n  }\n.bx-search-results-row__link-cabin {\n    margin: 0 5px;\n}\n.bx-search-results-row-stacked {\n    flex-wrap: wrap;\n}\n.bx-search-results-row__item-stacked {\n        min-width: calc(50% - 5px);\n    max-width: calc(50% - 5px);\n}\n.bx-search-results-row__item-stacked:nth-child(even) {\n    margin-right: 0;\n}\n\n.bx-search-results-row__item-stacked .bx-search-results-row__link-date-month {\n    letter-spacing: normal;\n}\n.bx-search-results-row__item-stacked .bx-search-results-row__link-date-no-cabin-class {\n    margin-right: 5px;\n}\n.bx-search-results-row__item-stacked .bx-search-results-row__link-remove-icon {\n    height: 5px;\n    margin: auto 0;\n    background: transparent;\n    width: auto;\n    padding: 0;\n    transform: translate(0px, calc(50% - 5px));\n}\n.bx-search-results-row__item-stacked .bx-search-results-row__link-pax-wrapper {\n    display: none;\n}\n.bx-search-results-row__item-stacked .bx-search-results-row__link-date:after {\n    content: "";\n    margin: 0;\n}\n .bx-search-results-row__item-stacked .bx-search-results-row__link-cabin {\n     display: none;\n }\n  .bx-search-results-row__item-stacked .bx-search-results-row__link-ond:after {\n content: "\\A";\n    white-space: pre;\n}\n.bx-search-results-row__item-stacked .bx-search-results-row__link-ond {\n    margin-bottom: 2px;\n    display: flex;\n}\n    .bx-search-results-row__link-ond:after {\n    transform: translate(0px, calc(-50% + 2px));\n  }\n  .bx-search-results-row__item-stacked .bx-search-results-row__link-pax-wrapper {\n      display: none;\n  }\n  .bx-search-results-row__item-stacked .bx-search-results-row__link {\n      flex-direction: column;\n      align-items: normal;\n  }\n  .bx-search-results-row__item-stacked.bx-search-results-row__item:nth-child(odd) {\n      margin-right: 10px;\n      margin-left: 0;\n}\nhtml[dir="rtl"] .bx-search-results-row__item-stacked.bx-search-results-row__item:nth-child(odd) {\n      margin-left: 10px;\n      margin-right: 0;\n}\nhtml[dir="rtl"] .bx-search-results-row__item-stacked.bx-search-results-row__item:nth-child(even) {\n      margin-left: 0;\n      margin-right: 0;\n}\n}\n',html:'<div class="bx-search-results"/>',js:'function sendBoxeverEvent(eventType) {\r\n  let eventLabel = `BOX174_${eventType}`;\r\n  var event = {\r\n    channel: "WEB",\r\n    type: eventLabel,\r\n    page: dataLayer[0].pageName,\r\n    pos: _boxever_settings.pointOfSale,\r\n    browser_id: Boxever.getID()\r\n  };\r\n  Boxever.eventCreate(event, function(data) {}, "json");\r\n}\r\n\r\nfunction getResourceKeys(resources, resourceMap) {\r\n  let mappedResources = {};\r\n  for (var key of Object.keys(resourceMap)) {\r\n    if (resourceMap[key] in resources) {\r\n      mappedResources[key] = resources[resourceMap[key]];\r\n    } else {\r\n      mappedResources[key] = "";\r\n    }\r\n  }\r\n  return mappedResources;\r\n}\r\n\r\nfunction parseDate(date) {\r\n    const day = date.substring(0 ,2).includes(\'-\') ? date.substring(0 ,1) : date.substring(0 ,2);\r\n    const months = [\'Jan\', \'Feb\', \'Mar\', \'Apr\', \'May\', \'Jun\', \'Jul\', \'Aug\', \'Sep\', \'Oct\', \'Nov\', \'Dec\'];\r\n    const year = date.substring(7);\r\n    const monthName = date.substring(3, 6);\r\n    const month = months.findIndex(e => e.toLowerCase() === monthName.toLowerCase()) ;\r\n    return new Date(\'20\' + year, month, day);\r\n}\r\n\r\nfunction dateInPast(firstDate, secondDate) {\r\n  if (firstDate.setHours(0, 0, 0, 0) <= secondDate.setHours(0, 0, 0, 0)) {\r\n    return true;\r\n  }\r\n\r\n  return false;\r\n}\r\n\r\nfunction renderLink(row, lang, publication, isHidden) {\r\n  const cabinClassMapping = {\r\n    Y: 0,\r\n    J: 1,\r\n    F: 2\r\n  };\r\n  const cabinClassLabelMapping = {\r\n    Y: resourceKeys.economyClass,\r\n    J: resourceKeys.businessClass,\r\n    F: resourceKeys.firstClass\r\n  };\r\n  let departDate = parseDate(`${row.depart_date}`);\r\n  let returnDate = parseDate(`${row.return_date}`);\r\n  let IBECabinClass = 0;\r\n  if (row.booking_class in cabinClassMapping) {\r\n    IBECabinClass = cabinClassMapping[row.booking_class];\r\n  }\r\n  let departLocaleString = ("0" + departDate.getDate()).slice(-2);\r\n  if (\r\n    row.flight_type === "OW" ||\r\n    departDate.getMonth() !== returnDate.getMonth()\r\n  ) {\r\n    departLocaleString +=\r\n      \'<span class="bx-search-results-row__link-date-month">&nbsp;\' +\r\n      departDate.toLocaleDateString(lang, { month: "short" }) +\r\n      "</span>";\r\n  }\r\n  let returnLocaleString =\r\n    ("0" + returnDate.getDate()).slice(-2) +\r\n    \'<span class="bx-search-results-row__link-date-month">&nbsp;\' +\r\n    returnDate.toLocaleDateString(lang, { month: "short" }) +\r\n    "</span>";\r\n  let item = `\r\n          <div class="bx-search-results-row__item ${\r\n            isHidden ? "bx-search-results-row__item-hidden" : ""\r\n          } ${isStacked ? "bx-search-results-row__item-stacked" : ""}">\r\n          <a  class="bx-search-results-row__link" href=\'http://www.emirates.com/SessionHandler.aspx?pub=${publication}&pageurl=/IBE.aspx&section=IBE&showpage=true&TID=${\r\n    row.flight_type === "OW" ? "OW" : "SB"\r\n  }&seldcity1=${row.origin_iata}&selacity1=${row.destination_iata}&selddate1=${\r\n    row.depart_date\r\n  }&seladate1=${row.return_date}&seladults=${row.adults}&selchildren=${\r\n    row.children\r\n  }&selinfants=${\r\n    row.infants\r\n  }&selcabinclass=${IBECabinClass}&selcabinclass1=${IBECabinClass}&resultby=0\'><span class="bx-search-results-row__link-ond">${\r\n    row.origin_iata\r\n  }<i class="bx-search-results-row__link-icon icon ${\r\n    row.flight_type === "OW" ? "icon-one-way-flight" : "icon-return-flight"\r\n  }"></i>${row.destination_iata}</span>\r\n          <span class="${\r\n            showCabinClass\r\n              ? "bx-search-results-row__link-date"\r\n              : "bx-search-results-row__link-date-no-cabin-class"\r\n          }">${\r\n    row.flight_type === "OW"\r\n      ? departLocaleString\r\n      : departLocaleString + "-" + returnLocaleString\r\n  }</span>`;\r\n  if (showCabinClass) {\r\n    item += `<span class="bx-search-results-row__link-pax-wrapper">\r\n          <i class="bx-search-results-row__link-pax icon icon-adult-male-customer"></i>\r\n              ${row.adults + row.children + row.youths + row.infants}\r\n              </span>\r\n              <span class="bx-search-results-row__link-cabin bx-search-results-row__link-cabin-${row.booking_class.toLowerCase()}">${\r\n      cabinClassLabelMapping[row.booking_class]\r\n    }</span>`;\r\n  }\r\n\r\n  item += `</a>\r\n          <span class="bx-search-results-row__link-remove-icon"><i class="icon icon-delete-light"></i></span></div>\r\n          `;\r\n  return item;\r\n}\r\n\r\nfunction render() {\r\n  let publication = "";\r\n  const publicationURL = document.querySelector(\'meta[name="PublishURL"]\');\r\n  if (publicationURL) {\r\n    if (publicationURL.content !== "/english") {\r\n      publication = publicationURL.content;\r\n    } else {\r\n      publication = "/global/english";\r\n    }\r\n  }\r\n  if (publication) {\r\n    if (dataLayer && dataLayer[0]) {\r\n      let lang = dataLayer[0].languageCode.toLowerCase();\r\n      let airportsFetchURL = `https://www.emirates.com/service/airports?lang=${lang}`;\r\n      let browserID = Boxever.getID();\r\n      let bxRecentSearchFetchURL = `https://api.boxever.com/v2/callFlows?message={"context":{"clientKey":"${_boxever_settings.client_key}","channel":"WEB","language":"en","currencyCode":"USD","uri":"/home","pointOfSale":"emirates.com/english","browserId":"${browserID}","friendlyId":"recent_searches"}}`;\r\n      let promises = [\r\n        fetch(\r\n          `https://www.emirates.com/service/content/api/v4.0/resources/eol/${publication}/Experiences/Recent-Searches`\r\n        )\r\n          .then(response => {\r\n            return response.json();\r\n          })\r\n          .then(results => {\r\n            let resources = null;\r\n            if (results) {\r\n              resources = results.results;\r\n            }\r\n            return resources;\r\n          }),\r\n        fetch(airportsFetchURL).then(response => {\r\n          return response.json();\r\n        }),\r\n        fetch(bxRecentSearchFetchURL).then(response => {\r\n          return response.json();\r\n        })\r\n      ];\r\n\r\n      Promise.all(promises)\r\n        .then(([resources, airports, recentSearches]) => {\r\n          if (\r\n            recentSearches &&\r\n            recentSearches.recent_searches &&\r\n            recentSearches.recent_searches.length &&\r\n            airports &&\r\n            airports.results &&\r\n            resources &&\r\n            Object.keys(resources).length\r\n          ) {\r\n            document.addEventListener("click", function(e) {\r\n              if (\r\n                e.target &&\r\n                e.target.className.indexOf("bx-search-results-row__link") > -1\r\n              ) {\r\n                sendBoxeverEvent("CLICKED");\r\n              }\r\n              if (\r\n                e.target &&\r\n                (e.target.className.indexOf(\r\n                  "bx-search-results-row__link-remove-icon"\r\n                ) > -1 ||\r\n                  (e.target.parentNode &&\r\n                    e.target.parentNode.className.indexOf(\r\n                      "bx-search-results-row__link-remove-icon"\r\n                    ) > -1))\r\n              ) {\r\n                if (e.target.parentNode) {\r\n                  if (\r\n                    e.target.parentNode.className.indexOf(\r\n                      "bx-search-results-row__link-remove-icon"\r\n                    ) > -1\r\n                  ) {\r\n                    e.target.parentNode.parentNode.remove();\r\n                  } else {\r\n                    e.target.parentNode.remove();\r\n                  }\r\n                }\r\n                if (counter === 0 && window.innerWidth > 991) {\r\n                  document\r\n                    .querySelector(".bx-search-results-row__item-hidden")\r\n                    .classList.remove("bx-search-results-row__item-hidden");\r\n                  counter += 1;\r\n                } else if (counter === 0 && window.innerWidth <= 991) {\r\n                  counter += 1;\r\n                  if (operatingSearches.length - 1 >= 3 + counter) {\r\n                    boxEverSearchResultEl.querySelector(\r\n                      ".bx-search-results-row"\r\n                    ).innerHTML += renderLink(\r\n                      operatingSearches[3 + counter],\r\n                      lang,\r\n                      publication,\r\n                      false\r\n                    );\r\n                    counter += 1;\r\n                  }\r\n                } else {\r\n                  if (operatingSearches.length - 1 >= 3 + counter) {\r\n                    boxEverSearchResultEl.querySelector(\r\n                      ".bx-search-results-row"\r\n                    ).innerHTML += renderLink(\r\n                      operatingSearches[3 + counter],\r\n                      lang,\r\n                      publication,\r\n                      false\r\n                    );\r\n                    counter += 1;\r\n                  }\r\n                }\r\n              }\r\n            });\r\n\r\n            const resourceMap = {\r\n              firstClass: "Experiences/Recent-Searches/first-class__text",\r\n              economyClass: "Experiences/Recent-Searches/economy-class__text",\r\n              businessClass: "Experiences/Recent-Searches/business-class__text"\r\n            };\r\n            resourceKeys = getResourceKeys(resources, resourceMap);\r\n            if (window.innerWidth <= 991) {\r\n              insertHTMLBefore(".fs-widget__container");\r\n            } else {\r\n              insertHTMLAfter(".fs-widget__container");\r\n            }\r\n            window.addEventListener("resize", e => {\r\n              let boxEverSearchResultEl = document.querySelector(\r\n                ".bx-search-results"\r\n              ).parentNode;\r\n              if (window.innerWidth <= 991) {\r\n                boxEverSearchResultEl.parentNode.insertBefore(\r\n                  boxEverSearchResultEl,\r\n                  boxEverSearchResultEl.parentNode.firstChild\r\n                );\r\n              } else {\r\n                boxEverSearchResultEl.parentNode.insertBefore(\r\n                  boxEverSearchResultEl,\r\n                  boxEverSearchResultEl.parentNode.lastChild\r\n                );\r\n              }\r\n            });\r\n\r\n            let boxEverSearchResultEl = document.querySelector(\r\n              ".bx-search-results"\r\n            );\r\n            const today = new Date();\r\n\r\n            const availabilityChecksPromises = recentSearches.recent_searches.reduce(\r\n              function(availabilityChecksPromises, row, index) {\r\n                const OND = `${row.origin_iata}-${row.destination_iata}`;\r\n                const departDate = parseDate(`${row.depart_date}`);\r\n                if (\r\n                  (!availabilityChecksPromises ||\r\n                    !(OND in availabilityChecksPromises)) &&\r\n                  !dateInPast(departDate, today)\r\n                ) {\r\n                  return Object.assign(availabilityChecksPromises, {\r\n                    [OND]: fetch(\r\n                      `${HOST}/service/flights-resumption?origin=${row.origin_iata}&destination=${row.destination_iata}`\r\n                    )\r\n                      .then(response => {\r\n                        return response.json();\r\n                      })\r\n                      .catch(error => console.log(error))\r\n                  });\r\n                }\r\n                return availabilityChecksPromises;\r\n              },\r\n              {}\r\n            );\r\n            Promise.all(Object.values(availabilityChecksPromises))\r\n              .then(results => {\r\n                let operatingDestinationsCounter = 0;\r\n                recentSearches.recent_searches.forEach(row => {\r\n                  const departDate = parseDate(`${row.depart_date}`);\r\n                  if (!dateInPast(departDate, today)) {\r\n                    let resultIndex = -1;\r\n                    const resultsKeys = Object.keys(availabilityChecksPromises);\r\n                    for (var i = 0; i < resultsKeys.length; i++) {\r\n                      if (\r\n                        resultsKeys[i] ===\r\n                        `${row.origin_iata}-${row.destination_iata}`\r\n                      ) {\r\n                        resultIndex = i;\r\n                      }\r\n                    }\r\n                    if (\r\n                      resultIndex > -1 &&\r\n                      results[resultIndex] &&\r\n                      results[resultIndex].results &&\r\n                      results[resultIndex].results.routes &&\r\n                      Object.keys(results[resultIndex].results.routes).length >\r\n                        0\r\n                    ) {\r\n                      const keys = Object.keys(\r\n                        results[resultIndex].results.routes\r\n                      );\r\n                      for (var j = 0; j < keys.length; j++) {\r\n                        const route =\r\n                          results[resultIndex].results.routes[keys[j]];\r\n                        if (route && route.statusMessage === "Operating") {\r\n                          if (\r\n                            (!showCabinClass && window.innerWidth > 991) ||\r\n                            (isStacked && window.innerWidth > 991) ||\r\n                            operatingDestinationsCounter < 4\r\n                          ) {\r\n                            boxEverSearchResultEl.innerHTML += renderLink(\r\n                              row,\r\n                              lang,\r\n                              publication,\r\n                              operatingDestinationsCounter === 3 &&\r\n                                !isStacked &&\r\n                                showCabinClass\r\n                                ? true\r\n                                : false\r\n                            );\r\n\r\n                            operatingDestinationsCounter += 1;\r\n                          }\r\n                          operatingSearches.push(row);\r\n\r\n                          break;\r\n                        }\r\n                      }\r\n                    }\r\n                  }\r\n                });\r\n                if (boxEverSearchResultEl.innerHTML) {\r\n                  boxEverSearchResultEl.innerHTML = `<div class="bx-search-results-row ${\r\n                    isStacked ? "bx-search-results-row-stacked" : ""\r\n                  }">${boxEverSearchResultEl.innerHTML}</div>`;\r\n                  sendBoxeverEvent("VIEWED");\r\n                }\r\n              })\r\n              .catch(error => console.log(error));\r\n          }\r\n        })\r\n        .catch(error => {\r\n          console.log(error);\r\n        });\r\n    }\r\n  }\r\n}\r\nconst HOST = "https://www.emirates.com";\r\nconst operatingSearches = [];\r\nlet showCabinClass =\r\n  "Yes" === "Yes";\r\nconst isStacked =\r\n  "No" === "Yes";\r\nlet counter = 0;\r\nlet resourceKeys = {};\r\n//Cookie consent check\r\nlet cookieComplianceEnabled =\r\n  "Yes" ===\r\n  "Yes";\r\nconst cookieComplianceFunctionalGroup =\r\n  "C0002";\r\n//Listen for disabling/enabling functional cookies group for new browser\r\nif (cookieComplianceEnabled) {\r\n  window.addEventListener("OneTrustGroupsUpdated", function(e) {\r\n    if (OnetrustActiveGroups.indexOf(cookieComplianceFunctionalGroup) > -1) {\r\n      //Show experience wrapper here\r\n      document.querySelector(".bx-search-results").style.display = "block";\r\n      render();\r\n    } else {\r\n      document.querySelector(".bx-search-results").style.display = "none";\r\n    }\r\n  });\r\n}\r\nif (\r\n  !cookieComplianceEnabled ||\r\n  (cookieComplianceEnabled &&\r\n    OnetrustActiveGroups.indexOf(cookieComplianceFunctionalGroup) > -1)\r\n) {\r\n  render();\r\n}\r\n'}},{ref:"b8802c54-866b-4c80-894f-260d85268143",name:"One Line Without Cabin Class",assets:{css:':root {\n  --font-helvetica: HelveticaNeue, Helvetica Neue, Helvetica, Lucida Grande,\n    sans-serif;\n  --font-helvetica-light: HelveticaNeue-Light, Helvetica Neue Light,\n    Helvetica Neue, Helvetica, Arial, Lucida Grande, sans-serif;\n  --font-ek-bold: EmiratesSB-Bold, helvetica, arial, sans-serif;\n  --text-color: #333333;\n  --light-blue-color: #e6e9ef;\n  --gray-color: #d9d9d9;\n}\n\n/* Hide recent searches group under origin dropdown*/\nsection.recent-searches-group {\n    display: none !important;\n}\n\n.bx-search-results-row {\n  display: flex;\n  flex-direction: row;\n  margin: 10px 0 0;\n  flex-wrap: wrap;\n}\n\n.bx-search-results-row__item {\n  background: var(--light-blue-color) !important;\n  margin-right: 10px;\n  margin-top: 10px;\n  border-radius: 2px;\n  padding: 10px;\n  color: var(--text-color);\n  font-family: var(--font-helvetica);\n  -moz-user-select: none;\n  -khtml-user-select: none;\n  -webkit-user-select: none;\n  -ms-user-select: none;\n  user-select: none;\n  font-size: 12px;\n  line-height: 16px;\n  flex: 0 0 auto;\n  display: flex;\n  align-items: center;\n  justify-content: space-between;\n}\n\n.bx-search-results-row__item:hover {\n  text-decoration: none;\n  background: var(--gray-color) !important;\n  cursor: pointer;\n}\n\n.bx-search-results-row__item a:hover {\n  text-decoration: none;\n}\n.ek a.bx-search-results-row__link:not([tabindex=\'-1\']):not(.panel-disabled):focus {\n    outline: none !important;\n}\n\n.bx-search-results-row__item-hidden {\n  display: none;\n}\nhtml[dir="rtl"] .bx-search-results-row__item {\n  margin-left: 10px;\n  margin-right: 0;\n}\n.bx-search-results-row__link {\n  text-decoration: none;\n  display: flex;\n  align-items: center;\n}\n.bx-search-results-row__link-ond {\n  font-weight: 700;\n  display: flex;\n}\n.bx-search-results-row__link-icon {\n  font-size: 12px;\n  margin: 0 3px;\n  vertical-align: baseline !important;\n}\n.bx-search-results-row__link-ond:after {\n  content: ".";\n    transform: translate(0px, calc(-50% + 4px));\n    margin: 0 3px;\n}\n.bx-search-results-row__link-date:after {\n  content: "|";\n  margin: 0 5px;\n}\n.bx-search-results-row__link-date-no-cabin-class {\n  margin-right: 15px;\n}\nhtml[dir="rtl"] .bx-search-results-row__link-date-no-cabin-class {\n  margin-left: 15px;\n  margin-right: 0;\n}\n.bx-search-results-row__link-pax {\n  vertical-align: baseline !important;\n}\n.bx-search-results-row__link-cabin {\n  margin: 0 10px;\n}\n.bx-search-results-row__link-cabin.bx-search-results-row__link-cabin-y {\n  color: #32753a;\n}\n.bx-search-results-row__link-cabin.bx-search-results-row__link-cabin-j {\n  color: #406dc0;\n}\n.bx-search-results-row__link-cabin.bx-search-results-row__link-cabin-f {\n  color: #d54141;\n}\n.bx-search-results-row__link-remove-icon {\n  border-radius: 50%;\n  background: white;\n  display: inline-block;\n  width: 15px;\n  height: 15px;\n  padding: 4px;\n  text-align: center;\n}\n.bx-search-results-row__link-remove-icon .icon {\n  font-size: 6px;\n}\n.bx-search-results-row__link-remove-icon:hover {\n  box-shadow: 0px 0px 3px 3px rgb(0 0 0 / 40%);\n}\n@media only screen and (max-width: 991px) {\n  .bx-search-results-row__item-hidden {\n    display: flex;\n  }\n  .bx-search-results-row {\n    overflow-x: scroll;\n    margin: 0px 0 10px;\n    flex-wrap: nowrap;\n  }\n  .bx-search-results-row__item {\n    font-size: 10px;\n    line-height: 10px;\n    height: 38px;\n  }\n  .bx-search-results-row__link-icon {\n    font-size: 10px;\n  }\n  .bx-search-results-row__link-cabin {\n    margin: 0 5px;\n  }\n  .bx-search-results-row-stacked {\n    flex-wrap: wrap;\n  }\n  .bx-search-results-row__item-stacked {\n    min-width: calc(50% - 5px);\n    max-width: calc(50% - 5px);\n  }\n  .bx-search-results-row__item-stacked:nth-child(even) {\n    margin-right: 0;\n  }\n  .bx-search-results-row__item-stacked .bx-search-results-row__link-date {\n    letter-spacing: -1px;\n  }\n  .bx-search-results-row__item-stacked .bx-search-results-row__link-date-month {\n    letter-spacing: normal;\n  }\n  .bx-search-results-row__item-stacked\n    .bx-search-results-row__link-date-no-cabin-class {\n    margin-right: 5px;\n  }\n  .bx-search-results-row__link-remove-icon {\n    width: 12px;\n    height: 12px;\n    padding: 0;\n\n    display: flex;\n    justify-content: center;\n    align-items: center;\n  }\n  .bx-search-results-row__item-stacked\n    .bx-search-results-row__link-remove-icon {\n    height: 5px;\n    margin: auto 0;\n    background: transparent;\n    width: auto;\n    padding: 0;\n  }\n  .bx-search-results-row__link-ond:after {\n    transform: translate(0px, calc(-50% + 2px));\n  }\n}\n',html:'<div class="bx-search-results"/>',js:'function sendBoxeverEvent(eventType) {\r\n  let eventLabel = `BOX174_${eventType}`;\r\n  var event = {\r\n    channel: "WEB",\r\n    type: eventLabel,\r\n    page: dataLayer[0].pageName,\r\n    pos: _boxever_settings.pointOfSale,\r\n    browser_id: Boxever.getID()\r\n  };\r\n  Boxever.eventCreate(event, function(data) {}, "json");\r\n}\r\n\r\nfunction getResourceKeys(resources, resourceMap) {\r\n  let mappedResources = {};\r\n  for (var key of Object.keys(resourceMap)) {\r\n    if (resourceMap[key] in resources) {\r\n      mappedResources[key] = resources[resourceMap[key]];\r\n    } else {\r\n      mappedResources[key] = "";\r\n    }\r\n  }\r\n  return mappedResources;\r\n}\r\n\r\nfunction parseDate(date) {\r\n    const day = date.substring(0 ,2).includes(\'-\') ? date.substring(0 ,1) : date.substring(0 ,2);\r\n    const months = [\'Jan\', \'Feb\', \'Mar\', \'Apr\', \'May\', \'Jun\', \'Jul\', \'Aug\', \'Sep\', \'Oct\', \'Nov\', \'Dec\'];\r\n    const year = date.substring(7);\r\n    const monthName = date.substring(3, 6);\r\n    const month = months.findIndex(e => e.toLowerCase() === monthName.toLowerCase()) ;\r\n    return new Date(\'20\' + year, month, day);\r\n}\r\n\r\nfunction dateInPast(firstDate, secondDate) {\r\n  if (firstDate.setHours(0, 0, 0, 0) <= secondDate.setHours(0, 0, 0, 0)) {\r\n    return true;\r\n  }\r\n\r\n  return false;\r\n}\r\n\r\nfunction renderLink(row, lang, publication, isHidden) {\r\n  const cabinClassMapping = {\r\n    Y: 0,\r\n    J: 1,\r\n    F: 2\r\n  };\r\n  const cabinClassLabelMapping = {\r\n    Y: resourceKeys.economyClass,\r\n    J: resourceKeys.businessClass,\r\n    F: resourceKeys.firstClass\r\n  };\r\n  let departDate = parseDate(`${row.depart_date}`);\r\n  let returnDate = parseDate(`${row.return_date}`);\r\n  let IBECabinClass = 0;\r\n  if (row.booking_class in cabinClassMapping) {\r\n    IBECabinClass = cabinClassMapping[row.booking_class];\r\n  }\r\n  let departLocaleString = ("0" + departDate.getDate()).slice(-2);\r\n  if (\r\n    row.flight_type === "OW" ||\r\n    departDate.getMonth() !== returnDate.getMonth()\r\n  ) {\r\n    departLocaleString +=\r\n      \'<span class="bx-search-results-row__link-date-month">&nbsp;\' +\r\n      departDate.toLocaleDateString(lang, { month: "short" }) +\r\n      "</span>";\r\n  }\r\n  let returnLocaleString =\r\n    ("0" + returnDate.getDate()).slice(-2) +\r\n    \'<span class="bx-search-results-row__link-date-month">&nbsp;\' +\r\n    returnDate.toLocaleDateString(lang, { month: "short" }) +\r\n    "</span>";\r\n  let item = `\r\n          <div class="bx-search-results-row__item ${\r\n            isHidden ? "bx-search-results-row__item-hidden" : ""\r\n          } ${isStacked ? "bx-search-results-row__item-stacked" : ""}">\r\n          <a  class="bx-search-results-row__link" href=\'http://www.emirates.com/SessionHandler.aspx?pub=${publication}&pageurl=/IBE.aspx&section=IBE&showpage=true&TID=${\r\n    row.flight_type === "OW" ? "OW" : "SB"\r\n  }&seldcity1=${row.origin_iata}&selacity1=${row.destination_iata}&selddate1=${\r\n    row.depart_date\r\n  }&seladate1=${row.return_date}&seladults=${row.adults}&selchildren=${\r\n    row.children\r\n  }&selinfants=${\r\n    row.infants\r\n  }&selcabinclass=${IBECabinClass}&selcabinclass1=${IBECabinClass}&resultby=0\'><span class="bx-search-results-row__link-ond">${\r\n    row.origin_iata\r\n  }<i class="bx-search-results-row__link-icon icon ${\r\n    row.flight_type === "OW" ? "icon-one-way-flight" : "icon-return-flight"\r\n  }"></i>${row.destination_iata}</span>\r\n          <span class="${\r\n            showCabinClass\r\n              ? "bx-search-results-row__link-date"\r\n              : "bx-search-results-row__link-date-no-cabin-class"\r\n          }">${\r\n    row.flight_type === "OW"\r\n      ? departLocaleString\r\n      : departLocaleString + "-" + returnLocaleString\r\n  }</span>`;\r\n  if (showCabinClass) {\r\n    item += `<span class="bx-search-results-row__link-pax-wrapper">\r\n          <i class="bx-search-results-row__link-pax icon icon-adult-male-customer"></i>\r\n              ${row.adults + row.children + row.youths + row.infants}\r\n              </span>\r\n              <span class="bx-search-results-row__link-cabin bx-search-results-row__link-cabin-${row.booking_class.toLowerCase()}">${\r\n      cabinClassLabelMapping[row.booking_class]\r\n    }</span>`;\r\n  }\r\n\r\n  item += `</a>\r\n          <span class="bx-search-results-row__link-remove-icon"><i class="icon icon-delete-light"></i></span></div>\r\n          `;\r\n  return item;\r\n}\r\n\r\nfunction render() {\r\n  let publication = "";\r\n  const publicationURL = document.querySelector(\'meta[name="PublishURL"]\');\r\n  if (publicationURL) {\r\n    if (publicationURL.content !== "/english") {\r\n      publication = publicationURL.content;\r\n    } else {\r\n      publication = "/global/english";\r\n    }\r\n  }\r\n  if (publication) {\r\n    if (dataLayer && dataLayer[0]) {\r\n      let lang = dataLayer[0].languageCode.toLowerCase();\r\n      let airportsFetchURL = `https://www.emirates.com/service/airports?lang=${lang}`;\r\n      let browserID = Boxever.getID();\r\n      let bxRecentSearchFetchURL = `https://api.boxever.com/v2/callFlows?message={"context":{"clientKey":"${_boxever_settings.client_key}","channel":"WEB","language":"en","currencyCode":"USD","uri":"/home","pointOfSale":"emirates.com/english","browserId":"${browserID}","friendlyId":"recent_searches"}}`;\r\n      let promises = [\r\n        fetch(\r\n          `https://www.emirates.com/service/content/api/v4.0/resources/eol/${publication}/Experiences/Recent-Searches`\r\n        )\r\n          .then(response => {\r\n            return response.json();\r\n          })\r\n          .then(results => {\r\n            let resources = null;\r\n            if (results) {\r\n              resources = results.results;\r\n            }\r\n            return resources;\r\n          }),\r\n        fetch(airportsFetchURL).then(response => {\r\n          return response.json();\r\n        }),\r\n        fetch(bxRecentSearchFetchURL).then(response => {\r\n          return response.json();\r\n        })\r\n      ];\r\n\r\n      Promise.all(promises)\r\n        .then(([resources, airports, recentSearches]) => {\r\n          if (\r\n            recentSearches &&\r\n            recentSearches.recent_searches &&\r\n            recentSearches.recent_searches.length &&\r\n            airports &&\r\n            airports.results &&\r\n            resources &&\r\n            Object.keys(resources).length\r\n          ) {\r\n            document.addEventListener("click", function(e) {\r\n              if (\r\n                e.target &&\r\n                e.target.className.indexOf("bx-search-results-row__link") > -1\r\n              ) {\r\n                sendBoxeverEvent("CLICKED");\r\n              }\r\n              if (\r\n                e.target &&\r\n                (e.target.className.indexOf(\r\n                  "bx-search-results-row__link-remove-icon"\r\n                ) > -1 ||\r\n                  (e.target.parentNode &&\r\n                    e.target.parentNode.className.indexOf(\r\n                      "bx-search-results-row__link-remove-icon"\r\n                    ) > -1))\r\n              ) {\r\n                if (e.target.parentNode) {\r\n                  if (\r\n                    e.target.parentNode.className.indexOf(\r\n                      "bx-search-results-row__link-remove-icon"\r\n                    ) > -1\r\n                  ) {\r\n                    e.target.parentNode.parentNode.remove();\r\n                  } else {\r\n                    e.target.parentNode.remove();\r\n                  }\r\n                }\r\n                if (counter === 0 && window.innerWidth > 991) {\r\n                  document\r\n                    .querySelector(".bx-search-results-row__item-hidden")\r\n                    .classList.remove("bx-search-results-row__item-hidden");\r\n                  counter += 1;\r\n                } else if (counter === 0 && window.innerWidth <= 991) {\r\n                  counter += 1;\r\n                  if (operatingSearches.length - 1 >= 3 + counter) {\r\n                    boxEverSearchResultEl.querySelector(\r\n                      ".bx-search-results-row"\r\n                    ).innerHTML += renderLink(\r\n                      operatingSearches[3 + counter],\r\n                      lang,\r\n                      publication,\r\n                      false\r\n                    );\r\n                    counter += 1;\r\n                  }\r\n                } else {\r\n                  if (operatingSearches.length - 1 >= 3 + counter) {\r\n                    boxEverSearchResultEl.querySelector(\r\n                      ".bx-search-results-row"\r\n                    ).innerHTML += renderLink(\r\n                      operatingSearches[3 + counter],\r\n                      lang,\r\n                      publication,\r\n                      false\r\n                    );\r\n                    counter += 1;\r\n                  }\r\n                }\r\n              }\r\n            });\r\n\r\n            const resourceMap = {\r\n              firstClass: "Experiences/Recent-Searches/first-class__text",\r\n              economyClass: "Experiences/Recent-Searches/economy-class__text",\r\n              businessClass: "Experiences/Recent-Searches/business-class__text"\r\n            };\r\n            resourceKeys = getResourceKeys(resources, resourceMap);\r\n            if (window.innerWidth <= 991) {\r\n              insertHTMLBefore(".fs-widget__container");\r\n            } else {\r\n              insertHTMLAfter(".fs-widget__container");\r\n            }\r\n            window.addEventListener("resize", e => {\r\n              let boxEverSearchResultEl = document.querySelector(\r\n                ".bx-search-results"\r\n              ).parentNode;\r\n              if (window.innerWidth <= 991) {\r\n                boxEverSearchResultEl.parentNode.insertBefore(\r\n                  boxEverSearchResultEl,\r\n                  boxEverSearchResultEl.parentNode.firstChild\r\n                );\r\n              } else {\r\n                boxEverSearchResultEl.parentNode.insertBefore(\r\n                  boxEverSearchResultEl,\r\n                  boxEverSearchResultEl.parentNode.lastChild\r\n                );\r\n              }\r\n            });\r\n\r\n            let boxEverSearchResultEl = document.querySelector(\r\n              ".bx-search-results"\r\n            );\r\n            const today = new Date();\r\n\r\n            const availabilityChecksPromises = recentSearches.recent_searches.reduce(\r\n              function(availabilityChecksPromises, row, index) {\r\n                const OND = `${row.origin_iata}-${row.destination_iata}`;\r\n                const departDate = parseDate(`${row.depart_date}`);\r\n                if (\r\n                  (!availabilityChecksPromises ||\r\n                    !(OND in availabilityChecksPromises)) &&\r\n                  !dateInPast(departDate, today)\r\n                ) {\r\n                  return Object.assign(availabilityChecksPromises, {\r\n                    [OND]: fetch(\r\n                      `${HOST}/service/flights-resumption?origin=${row.origin_iata}&destination=${row.destination_iata}`\r\n                    )\r\n                      .then(response => {\r\n                        return response.json();\r\n                      })\r\n                      .catch(error => console.log(error))\r\n                  });\r\n                }\r\n                return availabilityChecksPromises;\r\n              },\r\n              {}\r\n            );\r\n            Promise.all(Object.values(availabilityChecksPromises))\r\n              .then(results => {\r\n                let operatingDestinationsCounter = 0;\r\n                recentSearches.recent_searches.forEach(row => {\r\n                  const departDate = parseDate(`${row.depart_date}`);\r\n                  if (!dateInPast(departDate, today)) {\r\n                    let resultIndex = -1;\r\n                    const resultsKeys = Object.keys(availabilityChecksPromises);\r\n                    for (var i = 0; i < resultsKeys.length; i++) {\r\n                      if (\r\n                        resultsKeys[i] ===\r\n                        `${row.origin_iata}-${row.destination_iata}`\r\n                      ) {\r\n                        resultIndex = i;\r\n                      }\r\n                    }\r\n                    if (\r\n                      resultIndex > -1 &&\r\n                      results[resultIndex] &&\r\n                      results[resultIndex].results &&\r\n                      results[resultIndex].results.routes &&\r\n                      Object.keys(results[resultIndex].results.routes).length >\r\n                        0\r\n                    ) {\r\n                      const keys = Object.keys(\r\n                        results[resultIndex].results.routes\r\n                      );\r\n                      for (var j = 0; j < keys.length; j++) {\r\n                        const route =\r\n                          results[resultIndex].results.routes[keys[j]];\r\n                        if (route && route.statusMessage === "Operating") {\r\n                          if (\r\n                            (!showCabinClass && window.innerWidth > 991) ||\r\n                            (isStacked && window.innerWidth > 991) ||\r\n                            operatingDestinationsCounter < 4\r\n                          ) {\r\n                            boxEverSearchResultEl.innerHTML += renderLink(\r\n                              row,\r\n                              lang,\r\n                              publication,\r\n                              operatingDestinationsCounter === 3 &&\r\n                                !isStacked &&\r\n                                showCabinClass\r\n                                ? true\r\n                                : false\r\n                            );\r\n\r\n                            operatingDestinationsCounter += 1;\r\n                          }\r\n                          operatingSearches.push(row);\r\n\r\n                          break;\r\n                        }\r\n                      }\r\n                    }\r\n                  }\r\n                });\r\n                if (boxEverSearchResultEl.innerHTML) {\r\n                  boxEverSearchResultEl.innerHTML = `<div class="bx-search-results-row ${\r\n                    isStacked ? "bx-search-results-row-stacked" : ""\r\n                  }">${boxEverSearchResultEl.innerHTML}</div>`;\r\n                  sendBoxeverEvent("VIEWED");\r\n                }\r\n              })\r\n              .catch(error => console.log(error));\r\n          }\r\n        })\r\n        .catch(error => {\r\n          console.log(error);\r\n        });\r\n    }\r\n  }\r\n}\r\nconst HOST = "https://www.emirates.com";\r\nconst operatingSearches = [];\r\nlet showCabinClass =\r\n  "No" === "Yes";\r\nconst isStacked =\r\n  "No" === "Yes";\r\nlet counter = 0;\r\nlet resourceKeys = {};\r\n//Cookie consent check\r\nlet cookieComplianceEnabled =\r\n  "Yes" ===\r\n  "Yes";\r\nconst cookieComplianceFunctionalGroup =\r\n  "C0002";\r\n//Listen for disabling/enabling functional cookies group for new browser\r\nif (cookieComplianceEnabled) {\r\n  window.addEventListener("OneTrustGroupsUpdated", function(e) {\r\n    if (OnetrustActiveGroups.indexOf(cookieComplianceFunctionalGroup) > -1) {\r\n      //Show experience wrapper here\r\n      document.querySelector(".bx-search-results").style.display = "block";\r\n      render();\r\n    } else {\r\n      document.querySelector(".bx-search-results").style.display = "none";\r\n    }\r\n  });\r\n}\r\nif (\r\n  !cookieComplianceEnabled ||\r\n  (cookieComplianceEnabled &&\r\n    OnetrustActiveGroups.indexOf(cookieComplianceFunctionalGroup) > -1)\r\n) {\r\n  render();\r\n}\r\n'}},{ref:"c216a7f7-6df8-436d-abc4-2ee2b6e78234",name:"Original",assets:{css:"",html:"",js:""}},{ref:"d9dd0220-3626-46b9-94f2-86913aa297b4",name:"Stacked With Cabin Class",assets:{css:':root {\n  --font-helvetica: HelveticaNeue, Helvetica Neue, Helvetica, Lucida Grande,\n    sans-serif;\n  --font-helvetica-light: HelveticaNeue-Light, Helvetica Neue Light,\n    Helvetica Neue, Helvetica, Arial, Lucida Grande, sans-serif;\n  --font-ek-bold: EmiratesSB-Bold, helvetica, arial, sans-serif;\n  --text-color: #333333;\n  --white-color: #ffffff;\n  --red-color: #c60c30;\n  --gray-color: #c7c7c7;\n}\n\n/* Hide recent searches group under origin dropdown*/\nsection.recent-searches-group {\n    display: none !important;\n}\n\n.bx-search-results-row {\n  display: flex;\n  flex-direction: row;\n  margin: 10px 0 0;\n  flex-wrap: wrap;\n}\n\n\n.bx-search-results-row__item {\n  background: #e6e9ef !important;\n  margin-right: 10px;\n  margin-top: 10px;\n  border-radius: 2px;\n  padding: 10px;\n  color: #333333;\n  font-family: var(--font-helvetica);\n  -moz-user-select: none;\n  -khtml-user-select: none;\n  -webkit-user-select: none;\n  -ms-user-select: none;\n  user-select: none;\n  font-size: 12px;\n  line-height: 16px;\n  flex: 0 0 auto;\n  display: flex;\n  align-items: center;\n    justify-content: space-between;\n}\n.bx-search-results-row__item-hidden {\n    display: none;\n}\nhtml[dir="rtl"] .bx-search-results-row__item {\n      margin-left: 10px;\n      margin-right: 0;\n}\n\n.bx-search-results-row__item:hover {\n  text-decoration: none;\n  background: var(--gray-color) !important;\n  cursor: pointer;\n}\n\n.bx-search-results-row__item a:hover, .bx-search-results-row__item a:focus {\n  text-decoration: none;\n}\n.ek a.bx-search-results-row__link:not([tabindex=\'-1\']):not(.panel-disabled):focus {\n    outline: none !important;\n}\n\n.bx-search-results-row__link {\n  text-decoration: none;\n  display: flex;\n  align-items: center;\n}\n.bx-search-results-row__link-ond {\n  font-weight: 700;\n  display: flex;\n}\n.bx-search-results-row__link-icon {\n  font-size: 12px;\n  margin: 0 3px;\n  vertical-align: baseline !important;\n}\n.bx-search-results-row__link-ond:after {\n  content: ".";\n  margin: 0 3px;\n  transform: translate(0px, calc(-50% + 4px));\n}\n.bx-search-results-row__link-date:after {\n  content: "|";\n  margin: 0 5px;\n}\n.bx-search-results-row__link-date-no-cabin-class {\n    margin-right: 15px;\n}\nhtml[dir="rtl"] .bx-search-results-row__link-date-no-cabin-class {\n    margin-left: 15px;\n    margin-right: 0;\n}\n.bx-search-results-row__link-pax {\n  vertical-align: baseline !important;\n}\n.bx-search-results-row__link-cabin {\n  margin: 0 10px;\n}\n.bx-search-results-row__link-cabin.bx-search-results-row__link-cabin-y {\n  color: #32753a;\n}\n.bx-search-results-row__link-cabin.bx-search-results-row__link-cabin-j {\n  color: #406dc0;\n}\n.bx-search-results-row__link-cabin.bx-search-results-row__link-cabin-f {\n  color: #d54141;\n}\n.bx-search-results-row__link-remove-icon {\n  border-radius: 50%;\n  background: white;\n  display: inline-block;\n  width: 15px;\n  height: 15px;\n  padding: 4px;\n  vertical-align: text-bottom;\n}\n.bx-search-results-row__link-remove-icon .icon {\n  font-size: 6px;\n}\n.bx-search-results-row__link-remove-icon:hover {\nbox-shadow: 0px 0px 3px 3px rgb(0 0 0 / 40%);\n}\n@media only screen and (max-width: 991px) {\n    .bx-search-results-row__item-hidden {\n        display: flex;\n}\n.bx-search-results-row {\n    overflow-x: scroll;\n    margin: 0px 0 10px;\n    flex-wrap: nowrap;\n}\n.bx-search-results-row__item {\n    font-size: 10px;\n    line-height: 10px;\n    height: 38px;\n\n}\n  .bx-search-results-row__link-icon {\n    font-size: 10px;\n  }\n.bx-search-results-row__link-cabin {\n    margin: 0 5px;\n}\n.bx-search-results-row-stacked {\n    flex-wrap: wrap;\n}\n.bx-search-results-row__item-stacked {\n        min-width: calc(50% - 5px);\n    max-width: calc(50% - 5px);\n}\n.bx-search-results-row__item-stacked:nth-child(even) {\n    margin-right: 0;\n}\n\n.bx-search-results-row__item-stacked .bx-search-results-row__link-date-month {\n    letter-spacing: normal;\n}\n.bx-search-results-row__item-stacked .bx-search-results-row__link-date-no-cabin-class {\n    margin-right: 5px;\n}\n.bx-search-results-row__item-stacked .bx-search-results-row__link-remove-icon {\n    height: 5px;\n    margin: auto 0;\n    background: transparent;\n    width: auto;\n    padding: 0;\n    transform: translate(0px, calc(50% - 5px));\n}\n.bx-search-results-row__item-stacked .bx-search-results-row__link-pax-wrapper {\n    display: none;\n}\n.bx-search-results-row__item-stacked .bx-search-results-row__link-date:after {\n    content: "";\n    margin: 0;\n}\n .bx-search-results-row__item-stacked .bx-search-results-row__link-cabin {\n     display: none;\n }\n  .bx-search-results-row__item-stacked .bx-search-results-row__link-ond:after {\n content: "\\A";\n    white-space: pre;\n}\n.bx-search-results-row__item-stacked .bx-search-results-row__link-ond {\n    margin-bottom: 2px;\n    display: flex;\n}\n    .bx-search-results-row__link-ond:after {\n    transform: translate(0px, calc(-50% + 2px));\n  }\n  .bx-search-results-row__item-stacked .bx-search-results-row__link-pax-wrapper {\n      display: none;\n  }\n  .bx-search-results-row__item-stacked .bx-search-results-row__link {\n      flex-direction: column;\n      align-items: normal;\n  }\n  .bx-search-results-row__item-stacked.bx-search-results-row__item:nth-child(odd) {\n      margin-right: 10px;\n      margin-left: 0;\n}\nhtml[dir="rtl"] .bx-search-results-row__item-stacked.bx-search-results-row__item:nth-child(odd) {\n      margin-left: 10px;\n      margin-right: 0;\n}\nhtml[dir="rtl"] .bx-search-results-row__item-stacked.bx-search-results-row__item:nth-child(even) {\n      margin-left: 0;\n      margin-right: 0;\n}\n}\n',html:'<div class="bx-search-results"/>',js:'function sendBoxeverEvent(eventType) {\r\n  let eventLabel = `BOX174_${eventType}`;\r\n  var event = {\r\n    channel: "WEB",\r\n    type: eventLabel,\r\n    page: dataLayer[0].pageName,\r\n    pos: _boxever_settings.pointOfSale,\r\n    browser_id: Boxever.getID()\r\n  };\r\n  Boxever.eventCreate(event, function(data) {}, "json");\r\n}\r\n\r\nfunction getResourceKeys(resources, resourceMap) {\r\n  let mappedResources = {};\r\n  for (var key of Object.keys(resourceMap)) {\r\n    if (resourceMap[key] in resources) {\r\n      mappedResources[key] = resources[resourceMap[key]];\r\n    } else {\r\n      mappedResources[key] = "";\r\n    }\r\n  }\r\n  return mappedResources;\r\n}\r\n\r\nfunction parseDate(date) {\r\n    const day = date.substring(0 ,2).includes(\'-\') ? date.substring(0 ,1) : date.substring(0 ,2);\r\n    const months = [\'Jan\', \'Feb\', \'Mar\', \'Apr\', \'May\', \'Jun\', \'Jul\', \'Aug\', \'Sep\', \'Oct\', \'Nov\', \'Dec\'];\r\n    const year = date.substring(7);\r\n    const monthName = date.substring(3, 6);\r\n    const month = months.findIndex(e => e.toLowerCase() === monthName.toLowerCase()) ;\r\n    return new Date(\'20\' + year, month, day);\r\n}\r\n\r\nfunction dateInPast(firstDate, secondDate) {\r\n  if (firstDate.setHours(0, 0, 0, 0) <= secondDate.setHours(0, 0, 0, 0)) {\r\n    return true;\r\n  }\r\n\r\n  return false;\r\n}\r\n\r\nfunction renderLink(row, lang, publication, isHidden) {\r\n  const cabinClassMapping = {\r\n    Y: 0,\r\n    J: 1,\r\n    F: 2\r\n  };\r\n  const cabinClassLabelMapping = {\r\n    Y: resourceKeys.economyClass,\r\n    J: resourceKeys.businessClass,\r\n    F: resourceKeys.firstClass\r\n  };\r\n  let departDate = parseDate(`${row.depart_date}`);\r\n  let returnDate = parseDate(`${row.return_date}`);\r\n  let IBECabinClass = 0;\r\n  if (row.booking_class in cabinClassMapping) {\r\n    IBECabinClass = cabinClassMapping[row.booking_class];\r\n  }\r\n  let departLocaleString = ("0" + departDate.getDate()).slice(-2);\r\n  if (\r\n    row.flight_type === "OW" ||\r\n    departDate.getMonth() !== returnDate.getMonth()\r\n  ) {\r\n    departLocaleString +=\r\n      \'<span class="bx-search-results-row__link-date-month">&nbsp;\' +\r\n      departDate.toLocaleDateString(lang, { month: "short" }) +\r\n      "</span>";\r\n  }\r\n  let returnLocaleString =\r\n    ("0" + returnDate.getDate()).slice(-2) +\r\n    \'<span class="bx-search-results-row__link-date-month">&nbsp;\' +\r\n    returnDate.toLocaleDateString(lang, { month: "short" }) +\r\n    "</span>";\r\n  let item = `\r\n          <div class="bx-search-results-row__item ${\r\n            isHidden ? "bx-search-results-row__item-hidden" : ""\r\n          } ${isStacked ? "bx-search-results-row__item-stacked" : ""}">\r\n          <a  class="bx-search-results-row__link" href=\'http://www.emirates.com/SessionHandler.aspx?pub=${publication}&pageurl=/IBE.aspx&section=IBE&showpage=true&TID=${\r\n    row.flight_type === "OW" ? "OW" : "SB"\r\n  }&seldcity1=${row.origin_iata}&selacity1=${row.destination_iata}&selddate1=${\r\n    row.depart_date\r\n  }&seladate1=${row.return_date}&seladults=${row.adults}&selchildren=${\r\n    row.children\r\n  }&selinfants=${\r\n    row.infants\r\n  }&selcabinclass=${IBECabinClass}&selcabinclass1=${IBECabinClass}&resultby=0\'><span class="bx-search-results-row__link-ond">${\r\n    row.origin_iata\r\n  }<i class="bx-search-results-row__link-icon icon ${\r\n    row.flight_type === "OW" ? "icon-one-way-flight" : "icon-return-flight"\r\n  }"></i>${row.destination_iata}</span>\r\n          <span class="${\r\n            showCabinClass\r\n              ? "bx-search-results-row__link-date"\r\n              : "bx-search-results-row__link-date-no-cabin-class"\r\n          }">${\r\n    row.flight_type === "OW"\r\n      ? departLocaleString\r\n      : departLocaleString + "-" + returnLocaleString\r\n  }</span>`;\r\n  if (showCabinClass) {\r\n    item += `<span class="bx-search-results-row__link-pax-wrapper">\r\n          <i class="bx-search-results-row__link-pax icon icon-adult-male-customer"></i>\r\n              ${row.adults + row.children + row.youths + row.infants}\r\n              </span>\r\n              <span class="bx-search-results-row__link-cabin bx-search-results-row__link-cabin-${row.booking_class.toLowerCase()}">${\r\n      cabinClassLabelMapping[row.booking_class]\r\n    }</span>`;\r\n  }\r\n\r\n  item += `</a>\r\n          <span class="bx-search-results-row__link-remove-icon"><i class="icon icon-delete-light"></i></span></div>\r\n          `;\r\n  return item;\r\n}\r\n\r\nfunction render() {\r\n  let publication = "";\r\n  const publicationURL = document.querySelector(\'meta[name="PublishURL"]\');\r\n  if (publicationURL) {\r\n    if (publicationURL.content !== "/english") {\r\n      publication = publicationURL.content;\r\n    } else {\r\n      publication = "/global/english";\r\n    }\r\n  }\r\n  if (publication) {\r\n    if (dataLayer && dataLayer[0]) {\r\n      let lang = dataLayer[0].languageCode.toLowerCase();\r\n      let airportsFetchURL = `https://www.emirates.com/service/airports?lang=${lang}`;\r\n      let browserID = Boxever.getID();\r\n      let bxRecentSearchFetchURL = `https://api.boxever.com/v2/callFlows?message={"context":{"clientKey":"${_boxever_settings.client_key}","channel":"WEB","language":"en","currencyCode":"USD","uri":"/home","pointOfSale":"emirates.com/english","browserId":"${browserID}","friendlyId":"recent_searches"}}`;\r\n      let promises = [\r\n        fetch(\r\n          `https://www.emirates.com/service/content/api/v4.0/resources/eol/${publication}/Experiences/Recent-Searches`\r\n        )\r\n          .then(response => {\r\n            return response.json();\r\n          })\r\n          .then(results => {\r\n            let resources = null;\r\n            if (results) {\r\n              resources = results.results;\r\n            }\r\n            return resources;\r\n          }),\r\n        fetch(airportsFetchURL).then(response => {\r\n          return response.json();\r\n        }),\r\n        fetch(bxRecentSearchFetchURL).then(response => {\r\n          return response.json();\r\n        })\r\n      ];\r\n\r\n      Promise.all(promises)\r\n        .then(([resources, airports, recentSearches]) => {\r\n          if (\r\n            recentSearches &&\r\n            recentSearches.recent_searches &&\r\n            recentSearches.recent_searches.length &&\r\n            airports &&\r\n            airports.results &&\r\n            resources &&\r\n            Object.keys(resources).length\r\n          ) {\r\n            document.addEventListener("click", function(e) {\r\n              if (\r\n                e.target &&\r\n                e.target.className.indexOf("bx-search-results-row__link") > -1\r\n              ) {\r\n                sendBoxeverEvent("CLICKED");\r\n              }\r\n              if (\r\n                e.target &&\r\n                (e.target.className.indexOf(\r\n                  "bx-search-results-row__link-remove-icon"\r\n                ) > -1 ||\r\n                  (e.target.parentNode &&\r\n                    e.target.parentNode.className.indexOf(\r\n                      "bx-search-results-row__link-remove-icon"\r\n                    ) > -1))\r\n              ) {\r\n                if (e.target.parentNode) {\r\n                  if (\r\n                    e.target.parentNode.className.indexOf(\r\n                      "bx-search-results-row__link-remove-icon"\r\n                    ) > -1\r\n                  ) {\r\n                    e.target.parentNode.parentNode.remove();\r\n                  } else {\r\n                    e.target.parentNode.remove();\r\n                  }\r\n                }\r\n                if (counter === 0 && window.innerWidth > 991) {\r\n                  document\r\n                    .querySelector(".bx-search-results-row__item-hidden")\r\n                    .classList.remove("bx-search-results-row__item-hidden");\r\n                  counter += 1;\r\n                } else if (counter === 0 && window.innerWidth <= 991) {\r\n                  counter += 1;\r\n                  if (operatingSearches.length - 1 >= 3 + counter) {\r\n                    boxEverSearchResultEl.querySelector(\r\n                      ".bx-search-results-row"\r\n                    ).innerHTML += renderLink(\r\n                      operatingSearches[3 + counter],\r\n                      lang,\r\n                      publication,\r\n                      false\r\n                    );\r\n                    counter += 1;\r\n                  }\r\n                } else {\r\n                  if (operatingSearches.length - 1 >= 3 + counter) {\r\n                    boxEverSearchResultEl.querySelector(\r\n                      ".bx-search-results-row"\r\n                    ).innerHTML += renderLink(\r\n                      operatingSearches[3 + counter],\r\n                      lang,\r\n                      publication,\r\n                      false\r\n                    );\r\n                    counter += 1;\r\n                  }\r\n                }\r\n              }\r\n            });\r\n\r\n            const resourceMap = {\r\n              firstClass: "Experiences/Recent-Searches/first-class__text",\r\n              economyClass: "Experiences/Recent-Searches/economy-class__text",\r\n              businessClass: "Experiences/Recent-Searches/business-class__text"\r\n            };\r\n            resourceKeys = getResourceKeys(resources, resourceMap);\r\n            if (window.innerWidth <= 991) {\r\n              insertHTMLBefore(".fs-widget__container");\r\n            } else {\r\n              insertHTMLAfter(".fs-widget__container");\r\n            }\r\n            window.addEventListener("resize", e => {\r\n              let boxEverSearchResultEl = document.querySelector(\r\n                ".bx-search-results"\r\n              ).parentNode;\r\n              if (window.innerWidth <= 991) {\r\n                boxEverSearchResultEl.parentNode.insertBefore(\r\n                  boxEverSearchResultEl,\r\n                  boxEverSearchResultEl.parentNode.firstChild\r\n                );\r\n              } else {\r\n                boxEverSearchResultEl.parentNode.insertBefore(\r\n                  boxEverSearchResultEl,\r\n                  boxEverSearchResultEl.parentNode.lastChild\r\n                );\r\n              }\r\n            });\r\n\r\n            let boxEverSearchResultEl = document.querySelector(\r\n              ".bx-search-results"\r\n            );\r\n            const today = new Date();\r\n\r\n            const availabilityChecksPromises = recentSearches.recent_searches.reduce(\r\n              function(availabilityChecksPromises, row, index) {\r\n                const OND = `${row.origin_iata}-${row.destination_iata}`;\r\n                const departDate = parseDate(`${row.depart_date}`);\r\n                if (\r\n                  (!availabilityChecksPromises ||\r\n                    !(OND in availabilityChecksPromises)) &&\r\n                  !dateInPast(departDate, today)\r\n                ) {\r\n                  return Object.assign(availabilityChecksPromises, {\r\n                    [OND]: fetch(\r\n                      `${HOST}/service/flights-resumption?origin=${row.origin_iata}&destination=${row.destination_iata}`\r\n                    )\r\n                      .then(response => {\r\n                        return response.json();\r\n                      })\r\n                      .catch(error => console.log(error))\r\n                  });\r\n                }\r\n                return availabilityChecksPromises;\r\n              },\r\n              {}\r\n            );\r\n            Promise.all(Object.values(availabilityChecksPromises))\r\n              .then(results => {\r\n                let operatingDestinationsCounter = 0;\r\n                recentSearches.recent_searches.forEach(row => {\r\n                  const departDate = parseDate(`${row.depart_date}`);\r\n                  if (!dateInPast(departDate, today)) {\r\n                    let resultIndex = -1;\r\n                    const resultsKeys = Object.keys(availabilityChecksPromises);\r\n                    for (var i = 0; i < resultsKeys.length; i++) {\r\n                      if (\r\n                        resultsKeys[i] ===\r\n                        `${row.origin_iata}-${row.destination_iata}`\r\n                      ) {\r\n                        resultIndex = i;\r\n                      }\r\n                    }\r\n                    if (\r\n                      resultIndex > -1 &&\r\n                      results[resultIndex] &&\r\n                      results[resultIndex].results &&\r\n                      results[resultIndex].results.routes &&\r\n                      Object.keys(results[resultIndex].results.routes).length >\r\n                        0\r\n                    ) {\r\n                      const keys = Object.keys(\r\n                        results[resultIndex].results.routes\r\n                      );\r\n                      for (var j = 0; j < keys.length; j++) {\r\n                        const route =\r\n                          results[resultIndex].results.routes[keys[j]];\r\n                        if (route && route.statusMessage === "Operating") {\r\n                          if (\r\n                            (!showCabinClass && window.innerWidth > 991) ||\r\n                            (isStacked && window.innerWidth > 991) ||\r\n                            operatingDestinationsCounter < 4\r\n                          ) {\r\n                            boxEverSearchResultEl.innerHTML += renderLink(\r\n                              row,\r\n                              lang,\r\n                              publication,\r\n                              operatingDestinationsCounter === 3 &&\r\n                                !isStacked &&\r\n                                showCabinClass\r\n                                ? true\r\n                                : false\r\n                            );\r\n\r\n                            operatingDestinationsCounter += 1;\r\n                          }\r\n                          operatingSearches.push(row);\r\n\r\n                          break;\r\n                        }\r\n                      }\r\n                    }\r\n                  }\r\n                });\r\n                if (boxEverSearchResultEl.innerHTML) {\r\n                  boxEverSearchResultEl.innerHTML = `<div class="bx-search-results-row ${\r\n                    isStacked ? "bx-search-results-row-stacked" : ""\r\n                  }">${boxEverSearchResultEl.innerHTML}</div>`;\r\n                  sendBoxeverEvent("VIEWED");\r\n                }\r\n              })\r\n              .catch(error => console.log(error));\r\n          }\r\n        })\r\n        .catch(error => {\r\n          console.log(error);\r\n        });\r\n    }\r\n  }\r\n}\r\nconst HOST = "https://www.emirates.com";\r\nconst operatingSearches = [];\r\nlet showCabinClass =\r\n  "Yes" === "Yes";\r\nconst isStacked =\r\n  "Yes" === "Yes";\r\nlet counter = 0;\r\nlet resourceKeys = {};\r\n//Cookie consent check\r\nlet cookieComplianceEnabled =\r\n  "Yes" ===\r\n  "Yes";\r\nconst cookieComplianceFunctionalGroup =\r\n  "C0002";\r\n//Listen for disabling/enabling functional cookies group for new browser\r\nif (cookieComplianceEnabled) {\r\n  window.addEventListener("OneTrustGroupsUpdated", function(e) {\r\n    if (OnetrustActiveGroups.indexOf(cookieComplianceFunctionalGroup) > -1) {\r\n      //Show experience wrapper here\r\n      document.querySelector(".bx-search-results").style.display = "block";\r\n      render();\r\n    } else {\r\n      document.querySelector(".bx-search-results").style.display = "none";\r\n    }\r\n  });\r\n}\r\nif (\r\n  !cookieComplianceEnabled ||\r\n  (cookieComplianceEnabled &&\r\n    OnetrustActiveGroups.indexOf(cookieComplianceFunctionalGroup) > -1)\r\n) {\r\n  render();\r\n}\r\n'}},{ref:"77bab3fc-a29a-4cd3-a5ac-e811a3068d18",name:"Stacked Without Cabin Class",assets:{css:':root {\n  --font-helvetica: HelveticaNeue, Helvetica Neue, Helvetica, Lucida Grande,\n    sans-serif;\n  --font-helvetica-light: HelveticaNeue-Light, Helvetica Neue Light,\n    Helvetica Neue, Helvetica, Arial, Lucida Grande, sans-serif;\n  --font-ek-bold: EmiratesSB-Bold, helvetica, arial, sans-serif;\n  --text-color: #333333;\n  --white-color: #ffffff;\n  --red-color: #c60c30;\n  --gray-color: #c7c7c7;\n}\n\n/* Hide recent searches group under origin dropdown*/\nsection.recent-searches-group {\n    display: none !important;\n}\n\n.bx-search-results-row {\n  display: flex;\n  flex-direction: row;\n  margin: 10px 0 0;\n  flex-wrap: wrap;\n}\n\n\n.bx-search-results-row__item {\n  background: #e6e9ef !important;\n  margin-right: 10px;\n  margin-top: 10px;\n  border-radius: 2px;\n  padding: 10px;\n  color: #333333;\n  font-family: var(--font-helvetica);\n  -moz-user-select: none;\n  -khtml-user-select: none;\n  -webkit-user-select: none;\n  -ms-user-select: none;\n  user-select: none;\n  font-size: 12px;\n  line-height: 16px;\n  flex: 0 0 auto;\n  display: flex;\n  align-items: center;\n    justify-content: space-between;\n}\n.bx-search-results-row__item-hidden {\n    display: none;\n}\nhtml[dir="rtl"] .bx-search-results-row__item {\n      margin-left: 10px;\n      margin-right: 0;\n}\n\n.bx-search-results-row__item:hover {\n  text-decoration: none;\n  background: var(--gray-color) !important;\n  cursor: pointer;\n}\n\n.bx-search-results-row__item a:hover, .bx-search-results-row__item a:focus {\n  text-decoration: none;\n}\n.ek a.bx-search-results-row__link:not([tabindex=\'-1\']):not(.panel-disabled):focus {\n    outline: none !important;\n}\n\n.bx-search-results-row__link {\n  text-decoration: none;\n  display: flex;\n  align-items: center;\n}\n.bx-search-results-row__link-ond {\n  font-weight: 700;\n  display: flex;\n}\n.bx-search-results-row__link-icon {\n  font-size: 12px;\n  margin: 0 3px;\n  vertical-align: baseline !important;\n}\n.bx-search-results-row__link-ond:after {\n  content: ".";\n  margin: 0 3px;\n  transform: translate(0px, calc(-50% + 4px));\n}\n.bx-search-results-row__link-date:after {\n  content: "|";\n  margin: 0 5px;\n}\n.bx-search-results-row__link-date-no-cabin-class {\n    margin-right: 15px;\n}\nhtml[dir="rtl"] .bx-search-results-row__link-date-no-cabin-class {\n    margin-left: 15px;\n    margin-right: 0;\n}\n.bx-search-results-row__link-pax {\n  vertical-align: baseline !important;\n}\n.bx-search-results-row__link-cabin {\n  margin: 0 10px;\n}\n.bx-search-results-row__link-cabin.bx-search-results-row__link-cabin-y {\n  color: #32753a;\n}\n.bx-search-results-row__link-cabin.bx-search-results-row__link-cabin-j {\n  color: #406dc0;\n}\n.bx-search-results-row__link-cabin.bx-search-results-row__link-cabin-f {\n  color: #d54141;\n}\n.bx-search-results-row__link-remove-icon {\n  border-radius: 50%;\n  background: white;\n  display: inline-block;\n  width: 15px;\n  height: 15px;\n  padding: 4px;\n  vertical-align: text-bottom;\n}\n.bx-search-results-row__link-remove-icon .icon {\n  font-size: 6px;\n}\n.bx-search-results-row__link-remove-icon:hover {\nbox-shadow: 0px 0px 3px 3px rgb(0 0 0 / 40%);\n}\n@media only screen and (max-width: 991px) {\n    .bx-search-results-row__item-hidden {\n        display: flex;\n}\n.bx-search-results-row {\n    overflow-x: scroll;\n    margin: 0px 0 10px;\n    flex-wrap: nowrap;\n}\n.bx-search-results-row__item {\n    font-size: 10px;\n    line-height: 10px;\n    height: 38px;\n\n}\n  .bx-search-results-row__link-icon {\n    font-size: 10px;\n  }\n.bx-search-results-row__link-cabin {\n    margin: 0 5px;\n}\n.bx-search-results-row-stacked {\n    flex-wrap: wrap;\n}\n.bx-search-results-row__item-stacked {\n        min-width: calc(50% - 5px);\n    max-width: calc(50% - 5px);\n}\n.bx-search-results-row__item-stacked:nth-child(even) {\n    margin-right: 0;\n}\n\n.bx-search-results-row__item-stacked .bx-search-results-row__link-date-month {\n    letter-spacing: normal;\n}\n.bx-search-results-row__item-stacked .bx-search-results-row__link-date-no-cabin-class {\n    margin-right: 5px;\n}\n.bx-search-results-row__item-stacked .bx-search-results-row__link-remove-icon {\n    height: 5px;\n    margin: auto 0;\n    background: transparent;\n    width: auto;\n    padding: 0;\n    transform: translate(0px, calc(50% - 5px));\n}\n.bx-search-results-row__item-stacked .bx-search-results-row__link-pax-wrapper {\n    display: none;\n}\n.bx-search-results-row__item-stacked .bx-search-results-row__link-date:after {\n    content: "";\n    margin: 0;\n}\n .bx-search-results-row__item-stacked .bx-search-results-row__link-cabin {\n     display: none;\n }\n  .bx-search-results-row__item-stacked .bx-search-results-row__link-ond:after {\n content: "\\A";\n    white-space: pre;\n}\n.bx-search-results-row__item-stacked .bx-search-results-row__link-ond {\n    margin-bottom: 2px;\n    display: flex;\n}\n    .bx-search-results-row__link-ond:after {\n    transform: translate(0px, calc(-50% + 2px));\n  }\n  .bx-search-results-row__item-stacked .bx-search-results-row__link-pax-wrapper {\n      display: none;\n  }\n  .bx-search-results-row__item-stacked .bx-search-results-row__link {\n      flex-direction: column;\n      align-items: normal;\n  }\n  .bx-search-results-row__item-stacked.bx-search-results-row__item:nth-child(odd) {\n      margin-right: 10px;\n      margin-left: 0;\n}\nhtml[dir="rtl"] .bx-search-results-row__item-stacked.bx-search-results-row__item:nth-child(odd) {\n      margin-left: 10px;\n      margin-right: 0;\n}\nhtml[dir="rtl"] .bx-search-results-row__item-stacked.bx-search-results-row__item:nth-child(even) {\n      margin-left: 0;\n      margin-right: 0;\n}\n}\n',html:'<div class="bx-search-results"/>',js:'function sendBoxeverEvent(eventType) {\r\n  let eventLabel = `BOX174_${eventType}`;\r\n  var event = {\r\n    channel: "WEB",\r\n    type: eventLabel,\r\n    page: dataLayer[0].pageName,\r\n    pos: _boxever_settings.pointOfSale,\r\n    browser_id: Boxever.getID()\r\n  };\r\n  Boxever.eventCreate(event, function(data) {}, "json");\r\n}\r\n\r\nfunction getResourceKeys(resources, resourceMap) {\r\n  let mappedResources = {};\r\n  for (var key of Object.keys(resourceMap)) {\r\n    if (resourceMap[key] in resources) {\r\n      mappedResources[key] = resources[resourceMap[key]];\r\n    } else {\r\n      mappedResources[key] = "";\r\n    }\r\n  }\r\n  return mappedResources;\r\n}\r\n\r\nfunction parseDate(date) {\r\n    const day = date.substring(0 ,2).includes(\'-\') ? date.substring(0 ,1) : date.substring(0 ,2);\r\n    const months = [\'Jan\', \'Feb\', \'Mar\', \'Apr\', \'May\', \'Jun\', \'Jul\', \'Aug\', \'Sep\', \'Oct\', \'Nov\', \'Dec\'];\r\n    const year = date.substring(7);\r\n    const monthName = date.substring(3, 6);\r\n    const month = months.findIndex(e => e.toLowerCase() === monthName.toLowerCase()) ;\r\n    return new Date(\'20\' + year, month, day);\r\n}\r\n\r\nfunction dateInPast(firstDate, secondDate) {\r\n  if (firstDate.setHours(0, 0, 0, 0) <= secondDate.setHours(0, 0, 0, 0)) {\r\n    return true;\r\n  }\r\n\r\n  return false;\r\n}\r\n\r\nfunction renderLink(row, lang, publication, isHidden) {\r\n  const cabinClassMapping = {\r\n    Y: 0,\r\n    J: 1,\r\n    F: 2\r\n  };\r\n  const cabinClassLabelMapping = {\r\n    Y: resourceKeys.economyClass,\r\n    J: resourceKeys.businessClass,\r\n    F: resourceKeys.firstClass\r\n  };\r\n  let departDate = parseDate(`${row.depart_date}`);\r\n  let returnDate = parseDate(`${row.return_date}`);\r\n  let IBECabinClass = 0;\r\n  if (row.booking_class in cabinClassMapping) {\r\n    IBECabinClass = cabinClassMapping[row.booking_class];\r\n  }\r\n  let departLocaleString = ("0" + departDate.getDate()).slice(-2);\r\n  if (\r\n    row.flight_type === "OW" ||\r\n    departDate.getMonth() !== returnDate.getMonth()\r\n  ) {\r\n    departLocaleString +=\r\n      \'<span class="bx-search-results-row__link-date-month">&nbsp;\' +\r\n      departDate.toLocaleDateString(lang, { month: "short" }) +\r\n      "</span>";\r\n  }\r\n  let returnLocaleString =\r\n    ("0" + returnDate.getDate()).slice(-2) +\r\n    \'<span class="bx-search-results-row__link-date-month">&nbsp;\' +\r\n    returnDate.toLocaleDateString(lang, { month: "short" }) +\r\n    "</span>";\r\n  let item = `\r\n          <div class="bx-search-results-row__item ${\r\n            isHidden ? "bx-search-results-row__item-hidden" : ""\r\n          } ${isStacked ? "bx-search-results-row__item-stacked" : ""}">\r\n          <a  class="bx-search-results-row__link" href=\'http://www.emirates.com/SessionHandler.aspx?pub=${publication}&pageurl=/IBE.aspx&section=IBE&showpage=true&TID=${\r\n    row.flight_type === "OW" ? "OW" : "SB"\r\n  }&seldcity1=${row.origin_iata}&selacity1=${row.destination_iata}&selddate1=${\r\n    row.depart_date\r\n  }&seladate1=${row.return_date}&seladults=${row.adults}&selchildren=${\r\n    row.children\r\n  }&selinfants=${\r\n    row.infants\r\n  }&selcabinclass=${IBECabinClass}&selcabinclass1=${IBECabinClass}&resultby=0\'><span class="bx-search-results-row__link-ond">${\r\n    row.origin_iata\r\n  }<i class="bx-search-results-row__link-icon icon ${\r\n    row.flight_type === "OW" ? "icon-one-way-flight" : "icon-return-flight"\r\n  }"></i>${row.destination_iata}</span>\r\n          <span class="${\r\n            showCabinClass\r\n              ? "bx-search-results-row__link-date"\r\n              : "bx-search-results-row__link-date-no-cabin-class"\r\n          }">${\r\n    row.flight_type === "OW"\r\n      ? departLocaleString\r\n      : departLocaleString + "-" + returnLocaleString\r\n  }</span>`;\r\n  if (showCabinClass) {\r\n    item += `<span class="bx-search-results-row__link-pax-wrapper">\r\n          <i class="bx-search-results-row__link-pax icon icon-adult-male-customer"></i>\r\n              ${row.adults + row.children + row.youths + row.infants}\r\n              </span>\r\n              <span class="bx-search-results-row__link-cabin bx-search-results-row__link-cabin-${row.booking_class.toLowerCase()}">${\r\n      cabinClassLabelMapping[row.booking_class]\r\n    }</span>`;\r\n  }\r\n\r\n  item += `</a>\r\n          <span class="bx-search-results-row__link-remove-icon"><i class="icon icon-delete-light"></i></span></div>\r\n          `;\r\n  return item;\r\n}\r\n\r\nfunction render() {\r\n  let publication = "";\r\n  const publicationURL = document.querySelector(\'meta[name="PublishURL"]\');\r\n  if (publicationURL) {\r\n    if (publicationURL.content !== "/english") {\r\n      publication = publicationURL.content;\r\n    } else {\r\n      publication = "/global/english";\r\n    }\r\n  }\r\n  if (publication) {\r\n    if (dataLayer && dataLayer[0]) {\r\n      let lang = dataLayer[0].languageCode.toLowerCase();\r\n      let airportsFetchURL = `https://www.emirates.com/service/airports?lang=${lang}`;\r\n      let browserID = Boxever.getID();\r\n      let bxRecentSearchFetchURL = `https://api.boxever.com/v2/callFlows?message={"context":{"clientKey":"${_boxever_settings.client_key}","channel":"WEB","language":"en","currencyCode":"USD","uri":"/home","pointOfSale":"emirates.com/english","browserId":"${browserID}","friendlyId":"recent_searches"}}`;\r\n      let promises = [\r\n        fetch(\r\n          `https://www.emirates.com/service/content/api/v4.0/resources/eol/${publication}/Experiences/Recent-Searches`\r\n        )\r\n          .then(response => {\r\n            return response.json();\r\n          })\r\n          .then(results => {\r\n            let resources = null;\r\n            if (results) {\r\n              resources = results.results;\r\n            }\r\n            return resources;\r\n          }),\r\n        fetch(airportsFetchURL).then(response => {\r\n          return response.json();\r\n        }),\r\n        fetch(bxRecentSearchFetchURL).then(response => {\r\n          return response.json();\r\n        })\r\n      ];\r\n\r\n      Promise.all(promises)\r\n        .then(([resources, airports, recentSearches]) => {\r\n          if (\r\n            recentSearches &&\r\n            recentSearches.recent_searches &&\r\n            recentSearches.recent_searches.length &&\r\n            airports &&\r\n            airports.results &&\r\n            resources &&\r\n            Object.keys(resources).length\r\n          ) {\r\n            document.addEventListener("click", function(e) {\r\n              if (\r\n                e.target &&\r\n                e.target.className.indexOf("bx-search-results-row__link") > -1\r\n              ) {\r\n                sendBoxeverEvent("CLICKED");\r\n              }\r\n              if (\r\n                e.target &&\r\n                (e.target.className.indexOf(\r\n                  "bx-search-results-row__link-remove-icon"\r\n                ) > -1 ||\r\n                  (e.target.parentNode &&\r\n                    e.target.parentNode.className.indexOf(\r\n                      "bx-search-results-row__link-remove-icon"\r\n                    ) > -1))\r\n              ) {\r\n                if (e.target.parentNode) {\r\n                  if (\r\n                    e.target.parentNode.className.indexOf(\r\n                      "bx-search-results-row__link-remove-icon"\r\n                    ) > -1\r\n                  ) {\r\n                    e.target.parentNode.parentNode.remove();\r\n                  } else {\r\n                    e.target.parentNode.remove();\r\n                  }\r\n                }\r\n                if (counter === 0 && window.innerWidth > 991) {\r\n                  document\r\n                    .querySelector(".bx-search-results-row__item-hidden")\r\n                    .classList.remove("bx-search-results-row__item-hidden");\r\n                  counter += 1;\r\n                } else if (counter === 0 && window.innerWidth <= 991) {\r\n                  counter += 1;\r\n                  if (operatingSearches.length - 1 >= 3 + counter) {\r\n                    boxEverSearchResultEl.querySelector(\r\n                      ".bx-search-results-row"\r\n                    ).innerHTML += renderLink(\r\n                      operatingSearches[3 + counter],\r\n                      lang,\r\n                      publication,\r\n                      false\r\n                    );\r\n                    counter += 1;\r\n                  }\r\n                } else {\r\n                  if (operatingSearches.length - 1 >= 3 + counter) {\r\n                    boxEverSearchResultEl.querySelector(\r\n                      ".bx-search-results-row"\r\n                    ).innerHTML += renderLink(\r\n                      operatingSearches[3 + counter],\r\n                      lang,\r\n                      publication,\r\n                      false\r\n                    );\r\n                    counter += 1;\r\n                  }\r\n                }\r\n              }\r\n            });\r\n\r\n            const resourceMap = {\r\n              firstClass: "Experiences/Recent-Searches/first-class__text",\r\n              economyClass: "Experiences/Recent-Searches/economy-class__text",\r\n              businessClass: "Experiences/Recent-Searches/business-class__text"\r\n            };\r\n            resourceKeys = getResourceKeys(resources, resourceMap);\r\n            if (window.innerWidth <= 991) {\r\n              insertHTMLBefore(".fs-widget__container");\r\n            } else {\r\n              insertHTMLAfter(".fs-widget__container");\r\n            }\r\n            window.addEventListener("resize", e => {\r\n              let boxEverSearchResultEl = document.querySelector(\r\n                ".bx-search-results"\r\n              ).parentNode;\r\n              if (window.innerWidth <= 991) {\r\n                boxEverSearchResultEl.parentNode.insertBefore(\r\n                  boxEverSearchResultEl,\r\n                  boxEverSearchResultEl.parentNode.firstChild\r\n                );\r\n              } else {\r\n                boxEverSearchResultEl.parentNode.insertBefore(\r\n                  boxEverSearchResultEl,\r\n                  boxEverSearchResultEl.parentNode.lastChild\r\n                );\r\n              }\r\n            });\r\n\r\n            let boxEverSearchResultEl = document.querySelector(\r\n              ".bx-search-results"\r\n            );\r\n            const today = new Date();\r\n\r\n            const availabilityChecksPromises = recentSearches.recent_searches.reduce(\r\n              function(availabilityChecksPromises, row, index) {\r\n                const OND = `${row.origin_iata}-${row.destination_iata}`;\r\n                const departDate = parseDate(`${row.depart_date}`);\r\n                if (\r\n                  (!availabilityChecksPromises ||\r\n                    !(OND in availabilityChecksPromises)) &&\r\n                  !dateInPast(departDate, today)\r\n                ) {\r\n                  return Object.assign(availabilityChecksPromises, {\r\n                    [OND]: fetch(\r\n                      `${HOST}/service/flights-resumption?origin=${row.origin_iata}&destination=${row.destination_iata}`\r\n                    )\r\n                      .then(response => {\r\n                        return response.json();\r\n                      })\r\n                      .catch(error => console.log(error))\r\n                  });\r\n                }\r\n                return availabilityChecksPromises;\r\n              },\r\n              {}\r\n            );\r\n            Promise.all(Object.values(availabilityChecksPromises))\r\n              .then(results => {\r\n                let operatingDestinationsCounter = 0;\r\n                recentSearches.recent_searches.forEach(row => {\r\n                  const departDate = parseDate(`${row.depart_date}`);\r\n                  if (!dateInPast(departDate, today)) {\r\n                    let resultIndex = -1;\r\n                    const resultsKeys = Object.keys(availabilityChecksPromises);\r\n                    for (var i = 0; i < resultsKeys.length; i++) {\r\n                      if (\r\n                        resultsKeys[i] ===\r\n                        `${row.origin_iata}-${row.destination_iata}`\r\n                      ) {\r\n                        resultIndex = i;\r\n                      }\r\n                    }\r\n                    if (\r\n                      resultIndex > -1 &&\r\n                      results[resultIndex] &&\r\n                      results[resultIndex].results &&\r\n                      results[resultIndex].results.routes &&\r\n                      Object.keys(results[resultIndex].results.routes).length >\r\n                        0\r\n                    ) {\r\n                      const keys = Object.keys(\r\n                        results[resultIndex].results.routes\r\n                      );\r\n                      for (var j = 0; j < keys.length; j++) {\r\n                        const route =\r\n                          results[resultIndex].results.routes[keys[j]];\r\n                        if (route && route.statusMessage === "Operating") {\r\n                          if (\r\n                            (!showCabinClass && window.innerWidth > 991) ||\r\n                            (isStacked && window.innerWidth > 991) ||\r\n                            operatingDestinationsCounter < 4\r\n                          ) {\r\n                            boxEverSearchResultEl.innerHTML += renderLink(\r\n                              row,\r\n                              lang,\r\n                              publication,\r\n                              operatingDestinationsCounter === 3 &&\r\n                                !isStacked &&\r\n                                showCabinClass\r\n                                ? true\r\n                                : false\r\n                            );\r\n\r\n                            operatingDestinationsCounter += 1;\r\n                          }\r\n                          operatingSearches.push(row);\r\n\r\n                          break;\r\n                        }\r\n                      }\r\n                    }\r\n                  }\r\n                });\r\n                if (boxEverSearchResultEl.innerHTML) {\r\n                  boxEverSearchResultEl.innerHTML = `<div class="bx-search-results-row ${\r\n                    isStacked ? "bx-search-results-row-stacked" : ""\r\n                  }">${boxEverSearchResultEl.innerHTML}</div>`;\r\n                  sendBoxeverEvent("VIEWED");\r\n                }\r\n              })\r\n              .catch(error => console.log(error));\r\n          }\r\n        })\r\n        .catch(error => {\r\n          console.log(error);\r\n        });\r\n    }\r\n  }\r\n}\r\nconst HOST = "https://www.emirates.com";\r\nconst operatingSearches = [];\r\nlet showCabinClass =\r\n  "No" === "Yes";\r\nconst isStacked =\r\n  "Yes" === "Yes";\r\nlet counter = 0;\r\nlet resourceKeys = {};\r\n//Cookie consent check\r\nlet cookieComplianceEnabled =\r\n  "Yes" ===\r\n  "Yes";\r\nconst cookieComplianceFunctionalGroup =\r\n  "C0002";\r\n//Listen for disabling/enabling functional cookies group for new browser\r\nif (cookieComplianceEnabled) {\r\n  window.addEventListener("OneTrustGroupsUpdated", function(e) {\r\n    if (OnetrustActiveGroups.indexOf(cookieComplianceFunctionalGroup) > -1) {\r\n      //Show experience wrapper here\r\n      document.querySelector(".bx-search-results").style.display = "block";\r\n      render();\r\n    } else {\r\n      document.querySelector(".bx-search-results").style.display = "none";\r\n    }\r\n  });\r\n}\r\nif (\r\n  !cookieComplianceEnabled ||\r\n  (cookieComplianceEnabled &&\r\n    OnetrustActiveGroups.indexOf(cookieComplianceFunctionalGroup) > -1)\r\n) {\r\n  render();\r\n}\r\n'}}]},{ref:"8a4760be-3259-4cf9-8b8e-75be5873ac52",name:"BOX-138 Destination Recommendations",revision:36,archived:!1,target:{script:"",targetPages:[{operator:"Contains",value:"/book/book-a-flight.aspx"}]},traffic:{type:"advancedTraffic",allocationLow:1,allocationHigh:120,splits:[{ref:"22fc0bbd-3436-4925-b122-c8b6f8636d5d",lowSplit:1,highSplit:39},{ref:"ba14f8dc-d461-4288-8bb9-8e85d88bcc77",lowSplit:40,highSplit:78},{ref:"f76ee752-02c2-4186-a274-bb4601f5ea63",lowSplit:79,highSplit:120}]},variants:[{ref:"22fc0bbd-3436-4925-b122-c8b6f8636d5d",name:"Original",assets:{css:"/** style your Experience with CSS */",html:"",js:""}},{ref:"ba14f8dc-d461-4288-8bb9-8e85d88bcc77",name:"With Pricing",assets:{css:':root {\n  --font-helvetica: HelveticaNeue, Helvetica Neue, Helvetica, Lucida Grande,\n    sans-serif;\n  --font-helvetica-light: HelveticaNeue-Light, Helvetica Neue Light,\n    Helvetica Neue, Helvetica, Arial, Lucida Grande, sans-serif;\n  --font-ek-bold: EmiratesSB-Bold, helvetica, arial, sans-serif;\n  --text-color: #333333;\n  --white-color: #ffffff;\n  --red-color: #c60c30;\n  --gray-color: #c7c7c7;\n}\n\n.bx-destination-recommendation .ek-general-content__card {\n  margin-bottom: 0;\n  padding: 0;\n  margin-top: 20px;\n}\n\n.bx-content-header {\n  display: flex;\n  flex-direction: row;\n  justify-content: center;\n  width: 100%;\n}\n\n.bx-content-header__text {\n  font-weight: 700 !important;\n  color: var(--text-color) !important;\n  margin-top: 0 !important;\n  margin-bottom: 0 !important;\n  margin-right: 20px;\n  margin-left: 20px;\n  z-index: 0;\n}\n\n.bx-content-header:before {\n  content: "";\n  flex: 1 1;\n  border-bottom: 1px solid var(--gray-color);\n  margin: auto;\n}\n\n.bx-content-header:after {\n  content: "";\n  flex: 1 1;\n  border-bottom: 1px solid var(--gray-color);\n  margin: auto;\n}\n\n.bx-dest-wrapper {\n  display: flex;\n}\n\n.bx-dest-img {\n  width: 300px;\n}\n\n.bx-dest-content {\n  display: flex;\n  margin: 20px;\n  justify-content: space-between;\n  width: 100%;\n}\n\n.bx-dest-content__city {\n  font-weight: 700;\n  font-family: var(--font-ek-bold);\n  font-size: 20px;\n  line-height: 24px;\n  position: relative;\n}\n\n.bx-dest-content__body {\n  font-family: var(--font-helvetica);\n  font-size: 14px;\n  line-height: 18px;\n  font-weight: 300;\n}\n\n.bx-dest-content__summary {\n  display: flex;\n  align-self: center;\n  width: 195px;\n  margin: 0 10px 0 30px;\n  flex-direction: column;\n  align-items: center;\n  font-size: 14px;\n  line-height: 18px;\n  font-weight: 700;\n  font-family: var(--font-helvetica);\n}\n\n.bx-dest-content-cta {\n  height: auto;\n  min-height: 40px;\n  padding: 10px 20px !important;\n  white-space: normal !important;\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  align-self: center;\n  color: var(--text-color) !important;\n  background: var(--white-color);\n  border: 1px solid var(--text-color) !important;\n\n  width: 100%;\n  overflow: hidden;\n  white-space: nowrap;\n  text-align: center;\n  text-decoration: none;\n  text-overflow: ellipsis;\n  vertical-align: middle;\n  border: none;\n  border-radius: 3px;\n  cursor: pointer;\n  transition: 0.1s ease;\n  -webkit-appearance: none !important;\n  -moz-appearance: none !important;\n  appearance: none !important;\n}\n\n.bx-dest-content-cta:hover {\n  text-decoration: none !important;\n  box-shadow: 0 0 6px 0 grey;\n}\n\n.bx-dest-content__summary-price {\n  text-align: center;\n}\n\n@media only screen and (max-width: 769px) {\n  .bx-content-header:before {\n    content: none;\n  }\n\n  .bx-content-header:after {\n    content: none;\n  }\n\n  .bx-content-header__text {\n    font-size: 20px !important;\n    line-height: 24px !important;\n  }\n\n  .bx-dest-wrapper {\n    flex-direction: column;\n  }\n\n  .bx-dest-img {\n    width: 100%;\n  }\n\n  .bx-destination-recommendation .ek-general-content__card {\n    margin-right: 0;\n    margin-left: 0;\n  }\n\n  .bx-dest-content {\n    flex-direction: column;\n    width: auto;\n  }\n\n  .bx-dest-content__wrapper {\n    display: flex;\n    flex-direction: column;\n    align-items: center;\n  }\n\n  .bx-dest-content__body {\n    text-align: center;\n    max-width: 270px;\n  }\n\n  .bx-dest-content__summary {\n    margin: 20px 0 0 0;\n  }\n  \n  .bx-dest-content__city {\n    padding-bottom: 20px;\n  }\n\n  .bx-dest-content__city:after {\n    bottom: 10px;\n    position: absolute;\n    content: "";\n    left: 50%;\n    background-color: var(--red-color);\n    height: 2px;\n    width: 60px;\n    transform: translate(-50%, 0px);\n  }\n  \n  .eol-responsive-header-version .eol-responsive-header {\n      margin-top: 40px;\n  }\n}\n\n@media only screen and (min-width: 770px) and (max-width: 1024px) {\n  .bx-destination-recommendation .ek-general-content__card {\n    margin-right: 0;\n    margin-left: 0;\n  }\n}\n',html:'<div class="container">\n    <div class="bx-content-header">\n        <h2 class="bx-content-header__text"></h2>\n    </div>\n    <div class="ek-general-content__card">\n        <div class="bx-dest-wrapper">\n            <img alt="" loading="lazy" class="bx-dest-img" />\n            <div class="bx-dest-content">\n                <div class="bx-dest-content__wrapper">\n                    <p class="bx-dest-content__city"></p>\n                    <p class="bx-dest-content__body"></p>\n                </div>\n                <div class="bx-dest-content__summary">\n                    <p class="bx-dest-content__summary-price"></p>\n                    <a class="bx-dest-content-cta"></a>\n                </div>\n            </div>\n        </div>\n    </div>\n</div>',js:'function sendBoxeverEvent(eventType) {\n  let eventLabel = `BOX138_${eventType}`;\n  var event = {\n    channel: "WEB",\n    type: eventLabel,\n    page: dataLayer[0].pageName,\n    pos: _boxever_settings.pointOfSale,\n    browser_id: Boxever.getID(),\n  };\n  Boxever.eventCreate(event, function (data) {}, "json");\n}\n\nfunction parseDate(date) {\n    const day = date.substring(0 ,2).includes(\'-\') ? date.substring(0 ,1) : date.substring(0 ,2);\n    const months = [\'Jan\', \'Feb\', \'Mar\', \'Apr\', \'May\', \'Jun\', \'Jul\', \'Aug\', \'Sep\', \'Oct\', \'Nov\', \'Dec\'];\n    const year = date.substring(7);\n    const monthName = date.substring(3, 6);\n    const month = months.findIndex(e => e.toLowerCase() === monthName.toLowerCase()) ;\n    return new Date(\'20\' + year, month, day);\n}\n\nfunction getResourceKeys(resources, resourceMap) {\n  let mappedResources = {};\n  for (var key of Object.keys(resourceMap)) {\n    if (resourceMap[key] in resources) {\n      mappedResources[key] = resources[resourceMap[key]];\n    } else {\n      mappedResources[key] = "";\n    }\n  }\n  return mappedResources;\n}\n\nfunction interpolate(pattern = \'\', data = {}, soft = false) {\n  return pattern.replace(\n    // /\\{(?:(?:\\{(\\w+)\\})|(\\w+))\\}/gm, // matches word characters in single or double braces only\n    // /\\{+(\\w+)\\}+/gm, // matches word characters enclosed in arbitrary number of braces\n    /{+(\\w+([-\']\\w+)*)}+/gm, // matches word characters with dash enclosed in arbitrary number of braces\n    (_, single, double) => {\n      const key = single || double;\n      const value = data[key];\n      if (!value) {\n          console.error(\'Interpolation key was not found in data object:\', key);\n          if (!soft) return `{${key}?}`;\n        return \'\';\n      }\n      return value;\n    }\n  );\n}\n\nfunction dateInPast(firstDate, secondDate) {\n  if (firstDate.setHours(0, 0, 0, 0) <= secondDate.setHours(0, 0, 0, 0)) {\n    return true;\n  }\n\n  return false;\n}\n\nfunction render() {\n  if (publication) {\n    if (dataLayer && dataLayer[0]) {\n      const lang = dataLayer[0].languageCode.toLowerCase();\n      let airportsFetchURL = `${HOST}/service/airports?lang=${lang}`;\n      let browserID = Boxever.getID();\n      let bxRecentSearchFetchURL = `https://api.boxever.com/v2/callFlows?message={"context":{"clientKey":"${_boxever_settings.client_key}","channel":"WEB","language":"en","currencyCode":"USD","uri":"/home","pointOfSale":"emirates.com/english","browserId":"${browserID}","friendlyId":"recent_searches"}}`;\n      let promises = [\n        fetch(\n          `https://www.emirates.com/service/content/api/v4.0/resources/eol${publication}/Experiences/Destinations/Recommendation`\n        )\n          .then((response) => {\n            return response.json();\n          })\n          .then((results) => {\n            let resources = null;\n            if (results) {\n              resources = results.results;\n            }\n            return resources;\n          }),\n        fetch(airportsFetchURL).then((response) => {\n          return response.json();\n        }),\n        fetch(bxRecentSearchFetchURL).then((response) => {\n          return response.json();\n        }),\n      ];\n\n      Promise.all(promises)\n        .then(([resources, airports, recentSearches]) => {\n          if (\n            recentSearches &&\n            recentSearches.recent_searches &&\n            recentSearches.recent_searches.length &&\n            airports &&\n            airports.results &&\n            resources &&\n            Object.keys(resources).length\n          ) {\n            const resourceMap = {\n              bookCTALabel: `Experiences/Destinations/Recommendation/book-cta-label__text`,\n              widgetTitle: `Experiences/Destinations/Recommendation/header-title__text`,\n              widgetBody: `Experiences/Destinations/Recommendation/body__text`,\n              priceLabel: `Experiences/Destinations/Recommendation/price-label__text`,\n              cardTitle: `Experiences/Destinations/Recommendation/card-title__text`\n            };\n            const resourceKeys = getResourceKeys(resources, resourceMap);\n            const recentSearchLimit = `1`;\n            const availabilityChecksPromises = recentSearches.recent_searches\n              .slice(0, recentSearchLimit)\n              .reduce(function (availabilityChecksPromises, row, index) {\n                availabilityChecksPromises.push(\n                  fetch(\n                    `${HOST}/service/flights-resumption?origin=${row.origin_iata}&destination=${row.destination_iata}`\n                  ).then((response) => {\n                    return response.json();\n                  })\n                );\n                return availabilityChecksPromises;\n              }, []);\n            Promise.all(availabilityChecksPromises)\n              .then(function (result) {\n                if (result && result.length > 0) {\n                  let avaialableDestination = null;\n                  for (var i = 0; i < result.length; i++) {\n                    if (\n                      result[i] &&\n                      result[i].results &&\n                      ((result[i].results.routes &&\n                        Object.keys(result[i].results.routes).length > 0) ||\n                        (result[i].results.nearbyOperatingAirports &&\n                          Object.keys(result[i].results.nearbyOperatingAirports)\n                            .length > 0))\n                    ) {\n                      const keys = Object.keys(result[i].results.routes);\n                      const row = recentSearches.recent_searches[i];\n                      for (var j = 0; j < keys.length; j++) {\n                        const route = result[i].results.routes[keys[j]];\n                        if (route && route.statusMessage === "Operating") {\n                          avaialableDestination = result[i];\n                          if (getCardData(row, airports, lang, false, resourceKeys)) {\n                            break;\n                          }\n                        }\n                      }\n                      if (avaialableDestination) {\n                        break;\n                      } else if (\n                        result[i].results.nearbyOperatingAirports &&\n                        Object.keys(result[i].results.nearbyOperatingAirports)\n                          .length > 0\n                      ) {\n                        if (\n                          getCardData(\n                            Object.assign({}, row, {\n                              destination_iata:\n                                result[i].results.nearbyOperatingAirports[0]\n                                  .iataCode,\n                            }),\n                            airports,\n                            lang,\n                            true,\n                            resourceKeys\n                          )\n                        ) {\n                          break;\n                        }\n                      }\n                    }\n                  }\n                }\n              })\n              .catch((error) => console.log(error));\n          }\n        })\n        .catch((error) => console.log(error));\n    }\n  }\n}\n\nfunction getCardData(row, airports, lang, isNearbyDestination, resources) {\n  let departDate = parseDate(`${row.depart_date}`);\n  let returnDate = parseDate(`${row.return_date}`);\n  const today = new Date();\n  const tomorrow = new Date(today);\n  tomorrow.setDate(tomorrow.getDate() + 1);\n  let startDate = departDate;\n  let endDate = returnDate;\n  if (dateInPast(departDate, today)) {\n    startDate = tomorrow;\n    endDate = new Date(tomorrow);\n    endDate.setDate(tomorrow.getDate() + 7);\n  }\n  if (row.flight_type === "OW" || !isPricingEnabled) {\n    renderCard(\n      airports,\n      row.origin_iata,\n      row.destination_iata,\n      `${startDate.getFullYear()}-${("0" + (startDate.getMonth() + 1)).slice(\n        -2\n      )}-${("0" + startDate.getDate()).slice(-2)}`,\n      `${endDate.getFullYear()}-${("0" + (endDate.getMonth() + 1)).slice(\n        -2\n      )}-${("0" + endDate.getDate()).slice(-2)}`,\n      row.flight_type,\n      row.booking_class,\n      row.adults,\n      row.children,\n      row.infants,\n      isNearbyDestination,\n      resources\n    );\n    return true;\n  } else {\n    let bestFareFinderAPIHeaders = new Headers();\n    const bestFareAPICabinClassMapping = {\n      Y: "ECONOMY",\n      J: "BUSINESS",\n      F: "FIRST",\n    };\n    bestFareFinderAPIHeaders.append("origin", "https://www.emirates.com");\n    bestFareFinderAPIHeaders.append("Referer", "https://www.emirates.com");\n    bestFareFinderAPIHeaders.append(\n      "Content-Type",\n      "application/json;charset=UTF-8"\n    );\n    bestFareFinderAPIHeaders.append(\n      "Accept",\n      "application/json, text/plain, */*"\n    );\n    bestFareFinderAPIHeaders.append("scheme", "https");\n    bestFareFinderAPIHeaders.append("accept-language", "en-US,en;q=0.9");\n    bestFareFinderAPIHeaders.append("Cache-Control", "no-cache");\n    bestFareFinderAPIHeaders.append("sec-fetch-dest", "empty");\n    bestFareFinderAPIHeaders.append("sec-fetch-mode", "cors");\n    bestFareFinderAPIHeaders.append("sec-fetch-site", "cross-site");\n    bestFareFinderAPIHeaders.append(\n      "em-api-key",\n      "HeQpRjsFI5xlAaSx2onkjc1HTK0ukqA1IrVvd5fvaMhNtzLTxInTpeYB1MK93pah"\n    );\n\n    var body = {\n      priceFormat: {\n        decimalSeparator: ".",\n        thousandSeparator: ",",\n        decimalPlaces: 0,\n      },\n      datePattern: "dd MM yyyy",\n      languageCode: lang,\n      dataExpirationWindow: "1d",\n      faresLimit: "1",\n      interval: "1d",\n      travelClasses: [bestFareAPICabinClassMapping[row.booking_class]],\n      flightType: "ROUND_TRIP",\n      airlineCodes: ["ek"],\n      origin: row.origin_iata,\n      destination: row.destination_iata,\n      dateRange: {\n        start: `${startDate.getFullYear()}-${(\n          "0" +\n          (startDate.getMonth() + 1)\n        ).slice(-2)}-${("0" + startDate.getDate()).slice(-2)}`,\n        end: `${endDate.getFullYear()}-${("0" + (endDate.getMonth() + 1)).slice(\n          -2\n        )}-${("0" + endDate.getDate()).slice(-2)}`,\n      },\n    };\n\n    const requestOptions = {\n      method: "POST",\n      headers: bestFareFinderAPIHeaders,\n      body: JSON.stringify(body),\n    };\n    fetch(\n      "https://openair-california.airtrfx.com/airfare-sputnik-service/v3/ek/fares/histogram",\n      requestOptions\n    )\n      .then((response) => response.json())\n      .then(function (lowestFaresResults) {\n        if (\n          lowestFaresResults &&\n          lowestFaresResults.histogram &&\n          lowestFaresResults.histogram.length > 0\n        ) {\n          const lowestFare = lowestFaresResults.histogram.find(\n            (x) => x.fares.length > 0\n          );\n          if (lowestFare && lowestFare.fares && lowestFare.fares.length > 0) {\n            let recommendedDestination = lowestFare.fares[0];\n            renderCard(\n              airports,\n              recommendedDestination.origin,\n              recommendedDestination.destination,\n              lowestFaresResults.histogram[0].date,\n              lowestFaresResults.histogram[\n                lowestFaresResults.histogram.length - 1\n              ].date,\n              "SB",\n              row.booking_class,\n              1,\n              0,\n              0,\n              isNearbyDestination,\n              resources,\n              recommendedDestination.currencyCode,\n              recommendedDestination.formattedTotalPrice\n            );\n            return true;\n          } else {\n            renderCard(\n              airports,\n              row.origin_iata,\n              row.destination_iata,\n              `${startDate.getFullYear()}-${(\n                "0" +\n                (startDate.getMonth() + 1)\n              ).slice(-2)}-${("0" + startDate.getDate()).slice(-2)}`,\n              `${endDate.getFullYear()}-${(\n                "0" +\n                (endDate.getMonth() + 1)\n              ).slice(-2)}-${("0" + endDate.getDate()).slice(-2)}`,\n              row.flight_type,\n              row.booking_class,\n              row.adults,\n              row.children,\n              row.infants,\n              isNearbyDestination,\n              resources\n            );\n            return true;\n          }\n        }\n      })\n      .catch((error) => console.log(error));\n  }\n  return false;\n}\nfunction renderCard(\n  airports,\n  originIATACode,\n  destinationIATACode,\n  departureDate,\n  returnDate,\n  flightType,\n  cabinClass,\n  adults,\n  children,\n  infants,\n  isNearbyDestination,\n  resources,\n  currencyCode,\n  formattedPrice\n) {\n  const cabinClassMapping = {\n    Y: 0,\n    J: 1,\n    F: 2,\n  };\n  const wrapper = document.querySelector(".fs-widget-outer-ct");\n  if (wrapper) {\n    wrapper.insertAdjacentHTML(\n      "afterend",\n      \'<div class="bx-destination-recommendation"></div>\'\n    );\n    insertHTMLAfter(".bx-destination-recommendation");\n    sendBoxeverEvent(isNearbyDestination ? "NEARBY_VIEWED" : "SEARCHED_VIEWED");\n    const bookCTA = document.querySelector(".bx-dest-content-cta");\n    if (bookCTA) {\n      bookCTA.href = `${HOST}/SessionHandler.aspx?pub=${publication}&pageurl=/IBE.aspx&section=IBE&showpage=true&TID=${\n        flightType === "OW" ? "OW" : "SB"\n      }&seldcity1=${originIATACode}&selacity1=${destinationIATACode}&selddate1=${departureDate}&seladate1=${returnDate}&seladults=${adults}&selchildren=${children}&selinfants=${infants}&selcabinclass=${\n        cabinClassMapping[cabinClass]\n      }&selcabinclass1=${cabinClassMapping[cabinClass]}&resultby=0`;\n      bookCTA.innerHTML = resources.bookCTALabel;\n      bookCTA.addEventListener("click", () => {\n        sendBoxeverEvent(\n          isNearbyDestination ? "NEARBY_CLICKED" : "SEARCHED_CLICKED"\n        );\n      });\n    }\n    const priceElement = document.querySelector(\n      ".bx-dest-content__summary-price"\n    );\n    if (priceElement) {\n      if (currencyCode && formattedPrice) {\n        priceElement.innerHTML = interpolate(resources.priceLabel, {currencyCode, formattedTotalPrice: formattedPrice});\n      } else {\n        priceElement.style.display = "none";\n      }\n    }\n    const cityTitleElement = document.querySelector(".bx-dest-content__city");\n    if (cityTitleElement) {\n      cityTitleElement.innerHTML = interpolate(resources.cardTitle, {cityShortName:airports.results[destinationIATACode].city.shortName });\n    }\n\n    const cityImageElement = document.querySelector(".bx-dest-img");\n    if (cityImageElement) {\n      cityImageElement.src = `https://c.ekstatic.net/shared/images/destination/v1/airports/${destinationIATACode}/810x270.jpg`;\n    }\n\n    const bodyElement = document.querySelector(".bx-dest-content__body");\n    if (bodyElement) {\n      bodyElement.innerHTML = resources.widgetBody;\n    }\n    const widgetHeaderElement = document.querySelector(\n      ".bx-content-header__text"\n    );\n    if (widgetHeaderElement) {\n      widgetHeaderElement.innerHTML = resources.widgetTitle;\n    }\n  }\n}\nconst HOST = "https://www.emirates.com";\nconst isPricingEnabled =\n  "Yes" === "Yes";\nlet publication = "";\nconst publicationURL = document.querySelector(\'meta[name="PublishURL"]\');\nif (publicationURL) {\n  if (publicationURL.content !== "/english") {\n    publication = publicationURL.content;\n  } else {\n    publication = "/global/english";\n  }\n}\n//Cookie consent check\nlet cookieComplianceEnabled =\n  "Yes" ===\n  "Yes";\nconst cookieComplianceFunctionalGroup =\n  "C0002";\n//Listen for disabling/enabling functional cookies group for new browser\nif (cookieComplianceEnabled) {\n  window.addEventListener("OneTrustGroupsUpdated", function (e) {\n    if (OnetrustActiveGroups.indexOf(cookieComplianceFunctionalGroup) > -1) {\n      //Show experience wrapper here\n      document.querySelector(".bx-destination-recommendation").style.display =\n        "block";\n      render();\n    } else {\n      document.querySelector(".bx-destination-recommendation").style.display =\n        "none";\n    }\n  });\n}\nif (\n  !cookieComplianceEnabled ||\n  (cookieComplianceEnabled &&\n    OnetrustActiveGroups.indexOf(cookieComplianceFunctionalGroup) > -1)\n) {\n  render();\n}\n'}},{ref:"f76ee752-02c2-4186-a274-bb4601f5ea63",name:"Without Pricing",assets:{css:':root {\n  --font-helvetica: HelveticaNeue, Helvetica Neue, Helvetica, Lucida Grande,\n    sans-serif;\n  --font-helvetica-light: HelveticaNeue-Light, Helvetica Neue Light,\n    Helvetica Neue, Helvetica, Arial, Lucida Grande, sans-serif;\n  --font-ek-bold: EmiratesSB-Bold, helvetica, arial, sans-serif;\n  --text-color: #333333;\n  --white-color: #ffffff;\n  --red-color: #c60c30;\n  --gray-color: #c7c7c7;\n}\n\n.bx-destination-recommendation .ek-general-content__card {\n  margin-bottom: 0;\n  padding: 0;\n  margin-top: 20px;\n}\n\n.bx-content-header {\n  display: flex;\n  flex-direction: row;\n  justify-content: center;\n  width: 100%;\n}\n\n.bx-content-header__text {\n  font-weight: 700 !important;\n  color: var(--text-color) !important;\n  margin-top: 0 !important;\n  margin-bottom: 0 !important;\n  margin-right: 20px;\n  margin-left: 20px;\n  z-index: 0;\n}\n\n.bx-content-header:before {\n  content: "";\n  flex: 1 1;\n  border-bottom: 1px solid var(--gray-color);\n  margin: auto;\n}\n\n.bx-content-header:after {\n  content: "";\n  flex: 1 1;\n  border-bottom: 1px solid var(--gray-color);\n  margin: auto;\n}\n\n.bx-dest-wrapper {\n  display: flex;\n}\n\n.bx-dest-img {\n  width: 300px;\n}\n\n.bx-dest-content {\n  display: flex;\n  margin: 20px;\n  justify-content: space-between;\n  width: 100%;\n}\n\n.bx-dest-content__city {\n  font-weight: 700;\n  font-family: var(--font-ek-bold);\n  font-size: 20px;\n  line-height: 24px;\n  position: relative;\n}\n\n.bx-dest-content__body {\n  font-family: var(--font-helvetica);\n  font-size: 14px;\n  line-height: 18px;\n  font-weight: 300;\n}\n\n.bx-dest-content__summary {\n  display: flex;\n  align-self: center;\n  width: 195px;\n  margin: 0 10px 0 30px;\n  flex-direction: column;\n  align-items: center;\n  font-size: 14px;\n  line-height: 18px;\n  font-weight: 700;\n  font-family: var(--font-helvetica);\n}\n\n.bx-dest-content-cta {\n  height: auto;\n  min-height: 40px;\n  padding: 10px 20px !important;\n  white-space: normal !important;\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  align-self: center;\n  color: var(--text-color) !important;\n  background: var(--white-color);\n  border: 1px solid var(--text-color) !important;\n\n  width: 100%;\n  overflow: hidden;\n  white-space: nowrap;\n  text-align: center;\n  text-decoration: none;\n  text-overflow: ellipsis;\n  vertical-align: middle;\n  border: none;\n  border-radius: 3px;\n  cursor: pointer;\n  transition: 0.1s ease;\n  -webkit-appearance: none !important;\n  -moz-appearance: none !important;\n  appearance: none !important;\n}\n\n.bx-dest-content-cta:hover {\n  text-decoration: none !important;\n  box-shadow: 0 0 6px 0 grey;\n}\n\n.bx-dest-content__summary-price {\n  text-align: center;\n}\n\n@media only screen and (max-width: 769px) {\n  .bx-content-header:before {\n    content: none;\n  }\n\n  .bx-content-header:after {\n    content: none;\n  }\n\n  .bx-content-header__text {\n    font-size: 20px !important;\n    line-height: 24px !important;\n  }\n\n  .bx-dest-wrapper {\n    flex-direction: column;\n  }\n\n  .bx-dest-img {\n    width: 100%;\n  }\n\n  .bx-destination-recommendation .ek-general-content__card {\n    margin-right: 0;\n    margin-left: 0;\n  }\n\n  .bx-dest-content {\n    flex-direction: column;\n    width: auto;\n  }\n\n  .bx-dest-content__wrapper {\n    display: flex;\n    flex-direction: column;\n    align-items: center;\n  }\n\n  .bx-dest-content__body {\n    text-align: center;\n    max-width: 270px;\n  }\n\n  .bx-dest-content__summary {\n       margin: 20px 0 0 0;\n  }\n\n  .bx-dest-content__city {\n    padding-bottom: 20px;\n  }\n  \n  .bx-dest-content__city:after {\n    bottom: 10px;\n    position: absolute;\n    content: "";\n    left: 50%;\n    background-color: var(--red-color);\n    height: 2px;\n    width: 60px;\n    transform: translate(-50%, 0px);\n  }\n  \n  .eol-responsive-header-version .eol-responsive-header {\n      margin-top: 40px;\n  }\n}\n\n@media only screen and (min-width: 770px) and (max-width: 1024px) {\n  .bx-destination-recommendation .ek-general-content__card {\n    margin-right: 0;\n    margin-left: 0;\n  }\n}\n',html:'<div class="container">\n    <div class="bx-content-header">\n        <h2 class="bx-content-header__text"></h2>\n    </div>\n    <div class="ek-general-content__card">\n        <div class="bx-dest-wrapper">\n            <img alt="" loading="lazy" class="bx-dest-img" />\n            <div class="bx-dest-content">\n                <div class="bx-dest-content__wrapper">\n                    <p class="bx-dest-content__city"></p>\n                    <p class="bx-dest-content__body"></p>\n                </div>\n                <div class="bx-dest-content__summary">\n                    <a class="bx-dest-content-cta"></a>\n                </div>\n            </div>\n        </div>\n    </div>\n</div>',js:'function sendBoxeverEvent(eventType) {\n  let eventLabel = `BOX138_${eventType}`;\n  var event = {\n    channel: "WEB",\n    type: eventLabel,\n    page: dataLayer[0].pageName,\n    pos: _boxever_settings.pointOfSale,\n    browser_id: Boxever.getID(),\n  };\n  Boxever.eventCreate(event, function (data) {}, "json");\n}\n\nfunction getResourceKeys(resources, resourceMap) {\n  let mappedResources = {};\n  for (var key of Object.keys(resourceMap)) {\n    if (resourceMap[key] in resources) {\n      mappedResources[key] = resources[resourceMap[key]];\n    } else {\n      mappedResources[key] = "";\n    }\n  }\n  return mappedResources;\n}\n\nfunction parseDate(date) {\n    const day = date.substring(0 ,2).includes(\'-\') ? date.substring(0 ,1) : date.substring(0 ,2);\n    const months = [\'Jan\', \'Feb\', \'Mar\', \'Apr\', \'May\', \'Jun\', \'Jul\', \'Aug\', \'Sep\', \'Oct\', \'Nov\', \'Dec\'];\n    const year = date.substring(7);\n    const monthName = date.substring(3, 6);\n    const month = months.findIndex(e => e.toLowerCase() === monthName.toLowerCase()) ;\n    return new Date(\'20\' + year, month, day);\n}\n\nfunction interpolate(pattern = \'\', data = {}, soft = false) {\n  return pattern.replace(\n    // /\\{(?:(?:\\{(\\w+)\\})|(\\w+))\\}/gm, // matches word characters in single or double braces only\n    // /\\{+(\\w+)\\}+/gm, // matches word characters enclosed in arbitrary number of braces\n    /{+(\\w+([-\']\\w+)*)}+/gm, // matches word characters with dash enclosed in arbitrary number of braces\n    (_, single, double) => {\n      const key = single || double;\n      const value = data[key];\n      if (!value) {\n          console.error(\'Interpolation key was not found in data object:\', key);\n          if (!soft) return `{${key}?}`;\n        return \'\';\n      }\n      return value;\n    }\n  );\n}\n\nfunction dateInPast(firstDate, secondDate) {\n  if (firstDate.setHours(0, 0, 0, 0) <= secondDate.setHours(0, 0, 0, 0)) {\n    return true;\n  }\n\n  return false;\n}\n\nfunction render() {\n  if (publication) {\n    if (dataLayer && dataLayer[0]) {\n      const lang = dataLayer[0].languageCode.toLowerCase();\n      let airportsFetchURL = `${HOST}/service/airports?lang=${lang}`;\n      let browserID = Boxever.getID();\n      let bxRecentSearchFetchURL = `https://api.boxever.com/v2/callFlows?message={"context":{"clientKey":"${_boxever_settings.client_key}","channel":"WEB","language":"en","currencyCode":"USD","uri":"/home","pointOfSale":"emirates.com/english","browserId":"${browserID}","friendlyId":"recent_searches"}}`;\n      let promises = [\n        fetch(\n          `https://www.emirates.com/service/content/api/v4.0/resources/eol${publication}/Experiences/Destinations/Recommendation`\n        )\n          .then((response) => {\n            return response.json();\n          })\n          .then((results) => {\n            let resources = null;\n            if (results) {\n              resources = results.results;\n            }\n            return resources;\n          }),\n        fetch(airportsFetchURL).then((response) => {\n          return response.json();\n        }),\n        fetch(bxRecentSearchFetchURL).then((response) => {\n          return response.json();\n        }),\n      ];\n\n      Promise.all(promises)\n        .then(([resources, airports, recentSearches]) => {\n          if (\n            recentSearches &&\n            recentSearches.recent_searches &&\n            recentSearches.recent_searches.length &&\n            airports &&\n            airports.results &&\n            resources &&\n            Object.keys(resources).length\n          ) {\n            const resourceMap = {\n              bookCTALabel: `Experiences/Destinations/Recommendation/book-cta-label__text`,\n              widgetTitle: `Experiences/Destinations/Recommendation/header-title__text`,\n              widgetBody: `Experiences/Destinations/Recommendation/body__text`,\n              priceLabel: `Experiences/Destinations/Recommendation/price-label__text`,\n              cardTitle: `Experiences/Destinations/Recommendation/card-title__text`\n            };\n            const resourceKeys = getResourceKeys(resources, resourceMap);\n            const recentSearchLimit = `1`;\n            const availabilityChecksPromises = recentSearches.recent_searches\n              .slice(0, recentSearchLimit)\n              .reduce(function (availabilityChecksPromises, row, index) {\n                availabilityChecksPromises.push(\n                  fetch(\n                    `${HOST}/service/flights-resumption?origin=${row.origin_iata}&destination=${row.destination_iata}`\n                  ).then((response) => {\n                    return response.json();\n                  })\n                );\n                return availabilityChecksPromises;\n              }, []);\n            Promise.all(availabilityChecksPromises)\n              .then(function (result) {\n                if (result && result.length > 0) {\n                  let avaialableDestination = null;\n                  for (var i = 0; i < result.length; i++) {\n                    if (\n                      result[i] &&\n                      result[i].results &&\n                      ((result[i].results.routes &&\n                        Object.keys(result[i].results.routes).length > 0) ||\n                        (result[i].results.nearbyOperatingAirports &&\n                          Object.keys(result[i].results.nearbyOperatingAirports)\n                            .length > 0))\n                    ) {\n                      const keys = Object.keys(result[i].results.routes);\n                      const row = recentSearches.recent_searches[i];\n                      for (var j = 0; j < keys.length; j++) {\n                        const route = result[i].results.routes[keys[j]];\n                        if (route && route.statusMessage === "Operating") {\n                          avaialableDestination = result[i];\n                          if (getCardData(row, airports, lang, false, resourceKeys)) {\n                            break;\n                          }\n                        }\n                      }\n                      if (avaialableDestination) {\n                        break;\n                      } else if (\n                        result[i].results.nearbyOperatingAirports &&\n                        Object.keys(result[i].results.nearbyOperatingAirports)\n                          .length > 0\n                      ) {\n                        if (\n                          getCardData(\n                            Object.assign({}, row, {\n                              destination_iata:\n                                result[i].results.nearbyOperatingAirports[0]\n                                  .iataCode,\n                            }),\n                            airports,\n                            lang,\n                            true,\n                            resourceKeys\n                          )\n                        ) {\n                          break;\n                        }\n                      }\n                    }\n                  }\n                }\n              })\n              .catch((error) => console.log(error));\n          }\n        })\n        .catch((error) => console.log(error));\n    }\n  }\n}\n\nfunction getCardData(row, airports, lang, isNearbyDestination, resources) {\n  let departDate = parseDate(`${row.depart_date}`);\n  let returnDate = parseDate(`${row.return_date}`);\n  const today = new Date();\n  const tomorrow = new Date(today);\n  tomorrow.setDate(tomorrow.getDate() + 1);\n  let startDate = departDate;\n  let endDate = returnDate;\n  if (dateInPast(departDate, today)) {\n    startDate = tomorrow;\n    endDate = new Date(tomorrow);\n    endDate.setDate(tomorrow.getDate() + 7);\n  }\n  if (row.flight_type === "OW" || !isPricingEnabled) {\n    renderCard(\n      airports,\n      row.origin_iata,\n      row.destination_iata,\n      `${startDate.getFullYear()}-${("0" + (startDate.getMonth() + 1)).slice(\n        -2\n      )}-${("0" + startDate.getDate()).slice(-2)}`,\n      `${endDate.getFullYear()}-${("0" + (endDate.getMonth() + 1)).slice(\n        -2\n      )}-${("0" + endDate.getDate()).slice(-2)}`,\n      row.flight_type,\n      row.booking_class,\n      row.adults,\n      row.children,\n      row.infants,\n      isNearbyDestination,\n      resources\n    );\n    return true;\n  } else {\n    let bestFareFinderAPIHeaders = new Headers();\n    const bestFareAPICabinClassMapping = {\n      Y: "ECONOMY",\n      J: "BUSINESS",\n      F: "FIRST",\n    };\n    bestFareFinderAPIHeaders.append("origin", "https://www.emirates.com");\n    bestFareFinderAPIHeaders.append("Referer", "https://www.emirates.com");\n    bestFareFinderAPIHeaders.append(\n      "Content-Type",\n      "application/json;charset=UTF-8"\n    );\n    bestFareFinderAPIHeaders.append(\n      "Accept",\n      "application/json, text/plain, */*"\n    );\n    bestFareFinderAPIHeaders.append("scheme", "https");\n    bestFareFinderAPIHeaders.append("accept-language", "en-US,en;q=0.9");\n    bestFareFinderAPIHeaders.append("Cache-Control", "no-cache");\n    bestFareFinderAPIHeaders.append("sec-fetch-dest", "empty");\n    bestFareFinderAPIHeaders.append("sec-fetch-mode", "cors");\n    bestFareFinderAPIHeaders.append("sec-fetch-site", "cross-site");\n    bestFareFinderAPIHeaders.append(\n      "em-api-key",\n      "HeQpRjsFI5xlAaSx2onkjc1HTK0ukqA1IrVvd5fvaMhNtzLTxInTpeYB1MK93pah"\n    );\n\n    var body = {\n      priceFormat: {\n        decimalSeparator: ".",\n        thousandSeparator: ",",\n        decimalPlaces: 0,\n      },\n      datePattern: "dd MM yyyy",\n      languageCode: lang,\n      dataExpirationWindow: "1d",\n      faresLimit: "1",\n      interval: "1d",\n      travelClasses: [bestFareAPICabinClassMapping[row.booking_class]],\n      flightType: "ROUND_TRIP",\n      airlineCodes: ["ek"],\n      origin: row.origin_iata,\n      destination: row.destination_iata,\n      dateRange: {\n        start: `${startDate.getFullYear()}-${(\n          "0" +\n          (startDate.getMonth() + 1)\n        ).slice(-2)}-${("0" + startDate.getDate()).slice(-2)}`,\n        end: `${endDate.getFullYear()}-${("0" + (endDate.getMonth() + 1)).slice(\n          -2\n        )}-${("0" + endDate.getDate()).slice(-2)}`,\n      },\n    };\n\n    const requestOptions = {\n      method: "POST",\n      headers: bestFareFinderAPIHeaders,\n      body: JSON.stringify(body),\n    };\n    fetch(\n      "https://openair-california.airtrfx.com/airfare-sputnik-service/v3/ek/fares/histogram",\n      requestOptions\n    )\n      .then((response) => response.json())\n      .then(function (lowestFaresResults) {\n        if (\n          lowestFaresResults &&\n          lowestFaresResults.histogram &&\n          lowestFaresResults.histogram.length > 0\n        ) {\n          const lowestFare = lowestFaresResults.histogram.find(\n            (x) => x.fares.length > 0\n          );\n          if (lowestFare && lowestFare.fares && lowestFare.fares.length > 0) {\n            let recommendedDestination = lowestFare.fares[0];\n            renderCard(\n              airports,\n              recommendedDestination.origin,\n              recommendedDestination.destination,\n              lowestFaresResults.histogram[0].date,\n              lowestFaresResults.histogram[\n                lowestFaresResults.histogram.length - 1\n              ].date,\n              "SB",\n              row.booking_class,\n              1,\n              0,\n              0,\n              isNearbyDestination,\n              resources,\n              recommendedDestination.currencyCode,\n              recommendedDestination.formattedTotalPrice\n            );\n            return true;\n          } else {\n            renderCard(\n              airports,\n              row.origin_iata,\n              row.destination_iata,\n              `${startDate.getFullYear()}-${(\n                "0" +\n                (startDate.getMonth() + 1)\n              ).slice(-2)}-${("0" + startDate.getDate()).slice(-2)}`,\n              `${endDate.getFullYear()}-${(\n                "0" +\n                (endDate.getMonth() + 1)\n              ).slice(-2)}-${("0" + endDate.getDate()).slice(-2)}`,\n              row.flight_type,\n              row.booking_class,\n              row.adults,\n              row.children,\n              row.infants,\n              isNearbyDestination,\n              resources\n            );\n            return true;\n          }\n        }\n      })\n      .catch((error) => console.log(error));\n  }\n  return false;\n}\nfunction renderCard(\n  airports,\n  originIATACode,\n  destinationIATACode,\n  departureDate,\n  returnDate,\n  flightType,\n  cabinClass,\n  adults,\n  children,\n  infants,\n  isNearbyDestination,\n  resources,\n  currencyCode,\n  formattedPrice\n) {\n  const cabinClassMapping = {\n    Y: 0,\n    J: 1,\n    F: 2,\n  };\n  const wrapper = document.querySelector(".fs-widget-outer-ct");\n  if (wrapper) {\n    wrapper.insertAdjacentHTML(\n      "afterend",\n      \'<div class="bx-destination-recommendation"></div>\'\n    );\n    insertHTMLAfter(".bx-destination-recommendation");\n    sendBoxeverEvent(isNearbyDestination ? "NEARBY_VIEWED" : "SEARCHED_VIEWED");\n    const bookCTA = document.querySelector(".bx-dest-content-cta");\n    if (bookCTA) {\n      bookCTA.href = `${HOST}/SessionHandler.aspx?pub=${publication}&pageurl=/IBE.aspx&section=IBE&showpage=true&TID=${\n        flightType === "OW" ? "OW" : "SB"\n      }&seldcity1=${originIATACode}&selacity1=${destinationIATACode}&selddate1=${departureDate}&seladate1=${returnDate}&seladults=${adults}&selchildren=${children}&selinfants=${infants}&selcabinclass=${\n        cabinClassMapping[cabinClass]\n      }&selcabinclass1=${cabinClassMapping[cabinClass]}&resultby=0`;\n      bookCTA.innerHTML = resources.bookCTALabel;\n      bookCTA.addEventListener("click", () => {\n        sendBoxeverEvent(\n          isNearbyDestination ? "NEARBY_CLICKED" : "SEARCHED_CLICKED"\n        );\n      });\n    }\n    const priceElement = document.querySelector(\n      ".bx-dest-content__summary-price"\n    );\n    if (priceElement) {\n      if (currencyCode && formattedPrice) {\n        priceElement.innerHTML = interpolate(resources.priceLabel, {currencyCode, formattedTotalPrice: formattedPrice});\n      } else {\n        priceElement.style.display = "none";\n      }\n    }\n    const cityTitleElement = document.querySelector(".bx-dest-content__city");\n    if (cityTitleElement) {\n      cityTitleElement.innerHTML = interpolate(resources.cardTitle, {cityShortName:airports.results[destinationIATACode].city.shortName });\n    }\n\n    const cityImageElement = document.querySelector(".bx-dest-img");\n    if (cityImageElement) {\n      cityImageElement.src = `https://c.ekstatic.net/shared/images/destination/v1/airports/${destinationIATACode}/810x270.jpg`;\n    }\n\n    const bodyElement = document.querySelector(".bx-dest-content__body");\n    if (bodyElement) {\n      bodyElement.innerHTML = resources.widgetBody;\n    }\n    const widgetHeaderElement = document.querySelector(\n      ".bx-content-header__text"\n    );\n    if (widgetHeaderElement) {\n      widgetHeaderElement.innerHTML = resources.widgetTitle;\n    }\n  }\n}\nconst HOST = "https://www.emirates.com";\nconst isPricingEnabled =\n  "No" === "Yes";\nlet publication = "";\nconst publicationURL = document.querySelector(\'meta[name="PublishURL"]\');\nif (publicationURL) {\n  if (publicationURL.content !== "/english") {\n    publication = publicationURL.content;\n  } else {\n    publication = "/global/english";\n  }\n}\n//Cookie consent check\nlet cookieComplianceEnabled =\n  "Yes" ===\n  "Yes";\nconst cookieComplianceFunctionalGroup =\n  "C0002";\n//Listen for disabling/enabling functional cookies group for new browser\nif (cookieComplianceEnabled) {\n  window.addEventListener("OneTrustGroupsUpdated", function (e) {\n    if (OnetrustActiveGroups.indexOf(cookieComplianceFunctionalGroup) > -1) {\n      //Show experience wrapper here\n      document.querySelector(".bx-destination-recommendation").style.display =\n        "block";\n      render();\n    } else {\n      document.querySelector(".bx-destination-recommendation").style.display =\n        "none";\n    }\n  });\n}\nif (\n  !cookieComplianceEnabled ||\n  (cookieComplianceEnabled &&\n    OnetrustActiveGroups.indexOf(cookieComplianceFunctionalGroup) > -1)\n) {\n  render();\n}\n'}}]},{ref:"80bdfd7b-c53a-4d94-bf49-7487f9ed14e7",name:"BOX-301 Error Pages Recent Searches",revision:56,archived:!1,target:{script:'const includedPages = [\n  "/ Help / Internal Server Error",\n  "/ Help / Page Not Found",\n];\n\nfunction filter() {\n  if (dataLayer && dataLayer.length > 0) {\n    var datalayerData = dataLayer[0];\n    if (includedPages.indexOf(datalayerData.pageName) > -1) {\n      targetingPassed();\n    }\n  }\n}\n\nfilter();',targetPages:[]},traffic:{type:"advancedTraffic",allocationLow:1,allocationHigh:120,splits:[{ref:"8801d672-bcdc-4139-bf00-516b1009a4b6",lowSplit:1,highSplit:30},{ref:"b0fdd396-4ae3-43e3-b2e3-5f8a65faa49c",lowSplit:31,highSplit:60},{ref:"be23ad18-0b92-4cda-ab17-75870ba05528",lowSplit:61,highSplit:90},{ref:"44767f8e-17d9-451e-900d-8e8bb6e9b1b6",lowSplit:91,highSplit:120}]},variants:[{ref:"8801d672-bcdc-4139-bf00-516b1009a4b6",name:"Original",assets:{css:"",html:"",js:""}},{ref:"b0fdd396-4ae3-43e3-b2e3-5f8a65faa49c",name:"With Image and Dates",assets:{css:':root {\n  --font-helvetica: HelveticaNeue, Helvetica Neue, Helvetica, Lucida Grande,\n    sans-serif;\n  --font-helvetica-light: HelveticaNeue-Light, Helvetica Neue Light,\n    Helvetica Neue, Helvetica, Arial, Lucida Grande, sans-serif;\n  --font-ek-bold: Emirates-Bold, Helvetica, Arial, Lucida Grande, sans-serif;\n  --text-color: #333333;\n  --white-color: #ffffff;\n  --red-color: #c60c30;\n  --gray-color: #666666;\n}\n.swiper-pagination {\n  display: none;\n}\n\n.bx-destination-recommendation__wrapper {\n  padding: 0 10px;\n}\n.bx-dest-wrapper {\n  display: flex;\n  margin-top: 30px;\n}\n\n.bx-content-header {\n  display: flex;\n  flex-direction: row;\n  margin: 0 auto;\n  justify-content: center;\n  max-width: 775px;\n}\n\n.bx-content-header__text {\n  font-weight: 700;\n  color: var(--text-color);\n  margin: 0 !important;\n  font-size: 3rem;\n  line-height: 3.4rem;\n  text-align: center !important;\n}\n\n.bx-dest-content__wrapper {\n  padding: 15px 20px 30px;\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n  text-align: center;\n  flex: 1;\n}\n.bx-dest-content__wrapper-with-dates {\n  padding: 15px 15px 20px;\n}\n.bx-dest-content__wrapper-without-img {\n  padding: 20px 35px 20px;\n}\n.bx-dest-img {\n  width: 100%;\n  height: 115px;\n}\n.bx-dest-content__wrapper-without-img-container\n  .bx-dest-content__wrapper-with-dates\n  .bx-dest-content__pax {\n  margin: auto 0 20px;\n}\n.bx-dest-content {\n  width: calc(33% - 6px);\n  box-shadow: 0 2px 4px 2px rgb(0 0 0 / 10%);\n  background-color: var(--white-color);\n  border-radius: 3px;\n  display: flex;\n  flex-direction: column;\n}\n\n.bx-dest-content:not(:last-child) {\n  margin-right: 15px;\n}\n\nhtml[dir="rtl"] .bx-dest-content:not(:last-child) {\n  margin-left: 15px;\n  margin-right: 0;\n}\n\n.bx-dest-content__wrapper-ond {\n  display: flex;\n  margin-top: 15px;\n}\n\n.bx-dest-content__wrapper-ond-city {\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n  position: relative;\n}\n.bx-dest-content__wrapper-without-img .bx-dest-content__origin-city {\n  align-items: flex-start;\n}\n.bx-dest-content__wrapper-without-img .bx-dest-content__destination-city {\n  align-items: flex-end;\n}\n.bx-dest-content__wrapper-without-img .bx-dest-content__ond-icon {\n  display: flex;\n  justify-content: center;\n  align-items: flex-end;\n  width: 100%;\n  color: var(--gray-color);\n}\n.bx-dest-content__wrapper-without-img .bx-dest-content__ond-icon i.icon {\n  transform: rotate(90deg);\n  margin: 0 5px;\n}\nhtml[dir="rtl"]\n  .bx-dest-content__wrapper-without-img\n  .bx-dest-content__ond-icon\n  i.icon {\n  transform: rotate(-90deg);\n}\n.bx-dest-content__wrapper-without-img .bx-dest-content__ond-icon:before {\n  content: "";\n  flex: 1 1;\n  border-bottom: 1px solid var(--gray-color);\n  margin: auto;\n  opacity: 0.5;\n}\n\n.bx-dest-content__wrapper-without-img .bx-dest-content__ond-icon:after {\n  content: "";\n  flex: 1 1;\n  border-bottom: 1px solid var(--gray-color);\n  margin: auto;\n  opacity: 0.5;\n}\n.bx-dest-content__wrapper-without-img\n  .bx-dest-content__destination-city\n  .bx-dest-content__city {\n  left: initial;\n}\n.bx-dest-content__wrapper-without-img\n  .bx-dest-content__origin-city\n  .bx-dest-content__city {\n  left: 0;\n  right: auto;\n}\n.bx-dest-content__wrapper-without-img .bx-dest-content__wrapper-ond {\n  width: 100%;\n}\n\n.bx-dest-content__city {\n  font-weight: 700;\n  font-family: var(--font-helvetica);\n  font-size: 10px;\n  line-height: 14px;\n  padding: 0;\n  color: var(--gray-color);\n  letter-spacing: 4px;\n  position: absolute;\n  top: -15px;\n  white-space: nowrap;\n}\nhtml.ar .bx-dest-content__city {\n  font-family: var(--font-ek-bold);\n}\n.bx-dest-content__origin-city .bx-dest-content__city {\n  left: auto;\n  right: 5px;\n}\n\n.bx-dest-content__destination-city .bx-dest-content__city {\n  left: -5px;\n}\n\nhtml[dir="rtl"] .bx-dest-content__origin-city .bx-dest-content__city {\n  right: 0;\n  left: auto;\n}\nhtml.ar .bx-dest-content__city {\n  letter-spacing: normal;\n}\n\n.bx-dest-content__city-iata {\n  font-size: 30px;\n  line-height: 34px;\n  font-family: var(--font-ek-bold);\n}\n\n.bx-dest-content__ond-icon {\n  margin: auto 10px;\n  font-size: 24px;\n}\n.bx-dest-content__wrapper-with-dates .bx-dest-content__seperator {\n  width: 60px;\n  border-bottom: 2px solid var(--red-color);\n  margin: 10px 0 0;\n}\n.bx-dest-content__pax {\n  font-family: var(--font-helvetica);\n  font-size: 12px;\n  line-height: 16px;\n  display: flex;\n  align-items: center;\n  margin: 15px 0;\n}\nhtml.ar .bx-dest-content__pax {\n  font-family: var(--font-ek-bold);\n}\n.bx-dest-content__wrapper-with-dates .bx-dest-content__pax {\n  font-size: 16px;\n  line-height: 20px;\n  text-align: left;\n}\n.bx-dest-content__dates {\n  margin: 20px 0 5px;\n  font-size: 16px;\n  line-height: 20px;\n  display: flex;\n}\n.bx-dest-content__wrapper-with-dates .bx-dest-content__info {\n  display: flex;\n  flex-direction: column;\n  align-items: flex-start;\n}\n\n.bx-dest-content__wrapper-with-dates .bx-dest-content__info i.icon {\n  margin-right: 15px;\n}\nhtml[dir="rtl"]\n  .bx-dest-content__wrapper-with-dates\n  .bx-dest-content__info\n  i.icon {\n  margin-left: 15px;\n  margin-right: 0;\n}\n.bx-dest-content__pax .icon-adult-male-customer {\n  font-size: 15px;\n}\n.bx-dest-content__wrapper-with-dates .bx-dest-content__pax {\n  margin: auto 0 30px;\n  text-align: left;\n}\nhtml[dir="rtl"] .bx-dest-content__wrapper-with-dates .bx-dest-content__pax {\n  text-align: right;\n}\n\n.bx-dest-content__wrapper-with-dates .bx-dest-content__dates {\n  text-align: left;\n}\nhtml[dir="rtl"] .bx-dest-content__wrapper-with-dates .bx-dest-content__dates {\n  text-align: right;\n}\n.bx-dest-content__link {\n  margin-top: auto;\n  font-size: 14px;\n  line-height: 18px;\n  color: #c60c30;\n  text-decoration: underline;\n  font-family: var(--font-helvetica);\n}\nhtml.ar .bx-dest-content__link {\n  font-family: var(--font-ek-bold);\n}\n\n.bx-dest-content__link:hover {\n  text-decoration: none;\n}\n\n.bx-dest-content-cta {\n  height: 18px;\n  padding: 10px 20px;\n  white-space: normal;\n  display: flex;\n  font-size: 14px;\n  line-height: 18px;\n  font-weight: 700;\n  font-family: var(--font-helvetica);\n  justify-content: center;\n  align-items: center;\n  align-self: center;\n  color: var(--text-color);\n  background: var(--white-color);\n  border: 1px solid var(--text-color);\n  width: calc(100% - 40px);\n  overflow: hidden;\n  text-align: center;\n  text-decoration: none;\n  text-overflow: ellipsis;\n  vertical-align: middle;\n  border-radius: 3px;\n  cursor: pointer;\n  transition: 0.1s ease;\n  -webkit-appearance: none !important;\n  -moz-appearance: none !important;\n  appearance: none !important;\n  margin-top: auto;\n}\nhtml.ar .bx-dest-content-cta {\n  font-family: var(--font-ek-bold);\n}\n.bx-dest-content-cta:hover {\n  text-decoration: none !important;\n  box-shadow: 0 0 6px 0 grey;\n}\n\n.bx-dest-content__summary-price {\n  text-align: center;\n  font-family: var(--font-helvetica);\n  font-weight: 700;\n  font-size: 20px;\n  line-height: 24px;\n  margin: 0 0 15px;\n}\nhtml.ar .bx-dest-content__summary-price {\n  font-family: var(--font-ek-bold);\n}\n@media only screen and (max-width: 769px) {\n  .bx-content-header {\n    max-width: 250px;\n  }\n\n  .bx-dest-content:not(:last-child) {\n    margin-right: 10px;\n  }\n  html[dir="rtl"] .bx-dest-content:not(:last-child) {\n    margin-left: 10px;\n    margin-right: 0;\n  }\n  .bx-content-header__text {\n    font-size: 2rem;\n    line-height: 2.4rem;\n  }\n\n  .swiper-container {\n    padding-bottom: 40px;\n  }\n\n  .bx-dest-content {\n    width: calc(100% - 10px);\n    min-width: 100%;\n  }\n  .swiper-pagination-bullet {\n    opacity: 0.8;\n    background: transparent;\n    border: 1px solid #000000;\n  }\n\n  .swiper-pagination-bullet-active {\n    background: #000000;\n  }\n  .swiper-pagination-bullet:focus {\n    border-radius: 50% !important;\n  }\n  .swiper-pagination {\n    display: block;\n  }\n}\n@media only screen and (min-width: 768px) and (max-width: 1023px) {\n  .bx-dest-content {\n    width: calc(33% - 6px);\n  }\n  .bx-content-header {\n    max-width: 450px;\n  }\n}\n\n@media only screen and (min-width: 992px) {\n  .bx-destination-recommendation__wrapper {\n    padding: 0;\n  }\n}\n@media only screen and (min-width: 1024px) {\n  .bx-dest-content__wrapper-without-img-container.bx-dest-content {\n    width: 357px;\n  }\n}\n@media only screen and (min-width: 992px) and (max-width: 1023px) {\n  .bx-destination-recommendation__wrapper {\n    padding-right: 30px;\n    padding-left: 30px;\n  }\n  .bx-dest-content__wrapper-without-img-container.bx-dest-content {\n    width: calc(33% - 6px);\n  }\n}\n@media only screen and (min-width: 1024px) and (max-width: 1199px) {\n  .bx-destination-recommendation__wrapper {\n    padding-right: 50px;\n    padding-left: 50px;\n  }\n  .bx-dest-content__wrapper-without-img-container.bx-dest-content {\n    width: calc(33% - 6px);\n  }\n}\n@media only screen and (min-width: 768px) {\n  .swiper-wrapper {\n    justify-content: center;\n  }\n}\n@media only screen and (min-width: 1200px) {\n  .bx-dest-content {\n    min-width: 357px;\n  }\n}\n',html:'<link href="https://cdnjs.cloudflare.com/ajax/libs/Swiper/4.5.1/css/swiper.min.css" rel="stylesheet"/>\n  ',js:'function sendBoxeverEvent(eventType) {\n  let eventLabel = `BOX301_${eventType}`;\n  var event = {\n    channel: "WEB",\n    type: eventLabel,\n    page: dataLayer[0].pageName,\n    pos: _boxever_settings.pointOfSale,\n    browser_id: Boxever.getID(),\n  };\n  Boxever.eventCreate(event, function (data) {}, "json");\n}\n\nfunction getResourceKeys(resources, resourceMap) {\n  let mappedResources = {};\n  for (var key of Object.keys(resourceMap)) {\n    if (resourceMap[key] in resources) {\n      mappedResources[key] = resources[resourceMap[key]];\n    } else {\n      mappedResources[key] = "";\n    }\n  }\n  return mappedResources;\n}\n\nfunction parseDate(date) {\n    const day = date.substring(0 ,2).includes(\'-\') ? date.substring(0 ,1) : date.substring(0 ,2);\n    const months = [\'Jan\', \'Feb\', \'Mar\', \'Apr\', \'May\', \'Jun\', \'Jul\', \'Aug\', \'Sep\', \'Oct\', \'Nov\', \'Dec\'];\n    const year = date.substring(7);\n    const monthName = date.substring(3, 6);\n    const month = months.findIndex(e => e.toLowerCase() === monthName.toLowerCase()) ;\n    return new Date(\'20\' + year, month, day);\n}\n\nfunction interpolate(pattern = "", data = {}, soft = false) {\n  return pattern.replace(\n    // /\\{(?:(?:\\{(\\w+)\\})|(\\w+))\\}/gm, // matches word characters in single or double braces only\n    // /\\{+(\\w+)\\}+/gm, // matches word characters enclosed in arbitrary number of braces\n    /{+(\\w+([-\']\\w+)*)}+/gm, // matches word characters with dash enclosed in arbitrary number of braces\n    (_, single, double) => {\n      const key = single || double;\n      const value = data[key];\n      if (!value) {\n        console.error("Interpolation key was not found in data object:", key);\n        if (!soft) return `{${key}?}`;\n        return "";\n      }\n      return value;\n    }\n  );\n}\n\nfunction dateInPast(firstDate, secondDate) {\n  if (firstDate.setHours(0, 0, 0, 0) <= secondDate.setHours(0, 0, 0, 0)) {\n    return true;\n  }\n\n  return false;\n}\n\nfunction render() {\n  swiperScript.onload = function () {\n    if (publication) {\n      if (dataLayer && dataLayer[0]) {\n        const lang = dataLayer[0].languageCode.toLowerCase();\n        let airportsFetchURL = `${HOST}/service/airports?lang=${lang}`;\n        let browserID = Boxever.getID();\n        let bxRecentSearchFetchURL = `https://api.boxever.com/v2/callFlows?message={"context":{"clientKey":"${_boxever_settings.client_key}","channel":"WEB","language":"en","currencyCode":"USD","uri":"/home","pointOfSale":"emirates.com/english","browserId":"${browserID}","friendlyId":"recent_searches"}}`;\n        let promises = [\n          fetch(\n            `https://www.emirates.com/service/content/api/v4.0/resources/eol${publication}/Experiences/Destinations/Recent-Searches/Error-Pages`\n          )\n            .then((response) => {\n              return response.json();\n            })\n            .then((results) => {\n              let resources = null;\n              if (results) {\n                resources = results.results;\n              }\n              return resources;\n            }),\n          fetch(airportsFetchURL).then((response) => {\n            return response.json();\n          }),\n          fetch(bxRecentSearchFetchURL).then((response) => {\n            return response.json();\n          }),\n        ];\n\n        Promise.all(promises)\n          .then(([resources, airports, recentSearches]) => {\n            if (\n              recentSearches &&\n              recentSearches.recent_searches &&\n              recentSearches.recent_searches.length &&\n              airports &&\n              airports.results &&\n              resources &&\n              Object.keys(resources).length\n            ) {\n              const resourceMap = {\n                bookCTALabel: `Experiences/Destinations/Recent-Searches/Error-Pages/book-cta-label__text`,\n                widgetTitle: `Experiences/Destinations/Recent-Searches/Error-Pages/header-title__text`,\n                priceLabel: `Experiences/Destinations/Recent-Searches/Error-Pages/price-label__text`,\n                cityTitle: `Experiences/Destinations/Recent-Searches/Error-Pages/city-title__text`,\n                economyClass: `Experiences/Destinations/Recent-Searches/Error-Pages/economy-class__text`,\n                businessClass: `Experiences/Destinations/Recent-Searches/Error-Pages/business-class__text`,\n                firstClass: `Experiences/Destinations/Recent-Searches/Error-Pages/first-class__text`,\n                singlePassengerLabel: `Experiences/Destinations/Recent-Searches/Error-Pages/singular-passenger__text`,\n                twoPassengerLabel: `Experiences/Destinations/Recent-Searches/Error-Pages/two-passengers__text`,\n                multiPassengerLabel: `Experiences/Destinations/Recent-Searches/Error-Pages/plural-passenger__text`,\n              };\n              const resourceKeys = getResourceKeys(resources, resourceMap);\n              const recentSearchLimit = `5`;\n              const availabilityChecksPromises = recentSearches.recent_searches\n                .slice(0, recentSearchLimit)\n                .reduce(function (availabilityChecksPromises, row, index) {\n                  availabilityChecksPromises.push(\n                    fetch(\n                      `${HOST}/service/flights-resumption?origin=${row.origin_iata}&destination=${row.destination_iata}`\n                    ).then((response) => {\n                      return response.json();\n                    })\n                  );\n                  return availabilityChecksPromises;\n                }, []);\n              Promise.all(availabilityChecksPromises)\n                .then(function (result) {\n                  if (result && result.length > 0) {\n                    let avaialableDestination = null;\n                    let operatingDestinations = [];\n\n                    for (var i = 0; i < result.length; i++) {\n                      if (\n                        result[i] &&\n                        result[i].results &&\n                        ((result[i].results.routes &&\n                          Object.keys(result[i].results.routes).length > 0) ||\n                          (result[i].results.nearbyOperatingAirports &&\n                            Object.keys(\n                              result[i].results.nearbyOperatingAirports\n                            ).length > 0))\n                      ) {\n                        const keys = Object.keys(result[i].results.routes);\n                        const row = recentSearches.recent_searches[i];\n                        for (var j = 0; j < keys.length; j++) {\n                          const route = result[i].results.routes[keys[j]];\n                          if (route && route.statusMessage === "Operating") {\n                            avaialableDestination = result[i];\n                            operatingDestinations.push(\n                              getCardData(\n                                row,\n                                airports,\n                                lang,\n                                false,\n                                resourceKeys\n                              )\n                            );\n\n                            break;\n                          }\n                        }\n                        if (\n                          !avaialableDestination &&\n                          result[i].results.nearbyOperatingAirports &&\n                          Object.keys(result[i].results.nearbyOperatingAirports)\n                            .length > 0\n                        ) {\n                          operatingDestinations.push(\n                            getCardData(\n                              Object.assign({}, row, {\n                                destination_iata:\n                                  result[i].results.nearbyOperatingAirports[0]\n                                    .iataCode,\n                              }),\n                              airports,\n                              lang,\n                              false,\n                              resourceKeys\n                            )\n                          );\n                        }\n                      }\n                      if (cardsLimit <= operatingDestinations.length) {\n                        break;\n                      }\n                    }\n\n                    var html = "";\n                    const wrapper = document.querySelector(wrapperSelector);\n                    if (wrapper) {\n                      Promise.allSettled(operatingDestinations)\n                        .then((results) => {\n                          for (var i = 0; i < results.length; i++) {\n                            if (results[i].status === "fulfilled") {\n                              const recommendedDestination = results[i].value;\n                              html += renderCard(\n                                airports,\n                                recommendedDestination.origin_iata,\n                                recommendedDestination.destination_iata,\n                                recommendedDestination.depart_date,\n                                recommendedDestination.return_date,\n                                recommendedDestination.flight_type,\n                                recommendedDestination.booking_class,\n                                recommendedDestination.adults,\n                                recommendedDestination.children,\n                                recommendedDestination.infants,\n                                recommendedDestination.isNearbyDestination,\n                                resourceKeys,\n                                recommendedDestination.currencyCode,\n                                recommendedDestination.price,\n                                recommendedDestination.youths,\n                                recommendedDestination.ofws\n                              );\n                            }\n                          }\n                          if (html) {\n                            wrapper.insertAdjacentHTML(\n                              "afterend",\n                              `<div class="bx-destination-recommendation"><div class="e-container e-container--separator">\n     <div class="bx-destination-recommendation__wrapper"> <div class="bx-content-header">\n          <h2 class="bx-content-header__text">${resourceKeys.widgetTitle}</h2>\n      </div>\n          <div class="bx-dest-wrapper"><div class="swiper-container">      <div class="swiper-wrapper">\n${html}</div>  \n<div class="swiper-pagination"></div>\n</div>  </div> </div>\n   \n</div>\n\n  </div>`\n                            );\n                            const links = document.querySelectorAll(\n                              ".bx-dest-content__book-cta"\n                            );\n                            if (links) {\n                              for (var k = 0; k < links.length; k++) {\n                                links[k].addEventListener("click", (e) => {\n                                  if (e.target.dataset && e.target.dataset.isnearby === "true") {\n                                    sendBoxeverEvent("NEARBY_CLICKED");\n                                  } else {\n                                    sendBoxeverEvent("CLICKED");\n                                  }\n                                });\n                              }\n                            }\n                            breakpointChecker();\n                            sendBoxeverEvent("VIEWED");\n                          }\n                        })\n                        .catch((error) => console.log(error));\n                    }\n                  }\n                })\n                .catch((error) => console.log(error));\n            }\n          })\n          .catch((error) => console.log(error));\n      }\n    }\n  };\n}\nfunction initSlider() {\n  if (document.querySelectorAll(".bx-dest-content").length > 1) {\n    slider = new Swiper(".swiper-container", {\n      slidesPerView: 1,\n      spaceBetween: 10,\n      centeredSlides: true,\n      freeMode: false,\n      grabCursor: true,\n      a11y: true,\n      keyboardControl: true,\n      loop: false,\n      pagination: {\n        el: ".swiper-pagination",\n        clickable: true,\n      },\n    });\n  }\n}\nfunction getCardData(row, airports, lang, isNearbyDestination, resources) {\n  let departDate = parseDate(`${row.depart_date}`);\n  let returnDate = parseDate(`${row.return_date}`);\n  const today = new Date();\n  const tomorrow = new Date(today);\n  tomorrow.setDate(tomorrow.getDate() + 1);\n  let startDate = departDate;\n  let endDate = returnDate;\n  if (dateInPast(departDate, today)) {\n    startDate = tomorrow;\n    endDate = new Date(tomorrow);\n    endDate.setDate(tomorrow.getDate() + 7);\n  }\n  if (row.flight_type === "OW" || !isPricingEnabled) {\n    return Promise.resolve(\n      Object.assign({ isNearbyDestination: isNearbyDestination }, row)\n    );\n  } else {\n    let bestFareFinderAPIHeaders = new Headers();\n    const bestFareAPICabinClassMapping = {\n      Y: "ECONOMY",\n      J: "BUSINESS",\n      F: "FIRST",\n    };\n    bestFareFinderAPIHeaders.append("origin", "https://www.emirates.com");\n    bestFareFinderAPIHeaders.append("Referer", "https://www.emirates.com");\n    bestFareFinderAPIHeaders.append(\n      "Content-Type",\n      "application/json;charset=UTF-8"\n    );\n    bestFareFinderAPIHeaders.append(\n      "Accept",\n      "application/json, text/plain, */*"\n    );\n    bestFareFinderAPIHeaders.append("scheme", "https");\n    bestFareFinderAPIHeaders.append("accept-language", "en-US,en;q=0.9");\n    bestFareFinderAPIHeaders.append("Cache-Control", "no-cache");\n    bestFareFinderAPIHeaders.append("sec-fetch-dest", "empty");\n    bestFareFinderAPIHeaders.append("sec-fetch-mode", "cors");\n    bestFareFinderAPIHeaders.append("sec-fetch-site", "cross-site");\n    bestFareFinderAPIHeaders.append(\n      "em-api-key",\n      "HeQpRjsFI5xlAaSx2onkjc1HTK0ukqA1IrVvd5fvaMhNtzLTxInTpeYB1MK93pah"\n    );\n\n    var body = {\n      priceFormat: {\n        decimalSeparator: ".",\n        thousandSeparator: ",",\n        decimalPlaces: 0,\n      },\n      datePattern: "dd MM yyyy",\n      languageCode: lang,\n      dataExpirationWindow: "1d",\n      faresLimit: "1",\n      interval: "1d",\n      travelClasses: [bestFareAPICabinClassMapping[row.booking_class]],\n      flightType: "ROUND_TRIP",\n      airlineCodes: ["ek"],\n      origin: row.origin_iata,\n      destination: row.destination_iata,\n      dateRange: {\n        start: `${startDate.getFullYear()}-${(\n          "0" +\n          (startDate.getMonth() + 1)\n        ).slice(-2)}-${("0" + startDate.getDate()).slice(-2)}`,\n        end: `${endDate.getFullYear()}-${("0" + (endDate.getMonth() + 1)).slice(\n          -2\n        )}-${("0" + endDate.getDate()).slice(-2)}`,\n      },\n    };\n\n    const requestOptions = {\n      method: "POST",\n      headers: bestFareFinderAPIHeaders,\n      body: JSON.stringify(body),\n    };\n    return fetch(\n      "https://openair-california.airtrfx.com/airfare-sputnik-service/v3/ek/fares/histogram",\n      requestOptions\n    )\n      .then((response) => response.json())\n      .then(function (lowestFaresResults) {\n        if (\n          lowestFaresResults &&\n          lowestFaresResults.histogram &&\n          lowestFaresResults.histogram.length > 0\n        ) {\n          const lowestFare = lowestFaresResults.histogram.find(\n            (x) => x.fares.length > 0\n          );\n          if (lowestFare && lowestFare.fares && lowestFare.fares.length > 0) {\n            let recommendedDestination = lowestFare.fares[0];\n            return Object.assign(\n              {\n                isNearbyDestination: isNearbyDestination,\n                price: recommendedDestination.formattedTotalPrice,\n                currencyCode: recommendedDestination.currencyCode,\n                depart_date: lowestFaresResults.histogram[0].date,\n                return_date:\n                  lowestFaresResults.histogram[\n                    lowestFaresResults.histogram.length - 1\n                  ].date,\n                adults: 1,\n                infants: 0,\n                children: 0,\n                youths: 0,\n              },\n              row\n            );\n          } else {\n            return Object.assign(\n              { isNearbyDestination: isNearbyDestination },\n              row\n            );\n          }\n        }\n      })\n      .catch((error) => console.log(error));\n  }\n}\nfunction renderCard(\n  airports,\n  originIATACode,\n  destinationIATACode,\n  departureDate,\n  returnDate,\n  flightType,\n  cabinClass,\n  adults,\n  children,\n  infants,\n  isNearbyDestination,\n  resources,\n  currencyCode,\n  formattedPrice,\n  youths,\n  ofws\n) {\n  const cabinClassMapping = {\n    Y: 0,\n    J: 1,\n    F: 2,\n  };\n  const cabinClassMappingText = {\n    Y: resources.economyClass,\n    J: resources.businessClass,\n    F: resources.firstClass,\n  };\n  const paxCount = adults + children + infants + youths + (ofws ? ofws : 0);\n  const departureDateObj = parseDate(departureDate);\n  const returnDateObj = parseDate(returnDate);\n  const today = new Date();\n  const tomorrow = new Date(today);\n  tomorrow.setDate(tomorrow.getDate() + 1);\n  let startDate = departureDateObj;\n  let endDate = returnDateObj;\n  if (dateInPast(departureDateObj, today)) {\n    startDate = tomorrow;\n    endDate = new Date(tomorrow);\n    endDate.setDate(tomorrow.getDate() + 7);\n  }\n  const formattedEndDate = `${("0" + endDate.getDate()).slice(\n    -2\n  )}-${endDate.toLocaleDateString("en", {\n    month: "short",\n  })}-${endDate.getFullYear().toString().substring(2)}`;\n  const formattedStartDate = `${("0" + startDate.getDate()).slice(\n    -2\n  )}-${startDate.toLocaleDateString("en", {\n    month: "short",\n  })}-${startDate.getFullYear().toString().substring(2)}`;\n\n  let passengersInfoTitle = interpolate(resources.singlePassengerLabel, {\n    cabinClass: cabinClassMappingText[cabinClass.toUpperCase()],\n  });\n  if (paxCount === 2) {\n    passengersInfoTitle = interpolate(resources.twoPassengerLabel, {\n      cabinClass: cabinClassMappingText[cabinClass.toUpperCase()],\n    });\n  } else if (paxCount > 2) {\n    passengersInfoTitle = interpolate(resources.multiPassengerLabel, {\n      paxCount,\n      cabinClass: cabinClassMappingText[cabinClass.toUpperCase()],\n    });\n  }\n  return `          <div class="bx-dest-content swiper-slide ${\n    !withImage ? "bx-dest-content__wrapper-without-img-container" : ""\n  }">\n                  ${\n                    withImage\n                      ? `<img alt="" loading="lazy" class="bx-dest-img" src="https://c.ekstatic.net/shared/images/destination/v1/airports/${destinationIATACode}/810x270.jpg" />`\n                      : ""\n                  }\n                  <div class="bx-dest-content__wrapper ${\n                    withDates ? "bx-dest-content__wrapper-with-dates" : ""\n                  } ${\n    !withImage ? "bx-dest-content__wrapper-without-img" : ""\n  }">\n                      <div class="bx-dest-content__wrapper-ond">\n                      <div class="bx-dest-content__wrapper-ond-city bx-dest-content__origin-city">\n                          <div class="bx-dest-content__city">${interpolate(\n                            resources.cityTitle,\n                            {\n                              cityShortName: airports.results[\n                                originIATACode\n                              ].city.shortName.toUpperCase(),\n                            }\n                          )}</div>\n                           <div class="bx-dest-content__city-iata">${originIATACode}</div>\n                          </div>\n                          <div class="bx-dest-content__ond-icon"><i class="icon ${\n                            withImage\n                              ? flightType === "RT"\n                                ? "icon-return-flight"\n                                : "icon-one-way-flight"\n                              : "icon-airplane"\n                          }"></i></div>\n                          <div class="bx-dest-content__wrapper-ond-city bx-dest-content__destination-city">\n                          <div class="bx-dest-content__city">${interpolate(\n                            resources.cityTitle,\n                            {\n                              cityShortName: airports.results[\n                                destinationIATACode\n                              ].city.shortName.toUpperCase(),\n                            }\n                          )}</div>\n                            <div class="bx-dest-content__city-iata">${destinationIATACode}</div>\n\n                     </div>\n                      </div>\n                      ${\n                        withDates && withImage\n                          ? \'<div class="bx-dest-content__seperator"></div>\'\n                          : ""\n                      }\n                      ${withDates ? \'<div class="bx-dest-content__info">\' : ""}\n                                       ${\n                                         withDates\n                                           ? `<div class="bx-dest-content__dates">\n                      <i class="icon icon-calendar"></i>\n${("0" + startDate.getDate()).slice(-2)}.${(\n                                               "0" +\n                                               (startDate.getMonth() + 1)\n                                             ).slice(\n                                               -2\n                                             )}.${startDate.getFullYear()}${\n                                               flightType === "RT"\n                                                 ? ` - ${(\n                                                     "0" + endDate.getDate()\n                                                   ).slice(-2)}.${(\n                                                     "0" +\n                                                     (endDate.getMonth() + 1)\n                                                   ).slice(\n                                                     -2\n                                                   )}.${endDate.getFullYear()}`\n                                                 : ""\n                                             }</div>`\n                                           : ""\n                                       }\n\n                      <div class="bx-dest-content__pax">${\n                        withDates\n                          ? \'<i class="icon icon-adult-male-customer"></i>\'\n                          : ""\n                      }<span>${passengersInfoTitle}</span></div>\n                           ${withDates ? "</div>" : ""}\n\n                      ${\n                        isPricingEnabled && currencyCode && formattedPrice\n                          ? `<div class="bx-dest-content__summary-price">${interpolate(\n                              resources.priceLabel,\n                              {\n                                currencyCode,\n                                formattedTotalPrice: formattedPrice,\n                              }\n                            )}</div>`\n                          : ""\n                      }\n                      <a data-isnearby="${isNearbyDestination}" class="bx-dest-content__book-cta ${\n    isCTA ? "bx-dest-content-cta" : "bx-dest-content__link"\n  }" href="${HOST}/SessionHandler.aspx?pub=${publication}&pageurl=/IBE.aspx&section=IBE&showpage=true&TID=${\n    flightType === "OW" ? "OW" : "SB"\n  }&seldcity1=${originIATACode}&selacity1=${destinationIATACode}&selddate1=${formattedStartDate}&seladate1=${formattedEndDate}&seladults=${adults}&selchildren=${children}&selinfants=${infants}&selcabinclass=${\n    cabinClassMapping[cabinClass]\n  }&selcabinclass1=${cabinClassMapping[cabinClass]}&resultby=0${\n    youths ? `&selteenager=${youths}&showTeenager=true` : ""\n  }${ofws ? `&selofw=${ofws}&showOFW=true` : ""}">${resources.bookCTALabel}</a>\n                  </div>\n              </div>`;\n}\nconst breakpointChecker = function () {\n  // if larger viewport and multi-row layout needed\n  if (breakpoint.matches === false) {\n    // clean up old instances and inline styles when available\n    if (slider) slider.destroy(true, true);\n    // or/and do nothing\n    return;\n    // else if a small viewport and single column layout needed\n  } else if (breakpoint.matches === true) {\n    // fire small viewport version of swiper\n    return initSlider();\n  }\n};\nvar slider = null;\nconst wrapperSelector = "div[data-organism=\'c-h-006-page-navigation-blocks\']";\nconst breakpoint = window.matchMedia("(max-width: 769px)");\nbreakpoint.addListener(breakpointChecker);\nconst HOST = "https://www.emirates.com";\nconst cardsLimit = "3";\nconst isPricingEnabled =\n  "No" === "Yes";\nconst isCTA = "Yes" === "Yes";\nconst withDates =\n  "Yes" === "Yes";\nconst withImage =\n  "Yes" === "Yes";\nconst publication = `/${__INITIAL_STATE__.urlparser.results.country}/${__INITIAL_STATE__.urlparser.results.language}`;\n//Cookie consent check\nlet cookieComplianceEnabled =\n  "Yes" ===\n  "Yes";\nconst cookieComplianceFunctionalGroup =\n  "C0002";\n//Listen for disabling/enabling functional cookies group for new browser\nif (cookieComplianceEnabled) {\n  window.addEventListener("OneTrustGroupsUpdated", function (e) {\n    if (OnetrustActiveGroups.indexOf(cookieComplianceFunctionalGroup) > -1) {\n      //Show experience wrapper here\n      document.querySelector(".bx-destination-recommendation").style.display =\n        "block";\n      render();\n    } else {\n      document.querySelector(".bx-destination-recommendation").style.display =\n        "none";\n    }\n  });\n}\nif (\n  !cookieComplianceEnabled ||\n  (cookieComplianceEnabled &&\n    OnetrustActiveGroups.indexOf(cookieComplianceFunctionalGroup) > -1)\n) {\n    if(typeof window.box301Triggerred === \'undefined\') {\n      window.box301Triggerred = true;\n      insertHTMLAfter(wrapperSelector);\n      var swiperScript = document.createElement("script");\n      swiperScript.src =\n        "https://cdnjs.cloudflare.com/ajax/libs/Swiper/4.5.1/js/swiper.min.js";\n      document.head.appendChild(swiperScript);\n      render();\n    }\n}\n'}},{ref:"be23ad18-0b92-4cda-ab17-75870ba05528",name:"With Image and Pricing",assets:{css:':root {\n  --font-helvetica: HelveticaNeue, Helvetica Neue, Helvetica, Lucida Grande,\n    sans-serif;\n  --font-helvetica-light: HelveticaNeue-Light, Helvetica Neue Light,\n    Helvetica Neue, Helvetica, Arial, Lucida Grande, sans-serif;\n  --font-ek-bold: Emirates-Bold, Helvetica, Arial, Lucida Grande, sans-serif;\n  --text-color: #333333;\n  --white-color: #ffffff;\n  --red-color: #c60c30;\n  --gray-color: #666666;\n}\n.swiper-pagination {\n  display: none;\n}\n\n.bx-destination-recommendation__wrapper {\n  padding: 0 10px;\n}\n.bx-dest-wrapper {\n  display: flex;\n  margin-top: 30px;\n}\n\n.bx-content-header {\n  display: flex;\n  flex-direction: row;\n  margin: 0 auto;\n  justify-content: center;\n  max-width: 775px;\n}\n\n.bx-content-header__text {\n  font-weight: 700;\n  color: var(--text-color);\n  margin: 0 !important;\n  font-size: 3rem;\n  line-height: 3.4rem;\n  text-align: center !important;\n}\n\n.bx-dest-content__wrapper {\n  padding: 15px 20px 30px;\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n  text-align: center;\n  flex: 1;\n}\n.bx-dest-content__wrapper-with-dates {\n  padding: 15px 15px 20px;\n}\n.bx-dest-content__wrapper-without-img {\n  padding: 20px 35px 20px;\n}\n.bx-dest-img {\n  width: 100%;\n  height: 115px;\n}\n.bx-dest-content__wrapper-without-img-container\n  .bx-dest-content__wrapper-with-dates\n  .bx-dest-content__pax {\n  margin: auto 0 20px;\n}\n.bx-dest-content {\n  width: calc(33% - 6px);\n  box-shadow: 0 2px 4px 2px rgb(0 0 0 / 10%);\n  background-color: var(--white-color);\n  border-radius: 3px;\n  display: flex;\n  flex-direction: column;\n}\n\n.bx-dest-content:not(:last-child) {\n  margin-right: 15px;\n}\n\nhtml[dir="rtl"] .bx-dest-content:not(:last-child) {\n  margin-left: 15px;\n  margin-right: 0;\n}\n\n.bx-dest-content__wrapper-ond {\n  display: flex;\n  margin-top: 15px;\n}\n\n.bx-dest-content__wrapper-ond-city {\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n  position: relative;\n}\n.bx-dest-content__wrapper-without-img .bx-dest-content__origin-city {\n  align-items: flex-start;\n}\n.bx-dest-content__wrapper-without-img .bx-dest-content__destination-city {\n  align-items: flex-end;\n}\n.bx-dest-content__wrapper-without-img .bx-dest-content__ond-icon {\n  display: flex;\n  justify-content: center;\n  align-items: flex-end;\n  width: 100%;\n  color: var(--gray-color);\n}\n.bx-dest-content__wrapper-without-img .bx-dest-content__ond-icon i.icon {\n  transform: rotate(90deg);\n  margin: 0 5px;\n}\nhtml[dir="rtl"]\n  .bx-dest-content__wrapper-without-img\n  .bx-dest-content__ond-icon\n  i.icon {\n  transform: rotate(-90deg);\n}\n.bx-dest-content__wrapper-without-img .bx-dest-content__ond-icon:before {\n  content: "";\n  flex: 1 1;\n  border-bottom: 1px solid var(--gray-color);\n  margin: auto;\n  opacity: 0.5;\n}\n\n.bx-dest-content__wrapper-without-img .bx-dest-content__ond-icon:after {\n  content: "";\n  flex: 1 1;\n  border-bottom: 1px solid var(--gray-color);\n  margin: auto;\n  opacity: 0.5;\n}\n.bx-dest-content__wrapper-without-img\n  .bx-dest-content__destination-city\n  .bx-dest-content__city {\n  left: initial;\n}\n.bx-dest-content__wrapper-without-img\n  .bx-dest-content__origin-city\n  .bx-dest-content__city {\n  left: 0;\n  right: auto;\n}\n.bx-dest-content__wrapper-without-img .bx-dest-content__wrapper-ond {\n  width: 100%;\n}\n\n.bx-dest-content__city {\n  font-weight: 700;\n  font-family: var(--font-helvetica);\n  font-size: 10px;\n  line-height: 14px;\n  padding: 0;\n  color: var(--gray-color);\n  letter-spacing: 4px;\n  position: absolute;\n  top: -15px;\n  white-space: nowrap;\n}\nhtml.ar .bx-dest-content__city {\n  font-family: var(--font-ek-bold);\n}\n.bx-dest-content__origin-city .bx-dest-content__city {\n  left: auto;\n  right: 5px;\n}\n\n.bx-dest-content__destination-city .bx-dest-content__city {\n  left: -5px;\n}\n\nhtml[dir="rtl"] .bx-dest-content__origin-city .bx-dest-content__city {\n  right: 0;\n  left: auto;\n}\nhtml.ar .bx-dest-content__city {\n  letter-spacing: normal;\n}\n\n.bx-dest-content__city-iata {\n  font-size: 30px;\n  line-height: 34px;\n  font-family: var(--font-ek-bold);\n}\n\n.bx-dest-content__ond-icon {\n  margin: auto 10px;\n  font-size: 24px;\n}\n.bx-dest-content__wrapper-with-dates .bx-dest-content__seperator {\n  width: 60px;\n  border-bottom: 2px solid var(--red-color);\n  margin: 10px 0 0;\n}\n.bx-dest-content__pax {\n  font-family: var(--font-helvetica);\n  font-size: 12px;\n  line-height: 16px;\n  display: flex;\n  align-items: center;\n  margin: 15px 0;\n}\nhtml.ar .bx-dest-content__pax {\n  font-family: var(--font-ek-bold);\n}\n.bx-dest-content__wrapper-with-dates .bx-dest-content__pax {\n  font-size: 16px;\n  line-height: 20px;\n  text-align: left;\n}\n.bx-dest-content__dates {\n  margin: 20px 0 5px;\n  font-size: 16px;\n  line-height: 20px;\n  display: flex;\n}\n.bx-dest-content__wrapper-with-dates .bx-dest-content__info {\n  display: flex;\n  flex-direction: column;\n  align-items: flex-start;\n}\n\n.bx-dest-content__wrapper-with-dates .bx-dest-content__info i.icon {\n  margin-right: 15px;\n}\nhtml[dir="rtl"]\n  .bx-dest-content__wrapper-with-dates\n  .bx-dest-content__info\n  i.icon {\n  margin-left: 15px;\n  margin-right: 0;\n}\n.bx-dest-content__pax .icon-adult-male-customer {\n  font-size: 15px;\n}\n.bx-dest-content__wrapper-with-dates .bx-dest-content__pax {\n  margin: auto 0 30px;\n  text-align: left;\n}\nhtml[dir="rtl"] .bx-dest-content__wrapper-with-dates .bx-dest-content__pax {\n  text-align: right;\n}\n\n.bx-dest-content__wrapper-with-dates .bx-dest-content__dates {\n  text-align: left;\n}\nhtml[dir="rtl"] .bx-dest-content__wrapper-with-dates .bx-dest-content__dates {\n  text-align: right;\n}\n.bx-dest-content__link {\n  margin-top: auto;\n  font-size: 14px;\n  line-height: 18px;\n  color: #c60c30;\n  text-decoration: underline;\n  font-family: var(--font-helvetica);\n}\nhtml.ar .bx-dest-content__link {\n  font-family: var(--font-ek-bold);\n}\n\n.bx-dest-content__link:hover {\n  text-decoration: none;\n}\n\n.bx-dest-content-cta {\n  height: 18px;\n  padding: 10px 20px;\n  white-space: normal;\n  display: flex;\n  font-size: 14px;\n  line-height: 18px;\n  font-weight: 700;\n  font-family: var(--font-helvetica);\n  justify-content: center;\n  align-items: center;\n  align-self: center;\n  color: var(--text-color);\n  background: var(--white-color);\n  border: 1px solid var(--text-color);\n  width: calc(100% - 40px);\n  overflow: hidden;\n  text-align: center;\n  text-decoration: none;\n  text-overflow: ellipsis;\n  vertical-align: middle;\n  border-radius: 3px;\n  cursor: pointer;\n  transition: 0.1s ease;\n  -webkit-appearance: none !important;\n  -moz-appearance: none !important;\n  appearance: none !important;\n  margin-top: auto;\n}\nhtml.ar .bx-dest-content-cta {\n  font-family: var(--font-ek-bold);\n}\n.bx-dest-content-cta:hover {\n  text-decoration: none !important;\n  box-shadow: 0 0 6px 0 grey;\n}\n\n.bx-dest-content__summary-price {\n  text-align: center;\n  font-family: var(--font-helvetica);\n  font-weight: 700;\n  font-size: 20px;\n  line-height: 24px;\n  margin: 0 0 15px;\n}\nhtml.ar .bx-dest-content__summary-price {\n  font-family: var(--font-ek-bold);\n}\n@media only screen and (max-width: 769px) {\n  .bx-content-header {\n    max-width: 250px;\n  }\n\n  .bx-dest-content:not(:last-child) {\n    margin-right: 10px;\n  }\n  html[dir="rtl"] .bx-dest-content:not(:last-child) {\n    margin-left: 10px;\n    margin-right: 0;\n  }\n  .bx-content-header__text {\n    font-size: 2rem;\n    line-height: 2.4rem;\n  }\n\n  .swiper-container {\n    padding-bottom: 40px;\n  }\n\n  .bx-dest-content {\n    width: calc(100% - 10px);\n    min-width: 100%;\n  }\n  .swiper-pagination-bullet {\n    opacity: 0.8;\n    background: transparent;\n    border: 1px solid #000000;\n  }\n\n  .swiper-pagination-bullet-active {\n    background: #000000;\n  }\n  .swiper-pagination-bullet:focus {\n    border-radius: 50% !important;\n  }\n  .swiper-pagination {\n    display: block;\n  }\n}\n@media only screen and (min-width: 768px) and (max-width: 1023px) {\n  .bx-dest-content {\n    width: calc(33% - 6px);\n  }\n  .bx-content-header {\n    max-width: 450px;\n  }\n}\n\n@media only screen and (min-width: 992px) {\n  .bx-destination-recommendation__wrapper {\n    padding: 0;\n  }\n}\n@media only screen and (min-width: 1024px) {\n  .bx-dest-content__wrapper-without-img-container.bx-dest-content {\n    width: 357px;\n  }\n}\n@media only screen and (min-width: 992px) and (max-width: 1023px) {\n  .bx-destination-recommendation__wrapper {\n    padding-right: 30px;\n    padding-left: 30px;\n  }\n  .bx-dest-content__wrapper-without-img-container.bx-dest-content {\n    width: calc(33% - 6px);\n  }\n}\n@media only screen and (min-width: 1024px) and (max-width: 1199px) {\n  .bx-destination-recommendation__wrapper {\n    padding-right: 50px;\n    padding-left: 50px;\n  }\n  .bx-dest-content__wrapper-without-img-container.bx-dest-content {\n    width: calc(33% - 6px);\n  }\n}\n@media only screen and (min-width: 768px) {\n  .swiper-wrapper {\n    justify-content: center;\n  }\n}\n@media only screen and (min-width: 1200px) {\n  .bx-dest-content {\n    min-width: 357px;\n  }\n}\n',html:'<link href="https://cdnjs.cloudflare.com/ajax/libs/Swiper/4.5.1/css/swiper.min.css" rel="stylesheet"/>\n  ',js:'function sendBoxeverEvent(eventType) {\n  let eventLabel = `BOX301_${eventType}`;\n  var event = {\n    channel: "WEB",\n    type: eventLabel,\n    page: dataLayer[0].pageName,\n    pos: _boxever_settings.pointOfSale,\n    browser_id: Boxever.getID(),\n  };\n  Boxever.eventCreate(event, function (data) {}, "json");\n}\n\nfunction getResourceKeys(resources, resourceMap) {\n  let mappedResources = {};\n  for (var key of Object.keys(resourceMap)) {\n    if (resourceMap[key] in resources) {\n      mappedResources[key] = resources[resourceMap[key]];\n    } else {\n      mappedResources[key] = "";\n    }\n  }\n  return mappedResources;\n}\n\nfunction parseDate(date) {\n    const day = date.substring(0 ,2).includes(\'-\') ? date.substring(0 ,1) : date.substring(0 ,2);\n    const months = [\'Jan\', \'Feb\', \'Mar\', \'Apr\', \'May\', \'Jun\', \'Jul\', \'Aug\', \'Sep\', \'Oct\', \'Nov\', \'Dec\'];\n    const year = date.substring(7);\n    const monthName = date.substring(3, 6);\n    const month = months.findIndex(e => e.toLowerCase() === monthName.toLowerCase());\n    return new Date(\'20\' + year, month, day);\n}\n\nfunction interpolate(pattern = "", data = {}, soft = false) {\n  return pattern.replace(\n    // /\\{(?:(?:\\{(\\w+)\\})|(\\w+))\\}/gm, // matches word characters in single or double braces only\n    // /\\{+(\\w+)\\}+/gm, // matches word characters enclosed in arbitrary number of braces\n    /{+(\\w+([-\']\\w+)*)}+/gm, // matches word characters with dash enclosed in arbitrary number of braces\n    (_, single, double) => {\n      const key = single || double;\n      const value = data[key];\n      if (!value) {\n        console.error("Interpolation key was not found in data object:", key);\n        if (!soft) return `{${key}?}`;\n        return "";\n      }\n      return value;\n    }\n  );\n}\n\nfunction dateInPast(firstDate, secondDate) {\n  if (firstDate.setHours(0, 0, 0, 0) <= secondDate.setHours(0, 0, 0, 0)) {\n    return true;\n  }\n\n  return false;\n}\n\nfunction render() {\n  swiperScript.onload = function () {\n    if (publication) {\n      if (dataLayer && dataLayer[0]) {\n        const lang = dataLayer[0].languageCode.toLowerCase();\n        let airportsFetchURL = `${HOST}/service/airports?lang=${lang}`;\n        let browserID = Boxever.getID();\n        let bxRecentSearchFetchURL = `https://api.boxever.com/v2/callFlows?message={"context":{"clientKey":"${_boxever_settings.client_key}","channel":"WEB","language":"en","currencyCode":"USD","uri":"/home","pointOfSale":"emirates.com/english","browserId":"${browserID}","friendlyId":"recent_searches"}}`;\n        let promises = [\n          fetch(\n            `https://www.emirates.com/service/content/api/v4.0/resources/eol${publication}/Experiences/Destinations/Recent-Searches/Error-Pages`\n          )\n            .then((response) => {\n              return response.json();\n            })\n            .then((results) => {\n              let resources = null;\n              if (results) {\n                resources = results.results;\n              }\n              return resources;\n            }),\n          fetch(airportsFetchURL).then((response) => {\n            return response.json();\n          }),\n          fetch(bxRecentSearchFetchURL).then((response) => {\n            return response.json();\n          }),\n        ];\n\n        Promise.all(promises)\n          .then(([resources, airports, recentSearches]) => {\n            if (\n              recentSearches &&\n              recentSearches.recent_searches &&\n              recentSearches.recent_searches.length &&\n              airports &&\n              airports.results &&\n              resources &&\n              Object.keys(resources).length\n            ) {\n              const resourceMap = {\n                bookCTALabel: `Experiences/Destinations/Recent-Searches/Error-Pages/book-cta-label__text`,\n                widgetTitle: `Experiences/Destinations/Recent-Searches/Error-Pages/header-title__text`,\n                priceLabel: `Experiences/Destinations/Recent-Searches/Error-Pages/price-label__text`,\n                cityTitle: `Experiences/Destinations/Recent-Searches/Error-Pages/city-title__text`,\n                economyClass: `Experiences/Destinations/Recent-Searches/Error-Pages/economy-class__text`,\n                businessClass: `Experiences/Destinations/Recent-Searches/Error-Pages/business-class__text`,\n                firstClass: `Experiences/Destinations/Recent-Searches/Error-Pages/first-class__text`,\n                singlePassengerLabel: `Experiences/Destinations/Recent-Searches/Error-Pages/singular-passenger__text`,\n                twoPassengerLabel: `Experiences/Destinations/Recent-Searches/Error-Pages/two-passengers__text`,\n                multiPassengerLabel: `Experiences/Destinations/Recent-Searches/Error-Pages/plural-passenger__text`,\n              };\n              const resourceKeys = getResourceKeys(resources, resourceMap);\n              const recentSearchLimit = `5`;\n              const availabilityChecksPromises = recentSearches.recent_searches\n                .slice(0, recentSearchLimit)\n                .reduce(function (availabilityChecksPromises, row, index) {\n                  availabilityChecksPromises.push(\n                    fetch(\n                      `${HOST}/service/flights-resumption?origin=${row.origin_iata}&destination=${row.destination_iata}`\n                    ).then((response) => {\n                      return response.json();\n                    })\n                  );\n                  return availabilityChecksPromises;\n                }, []);\n              Promise.all(availabilityChecksPromises)\n                .then(function (result) {\n                  if (result && result.length > 0) {\n                    let avaialableDestination = null;\n                    let operatingDestinations = [];\n\n                    for (var i = 0; i < result.length; i++) {\n                      if (\n                        result[i] &&\n                        result[i].results &&\n                        ((result[i].results.routes &&\n                          Object.keys(result[i].results.routes).length > 0) ||\n                          (result[i].results.nearbyOperatingAirports &&\n                            Object.keys(\n                              result[i].results.nearbyOperatingAirports\n                            ).length > 0))\n                      ) {\n                        const keys = Object.keys(result[i].results.routes);\n                        const row = recentSearches.recent_searches[i];\n                        for (var j = 0; j < keys.length; j++) {\n                          const route = result[i].results.routes[keys[j]];\n                          if (route && route.statusMessage === "Operating") {\n                            avaialableDestination = result[i];\n                            operatingDestinations.push(\n                              getCardData(\n                                row,\n                                airports,\n                                lang,\n                                false,\n                                resourceKeys\n                              )\n                            );\n\n                            break;\n                          }\n                        }\n                        if (\n                          !avaialableDestination &&\n                          result[i].results.nearbyOperatingAirports &&\n                          Object.keys(result[i].results.nearbyOperatingAirports)\n                            .length > 0\n                        ) {\n                          operatingDestinations.push(\n                            getCardData(\n                              Object.assign({}, row, {\n                                destination_iata:\n                                  result[i].results.nearbyOperatingAirports[0]\n                                    .iataCode,\n                              }),\n                              airports,\n                              lang,\n                              false,\n                              resourceKeys\n                            )\n                          );\n                        }\n                      }\n                      if (cardsLimit <= operatingDestinations.length) {\n                        break;\n                      }\n                    }\n\n                    var html = "";\n                    const wrapper = document.querySelector(wrapperSelector);\n                    if (wrapper) {\n                      Promise.allSettled(operatingDestinations)\n                        .then((results) => {\n                          for (var i = 0; i < results.length; i++) {\n                            if (results[i].status === "fulfilled") {\n                              const recommendedDestination = results[i].value;\n                              html += renderCard(\n                                airports,\n                                recommendedDestination.origin_iata,\n                                recommendedDestination.destination_iata,\n                                recommendedDestination.depart_date,\n                                recommendedDestination.return_date,\n                                recommendedDestination.flight_type,\n                                recommendedDestination.booking_class,\n                                recommendedDestination.adults,\n                                recommendedDestination.children,\n                                recommendedDestination.infants,\n                                recommendedDestination.isNearbyDestination,\n                                resourceKeys,\n                                recommendedDestination.currencyCode,\n                                recommendedDestination.price,\n                                recommendedDestination.youths,\n                                recommendedDestination.ofws\n                              );\n                            }\n                          }\n                          if (html) {\n                            wrapper.insertAdjacentHTML(\n                              "afterend",\n                              `<div class="bx-destination-recommendation"><div class="e-container e-container--separator">\n     <div class="bx-destination-recommendation__wrapper"> <div class="bx-content-header">\n          <h2 class="bx-content-header__text">${resourceKeys.widgetTitle}</h2>\n      </div>\n          <div class="bx-dest-wrapper"><div class="swiper-container">      <div class="swiper-wrapper">\n${html}</div>  \n<div class="swiper-pagination"></div>\n</div>  </div> </div>\n   \n</div>\n\n  </div>`\n                            );\n                            const links = document.querySelectorAll(\n                              ".bx-dest-content__book-cta"\n                            );\n                            if (links) {\n                              for (var k = 0; k < links.length; k++) {\n                                links[k].addEventListener("click", (e) => {\n                                  if (e.target.dataset && e.target.dataset.isnearby === "true") {\n                                    sendBoxeverEvent("NEARBY_CLICKED");\n                                  } else {\n                                    sendBoxeverEvent("CLICKED");\n                                  }\n                                });\n                              }\n                            }\n                            breakpointChecker();\n                            sendBoxeverEvent("VIEWED");\n                          }\n                        })\n                        .catch((error) => console.log(error));\n                    }\n                  }\n                })\n                .catch((error) => console.log(error));\n            }\n          })\n          .catch((error) => console.log(error));\n      }\n    }\n  };\n}\nfunction initSlider() {\n  if (document.querySelectorAll(".bx-dest-content").length > 1) {\n    slider = new Swiper(".swiper-container", {\n      slidesPerView: 1,\n      spaceBetween: 10,\n      centeredSlides: true,\n      freeMode: false,\n      grabCursor: true,\n      a11y: true,\n      keyboardControl: true,\n      loop: false,\n      pagination: {\n        el: ".swiper-pagination",\n        clickable: true,\n      },\n    });\n  }\n}\nfunction getCardData(row, airports, lang, isNearbyDestination, resources) {\n  let departDate = parseDate(`${row.depart_date}`);\n  let returnDate = parseDate(`${row.return_date}`);\n  const today = new Date();\n  const tomorrow = new Date(today);\n  tomorrow.setDate(tomorrow.getDate() + 1);\n  let startDate = departDate;\n  let endDate = returnDate;\n  if (dateInPast(departDate, today)) {\n    startDate = tomorrow;\n    endDate = new Date(tomorrow);\n    endDate.setDate(tomorrow.getDate() + 7);\n  }\n  if (row.flight_type === "OW" || !isPricingEnabled) {\n    return Promise.resolve(\n      Object.assign({ isNearbyDestination: isNearbyDestination }, row)\n    );\n  } else {\n    let bestFareFinderAPIHeaders = new Headers();\n    const bestFareAPICabinClassMapping = {\n      Y: "ECONOMY",\n      J: "BUSINESS",\n      F: "FIRST",\n    };\n    bestFareFinderAPIHeaders.append("origin", "https://www.emirates.com");\n    bestFareFinderAPIHeaders.append("Referer", "https://www.emirates.com");\n    bestFareFinderAPIHeaders.append(\n      "Content-Type",\n      "application/json;charset=UTF-8"\n    );\n    bestFareFinderAPIHeaders.append(\n      "Accept",\n      "application/json, text/plain, */*"\n    );\n    bestFareFinderAPIHeaders.append("scheme", "https");\n    bestFareFinderAPIHeaders.append("accept-language", "en-US,en;q=0.9");\n    bestFareFinderAPIHeaders.append("Cache-Control", "no-cache");\n    bestFareFinderAPIHeaders.append("sec-fetch-dest", "empty");\n    bestFareFinderAPIHeaders.append("sec-fetch-mode", "cors");\n    bestFareFinderAPIHeaders.append("sec-fetch-site", "cross-site");\n    bestFareFinderAPIHeaders.append(\n      "em-api-key",\n      "HeQpRjsFI5xlAaSx2onkjc1HTK0ukqA1IrVvd5fvaMhNtzLTxInTpeYB1MK93pah"\n    );\n\n    var body = {\n      priceFormat: {\n        decimalSeparator: ".",\n        thousandSeparator: ",",\n        decimalPlaces: 0,\n      },\n      datePattern: "dd MM yyyy",\n      languageCode: lang,\n      dataExpirationWindow: "1d",\n      faresLimit: "1",\n      interval: "1d",\n      travelClasses: [bestFareAPICabinClassMapping[row.booking_class]],\n      flightType: "ROUND_TRIP",\n      airlineCodes: ["ek"],\n      origin: row.origin_iata,\n      destination: row.destination_iata,\n      dateRange: {\n        start: `${startDate.getFullYear()}-${(\n          "0" +\n          (startDate.getMonth() + 1)\n        ).slice(-2)}-${("0" + startDate.getDate()).slice(-2)}`,\n        end: `${endDate.getFullYear()}-${("0" + (endDate.getMonth() + 1)).slice(\n          -2\n        )}-${("0" + endDate.getDate()).slice(-2)}`,\n      },\n    };\n\n    const requestOptions = {\n      method: "POST",\n      headers: bestFareFinderAPIHeaders,\n      body: JSON.stringify(body),\n    };\n    return fetch(\n      "https://openair-california.airtrfx.com/airfare-sputnik-service/v3/ek/fares/histogram",\n      requestOptions\n    )\n      .then((response) => response.json())\n      .then(function (lowestFaresResults) {\n        if (\n          lowestFaresResults &&\n          lowestFaresResults.histogram &&\n          lowestFaresResults.histogram.length > 0\n        ) {\n          const lowestFare = lowestFaresResults.histogram.find(\n            (x) => x.fares.length > 0\n          );\n          if (lowestFare && lowestFare.fares && lowestFare.fares.length > 0) {\n            let recommendedDestination = lowestFare.fares[0];\n            return Object.assign(\n              {\n                isNearbyDestination: isNearbyDestination,\n                price: recommendedDestination.formattedTotalPrice,\n                currencyCode: recommendedDestination.currencyCode,\n                depart_date: lowestFaresResults.histogram[0].date,\n                return_date:\n                  lowestFaresResults.histogram[\n                    lowestFaresResults.histogram.length - 1\n                  ].date,\n                adults: 1,\n                infants: 0,\n                children: 0,\n                youths: 0,\n              },\n              row\n            );\n          } else {\n            return Object.assign(\n              { isNearbyDestination: isNearbyDestination },\n              row\n            );\n          }\n        }\n      })\n      .catch((error) => console.log(error));\n  }\n}\nfunction renderCard(\n  airports,\n  originIATACode,\n  destinationIATACode,\n  departureDate,\n  returnDate,\n  flightType,\n  cabinClass,\n  adults,\n  children,\n  infants,\n  isNearbyDestination,\n  resources,\n  currencyCode,\n  formattedPrice,\n  youths,\n  ofws\n) {\n  const cabinClassMapping = {\n    Y: 0,\n    J: 1,\n    F: 2,\n  };\n  const cabinClassMappingText = {\n    Y: resources.economyClass,\n    J: resources.businessClass,\n    F: resources.firstClass,\n  };\n  const paxCount = adults + children + infants + youths + (ofws ? ofws : 0);\n  const departureDateObj = parseDate(departureDate);\n  const returnDateObj = parseDate(returnDate);\n  const today = new Date();\n  const tomorrow = new Date(today);\n  tomorrow.setDate(tomorrow.getDate() + 1);\n  let startDate = departureDateObj;\n  let endDate = returnDateObj;\n  if (dateInPast(departureDateObj, today)) {\n    startDate = tomorrow;\n    endDate = new Date(tomorrow);\n    endDate.setDate(tomorrow.getDate() + 7);\n  }\n  const formattedEndDate = `${("0" + endDate.getDate()).slice(\n    -2\n  )}-${endDate.toLocaleDateString("en", {\n    month: "short",\n  })}-${endDate.getFullYear().toString().substring(2)}`;\n  const formattedStartDate = `${("0" + startDate.getDate()).slice(\n    -2\n  )}-${startDate.toLocaleDateString("en", {\n    month: "short",\n  })}-${startDate.getFullYear().toString().substring(2)}`;\n\n  let passengersInfoTitle = interpolate(resources.singlePassengerLabel, {\n    cabinClass: cabinClassMappingText[cabinClass.toUpperCase()],\n  });\n  if (paxCount === 2) {\n    passengersInfoTitle = interpolate(resources.twoPassengerLabel, {\n      cabinClass: cabinClassMappingText[cabinClass.toUpperCase()],\n    });\n  } else if (paxCount > 2) {\n    passengersInfoTitle = interpolate(resources.multiPassengerLabel, {\n      paxCount,\n      cabinClass: cabinClassMappingText[cabinClass.toUpperCase()],\n    });\n  }\n  return `          <div class="bx-dest-content swiper-slide ${\n    !withImage ? "bx-dest-content__wrapper-without-img-container" : ""\n  }">\n                  ${\n                    withImage\n                      ? `<img alt="" loading="lazy" class="bx-dest-img" src="https://c.ekstatic.net/shared/images/destination/v1/airports/${destinationIATACode}/810x270.jpg" />`\n                      : ""\n                  }\n                  <div class="bx-dest-content__wrapper ${\n                    withDates ? "bx-dest-content__wrapper-with-dates" : ""\n                  } ${\n    !withImage ? "bx-dest-content__wrapper-without-img" : ""\n  }">\n                      <div class="bx-dest-content__wrapper-ond">\n                      <div class="bx-dest-content__wrapper-ond-city bx-dest-content__origin-city">\n                          <div class="bx-dest-content__city">${interpolate(\n                            resources.cityTitle,\n                            {\n                              cityShortName: airports.results[\n                                originIATACode\n                              ].city.shortName.toUpperCase(),\n                            }\n                          )}</div>\n                           <div class="bx-dest-content__city-iata">${originIATACode}</div>\n                          </div>\n                          <div class="bx-dest-content__ond-icon"><i class="icon ${\n                            withImage\n                              ? flightType === "RT"\n                                ? "icon-return-flight"\n                                : "icon-one-way-flight"\n                              : "icon-airplane"\n                          }"></i></div>\n                          <div class="bx-dest-content__wrapper-ond-city bx-dest-content__destination-city">\n                          <div class="bx-dest-content__city">${interpolate(\n                            resources.cityTitle,\n                            {\n                              cityShortName: airports.results[\n                                destinationIATACode\n                              ].city.shortName.toUpperCase(),\n                            }\n                          )}</div>\n                            <div class="bx-dest-content__city-iata">${destinationIATACode}</div>\n\n                     </div>\n                      </div>\n                      ${\n                        withDates && withImage\n                          ? \'<div class="bx-dest-content__seperator"></div>\'\n                          : ""\n                      }\n                      ${withDates ? \'<div class="bx-dest-content__info">\' : ""}\n                                       ${\n                                         withDates\n                                           ? `<div class="bx-dest-content__dates">\n                      <i class="icon icon-calendar"></i>\n${("0" + startDate.getDate()).slice(-2)}.${(\n                                               "0" +\n                                               (startDate.getMonth() + 1)\n                                             ).slice(\n                                               -2\n                                             )}.${startDate.getFullYear()}${\n                                               flightType === "RT"\n                                                 ? ` - ${(\n                                                     "0" + endDate.getDate()\n                                                   ).slice(-2)}.${(\n                                                     "0" +\n                                                     (endDate.getMonth() + 1)\n                                                   ).slice(\n                                                     -2\n                                                   )}.${endDate.getFullYear()}`\n                                                 : ""\n                                             }</div>`\n                                           : ""\n                                       }\n\n                      <div class="bx-dest-content__pax">${\n                        withDates\n                          ? \'<i class="icon icon-adult-male-customer"></i>\'\n                          : ""\n                      }<span>${passengersInfoTitle}</span></div>\n                           ${withDates ? "</div>" : ""}\n\n                      ${\n                        isPricingEnabled && currencyCode && formattedPrice\n                          ? `<div class="bx-dest-content__summary-price">${interpolate(\n                              resources.priceLabel,\n                              {\n                                currencyCode,\n                                formattedTotalPrice: formattedPrice,\n                              }\n                            )}</div>`\n                          : ""\n                      }\n                      <a data-isnearby="${isNearbyDestination}" class="bx-dest-content__book-cta ${\n    isCTA ? "bx-dest-content-cta" : "bx-dest-content__link"\n  }" href="${HOST}/SessionHandler.aspx?pub=${publication}&pageurl=/IBE.aspx&section=IBE&showpage=true&TID=${\n    flightType === "OW" ? "OW" : "SB"\n  }&seldcity1=${originIATACode}&selacity1=${destinationIATACode}&selddate1=${formattedStartDate}&seladate1=${formattedEndDate}&seladults=${adults}&selchildren=${children}&selinfants=${infants}&selcabinclass=${\n    cabinClassMapping[cabinClass]\n  }&selcabinclass1=${cabinClassMapping[cabinClass]}&resultby=0${\n    youths ? `&selteenager=${youths}&showTeenager=true` : ""\n  }${ofws ? `&selofw=${ofws}&showOFW=true` : ""}">${resources.bookCTALabel}</a>\n                  </div>\n              </div>`;\n}\nconst breakpointChecker = function () {\n  // if larger viewport and multi-row layout needed\n  if (breakpoint.matches === false) {\n    // clean up old instances and inline styles when available\n    if (slider) slider.destroy(true, true);\n    // or/and do nothing\n    return;\n    // else if a small viewport and single column layout needed\n  } else if (breakpoint.matches === true) {\n    // fire small viewport version of swiper\n    return initSlider();\n  }\n};\nvar slider = null;\nconst wrapperSelector = "div[data-organism=\'c-h-006-page-navigation-blocks\']";\nconst breakpoint = window.matchMedia("(max-width: 769px)");\nbreakpoint.addListener(breakpointChecker);\nconst HOST = "https://www.emirates.com";\nconst cardsLimit = "3";\nconst isPricingEnabled =\n  "Yes" === "Yes";\nconst isCTA = "No" === "Yes";\nconst withDates =\n  "No" === "Yes";\nconst withImage =\n  "Yes" === "Yes";\nconst publication = `/${__INITIAL_STATE__.urlparser.results.country}/${__INITIAL_STATE__.urlparser.results.language}`;\n//Cookie consent check\nlet cookieComplianceEnabled =\n  "Yes" ===\n  "Yes";\nconst cookieComplianceFunctionalGroup =\n  "C0002";\n//Listen for disabling/enabling functional cookies group for new browser\nif (cookieComplianceEnabled) {\n  window.addEventListener("OneTrustGroupsUpdated", function (e) {\n    if (OnetrustActiveGroups.indexOf(cookieComplianceFunctionalGroup) > -1) {\n      //Show experience wrapper here\n      document.querySelector(".bx-destination-recommendation").style.display =\n        "block";\n      render();\n    } else {\n      document.querySelector(".bx-destination-recommendation").style.display =\n        "none";\n    }\n  });\n}\nif (\n  !cookieComplianceEnabled ||\n  (cookieComplianceEnabled &&\n    OnetrustActiveGroups.indexOf(cookieComplianceFunctionalGroup) > -1)\n) {\n    if(typeof window.box301Triggerred === \'undefined\') {\n      window.box301Triggerred = true;\n      insertHTMLAfter(wrapperSelector);\n      var swiperScript = document.createElement("script");\n      swiperScript.src =\n        "https://cdnjs.cloudflare.com/ajax/libs/Swiper/4.5.1/js/swiper.min.js";\n      document.head.appendChild(swiperScript);\n      render();\n    }\n}\n'}},{ref:"44767f8e-17d9-451e-900d-8e8bb6e9b1b6",name:"Without Image",assets:{css:':root {\n  --font-helvetica: HelveticaNeue, Helvetica Neue, Helvetica, Lucida Grande,\n    sans-serif;\n  --font-helvetica-light: HelveticaNeue-Light, Helvetica Neue Light,\n    Helvetica Neue, Helvetica, Arial, Lucida Grande, sans-serif;\n  --font-ek-bold: Emirates-Bold, Helvetica, Arial, Lucida Grande, sans-serif;\n  --text-color: #333333;\n  --white-color: #ffffff;\n  --red-color: #c60c30;\n  --gray-color: #666666;\n}\n.swiper-pagination {\n  display: none;\n}\n\n.bx-destination-recommendation__wrapper {\n  padding: 0 10px;\n}\n.bx-dest-wrapper {\n  display: flex;\n  margin-top: 30px;\n}\n\n.bx-content-header {\n  display: flex;\n  flex-direction: row;\n  margin: 0 auto;\n  justify-content: center;\n  max-width: 775px;\n}\n\n.bx-content-header__text {\n  font-weight: 700;\n  color: var(--text-color);\n  margin: 0 !important;\n  font-size: 3rem;\n  line-height: 3.4rem;\n  text-align: center !important;\n}\n\n.bx-dest-content__wrapper {\n  padding: 15px 20px 30px;\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n  text-align: center;\n  flex: 1;\n}\n.bx-dest-content__wrapper-with-dates {\n  padding: 15px 15px 20px;\n}\n.bx-dest-content__wrapper-without-img {\n  padding: 20px 35px 20px;\n}\n.bx-dest-img {\n  width: 100%;\n  height: 115px;\n}\n.bx-dest-content__wrapper-without-img-container\n  .bx-dest-content__wrapper-with-dates\n  .bx-dest-content__pax {\n  margin: auto 0 20px;\n}\n.bx-dest-content {\n  width: calc(33% - 6px);\n  box-shadow: 0 2px 4px 2px rgb(0 0 0 / 10%);\n  background-color: var(--white-color);\n  border-radius: 3px;\n  display: flex;\n  flex-direction: column;\n}\n\n.bx-dest-content:not(:last-child) {\n  margin-right: 15px;\n}\n\nhtml[dir="rtl"] .bx-dest-content:not(:last-child) {\n  margin-left: 15px;\n  margin-right: 0;\n}\n\n.bx-dest-content__wrapper-ond {\n  display: flex;\n  margin-top: 15px;\n}\n\n.bx-dest-content__wrapper-ond-city {\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n  position: relative;\n}\n.bx-dest-content__wrapper-without-img .bx-dest-content__origin-city {\n  align-items: flex-start;\n}\n.bx-dest-content__wrapper-without-img .bx-dest-content__destination-city {\n  align-items: flex-end;\n}\n.bx-dest-content__wrapper-without-img .bx-dest-content__ond-icon {\n  display: flex;\n  justify-content: center;\n  align-items: flex-end;\n  width: 100%;\n  color: var(--gray-color);\n}\n.bx-dest-content__wrapper-without-img .bx-dest-content__ond-icon i.icon {\n  transform: rotate(90deg);\n  margin: 0 5px;\n}\nhtml[dir="rtl"]\n  .bx-dest-content__wrapper-without-img\n  .bx-dest-content__ond-icon\n  i.icon {\n  transform: rotate(-90deg);\n}\n.bx-dest-content__wrapper-without-img .bx-dest-content__ond-icon:before {\n  content: "";\n  flex: 1 1;\n  border-bottom: 1px solid var(--gray-color);\n  margin: auto;\n  opacity: 0.5;\n}\n\n.bx-dest-content__wrapper-without-img .bx-dest-content__ond-icon:after {\n  content: "";\n  flex: 1 1;\n  border-bottom: 1px solid var(--gray-color);\n  margin: auto;\n  opacity: 0.5;\n}\n.bx-dest-content__wrapper-without-img\n  .bx-dest-content__destination-city\n  .bx-dest-content__city {\n  left: initial;\n}\n.bx-dest-content__wrapper-without-img\n  .bx-dest-content__origin-city\n  .bx-dest-content__city {\n  left: 0;\n  right: auto;\n}\n.bx-dest-content__wrapper-without-img .bx-dest-content__wrapper-ond {\n  width: 100%;\n}\n\n.bx-dest-content__city {\n  font-weight: 700;\n  font-family: var(--font-helvetica);\n  font-size: 10px;\n  line-height: 14px;\n  padding: 0;\n  color: var(--gray-color);\n  letter-spacing: 4px;\n  position: absolute;\n  top: -15px;\n  white-space: nowrap;\n}\nhtml.ar .bx-dest-content__city {\n  font-family: var(--font-ek-bold);\n}\n.bx-dest-content__origin-city .bx-dest-content__city {\n  left: auto;\n  right: 5px;\n}\n\n.bx-dest-content__destination-city .bx-dest-content__city {\n  left: -5px;\n}\n\nhtml[dir="rtl"] .bx-dest-content__origin-city .bx-dest-content__city {\n  right: 0;\n  left: auto;\n}\nhtml.ar .bx-dest-content__city {\n  letter-spacing: normal;\n}\n\n.bx-dest-content__city-iata {\n  font-size: 30px;\n  line-height: 34px;\n  font-family: var(--font-ek-bold);\n}\n\n.bx-dest-content__ond-icon {\n  margin: auto 10px;\n  font-size: 24px;\n}\n.bx-dest-content__wrapper-with-dates .bx-dest-content__seperator {\n  width: 60px;\n  border-bottom: 2px solid var(--red-color);\n  margin: 10px 0 0;\n}\n.bx-dest-content__pax {\n  font-family: var(--font-helvetica);\n  font-size: 12px;\n  line-height: 16px;\n  display: flex;\n  align-items: center;\n  margin: 15px 0;\n}\nhtml.ar .bx-dest-content__pax {\n  font-family: var(--font-ek-bold);\n}\n.bx-dest-content__wrapper-with-dates .bx-dest-content__pax {\n  font-size: 16px;\n  line-height: 20px;\n  text-align: left;\n}\n.bx-dest-content__dates {\n  margin: 20px 0 5px;\n  font-size: 16px;\n  line-height: 20px;\n  display: flex;\n}\n.bx-dest-content__wrapper-with-dates .bx-dest-content__info {\n  display: flex;\n  flex-direction: column;\n  align-items: flex-start;\n}\n\n.bx-dest-content__wrapper-with-dates .bx-dest-content__info i.icon {\n  margin-right: 15px;\n}\nhtml[dir="rtl"]\n  .bx-dest-content__wrapper-with-dates\n  .bx-dest-content__info\n  i.icon {\n  margin-left: 15px;\n  margin-right: 0;\n}\n.bx-dest-content__pax .icon-adult-male-customer {\n  font-size: 15px;\n}\n.bx-dest-content__wrapper-with-dates .bx-dest-content__pax {\n  margin: auto 0 30px;\n  text-align: left;\n}\nhtml[dir="rtl"] .bx-dest-content__wrapper-with-dates .bx-dest-content__pax {\n  text-align: right;\n}\n\n.bx-dest-content__wrapper-with-dates .bx-dest-content__dates {\n  text-align: left;\n}\nhtml[dir="rtl"] .bx-dest-content__wrapper-with-dates .bx-dest-content__dates {\n  text-align: right;\n}\n.bx-dest-content__link {\n  margin-top: auto;\n  font-size: 14px;\n  line-height: 18px;\n  color: #c60c30;\n  text-decoration: underline;\n  font-family: var(--font-helvetica);\n}\nhtml.ar .bx-dest-content__link {\n  font-family: var(--font-ek-bold);\n}\n\n.bx-dest-content__link:hover {\n  text-decoration: none;\n}\n\n.bx-dest-content-cta {\n  height: 18px;\n  padding: 10px 20px;\n  white-space: normal;\n  display: flex;\n  font-size: 14px;\n  line-height: 18px;\n  font-weight: 700;\n  font-family: var(--font-helvetica);\n  justify-content: center;\n  align-items: center;\n  align-self: center;\n  color: var(--text-color);\n  background: var(--white-color);\n  border: 1px solid var(--text-color);\n  width: calc(100% - 40px);\n  overflow: hidden;\n  text-align: center;\n  text-decoration: none;\n  text-overflow: ellipsis;\n  vertical-align: middle;\n  border-radius: 3px;\n  cursor: pointer;\n  transition: 0.1s ease;\n  -webkit-appearance: none !important;\n  -moz-appearance: none !important;\n  appearance: none !important;\n  margin-top: auto;\n}\nhtml.ar .bx-dest-content-cta {\n  font-family: var(--font-ek-bold);\n}\n.bx-dest-content-cta:hover {\n  text-decoration: none !important;\n  box-shadow: 0 0 6px 0 grey;\n}\n\n.bx-dest-content__summary-price {\n  text-align: center;\n  font-family: var(--font-helvetica);\n  font-weight: 700;\n  font-size: 20px;\n  line-height: 24px;\n  margin: 0 0 15px;\n}\nhtml.ar .bx-dest-content__summary-price {\n  font-family: var(--font-ek-bold);\n}\n@media only screen and (max-width: 769px) {\n  .bx-content-header {\n    max-width: 250px;\n  }\n\n  .bx-dest-content:not(:last-child) {\n    margin-right: 10px;\n  }\n  html[dir="rtl"] .bx-dest-content:not(:last-child) {\n    margin-left: 10px;\n    margin-right: 0;\n  }\n  .bx-content-header__text {\n    font-size: 2rem;\n    line-height: 2.4rem;\n  }\n\n  .swiper-container {\n    padding-bottom: 40px;\n  }\n\n  .bx-dest-content {\n    width: calc(100% - 10px);\n    min-width: 100%;\n  }\n  .swiper-pagination-bullet {\n    opacity: 0.8;\n    background: transparent;\n    border: 1px solid #000000;\n  }\n\n  .swiper-pagination-bullet-active {\n    background: #000000;\n  }\n  .swiper-pagination-bullet:focus {\n    border-radius: 50% !important;\n  }\n  .swiper-pagination {\n    display: block;\n  }\n}\n@media only screen and (min-width: 768px) and (max-width: 1023px) {\n  .bx-dest-content {\n    width: calc(33% - 6px);\n  }\n  .bx-content-header {\n    max-width: 450px;\n  }\n}\n\n@media only screen and (min-width: 992px) {\n  .bx-destination-recommendation__wrapper {\n    padding: 0;\n  }\n}\n@media only screen and (min-width: 1024px) {\n  .bx-dest-content__wrapper-without-img-container.bx-dest-content {\n    width: 357px;\n  }\n}\n@media only screen and (min-width: 992px) and (max-width: 1023px) {\n  .bx-destination-recommendation__wrapper {\n    padding-right: 30px;\n    padding-left: 30px;\n  }\n  .bx-dest-content__wrapper-without-img-container.bx-dest-content {\n    width: calc(33% - 6px);\n  }\n}\n@media only screen and (min-width: 1024px) and (max-width: 1199px) {\n  .bx-destination-recommendation__wrapper {\n    padding-right: 50px;\n    padding-left: 50px;\n  }\n  .bx-dest-content__wrapper-without-img-container.bx-dest-content {\n    width: calc(33% - 6px);\n  }\n}\n@media only screen and (min-width: 768px) {\n  .swiper-wrapper {\n    justify-content: center;\n  }\n}\n@media only screen and (min-width: 1200px) {\n  .bx-dest-content {\n    min-width: 357px;\n  }\n}\n',html:'<link href="https://cdnjs.cloudflare.com/ajax/libs/Swiper/4.5.1/css/swiper.min.css" rel="stylesheet"/>\n  ',js:'function sendBoxeverEvent(eventType) {\n  let eventLabel = `BOX301_${eventType}`;\n  var event = {\n    channel: "WEB",\n    type: eventLabel,\n    page: dataLayer[0].pageName,\n    pos: _boxever_settings.pointOfSale,\n    browser_id: Boxever.getID(),\n  };\n  Boxever.eventCreate(event, function (data) {}, "json");\n}\n\nfunction getResourceKeys(resources, resourceMap) {\n  let mappedResources = {};\n  for (var key of Object.keys(resourceMap)) {\n    if (resourceMap[key] in resources) {\n      mappedResources[key] = resources[resourceMap[key]];\n    } else {\n      mappedResources[key] = "";\n    }\n  }\n  return mappedResources;\n}\n\nfunction parseDate(date) {\n    const day = date.substring(0 ,2).includes(\'-\') ? date.substring(0 ,1) : date.substring(0 ,2);\n    const months = [\'Jan\', \'Feb\', \'Mar\', \'Apr\', \'May\', \'Jun\', \'Jul\', \'Aug\', \'Sep\', \'Oct\', \'Nov\', \'Dec\'];\n    const year = date.substring(7);\n    const monthName = date.substring(3, 6);\n    const month = months.findIndex(e => e.toLowerCase() === monthName.toLowerCase());\n    return new Date(\'20\' + year, month, day);\n}\n\nfunction interpolate(pattern = "", data = {}, soft = false) {\n  return pattern.replace(\n    // /\\{(?:(?:\\{(\\w+)\\})|(\\w+))\\}/gm, // matches word characters in single or double braces only\n    // /\\{+(\\w+)\\}+/gm, // matches word characters enclosed in arbitrary number of braces\n    /{+(\\w+([-\']\\w+)*)}+/gm, // matches word characters with dash enclosed in arbitrary number of braces\n    (_, single, double) => {\n      const key = single || double;\n      const value = data[key];\n      if (!value) {\n        console.error("Interpolation key was not found in data object:", key);\n        if (!soft) return `{${key}?}`;\n        return "";\n      }\n      return value;\n    }\n  );\n}\n\nfunction dateInPast(firstDate, secondDate) {\n  if (firstDate.setHours(0, 0, 0, 0) <= secondDate.setHours(0, 0, 0, 0)) {\n    return true;\n  }\n\n  return false;\n}\n\nfunction render() {\n  swiperScript.onload = function () {\n    if (publication) {\n      if (dataLayer && dataLayer[0]) {\n        const lang = dataLayer[0].languageCode.toLowerCase();\n        let airportsFetchURL = `${HOST}/service/airports?lang=${lang}`;\n        let browserID = Boxever.getID();\n        let bxRecentSearchFetchURL = `https://api.boxever.com/v2/callFlows?message={"context":{"clientKey":"${_boxever_settings.client_key}","channel":"WEB","language":"en","currencyCode":"USD","uri":"/home","pointOfSale":"emirates.com/english","browserId":"${browserID}","friendlyId":"recent_searches"}}`;\n        let promises = [\n          fetch(\n            `https://www.emirates.com/service/content/api/v4.0/resources/eol${publication}/Experiences/Destinations/Recent-Searches/Error-Pages`\n          )\n            .then((response) => {\n              return response.json();\n            })\n            .then((results) => {\n              let resources = null;\n              if (results) {\n                resources = results.results;\n              }\n              return resources;\n            }),\n          fetch(airportsFetchURL).then((response) => {\n            return response.json();\n          }),\n          fetch(bxRecentSearchFetchURL).then((response) => {\n            return response.json();\n          }),\n        ];\n\n        Promise.all(promises)\n          .then(([resources, airports, recentSearches]) => {\n            if (\n              recentSearches &&\n              recentSearches.recent_searches &&\n              recentSearches.recent_searches.length &&\n              airports &&\n              airports.results &&\n              resources &&\n              Object.keys(resources).length\n            ) {\n              const resourceMap = {\n                bookCTALabel: `Experiences/Destinations/Recent-Searches/Error-Pages/book-cta-label__text`,\n                widgetTitle: `Experiences/Destinations/Recent-Searches/Error-Pages/header-title__text`,\n                priceLabel: `Experiences/Destinations/Recent-Searches/Error-Pages/price-label__text`,\n                cityTitle: `Experiences/Destinations/Recent-Searches/Error-Pages/city-title__text`,\n                economyClass: `Experiences/Destinations/Recent-Searches/Error-Pages/economy-class__text`,\n                businessClass: `Experiences/Destinations/Recent-Searches/Error-Pages/business-class__text`,\n                firstClass: `Experiences/Destinations/Recent-Searches/Error-Pages/first-class__text`,\n                singlePassengerLabel: `Experiences/Destinations/Recent-Searches/Error-Pages/singular-passenger__text`,\n                twoPassengerLabel: `Experiences/Destinations/Recent-Searches/Error-Pages/two-passengers__text`,\n                multiPassengerLabel: `Experiences/Destinations/Recent-Searches/Error-Pages/plural-passenger__text`,\n              };\n              const resourceKeys = getResourceKeys(resources, resourceMap);\n              const recentSearchLimit = `5`;\n              const availabilityChecksPromises = recentSearches.recent_searches\n                .slice(0, recentSearchLimit)\n                .reduce(function (availabilityChecksPromises, row, index) {\n                  availabilityChecksPromises.push(\n                    fetch(\n                      `${HOST}/service/flights-resumption?origin=${row.origin_iata}&destination=${row.destination_iata}`\n                    ).then((response) => {\n                      return response.json();\n                    })\n                  );\n                  return availabilityChecksPromises;\n                }, []);\n              Promise.all(availabilityChecksPromises)\n                .then(function (result) {\n                  if (result && result.length > 0) {\n                    let avaialableDestination = null;\n                    let operatingDestinations = [];\n\n                    for (var i = 0; i < result.length; i++) {\n                      if (\n                        result[i] &&\n                        result[i].results &&\n                        ((result[i].results.routes &&\n                          Object.keys(result[i].results.routes).length > 0) ||\n                          (result[i].results.nearbyOperatingAirports &&\n                            Object.keys(\n                              result[i].results.nearbyOperatingAirports\n                            ).length > 0))\n                      ) {\n                        const keys = Object.keys(result[i].results.routes);\n                        const row = recentSearches.recent_searches[i];\n                        for (var j = 0; j < keys.length; j++) {\n                          const route = result[i].results.routes[keys[j]];\n                          if (route && route.statusMessage === "Operating") {\n                            avaialableDestination = result[i];\n                            operatingDestinations.push(\n                              getCardData(\n                                row,\n                                airports,\n                                lang,\n                                false,\n                                resourceKeys\n                              )\n                            );\n\n                            break;\n                          }\n                        }\n                        if (\n                          !avaialableDestination &&\n                          result[i].results.nearbyOperatingAirports &&\n                          Object.keys(result[i].results.nearbyOperatingAirports)\n                            .length > 0\n                        ) {\n                          operatingDestinations.push(\n                            getCardData(\n                              Object.assign({}, row, {\n                                destination_iata:\n                                  result[i].results.nearbyOperatingAirports[0]\n                                    .iataCode,\n                              }),\n                              airports,\n                              lang,\n                              false,\n                              resourceKeys\n                            )\n                          );\n                        }\n                      }\n                      if (cardsLimit <= operatingDestinations.length) {\n                        break;\n                      }\n                    }\n\n                    var html = "";\n                    const wrapper = document.querySelector(wrapperSelector);\n                    if (wrapper) {\n                      Promise.allSettled(operatingDestinations)\n                        .then((results) => {\n                          for (var i = 0; i < results.length; i++) {\n                            if (results[i].status === "fulfilled") {\n                              const recommendedDestination = results[i].value;\n                              html += renderCard(\n                                airports,\n                                recommendedDestination.origin_iata,\n                                recommendedDestination.destination_iata,\n                                recommendedDestination.depart_date,\n                                recommendedDestination.return_date,\n                                recommendedDestination.flight_type,\n                                recommendedDestination.booking_class,\n                                recommendedDestination.adults,\n                                recommendedDestination.children,\n                                recommendedDestination.infants,\n                                recommendedDestination.isNearbyDestination,\n                                resourceKeys,\n                                recommendedDestination.currencyCode,\n                                recommendedDestination.price,\n                                recommendedDestination.youths,\n                                recommendedDestination.ofws\n                              );\n                            }\n                          }\n                          if (html) {\n                            wrapper.insertAdjacentHTML(\n                              "afterend",\n                              `<div class="bx-destination-recommendation"><div class="e-container e-container--separator">\n     <div class="bx-destination-recommendation__wrapper"> <div class="bx-content-header">\n          <h2 class="bx-content-header__text">${resourceKeys.widgetTitle}</h2>\n      </div>\n          <div class="bx-dest-wrapper"><div class="swiper-container">      <div class="swiper-wrapper">\n${html}</div>  \n<div class="swiper-pagination"></div>\n</div>  </div> </div>\n   \n</div>\n\n  </div>`\n                            );\n                            const links = document.querySelectorAll(\n                              ".bx-dest-content__book-cta"\n                            );\n                            if (links) {\n                              for (var k = 0; k < links.length; k++) {\n                                links[k].addEventListener("click", (e) => {\n                                  if (e.target.dataset && e.target.dataset.isnearby === "true") {\n                                    sendBoxeverEvent("NEARBY_CLICKED");\n                                  } else {\n                                    sendBoxeverEvent("CLICKED");\n                                  }\n                                });\n                              }\n                            }\n                            breakpointChecker();\n                            sendBoxeverEvent("VIEWED");\n                          }\n                        })\n                        .catch((error) => console.log(error));\n                    }\n                  }\n                })\n                .catch((error) => console.log(error));\n            }\n          })\n          .catch((error) => console.log(error));\n      }\n    }\n  };\n}\nfunction initSlider() {\n  if (document.querySelectorAll(".bx-dest-content").length > 1) {\n    slider = new Swiper(".swiper-container", {\n      slidesPerView: 1,\n      spaceBetween: 10,\n      centeredSlides: true,\n      freeMode: false,\n      grabCursor: true,\n      a11y: true,\n      keyboardControl: true,\n      loop: false,\n      pagination: {\n        el: ".swiper-pagination",\n        clickable: true,\n      },\n    });\n  }\n}\nfunction getCardData(row, airports, lang, isNearbyDestination, resources) {\n  let departDate = parseDate(`${row.depart_date}`);\n  let returnDate = parseDate(`${row.return_date}`);\n  const today = new Date();\n  const tomorrow = new Date(today);\n  tomorrow.setDate(tomorrow.getDate() + 1);\n  let startDate = departDate;\n  let endDate = returnDate;\n  if (dateInPast(departDate, today)) {\n    startDate = tomorrow;\n    endDate = new Date(tomorrow);\n    endDate.setDate(tomorrow.getDate() + 7);\n  }\n  if (row.flight_type === "OW" || !isPricingEnabled) {\n    return Promise.resolve(\n      Object.assign({ isNearbyDestination: isNearbyDestination }, row)\n    );\n  } else {\n    let bestFareFinderAPIHeaders = new Headers();\n    const bestFareAPICabinClassMapping = {\n      Y: "ECONOMY",\n      J: "BUSINESS",\n      F: "FIRST",\n    };\n    bestFareFinderAPIHeaders.append("origin", "https://www.emirates.com");\n    bestFareFinderAPIHeaders.append("Referer", "https://www.emirates.com");\n    bestFareFinderAPIHeaders.append(\n      "Content-Type",\n      "application/json;charset=UTF-8"\n    );\n    bestFareFinderAPIHeaders.append(\n      "Accept",\n      "application/json, text/plain, */*"\n    );\n    bestFareFinderAPIHeaders.append("scheme", "https");\n    bestFareFinderAPIHeaders.append("accept-language", "en-US,en;q=0.9");\n    bestFareFinderAPIHeaders.append("Cache-Control", "no-cache");\n    bestFareFinderAPIHeaders.append("sec-fetch-dest", "empty");\n    bestFareFinderAPIHeaders.append("sec-fetch-mode", "cors");\n    bestFareFinderAPIHeaders.append("sec-fetch-site", "cross-site");\n    bestFareFinderAPIHeaders.append(\n      "em-api-key",\n      "HeQpRjsFI5xlAaSx2onkjc1HTK0ukqA1IrVvd5fvaMhNtzLTxInTpeYB1MK93pah"\n    );\n\n    var body = {\n      priceFormat: {\n        decimalSeparator: ".",\n        thousandSeparator: ",",\n        decimalPlaces: 0,\n      },\n      datePattern: "dd MM yyyy",\n      languageCode: lang,\n      dataExpirationWindow: "1d",\n      faresLimit: "1",\n      interval: "1d",\n      travelClasses: [bestFareAPICabinClassMapping[row.booking_class]],\n      flightType: "ROUND_TRIP",\n      airlineCodes: ["ek"],\n      origin: row.origin_iata,\n      destination: row.destination_iata,\n      dateRange: {\n        start: `${startDate.getFullYear()}-${(\n          "0" +\n          (startDate.getMonth() + 1)\n        ).slice(-2)}-${("0" + startDate.getDate()).slice(-2)}`,\n        end: `${endDate.getFullYear()}-${("0" + (endDate.getMonth() + 1)).slice(\n          -2\n        )}-${("0" + endDate.getDate()).slice(-2)}`,\n      },\n    };\n\n    const requestOptions = {\n      method: "POST",\n      headers: bestFareFinderAPIHeaders,\n      body: JSON.stringify(body),\n    };\n    return fetch(\n      "https://openair-california.airtrfx.com/airfare-sputnik-service/v3/ek/fares/histogram",\n      requestOptions\n    )\n      .then((response) => response.json())\n      .then(function (lowestFaresResults) {\n        if (\n          lowestFaresResults &&\n          lowestFaresResults.histogram &&\n          lowestFaresResults.histogram.length > 0\n        ) {\n          const lowestFare = lowestFaresResults.histogram.find(\n            (x) => x.fares.length > 0\n          );\n          if (lowestFare && lowestFare.fares && lowestFare.fares.length > 0) {\n            let recommendedDestination = lowestFare.fares[0];\n            return Object.assign(\n              {\n                isNearbyDestination: isNearbyDestination,\n                price: recommendedDestination.formattedTotalPrice,\n                currencyCode: recommendedDestination.currencyCode,\n                depart_date: lowestFaresResults.histogram[0].date,\n                return_date:\n                  lowestFaresResults.histogram[\n                    lowestFaresResults.histogram.length - 1\n                  ].date,\n                adults: 1,\n                infants: 0,\n                children: 0,\n                youths: 0,\n              },\n              row\n            );\n          } else {\n            return Object.assign(\n              { isNearbyDestination: isNearbyDestination },\n              row\n            );\n          }\n        }\n      })\n      .catch((error) => console.log(error));\n  }\n}\nfunction renderCard(\n  airports,\n  originIATACode,\n  destinationIATACode,\n  departureDate,\n  returnDate,\n  flightType,\n  cabinClass,\n  adults,\n  children,\n  infants,\n  isNearbyDestination,\n  resources,\n  currencyCode,\n  formattedPrice,\n  youths,\n  ofws\n) {\n  const cabinClassMapping = {\n    Y: 0,\n    J: 1,\n    F: 2,\n  };\n  const cabinClassMappingText = {\n    Y: resources.economyClass,\n    J: resources.businessClass,\n    F: resources.firstClass,\n  };\n  const paxCount = adults + children + infants + youths + (ofws ? ofws : 0);\n  const departureDateObj = parseDate(departureDate);\n  const returnDateObj = parseDate(returnDate);\n  const today = new Date();\n  const tomorrow = new Date(today);\n  tomorrow.setDate(tomorrow.getDate() + 1);\n  let startDate = departureDateObj;\n  let endDate = returnDateObj;\n  if (dateInPast(departureDateObj, today)) {\n    startDate = tomorrow;\n    endDate = new Date(tomorrow);\n    endDate.setDate(tomorrow.getDate() + 7);\n  }\n  const formattedEndDate = `${("0" + endDate.getDate()).slice(\n    -2\n  )}-${endDate.toLocaleDateString("en", {\n    month: "short",\n  })}-${endDate.getFullYear().toString().substring(2)}`;\n  const formattedStartDate = `${("0" + startDate.getDate()).slice(\n    -2\n  )}-${startDate.toLocaleDateString("en", {\n    month: "short",\n  })}-${startDate.getFullYear().toString().substring(2)}`;\n\n  let passengersInfoTitle = interpolate(resources.singlePassengerLabel, {\n    cabinClass: cabinClassMappingText[cabinClass.toUpperCase()],\n  });\n  if (paxCount === 2) {\n    passengersInfoTitle = interpolate(resources.twoPassengerLabel, {\n      cabinClass: cabinClassMappingText[cabinClass.toUpperCase()],\n    });\n  } else if (paxCount > 2) {\n    passengersInfoTitle = interpolate(resources.multiPassengerLabel, {\n      paxCount,\n      cabinClass: cabinClassMappingText[cabinClass.toUpperCase()],\n    });\n  }\n  return `          <div class="bx-dest-content swiper-slide ${\n    !withImage ? "bx-dest-content__wrapper-without-img-container" : ""\n  }">\n                  ${\n                    withImage\n                      ? `<img alt="" loading="lazy" class="bx-dest-img" src="https://c.ekstatic.net/shared/images/destination/v1/airports/${destinationIATACode}/810x270.jpg" />`\n                      : ""\n                  }\n                  <div class="bx-dest-content__wrapper ${\n                    withDates ? "bx-dest-content__wrapper-with-dates" : ""\n                  } ${\n    !withImage ? "bx-dest-content__wrapper-without-img" : ""\n  }">\n                      <div class="bx-dest-content__wrapper-ond">\n                      <div class="bx-dest-content__wrapper-ond-city bx-dest-content__origin-city">\n                          <div class="bx-dest-content__city">${interpolate(\n                            resources.cityTitle,\n                            {\n                              cityShortName: airports.results[\n                                originIATACode\n                              ].city.shortName.toUpperCase(),\n                            }\n                          )}</div>\n                           <div class="bx-dest-content__city-iata">${originIATACode}</div>\n                          </div>\n                          <div class="bx-dest-content__ond-icon"><i class="icon ${\n                            withImage\n                              ? flightType === "RT"\n                                ? "icon-return-flight"\n                                : "icon-one-way-flight"\n                              : "icon-airplane"\n                          }"></i></div>\n                          <div class="bx-dest-content__wrapper-ond-city bx-dest-content__destination-city">\n                          <div class="bx-dest-content__city">${interpolate(\n                            resources.cityTitle,\n                            {\n                              cityShortName: airports.results[\n                                destinationIATACode\n                              ].city.shortName.toUpperCase(),\n                            }\n                          )}</div>\n                            <div class="bx-dest-content__city-iata">${destinationIATACode}</div>\n\n                     </div>\n                      </div>\n                      ${\n                        withDates && withImage\n                          ? \'<div class="bx-dest-content__seperator"></div>\'\n                          : ""\n                      }\n                      ${withDates ? \'<div class="bx-dest-content__info">\' : ""}\n                                       ${\n                                         withDates\n                                           ? `<div class="bx-dest-content__dates">\n                      <i class="icon icon-calendar"></i>\n${("0" + startDate.getDate()).slice(-2)}.${(\n                                               "0" +\n                                               (startDate.getMonth() + 1)\n                                             ).slice(\n                                               -2\n                                             )}.${startDate.getFullYear()}${\n                                               flightType === "RT"\n                                                 ? ` - ${(\n                                                     "0" + endDate.getDate()\n                                                   ).slice(-2)}.${(\n                                                     "0" +\n                                                     (endDate.getMonth() + 1)\n                                                   ).slice(\n                                                     -2\n                                                   )}.${endDate.getFullYear()}`\n                                                 : ""\n                                             }</div>`\n                                           : ""\n                                       }\n\n                      <div class="bx-dest-content__pax">${\n                        withDates\n                          ? \'<i class="icon icon-adult-male-customer"></i>\'\n                          : ""\n                      }<span>${passengersInfoTitle}</span></div>\n                           ${withDates ? "</div>" : ""}\n\n                      ${\n                        isPricingEnabled && currencyCode && formattedPrice\n                          ? `<div class="bx-dest-content__summary-price">${interpolate(\n                              resources.priceLabel,\n                              {\n                                currencyCode,\n                                formattedTotalPrice: formattedPrice,\n                              }\n                            )}</div>`\n                          : ""\n                      }\n                      <a data-isnearby="${isNearbyDestination}" class="bx-dest-content__book-cta ${\n    isCTA ? "bx-dest-content-cta" : "bx-dest-content__link"\n  }" href="${HOST}/SessionHandler.aspx?pub=${publication}&pageurl=/IBE.aspx&section=IBE&showpage=true&TID=${\n    flightType === "OW" ? "OW" : "SB"\n  }&seldcity1=${originIATACode}&selacity1=${destinationIATACode}&selddate1=${formattedStartDate}&seladate1=${formattedEndDate}&seladults=${adults}&selchildren=${children}&selinfants=${infants}&selcabinclass=${\n    cabinClassMapping[cabinClass]\n  }&selcabinclass1=${cabinClassMapping[cabinClass]}&resultby=0${\n    youths ? `&selteenager=${youths}&showTeenager=true` : ""\n  }${ofws ? `&selofw=${ofws}&showOFW=true` : ""}">${resources.bookCTALabel}</a>\n                  </div>\n              </div>`;\n}\nconst breakpointChecker = function () {\n  // if larger viewport and multi-row layout needed\n  if (breakpoint.matches === false) {\n    // clean up old instances and inline styles when available\n    if (slider) slider.destroy(true, true);\n    // or/and do nothing\n    return;\n    // else if a small viewport and single column layout needed\n  } else if (breakpoint.matches === true) {\n    // fire small viewport version of swiper\n    return initSlider();\n  }\n};\nvar slider = null;\nconst wrapperSelector = "div[data-organism=\'c-h-006-page-navigation-blocks\']";\nconst breakpoint = window.matchMedia("(max-width: 769px)");\nbreakpoint.addListener(breakpointChecker);\nconst HOST = "https://www.emirates.com";\nconst cardsLimit = "3";\nconst isPricingEnabled =\n  "No" === "Yes";\nconst isCTA = "No" === "Yes";\nconst withDates =\n  "Yes" === "Yes";\nconst withImage =\n  "No" === "Yes";\nconst publication = `/${__INITIAL_STATE__.urlparser.results.country}/${__INITIAL_STATE__.urlparser.results.language}`;\n//Cookie consent check\nlet cookieComplianceEnabled =\n  "Yes" ===\n  "Yes";\nconst cookieComplianceFunctionalGroup =\n  "C0002";\n//Listen for disabling/enabling functional cookies group for new browser\nif (cookieComplianceEnabled) {\n  window.addEventListener("OneTrustGroupsUpdated", function (e) {\n    if (OnetrustActiveGroups.indexOf(cookieComplianceFunctionalGroup) > -1) {\n      //Show experience wrapper here\n      document.querySelector(".bx-destination-recommendation").style.display =\n        "block";\n      render();\n    } else {\n      document.querySelector(".bx-destination-recommendation").style.display =\n        "none";\n    }\n  });\n}\nif (\n  !cookieComplianceEnabled ||\n  (cookieComplianceEnabled &&\n    OnetrustActiveGroups.indexOf(cookieComplianceFunctionalGroup) > -1)\n) {\n    if(typeof window.box301Triggerred === \'undefined\') {\n      window.box301Triggerred = true;\n      insertHTMLAfter(wrapperSelector);\n      var swiperScript = document.createElement("script");\n      swiperScript.src =\n        "https://cdnjs.cloudflare.com/ajax/libs/Swiper/4.5.1/js/swiper.min.js";\n      document.head.appendChild(swiperScript);\n      render();\n    }\n}\n'}}]},{ref:"f5f606e0-4c77-422f-913a-8747ec58431a",name:"EM-172 m--a-global-metrics (IBE)",revision:19,archived:!1,target:{script:"/* eslint-disable no-inner-declarations */\n(function(window, isDevMode) {\n  var _CNAME_ = 'lc-gm';\n  var _SNAME_ = 'renderer';\n  var safeLog = debug(_CNAME_)(_SNAME_);\n\n  safeLog.info();\n\n  /**\n   * ! IMPORTANT !\n   * Before code review please check if all business requirements are met.\n   * Please refer to README.md#business-requirements to see checklist for a standard campaign for Emirates.\n   *\n   * Platform Notes:\n   * - In order to trigger experience - call `targetingPassed()` method.\n   * - In order to provide better debugging - please log every failed targeting rule with a separate log message.\n   *\n   * Dev Notes:\n   * - amend flow rules according to ATs\n   * - amend page targeting according to ATs\n   * - add metrics according to ATs\n   * - amend when `triggerExperience` is called according to ATs\n   */\n\n  try {\n    // targeting logic goes here\n    var CABIN_CLASSES = {\n      'F': {\n        code: 'F',\n        mobileCode: 'f',\n        name: 'First',\n        value: 2,\n      },\n      'B': {\n        code: 'B',\n        mobileCode: 'j',\n        name: 'Business',\n        value: 1,\n      },\n      'E': {\n        code: 'E',\n        mobileCode: 'y',\n        name: 'Economy',\n        value: 0,\n      }\n    };\n    var CABIN_BRANDS = {\n      'FP': {\n        code: 'FP',\n        name: 'Flex Plus',\n        value: 3,\n      },\n      'FX': {\n        code: 'FX',\n        name: 'Flex',\n        value: 2,\n      },\n      'SA': {\n        code: 'SA',\n        name: 'Saver',\n        value: 1,\n      },\n      'SP': {\n        code: 'SP',\n        name: 'Special',\n        value: 0,\n      },\n    };\n    var FLOW_RULES = [\n      {\n        name: 'Run once (script was already executed on the page)',\n        handler: isFirstRun,\n      },\n      {\n        name: 'Browser (not IE)',\n        handler: function() { return !isIE(); },\n      },\n      {\n        name: 'Device (Desktop, Mobile WEB)',\n        handler: function() { return isDesktop() || (isMobile() && isMobileWeb()); },\n      },\n      {\n        name: 'POS (not US)',\n        handler: function() { return !isUS(); },\n      },\n    ];\n\n    return waitFor(function() {\n      return window.dataLayer && window.dataLayer.length;\n    }).then(function() {\n      var isFlowValid = checkFlowTargeting(FLOW_RULES);\n\n      if (!isFlowValid) {\n        return false;\n      }\n\n      if (isDesktop()) {\n        initMetrics();\n      } else if (isMobile()) {\n        initMobileMetrics();\n      }\n\n      return triggerExperience();\n    });\n\n    function initMobileMetrics() {\n      if (isMobileSelectFlightPage()) {\n        store('upsell', { selectFlight: {} });\n        store('fare', { extras: itinerary });\n        store('upsell', { extras: {} });\n\n        onMobileFareSelection(function(fareOptionEl) {\n          var selectFlightUpsell = getMobileSelectFlightUpsell(fareOptionEl);\n          store('upsell', selectFlightUpsell);\n        });\n      }\n\n      if (isMobilePassengerDetailsPage()) {\n        var exchRate = getMobileExchRate();\n        trackSelectFlightUpsellMetric(exchRate, function() {\n          store('upsell', { selectFlight: {} }); // clear used data\n        });\n      }\n\n      if (isMobileExtrasPage() || isMobileUpsellPage()) {\n        var upsell = getMobileExtrasUpsell();\n        var itinerary = getMobileCurrentFare();\n\n        if (upsell) {\n          // store upsell\n          var upsellValueUSD = parseNum(upsell.value.replace(/^(\\D)|(\\D)$/gi, ''));\n          var upsellData = getUpsellData(itinerary);\n\n          store('upsell', { extras: Object.assign({}, upsellData, {\n            value: upsellValueUSD,\n          })});\n        } else {\n          // set initial fare + clear upsell\n          store('fare', { extras: itinerary });\n          store('upsell', { extras: {} }); // clear used data\n        }\n      }\n\n      if (isMobilePaymentPage()) {\n        trackExtrasUpsellMetric(function() {\n          store('fare', {}); // clear used data\n          store('upsell', { extras: {} }); // clear used data\n        });\n      }\n    }\n\n    function initMetrics() {\n      if (isSelectFlightPage()) {\n        store('upsell', { selectFlight: {} });\n        store('fare', { extras: itinerary });\n        store('upsell', { extras: {} });\n\n        waitFor(function() {\n          return window.$ && window.$.fn && window.$.subscribe;\n        }).then(function() {\n          window.$.subscribe('fbr:fare:selected', function(data) {  // fare brand selection\n            var selectFlightUpsell = getSelectFlightUpsell(data);\n            store('upsell', selectFlightUpsell);\n          });\n        }).catch(function(err) {\n            safeLog.error(err);\n        });\n      }\n\n      if (isPassengerDetailsPage()) {\n        var exchRate = getPassengersPageExchRate();\n        trackSelectFlightUpsellMetric(exchRate, function() {\n          store('upsell', { selectFlight: {} }); // clear used data\n        });\n      }\n\n      if (isExtrasPage()) {\n        var upsellLegType = getDLProp('upgradeClassChoiceIBE');\n        var itinerary = getCurrentFare();\n\n        if (upsellLegType) {\n          // store upsell\n          waitForUpgradesHTML().then(function(upgradesEl) {\n            var upsellValueUSD = getDesktopUpsellValueUSD(upgradesEl);\n            var upsellData = getUpsellData(itinerary);\n\n            store('upsell', { extras: Object.assign({}, upsellData, {\n              value: upsellValueUSD,\n            })});\n          });\n        } else {\n          // set initial fare + clear upsell\n          store('fare', { extras: getCurrentFare() });\n          store('upsell', { extras: {} }); // clear used data\n        }\n      }\n\n      if (isPaymentPage()) {\n        trackExtrasUpsellMetric(function() {\n          store('fare', {}); // clear used data\n          store('upsell', { extras: {} }); // clear used data\n        });\n      }\n\n      // success checkout metrics\n      if (isCheckoutConfirmPage()) {\n        var flightRevenueUSD = getFlightRevenueUSD();\n        var exchangeRate = flightRevenueUSD / getFlightRevenuePOO();\n        var totalRevenueUSD = +(getTotalRevenuePOO() * exchangeRate).toFixed(2);\n        var transactionIDIBE = getDLProp('transactionIDIBE') || 'N/A';\n        var paymentType = getDLProp('paymentMethodType') || 'N/A';\n\n        trackMetric('conversion', {\n          value: 1,\n          transactionIDIBE: transactionIDIBE,\n          paymentType: paymentType,\n        });\n        trackMetric('revenue', {\n          value: totalRevenueUSD,\n          transactionIDIBE: transactionIDIBE,\n          paymentType: paymentType,\n        });\n        trackMetric('flight-revenue', {\n          value: flightRevenueUSD,\n          transactionIDIBE: transactionIDIBE,\n          paymentType: paymentType,\n        });\n\n        if (hasAncillary()) {\n          var ancillaryRevenueUSD = +(getAncillaryRevenuePOO() * exchangeRate).toFixed(2);\n\n          trackMetric('ancillary-revenue', {\n            value: ancillaryRevenueUSD,\n            transactionIDIBE: transactionIDIBE,\n            paymentType: paymentType,\n          });\n        }\n      }\n    }\n\n    /** Actions */\n\n    function onMobileFareSelection(cb) {\n      document.addEventListener('click', function(event) {\n        if (event.target.matches('.fare-option-card .continue-btn')) {\n          var fareOptionEl = event.target.closest('.fare-option-card');\n          cb(fareOptionEl);\n        }\n      });\n    }\n\n    function getMobileSelectFlightUpsell(cardEl) {\n      var upsell = retrieve('upsell') || {};\n      var fareData = cardEl.id.split('-');\n      var leg = fareData[0] === 'ob' ? 'OUTBOUND' : 'INBOUND';\n      var upsellValue = getUpsellValue(cardEl);\n      var isLowest = upsellValue === 0;\n\n      upsell.selectFlight = upsell.selectFlight || {};\n\n      if (isLowest) {\n        upsell.selectFlight[leg] = {};\n      } else {\n        var cabinCode = fareData[2]; // y\n        var cabinName = getFareCabin(cabinCode);\n        var upsellType = getUpsellType(cardEl, cabinCode);\n        var upsellBrand = getFareBrand(fareData[1]);\n\n        upsell.selectFlight[leg] = {\n          type: upsellType.toUpperCase(), // brand | cabin\n          cabin: cabinName.toUpperCase(), // Business | Economy\n          brand: upsellBrand.toUpperCase(), // Saver | Flex\n          value: upsellValue, // 123.45\n        };\n      }\n\n      return upsell;\n\n      function getFareCabin(selectedCabinCode) {\n        var knownCabinCode = Object.keys(CABIN_CLASSES).find(function(key) {\n          return CABIN_CLASSES[key].mobileCode === selectedCabinCode;\n        });\n\n        if (knownCabinCode) {\n          return CABIN_CLASSES[knownCabinCode].name;\n        }\n\n        return selectedCabinCode;\n      }\n\n      function getFareBrand(selectedFare) {\n        return selectedFare === 'flexplus' ? 'flex plus' : selectedFare;\n      }\n\n      function getUpsellValue(selectedEl) {\n        var cheapestOptionPriceEl = selectedEl\n          .closest('app-fare-option-brand')\n          .querySelector('app-fare-option-brand-cabin .fare-opt-cabin-padding > *:first-child .fare-opt-cabin-price');\n        var basePrice = cheapestOptionPriceEl && cheapestOptionPriceEl.textContent.trim();\n        var selectedPrice = getFarePrice(selectedEl);\n\n        return +(parseNum(selectedPrice) - parseNum(basePrice)).toFixed(2);\n      }\n\n      function getFarePrice(selectedEl) {\n        var priceEl = selectedEl\n          .closest('.fare-option-card')\n          .querySelector('.card-header .price strong');\n        var value = priceEl && priceEl.textContent.trim();\n\n        return value || 0;\n      }\n\n      function getUpsellType(selectedEl, selectedCabin) {\n        var cheapestCabinEl = selectedEl.closest('app-fare-option-brand').querySelector('app-fare-option-brand-cabin .fare-opt-cabin-padding > *:first-child > *:first-child');\n        var cheapestCabinCode = cheapestCabinEl && cheapestCabinEl.className.replace('fare-opt-cabin-', '') || '';\n\n        return cheapestCabinCode.toUpperCase() !== selectedCabin.toUpperCase() ? 'CABIN' : 'BRAND';\n      }\n    }\n\n    function getSelectFlightUpsell(fareData) {\n      var upsell = retrieve('upsell') || {};\n      var leg = fareData.leg === 'leg-OB' ? 'OUTBOUND' : 'INBOUND';\n\n      upsell.selectFlight = upsell.selectFlight || {};\n\n      if (fareData.isLowest) {\n        upsell.selectFlight[leg] = {};\n      } else {\n        var $selectedOptionEl = $('.ts-fbr-option[data-target=\"' + fareData.target + '\"]');\n        var upsellValue = getUpsellValue($selectedOptionEl);\n        var upsellType = getUpsellType($selectedOptionEl);\n        var upsellBrand = getFareBrand(fareData);\n\n        upsell.selectFlight[leg] = {\n          type: upsellType.toUpperCase(), // brand | cabin\n          cabin: fareData.class.toUpperCase(), // Business | Economy\n          brand: upsellBrand.toUpperCase(), // Saver | Flex\n          value: upsellValue, // 123.45\n        };\n      }\n\n      return upsell;\n\n      function getFareBrand(data) {\n        var knownBrands = Object.keys(CABIN_BRANDS).map(function(key) {\n          return CABIN_BRANDS[key].name;\n        });\n\n        if (knownBrands.indexOf(data.fare) !== -1) {\n          return data.fare;\n        }\n\n        // for some languages fare brand 'Special' is localized\n        try {\n          var brandInfoEl = document.querySelector('[data-target=\"' + data.target + '\"] .ts-fbr-brand-table__select-btn--selected .brandInfo');\n          var brandInfo = brandInfoEl ? JSON.parse(brandInfoEl.value) : {};\n\n          return brandInfo.FareBrand || data.fare;\n        } catch (err) {\n          safeLog.error('Parsing error: ', err);\n        }\n\n        return data.fare;\n      }\n\n      function getUpsellValue($selectedEl) {\n        var $cheapestOptionPriceEl = $selectedEl\n          .closest('.flights-row')\n          .find('.ts-fbr-brand-table__cell--price .ts-fbr-brand-table__price-value')\n          .first();\n        var basePrice = $cheapestOptionPriceEl && $cheapestOptionPriceEl.text().trim();\n        var selectedPrice = fareData.price;\n\n        return +(parseNum(selectedPrice) - parseNum(basePrice)).toFixed(2);\n      }\n\n      function getUpsellType($selectedEl) {\n        var options = $selectedEl\n          .parent()\n          .children()\n          .map(function(i, el) {\n            return $(el).attr('sort-order');\n          });\n        var selectedOption = $selectedEl.attr('sort-order');\n\n        return Array.from(options).indexOf(selectedOption) > 0 ? 'CABIN' : 'BRAND';\n      }\n    }\n\n    function trackSelectFlightUpsellMetric(exchRate, callback) {\n      var upsell = retrieve('upsell');\n      var hasNoUpsell = !upsell\n        || !upsell.selectFlight\n        || !Object.keys(upsell.selectFlight).reduce(function(acc, key) {\n          return acc + (upsell.selectFlight[key].value || 0);\n        }, 0);\n\n      if (hasNoUpsell) return;\n\n      var upsellLegs = Object.keys(upsell.selectFlight)\n        .map(function(key) {\n          var leg = upsell.selectFlight[key];\n          return Object.assign({}, leg, {\n            leg: key,\n            value: +((leg.value || 0) * exchRate).toFixed(2),\n          });\n        })\n        .filter(function(leg) {\n          return !!leg.value;\n        })\n        .sort(function(a, b) {\n          return a.value > b.value ? -1 : 1;\n        });\n\n      var upsellData = Object.assign({}, upsellLegs[0], {\n        stage: 'SELECT FLIGHT',\n        leg: upsellLegs.length > 1 ? 'MIXED' : upsellLegs[0].leg,\n        value: upsellLegs.reduce(function(acc, leg) {\n          return +(acc + leg.value).toFixed(2);\n        }, 0),\n      });\n      var upsellType = upsellData.type.toLowerCase();\n\n      delete upsellData.type;\n      trackMetric(upsellType + '-upsell', upsellData, callback);\n    }\n\n    function getMobileExtrasUpsell() {\n      return window.dataLayer.find(function(el) {\n        return el.Category && el.Category === 'Ancillary' && el.Action === 'Add to Cart';\n      });\n    }\n\n    function getMobileCurrentFare() {\n      return [\n        // { key: 'route', id: 'allSegmentsGtm' }, // DXB-SEZ_SEZ-DXB\n        { key: 'cabin', id: 'cabinClassStrGtm' }, // J_F\n        { key: 'brand', id: 'fareBrandSelected' }, // SAVER_FLEX\n      ].reduce(function(acc, item) {\n        var el = document.getElementById(item.id);\n        var value = el && el.value || '';\n        var values = value.split('_');\n\n        if (item.key === 'cabin') {\n          values = values.map(function(classMobileCode) {\n            var classCode = Object.keys(CABIN_CLASSES).find(function(key) {\n              return CABIN_CLASSES[key].mobileCode.toUpperCase() === classMobileCode;\n            });\n\n            return classCode ? CABIN_CLASSES[classCode].name : ''; // classMobileCode\n          });\n        }\n\n        values.forEach(function(val, i) {\n          var leg = i === 0 ? 'OUTBOUND' : 'INBOUND';\n\n          acc[leg] = acc[leg] || {};\n          acc[leg][item.key] = val;\n        });\n\n        return acc;\n      }, {});\n    }\n\n    function getDesktopUpsellValueUSD(upgradesEl) {\n      var upsellEl = Array.from(upgradesEl ? upgradesEl.children : []).filter(isVisible)[0];\n      return upsellEl && getUpsellValue(upsellEl) || 0;\n\n      function isVisible(el) {\n        return el.style.display !== 'none';\n      }\n\n      function getUpsellValue(el) {\n        var currency = getDLProp('posCurrencyCode');\n        var regex = new RegExp(currency + '\\\\s(.*)');\n        var exchRate = getExchRate();\n        var valueEl = el.querySelector('.ts-ur__cell--upgrade');\n        var valueRaw = valueEl && valueEl.textContent.trim().match(regex)[1];\n        var valuePOO =  valueRaw ? parseNum(valueRaw) : 0;\n        var valueUSD = +(valuePOO * exchRate).toFixed(2);\n\n        return valueUSD;\n      }\n\n      function getExchRate() {\n        var flightValuePOO = getDLProp('productPricePerAdultPOOCurrency');\n        var flightValueUSD = getDLProp('productPricePerAdultUSD'); // productPricePerAdultUSD | productPricePerAdultPOSSiteCurrency\n        return flightValueUSD / flightValuePOO;\n      }\n    }\n\n    function waitForUpgradesHTML() {\n      return waitFor(function() {\n        return document.getElementById('divUpgrades')\n          || (\n            document.querySelector('#dvUpsell [id*=\"upgradeBound\"]')\n            && document.querySelector('#dvUpsell [id*=\"upgradeBound\"]').parentNode\n          );\n      });\n    }\n\n    function getUpsellData(upsellFare) {\n      var baseFare = retrieve('fare').extras;\n      var upsellLegsSorted = getSortedUpsell(upsellFare, baseFare);\n      var highestUpsellLeg = upsellLegsSorted[0];\n      var highestUpsell = upsellFare[highestUpsellLeg];\n      var upsellData = {\n        type: highestUpsell.cabin !== baseFare[highestUpsellLeg].cabin ? 'CABIN' : 'BRAND',\n        cabin: highestUpsell.cabin.toUpperCase(),\n        brand: highestUpsell.brand.toUpperCase(),\n        leg: upsellLegsSorted.length > 1 ? 'MIXED' : highestUpsellLeg.toUpperCase(),\n      };\n\n      return upsellData;\n    }\n\n    function getSortedUpsell(upsell, base) {\n      return Object.keys(upsell)\n        .filter(function(key) {\n          return upsell[key].cabin !== base[key].cabin\n            || upsell[key].brand !== base[key].brand;\n        })\n        .sort(function(a, b) {\n          var aWeight = getUpsellWeight(a);\n          var bWeight = getUpsellWeight(b);\n\n          if (aWeight === bWeight) return 0;\n\n          return aWeight < bWeight ? 1 : -1;\n        });\n\n      function getUpsellWeight(key) {\n        var cabinDiff = getCabinRate(upsell[key].cabin) - getCabinRate(base[key].cabin);\n        var brandDiff = getBrandRate(upsell[key].brand) - getBrandRate(base[key].brand);\n        return cabinDiff * 10 + brandDiff;\n      }\n    }\n\n    function trackExtrasUpsellMetric(cb) {\n      var upsell = retrieve('upsell');\n\n      if (!upsell || !upsell.extras || !Object.keys(upsell.extras).length) return;\n\n      var upsellData = Object.assign({}, upsell.extras, {\n        stage: 'CHOOSE EXTRAS',\n      });\n      var upsellType = upsellData.type.toLowerCase();\n\n      delete upsellData.type;\n\n      trackMetric(upsellType + '-upsell', upsellData, cb);\n    }\n\n    function getPassengersPageExchRate() {\n      var flightValuePOO = getDLProp('selectedFlightValuePOOIBE');\n      var flightValueUSD = getDLProp('selectedFlightValueUSDIBE');\n      return flightValueUSD / flightValuePOO;\n    }\n\n    function getMobileExchRate() {\n      var flightValuePOO = getDLProp('productPricePerAdultPOOCurrency');\n      var flightValueUSD = getDLProp('productPricePerAdultUSD'); // productPricePerAdultPOSSiteCurrency\n      return Number(flightValueUSD) / Number(flightValuePOO);\n    }\n\n    function getFlightRevenueUSD() {\n      return +getDLProp('transactionRevTotalUSDIBE') || 0;\n    }\n\n    function getFlightRevenuePOO() {\n      return +getDLProp('transactionRevTotalPOOIBE') || 0; // transactionRevTotalPOOIBE | transactionRevTotalIBE\n    }\n\n    function getTotalRevenuePOO() {\n      var totalsRowEl = document.querySelector('.flight-charges > *:last-child [data-ek-id=\"ek-total-cost\"]');\n      return parseRevenueValue(totalsRowEl && totalsRowEl.textContent);\n    }\n\n    function getAncillaryRevenuePOO() {\n      var addonsRowEl = document.querySelector('[id*=\"AddOnsHeader\"]');\n      var valueAttr = addonsRowEl && addonsRowEl.getAttribute('aria-label') || '';\n      return parseRevenueValue(valueAttr);\n    }\n\n    function parseRevenueValue(str) {\n      var currency = getDLProp('transactionPOOCurrencyIBE'); // posCurrencyCode | transactionCurrencyIBE | transactionPOOCurrencyIBE\n      var regex = new RegExp(currency + '(.*)', 'g');\n      var valueStr = str && str.match(regex);\n\n      return valueStr && valueStr[0] && parseNum(valueStr[0].replace(currency, '').trim()) || 0;\n    }\n\n    function getCurrentFare() {\n      return ['INBOUND', 'OUTBOUND'].reduce(function(acc, leg) {\n        var legCabinBrand = getCabinBrand(leg);\n\n        acc[leg] = {\n          cabin: getCabinName(legCabinBrand.slice(0, 1)),\n          brand: getBrandName(legCabinBrand.slice(1)),\n        };\n        return acc;\n      }, {});\n    }\n\n    function getCabinBrand(leg) {\n      var legName = leg.slice(0, 1).toUpperCase() + leg.slice(1).toLowerCase();\n      return getDLProp('cabinAndBrand' + legName + 'Code') || '';\n    }\n\n    function getCabinName(code) {\n      return (CABIN_CLASSES[code] || {}).name;\n    }\n\n    function getBrandName(code) {\n      return (CABIN_BRANDS[code] || {}).name;\n    }\n\n    function getCabinRate(name) {\n      var code = Object.keys(CABIN_CLASSES).find(function(key) {\n        return CABIN_CLASSES[key].name === name;\n      });\n\n      return code ? CABIN_CLASSES[code].value : Object.keys(CABIN_CLASSES).length;\n    }\n\n    function getBrandRate(name) {\n      var code = Object.keys(CABIN_BRANDS).find(function(key) {\n        return CABIN_BRANDS[key].name === name;\n      });\n\n      return code ? CABIN_BRANDS[code].value : Object.keys(CABIN_BRANDS).length;\n    }\n\n    function getPassengerCount() { // eslint-disable-line no-unused-vars\n      return getDLProp('passengerCountFlight')\n        || getDLProp('passengerCount');\n    }\n\n    /**\n     * Triggers the experience with a fallback for local development\n     * or in case if there is no async targeting in Boxever platform\n     * @returns {Boolean} Resolves to true in case if async targeting is not in place\n     */\n    function triggerExperience() { // eslint-disable-line no-unused-vars\n      try {\n        targetingPassed();\n      } catch (err) {\n        safeLog.info('Method targetingPassed is not yet available');\n      }\n\n      return true;\n    }\n\n    /**\n     * Checks flow targeting rules provided including:\n     * - a function to be checked and\n     * - a rule name to be displayed in case if check fails\n     * and resolves to true if flow is valid\n     * @param {Array<Object>} rules Set of rules to be checked\n     * @returns {Boolean} Resolves to true if targeting check passes\n     */\n    function checkFlowTargeting(rules) {\n      var failed = false;\n\n      for (var i = 0; i < rules.length; i++) {\n        var ruleName = rules[i].name;\n        var handler = rules[i].handler;\n\n        if (!handler()) {\n          safeLog.error('Targeting rules were not met: ', ruleName);\n          failed = true;\n          break;\n        }\n      }\n\n      return !failed;\n    }\n\n    /**\n     * Tracks Boxever metric with specified key and attributes\n     * @param {String} eventName Custom event name\n     * @param {Object} attrs Custom event attributes\n     * @param {Function} cb Callback to be invoked on success\n     * @returns {void}\n     */\n    function trackMetric(eventName, attrs, cb) {\n      var event = Object.assign({}, (attrs || {}), {\n        type: _CNAME_ + '-' + eventName,\n      });\n\n      if (isDevMode) {\n        safeLog.ok(event);\n        return;\n      }\n\n      trackEvent(event, function(data) {\n        safeLog.ok(data, event);\n        cb && cb();\n      });\n    }\n\n    /**\n     * Boxever API wrapper to fire custom event\n     * @param {Object} event Event object containing event key and attributes\n     * @param {Function} cb Callback function that will receive API response as a parameter\n     * @returns {void}\n     */\n    function trackEvent(event, cb) {\n      var baseEvent = {\n        browser_id: window.Boxever.getID(),\n        channel: 'WEB',\n        pos: window.Boxever.pointOfSale,\n      };\n      var customEvent = Object.assign({}, baseEvent, event);\n\n      safeLog.info(customEvent);\n      window._boxeverq = window._boxeverq || [];\n      window._boxeverq.push(function() {\n        window.Boxever.eventCreate(customEvent, cb || function() {}, 'json');\n      });\n    }\n\n    /** Helpers */\n\n    function isCheckoutConfirmPage() {\n      return (/purchase confirmation/gi).test(getDLProp('pageName'));\n    }\n\n    function isSelectFlightPage() {\n      // non fare branded: https://fly2.emirates.com/CAB/IBE/SearchResult.aspx -> \"/ IBE / Search Results / Select a Price\"\n      // fare branded: https://fly2.emirates.com/CAB/IBE/SelectPrice.aspx -> \"/ IBE / Search Results / Select a Price\"\n      return window.location.href.indexOf('SelectPrice.aspx') !== -1;\n    }\n\n    function isMobileSelectFlightPage() {\n      return window.location.pathname.indexOf('/bookaflight/brandedsearch') > -1;\n    }\n\n    function isPassengerDetailsPage() {\n      return !!getDLProp('pageName').match(/passenger details/i);\n    }\n\n    function isMobilePassengerDetailsPage() {\n      return window.location.pathname.indexOf('/IBE/proceedToPassenger') > -1;\n    }\n\n    function isExtrasPage() {\n      return !!getDLProp('pageName').match(/choose extras/i);\n    }\n\n    function isMobileExtrasPage() {\n      return window.location.pathname.indexOf('/IBE/showExtraProducts') > -1;\n    }\n\n    function isMobileUpsellPage() {\n      return window.location.pathname.indexOf('/IBE/upcellFareBrand') > -1;\n    }\n\n    function isPaymentPage() {\n      return (/\\/ payment \\//gi).test(getDLProp('pageName'));\n    }\n\n    function isMobilePaymentPage() {\n      return window.location.pathname.indexOf('/IBE/PaymentDetails') > -1;\n    }\n\n    function isFirstRun() {\n      var wasExecuted = getVar('executed');\n\n      if (!wasExecuted) {\n        setVar('executed', true);\n      }\n\n      return !wasExecuted;\n    }\n\n    function isIE() {\n      return (/msie|trident/gi).test(window.navigator.userAgent);\n    }\n\n    function isMobile() {\n      return (/mobile\\d?\\./).test(window.location.hostname);\n    }\n\n    function isMobileWeb() {\n      if (typeof window.boxeverChannel === 'undefined' && isDevMode) return true;\n      return window.boxeverChannel === 'MOBILE_WEB';\n    }\n\n    function isDesktop() {\n      return getDLProp('platformType') === 'Desktop';\n    }\n\n    function isEngLang() { // eslint-disable-line no-unused-vars\n      return (/^en($|-.*)/i).test(getDLProp('languageCode'));\n    }\n\n    function isUS() {\n      return getDLProp('countryCode') === 'US'\n        || getDLProp('originCountry') === 'US';\n    }\n\n    function hasAncillary() {\n      return document.querySelector('[id*=\"AddOnsHeader\"]');\n    }\n\n    /**\n     * Parse number from string: 1 234.56, 1.234,56 1,234,567.89 etc\n     * @param {String} str String representation of a number\n     * @return {Number} Number\n     */\n    function parseNum(str) {\n      var groups = str.split(/\\D/);\n      var delimiters = str.replace(/\\d/g, '')\n        .split('')\n        .filter(function(item, i, arr) {\n          return arr.indexOf(item) === i;\n        });\n      var tD = '';\n      var dD = '';\n\n      // 1.234,56 | 1,234.56 | 1 234.56 | 1 234,56\n      if (delimiters.length > 1) {\n        tD = delimiters[0];\n        dD = delimiters[delimiters.length - 1];\n\n        return +(str\n          .replace(new RegExp('\\\\' + tD, 'g'), '')\n          .replace(dD, '.')\n        );\n      }\n\n      if (delimiters.length === 1) {\n        // 12.3\n        if (groups[groups.length - 1].length < 3) {\n          dD = delimiters[delimiters.length - 1];\n\n          return +str.replace(dD, '.');\n        }\n\n        // 1,234\n        tD = delimiters[0];\n\n        return +str.replace(new RegExp('\\\\' + tD, 'g'), '');\n      }\n\n      // 123\n      return +str;\n    }\n\n    /**\n     * Stores value under specific key in campaign local storage item\n     * @param {String} key Value key\n     * @param {Any} value Value to be stored\n     * @returns {void}\n     */\n    function store(key, value) {\n      try {\n        var data = retrieve();\n        data[key] = value;\n        window.localStorage.setItem(_CNAME_, JSON.stringify(data));\n      } catch (err) {\n        safeLog.error('LocalStorage error: ', err);\n      }\n    }\n\n    /**\n     * Retrieves value with specific key in campaign local storage item\n     * @param {String} key Value key\n     * @returns {Any} Value stored\n     */\n    function retrieve(key) {\n      try {\n        var storage = window.localStorage.getItem(_CNAME_);\n        var data = storage ? JSON.parse(storage) : {};\n        return key ? data[key] : data;\n      } catch (err) {\n        safeLog.error('LocalStorage error: ', err);\n      }\n\n      return null;\n    }\n\n    function getDLProp(key, recent) {\n      var matches = (window.dataLayer || []).filter(function(chunk) {\n        return !!chunk[key];\n      });\n      var dataIndex = recent ? (matches.length - 1) : 0;\n\n      return dataIndex !== -1 ? (matches[dataIndex] || {})[key] : null;\n    }\n\n    function waitFor(condition, timeout) {\n      var stopTime = typeof timeout === 'number' ? timeout : 7000;\n      var stop = false;\n\n      window.setTimeout(function() {\n        stop = true;\n      }, stopTime);\n\n      return new Promise(function(resolve, reject) { // eslint-disable-line no-undef\n        (function _innerWaitFor() {\n          var value = condition();\n\n          if (stop) {\n            reject();\n          } else if (value) {\n            resolve(value);\n          } else {\n            window.setTimeout(_innerWaitFor, 50);\n          }\n        })();\n      });\n    }\n  } catch (err) {\n    safeLog.error(err);\n  }\n\n  return false;\n\n  function setVar(key, value) {\n    getVar();\n    window.lc[_CNAME_][key] = value;\n  }\n\n  function getVar(key) {\n    window.lc = window.lc || {};\n    window.lc[_CNAME_] = window.lc[_CNAME_] || {};\n    return key ? window.lc[_CNAME_][key] : window.lc[_CNAME_];\n  }\n\n  /* LC safe debug */\n  function debug(u){var n={info:\"blue\",ok:\"green\",error:\"red\"};return function(t){return Object.keys(n).reduce(function(r,e){var o=n[e];r[e]=function(){if(!c())return;var r=(new Date).toTimeString().replace(/\\s(.*)/,\"\");var n=\"%c\"+u+\":\"+e+\" [\"+r+\"] \"+(t||\"\");console.info.apply(this,[n,\"color: \"+o].concat(Array.prototype.slice.call(arguments)))};return r},{})};function c(){return document.cookie.indexOf(\"lc-qa=1\")!==-1||window.location.href.indexOf(\"lc-qa=1\")!==-1}} // eslint-disable-line\n})(typeof unsafeWindow === 'undefined' ? window : unsafeWindow, typeof unsafeWindow !== 'undefined');\n// eslint-disable-next-line spaced-comment\n//# sourceURL=m--a-global-metrics-renderer.js",targetPages:[]},traffic:{type:"advancedTraffic",allocationLow:1,allocationHigh:120,splits:[{ref:"d9bb2d6e-8815-40af-9e59-a4d7808842ef",lowSplit:1,highSplit:120}]},variants:[{ref:"d9bb2d6e-8815-40af-9e59-a4d7808842ef",name:"Original",assets:{css:"",html:"",js:'/* eslint-disable no-inner-declarations */\n(function(window) {\n  var _CNAME_ = \'lc-gm\';\n  var _SNAME_ = \'default\';\n  var safeLog = debug(_CNAME_)(_SNAME_);\n\n  safeLog.info();\n\n  try {\n    // default code goes here\n    document.body.classList.add(_CNAME_ + \'--\' + _SNAME_);\n  } catch (err) {\n    safeLog.error(err);\n  }\n\n  /* LC safe debug */\n  function debug(u){var n={info:"blue",ok:"green",error:"red"};return function(t){return Object.keys(n).reduce(function(r,e){var o=n[e];r[e]=function(){if(!c())return;var r=(new Date).toTimeString().replace(/\\s(.*)/,"");var n="%c"+u+":"+e+" ["+r+"] "+(t||"");console.info.apply(this,[n,"color: "+o].concat(Array.prototype.slice.call(arguments)))};return r},{})};function c(){return document.cookie.indexOf("lc-qa=1")!==-1||window.location.href.indexOf("lc-qa=1")!==-1}} // eslint-disable-line\n})(window);\n// eslint-disable-next-line spaced-comment\n//# sourceURL=m--a-global-metrics-default.js\n'}}]},{ref:"7581e47b-ba36-4148-acb8-b733f3787063",name:"EM-131 - VOC - Sitewide Feedback",revision:49,archived:!1,target:{script:'var exclusions = ["bookingConfirmation", "FlightConfirmation", "OLCI/BoardingDelivery", "IBE", "app-survey"];\n\nfunction isEnglish() {\n    return dataLayer[0].languageCode.substr(0,2) === "EN";\n}\n\nfunction isIreland() {\n    return dataLayer[0].countryCode == "IE";\n}\n\nfunction isExcluded() {\n    for (var i = 0; i < exclusions.length; i++) {\n        if (window.location.href.indexOf(exclusions[i]) >= 0)\n            return true;\n    }\n    return false;\n}\n\nfunction triggerVOC() {\n    if (isEnglish() && !isExcluded()){\n        targetingPassed();\n    }\n}\n\ntriggerVOC();',targetPages:[]},traffic:{type:"advancedTraffic",allocationLow:1,allocationHigh:120,splits:[{ref:"f27462db-1af8-4309-b63e-7461c4657a4a",lowSplit:1,highSplit:120}]},variants:[{ref:"f27462db-1af8-4309-b63e-7461c4657a4a",name:"Personalisation",assets:{css:"#bx-modal_overlay {\n  display: none;\n  justify-content: center;\n  align-items: center;\n  position: fixed;\n  z-index: 999999;\n  left: 0;\n  top: 0;\n  width: 100%;\n  height: 100%;\n  overflow: hidden;\n  background-color: rgba(0,0,0,0.4);\n  font-family: Arial,HelveticaNeue,Helvetica Neue,Helvetica,Lucida Grande,sans-serif;\n}\n\n#bx-modal_overlay .bx-modal_content {\n  display: flex;\n  flex-direction: column;\n  position:relative;\n  background-color: #F6F6F6;\n  margin: 0 auto;\n  border-radius: 4px;\n  box-shadow: 0 2px 10px 6px rgba(0,0,0,0.3);\n  height: 100%;\n  width: 100%;\n  border: none;\n}\n\n@media screen and (min-width: 1024px) {\n  #bx-modal_overlay .bx-modal_content {\n      max-width: 1056px;\n      height: auto;\n      min-height: 100px;\n      width: auto;\n  }\n}\n\n#bx-modal_overlay .bx-modal_button-wrapper {\n  display: flex;\n  margin-top: auto;\n}\n\n#bx-modal_overlay .bx-modal_button {\n  display: inline-block;\n  border-radius: 4px;\n  color: #fff;\n  background-color: #00B377;\n  padding: 10px 23px;\n}\n\n.bx-hidden {\n  display: none ;\n}\n\n.bx-hidden_important {\n  display: none !important;\n}\n\n/* Options Screen */\n.bx-options {\n  display: flex;\n}\n\n.bx-options .abper-112-text {\n  flex-grow: 1;\n  font-size: 14px;\n  line-height: 1.5;\n  margin: 16px 0 30px;\n  padding-bottom: 0;\n}\n\n.abper-112-link {\n  cursor: pointer;\n}\n\n/* Radio button modal */\n\n.bx-modal_content h1 {\n  font-size: 30px;\n  line-height: 34px;\n  font-family: EmiratesSB-Bold,Georgia,\"Times New Roman\",Times,serif !important;\n  max-width: 90%;\n  margin: auto;\n  text-align: center;\n}\n\n.bx-modal_content h4 {\n  color: #333;\n  max-width: 60%;\n  margin: 20px auto 20px;\n  font-family: HelveticaNeue-Light, Helvetica Neue Light, Helvetica Neue, Helvetica, Arial, Lucida Grande, sans-serif !important;\n  font-size: 14px;\n  font-weight: 300;\n  line-height: 1.2;\n}\n\n@media (max-width: 768px) {\n  .bx-modal_content h4 {\n    max-width: 80%;\n  }\n}\n\n.bx-modal_content {\n  text-align: center;\n}\n\n.bx-comment > .bx-comment_textarea {\n  height: 174px;\n  width: 80%;\n  border: 1px solid #666;\n  border-radius: 3px;\n  padding: 15px 18px 16px 20px;\n  resize: none;\n  margin: 10px auto 10px;\n  font-family: HelveticaNeue-Light, Helvetica Neue Light, Helvetica Neue, Helvetica, Arial, Lucida Grande, sans-serif;\n  font-size: 16px;\n  font-weight: 300;\n}\n\n.bx-comment > .bx-comment_warning {\n  color: #333;\n  text-align: left;\n  width: 80%;\n  margin: 10px auto 30px;\n  font-family: HelveticaNeue-Light, Helvetica Neue Light, Helvetica Neue, Helvetica, Arial, Lucida Grande, sans-serif;\n  font-size: 16px;\n  font-style: italic;\n  font-weight: 300;\n}\n\n/* Rating screen */\n.bx-modal_content > #bx-rating {\n  padding: 30px 20px 20px;\n}\n\n.bx-radio_label {\n  display: none;\n}\n\n@media screen and (min-width: 1024px) {\n  .bx-radio_label {\n    right: 0;\n    left: 0;\n    bottom: 10px;\n    position: absolute;\n    font-size: 14px;\n  }\n\n  .rating .bx-star5:hover ~ .bx-label5 {\n     display: block;\n  }\n\n  .rating .bx-star4:hover ~ .bx-label4 {\n     display: block;\n  }\n\n  .rating .bx-star3:hover ~ .bx-label3 {\n     display: block;\n  }\n\n  .rating .bx-star2:hover ~ .bx-label2 {\n     display: block;\n  }\n\n  .rating .bx-star1:hover ~ .bx-label1 {\n     display: block;\n  }\n}\n\n/* Rating Stars */\n.rating {\n  display: inline-block;\n  border: none;\n  height: 75px;\n}\n\n/* :not(:checked) is a filter, so that browsers that don’t support :checked don’t\n follow these rules. Every browser that supports :checked also supports :not(), so\n it doesn’t make the test unnecessarily selective */\n.rating:not(:checked) > input {\n  position:absolute;\n  top:-9999px;\n  clip:rect(0,0,0,0);\n}\n\n.rating:not(:checked) > label {\n  float:right;\n  padding:0.3em .1em;\n  overflow:hidden;\n  white-space:nowrap;\n  cursor:pointer;\n  font-size:300%;\n  line-height:1.2;\n  color:#ddd;\n}\n\n.rating:not(:checked) > label:before {\n  content: url(https://c.ekstatic.net/ecl/iconography/e72585a018510638901dd029c05d0724_40_38.png);\n}\n\n.rating > input:checked ~ label {\n  content: url(https://c.ekstatic.net/ecl/iconography/27b9f781a94a8af00418bf50ea278016_40_38.png);\n}\n\n.rating:not(:checked) > label:hover,\n.rating:not(:checked) > label:hover ~ label {\n  content: url(https://c.ekstatic.net/ecl/iconography/27b9f781a94a8af00418bf50ea278016_40_38.png);\n}\n\n.rating > input:checked + label:hover,\n.rating > input:checked + label:hover ~ label,\n.rating > input:checked ~ label:hover,\n.rating > input:checked ~ label:hover ~ label,\n.rating > label:hover ~ input:checked ~ label {\n  content: url(https://c.ekstatic.net/ecl/iconography/27b9f781a94a8af00418bf50ea278016_40_38.png);\n}\n\n.rating > label:active {\n  position:relative;\n  top:2px;\n  left:2px;\n}\n\n/* Comment Screen */\n.bx-comment {\n  padding: 30px 20px 20px;\n}\n\n/* Thank You Screen */\n.bx-thank_you {\n  padding: 30px 20px 20px;\n}\n\n/* close button */\n.bx-modal__btn-close-icon {\n  background: transparent;\n  top: 0;\n  right: 0;\n  width: 30px;\n  height: 30px;\n  margin-top: 20px;\n  margin-right: 25px;\n  position: absolute;\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  cursor: pointer;\n}\n\n.bx-modal__btn-close-icon:after {\n  content: '';\n  height: 30px;\n  border-left: 2px solid #75808F;\n  position: absolute;\n  transform: rotate(45deg);\n}\n\n.bx-modal__btn-close-icon:before {\n  content: '';\n  height: 30px;\n  border-left: 2px solid #75808F;\n  position: absolute;\n  transform: rotate(-45deg);\n}\n\n/* Comment Screen */\n\n  /*font-family: HelveticaNeue-Light, Helvetica Neue Light, Helvetica Neue, Helvetica, Arial, Lucida Grande, sans-serif;*/\n\n/* Mobile Web Feedback Button */\n.abper-112-toggle .bx-mobile_web_feedback_button {\n  padding: 15px 25px;\n}\n\n@media screen and (min-width: 1024px) {\n  .abper-112-toggle .bx-mobile_web_feedback_button {\n      padding: 0;\n  }\n}\n\n/* icon */\n.abper-112-toggle .icon-feedback {\n  display: inline-block;\n  vertical-align: middle;\n  font-size: 20px;\n  color: white;\n}\n\n@media screen and (min-width: 1024px) {\n  .abper-112-toggle .icon-feedback {\n      position: absolute;\n      transform: rotate(90deg) translateY(15px);\n      color: #555;\n  }\n}\n/******* EK CSS *******/\n\n@font-face {\n  font-family: ek-font-icons;\n  src: url(https://cdn.ek.aero/shared/fonts/ek-icons/ek-font-icons.eot);\n  src: url(https://cdn.ek.aero/shared/fonts/ek-icons/ek-font-icons.eot?#iefix) format(\"embedded-opentype\"), url(https://cdn.ek.aero/shared/fonts/ek-icons/ek-font-icons.woff) format(\"woff\"), url(https://cdn.ek.aero/shared/fonts/ek-icons/ek-font-icons.ttf) format(\"truetype\"), url(https://cdn.ek.aero/shared/fonts/ek-icons/ek-font-icons.svg#ek-font-icons) format(\"svg\");\n  font-weight: 400;\n  font-style: normal;\n}\n\n@font-face {\n  font-family: EmiratesSM;\n  src: url(https://cdn.ek.aero/shared/fonts/emirates/emirates-medium.eot);\n  src: url(https://cdn.ek.aero/shared/fonts/emirates/emirates-medium.eot?#iefix) format('embedded-opentype'), url(https://cdn.ek.aero/shared/fonts/emirates/emirates-medium.woff2) format('woff2'), url(https://cdn.ek.aero/shared/fonts/emirates/emirates-medium.woff) format('woff'), url(https://cdn.ek.aero/shared/fonts/emirates/emirates-medium.ttf) format('truetype'), url(https://cdn.ek.aero/shared/fonts/emirates/emirates-medium.svg#Emirates-Medium) format('svg');\n  font-weight: 400;\n  font-style: normal;\n}\n\n@font-face {\n  font-family: EmiratesSB-Bold;\n  src: url(https://cdn.ek.aero/shared/fonts/emirates/emirates-bold.eot);\n  src: url(https://cdn.ek.aero/shared/fonts/emirates/emirates-bold.eot?#iefix) format('embedded-opentype'), url(https://cdn.ek.aero/shared/fonts/emirates/emirates-bold.woff2) format('woff2'), url(https://cdn.ek.aero/shared/fonts/emirates/emirates-bold.woff) format('woff'), url(https://cdn.ek.aero/shared/fonts/emirates/emirates-bold.ttf) format('truetype'), url(https://cdn.ek.aero/shared/fonts/emirates/emirates-bold.svg#Emirates-Bold) format('svg');\n  font-weight: 400;\n  font-style: normal;\n}\n\n@font-face {\n  font-family: EmiratesSL;\n  src: url(https://cdn.ek.aero/shared/fonts/emirates/emirates-light.eot);\n  src: url(https://cdn.ek.aero/shared/fonts/emirates/emirates-light.eot?#iefix) format('embedded-opentype'), url(https://cdn.ek.aero/shared/fonts/emirates/emirates-light.woff2) format('woff2'), url(https://cdn.ek.aero/shared/fonts/emirates/emirates-light.woff) format('woff'), url(https://cdn.ek.aero/shared/fonts/emirates/emirates-light.ttf) format('truetype'), url(https://cdn.ek.aero/shared/fonts/emirates/emirates-light.svg#Emirates-Light) format('svg');\n  font-weight: 400;\n  font-style: normal;\n}\n\n@font-face {\n  font-family: heroic-condensed-black-oblique;\n  src: url(https://cdn.ek.aero/shared/fonts/heroic/heroic-condensed-black-oblique.eot);\n  src: url(https://cdn.ek.aero/shared/fonts/heroic/heroic-condensed-black-oblique.eot?#iefix) format(\"embedded-opentype\"), url(https://cdn.ek.aero/shared/fonts/heroic/heroic-condensed-black-oblique.woff) format(\"woff\"), url(https://cdn.ek.aero/shared/fonts/heroic/heroic-condensed-black-oblique.ttf) format(\"truetype\"), url(https://cdn.ek.aero/shared/fonts/heroic/heroic-condensed-black-oblique.svg#heroic-condensed-black-oblique) format(\"svg\");\n  font-weight: 400;\n  font-style: normal;\n}\n\n@font-face {\n  font-family: heroic-condensed-medium-oblique;\n  src: url(https://cdn.ek.aero/shared/fonts/heroic/heroic-condensed-medium-oblique.eot);\n  src: url(https://cdn.ek.aero/shared/fonts/heroic/heroic-condensed-medium-oblique.eot?#iefix) format(\"embedded-opentype\"), url(https://cdn.ek.aero/shared/fonts/heroic/heroic-condensed-medium-oblique.woff) format(\"woff\"), url(https://cdn.ek.aero/shared/fonts/heroic/heroic-condensed-medium-oblique.ttf) format(\"truetype\");\n  font-weight: 400;\n  font-style: normal;\n}\n\n@font-face {\n  font-family: heroic-condensed-light-oblique;\n  src: url(https://cdn.ek.aero/shared/fonts/heroic/heroic-condensed-light-oblique.eot);\n  src: url(https://cdn.ek.aero/shared/fonts/heroic/heroic-condensed-light-oblique.eot?#iefix) format(\"embedded-opentype\"), url(https://cdn.ek.aero/shared/fonts/heroic/heroic-condensed-light-oblique.woff) format(\"woff\"), url(https://cdn.ek.aero/shared/fonts/heroic/heroic-condensed-light-oblique.ttf) format(\"truetype\"), url(https://cdn.ek.aero/shared/fonts/heroic/heroic-condensed-light-oblique.svg#heroic-condensed-light-oblique) format(\"svg\");\n  font-weight: 400;\n  font-style: normal;\n}\n\n.abper-112-modal.qubit-AdvancedModal {\n  align-items: normal;\n  left: auto;\n  padding: 0;\n  right: auto;\n  width: 100%;\n  z-index: 9999;\n}\n@media screen and (min-width: 1024px) {\n  .abper-112-modal.qubit-AdvancedModal {\n      align-items: center;\n  }\n}\n@media (max-width: 768px) {\n  .abper-112-modal .qubit-AdvancedModal-body {\n      height: 100%;\n  }\n}\n.abper-112-modal .qubit-AdvancedModal-box {\n  background-color: #f6f6f6;\n  display: block;\n  height: 100%;\n  max-height: none;\n  width: 100%;\n  z-index: 9999;\n}\n@media screen and (min-width: 1024px) {\n  .abper-112-modal .qubit-AdvancedModal-box {\n      height: auto;\n      width: auto;\n  }\n}\n.abper-112-modal .qubit-AdvancedModal-Icon {\n  color: #333;\n  font-size: 10px;\n}\n.abper-112-modal .qubit-VisitorPulse {\n  color: #333;\n  display: flex;\n  font-family: HelveticaNeue, Helvetica Neue, Helvetica, Arial, Lucida Grande, sans-serif;\n  font-size: 16px;\n  flex-grow: 1;\n  margin: auto;\n}\n.abper-112-modal .qubit-VisitorPulse-content {\n  display: flex;\n  margin: 0 auto;\n  overflow: auto;\n  padding: 30px 20px 20px;\n  width: 100%;\n}\n@media screen and (min-width: 768px) {\n  .abper-112-modal .qubit-VisitorPulse-content {\n      margin: auto;\n  }\n}\n@media screen and (min-width: 1024px) {\n  .abper-112-modal .qubit-VisitorPulse-content {\n      display: block;\n      margin: 0 auto;\n  }\n}\n.abper-112-modal .qubit-VisitorPulse-titleContainer {\n  display: none;\n}\n.abper-112-modal .qubit-VisitorPulse-question {\n  border-bottom: none;\n  margin-bottom: 0;\n  max-width: 690px;\n  padding-bottom: 0;\n  text-align: center;\n}\n.abper-112-modal .qubit-VisitorPulse-question .qubit-VisitorPulse-questionName {\n  color: #333;\n  font-family: EmiratesSB-Bold, Emirates-Bold, EmiratesSM, Helvetica, Arial, Lucida Grande, sans-serif !important;\n  font-size: 20px;\n  font-weight: 400;\n  line-height: 24px;\n  margin: 0 auto 20px;\n  text-align: center;\n  width: 80%;\n}\n@media screen and (min-width: 1024px) {\n  .abper-112-modal .qubit-VisitorPulse-question .qubit-VisitorPulse-questionName {\n      font-size: 30px;\n      line-height: 34px;\n  }\n}\n.abper-112-modal .qubit-VisitorPulse-question .qubit-VisitorPulse-radios {\n  height: 75px;\n  position: relative;\n  width: 260px;\n}\n.abper-112-modal .qubit-VisitorPulse-question .qubit-VisitorPulse-radio input {\n  display: none;\n}\n.abper-112-modal .qubit-VisitorPulse-question:first-child .qubit-VisitorPulse-radio {\n  display: inline-block;\n  margin-bottom: 0;\n  text-align: center;\n  width: 20%;\n}\n.abper-112-modal .qubit-VisitorPulse-question:first-child .qubit-VisitorPulse-radio .qubit-VisitorPulse-radioOuter {\n  background: url('https://c.ekstatic.net/ecl/iconography/e72585a018510638901dd029c05d0724_40_38.png');\n  background-repeat: no-repeat;\n  height: 40px;\n  margin: 0;\n  width: 40px;\n}\n.abper-112-modal .qubit-VisitorPulse-question:first-child .qubit-VisitorPulse-radio.abper-112-active .qubit-VisitorPulse-radioOuter {\n  background: url('https://c.ekstatic.net/ecl/iconography/27b9f781a94a8af00418bf50ea278016_40_38.png');\n  background-repeat: no-repeat;\n}\n.abper-112-modal .qubit-VisitorPulse-question:first-child .qubit-VisitorPulse-radio .qubit-VisitorPulse-radioInner {\n  display: none;\n}\n.abper-112-modal .qubit-VisitorPulse-question:first-child .qubit-VisitorPulse-radio .qubit-VisitorPulse-radioText {\n  bottom: 10px;\n  display: none;\n  font-family: HelveticaNeue, Helvetica Neue, Helvetica, Arial, Lucida Grande, sans-serif;\n  font-size: 14px;\n  font-weight: normal;\n  left: 0;\n  margin: 0 auto;\n  position: absolute;\n  right: 0;\n  width: 100%;\n}\n.abper-112-modal .qubit-VisitorPulse-question:first-child .qubit-VisitorPulse-radio .qubit-VisitorPulse-radioText.abper-112-visible {\n  display: inline-block;\n}\n.abper-112-modal .qubit-VisitorPulse-question:nth-child(2) {\n  display: none;\n}\n.abper-112-modal .qubit-VisitorPulse-question:nth-child(2) .qubit-VisitorPulse-textarea {\n  background: #fff;\n  border: 1px solid #666;\n  border-radius: 3px;\n  box-shadow: inset 4px 4px 0 0 #f6f6f6;\n  color: #333;\n  display: block;\n  font-family: HelveticaNeue-Light, Helvetica Neue Light, Helvetica Neue, Helvetica, Arial, Lucida Grande, sans-serif;\n  font-size: 16px;\n  font-weight: 300;\n  height: 214px;\n  margin: auto;\n  padding: 20px 18px 16px 20px;\n}\n@media screen and (min-width: 1024px) {\n  .abper-112-modal .qubit-VisitorPulse-question:nth-child(2) .qubit-VisitorPulse-textarea {\n      height: 174px;\n      width: 80%;\n  }\n}\n.abper-112-modal .qubit-VisitorPulse-question:nth-child(2) .abper-112-optional {\n  color: #999;\n  font-family: HelveticaNeue-Light, Helvetica Neue Light, Helvetica Neue, Helvetica, Arial, Lucida Grande, sans-serif;\n  font-size: 16px;\n  font-style: italic;\n  font-weight: 300;\n  margin: 10px auto 30px;\n  text-align: left;\n}\n@media screen and (min-width: 1024px) {\n  .abper-112-modal .qubit-VisitorPulse-question:nth-child(2) .abper-112-optional {\n      width: 80%;\n  }\n}\n.abper-112-modal .qubit-VisitorPulse-question.abper-112-visible {\n  display: block;\n}\n.abper-112-modal .qubit-VisitorPulse-question.abper-112-hide {\n  display: none;\n  visibility: hidden;\n}\n.abper-112-modal .qubit-VisitorPulse-submit {\n  background-color: #c60c30;\n  border-color: #c60c30;\n  color: #fff;\n  display: inline-block;\n  font-size: 14px;\n  font-weight: bold;\n  height: auto;\n  line-height: normal;\n  margin: auto 0 0;\n  max-width: 690px;\n  width: 100%;\n}\n@media screen and (min-width: 768px) {\n  .abper-112-modal .qubit-VisitorPulse-submit {\n      margin: 0 auto;\n  }\n}\n@media screen and (min-width: 1024px) {\n  .abper-112-modal .qubit-VisitorPulse-submit {\n      width: 317px;\n  }\n}\n.abper-112-modal .qubit-VisitorPulse-submit:hover {\n  background-color: #c60c30;\n  border-color: #c60c30;\n  box-shadow: 0 0 6px 0 #333;\n  color: #fff;\n}\n.abper-112-modal .qubit-VisitorPulse-submit.abper-112-visible {\n  display: inline-block;\n  visibility: visible;\n}\n.abper-112-modal .qubit-VisitorPulse-thankYou {\n  flex-direction: column;\n  flex-grow: 1;\n  margin: 0 auto;\n  max-width: 690px;\n  overflow: auto;\n  padding: 40px 20px 20px;\n  text-align: center;\n}\n@media screen and (min-width: 768px) {\n  .abper-112-modal .qubit-VisitorPulse-thankYou {\n      margin: auto;\n  }\n}\n@media screen and (min-width: 1024px) {\n  .abper-112-modal .qubit-VisitorPulse-thankYou {\n      margin: 0 auto;\n      overflow: hidden;\n  }\n}\n.abper-112-modal .qubit-VisitorPulse-thankYou .abper-112-icon-check {\n  border: 2px solid green;\n  border-radius: 50px;\n  box-sizing: border-box;\n  height: 70px;\n  margin: 0 auto 30px;\n  width: 70px;\n}\n@media screen and (min-width: 1024px) {\n  .abper-112-modal .qubit-VisitorPulse-thankYou .abper-112-icon-check {\n      margin: 40px auto 20px;\n      height: 60px;\n      width: 60px;\n  }\n}\n.abper-112-modal .qubit-VisitorPulse-thankYou .abper-112-icon-check::before {\n  border-bottom: 2px solid green;\n  border-right: 2px solid green;\n  box-sizing: border-box;\n  content: '';\n  display: inline-block;\n  height: 30px;\n  margin-top: -5px;\n  position: relative;\n  top: 50%;\n  transform: rotate(45deg) translateX(-60%) translateY(-35%);\n  width: 15px;\n}\n.abper-112-modal .qubit-VisitorPulse-thankYou .abper-112-text {\n  flex-grow: 0;\n  padding-left: 0;\n  padding-right: 0;\n}\n@media screen and (min-width: 1024px) {\n  .abper-112-modal .qubit-VisitorPulse-thankYou .abper-112-text {\n      margin-bottom: 30px;\n  }\n}\n.abper-112-modal .qubit-VisitorPulse-thankYou .abper-112-close-button {\n  margin: auto 0 0;\n}\n@media screen and (min-width: 768px) {\n  .abper-112-modal .qubit-VisitorPulse-thankYou .abper-112-close-button {\n      margin: 0;\n  }\n}\n.abper-112-modal .abper-112-tripadvisor {\n  border-top: 2px solid #d8d8d8;\n  flex-grow: 1;\n  padding: 20px 0 0;\n}\n.abper-112-modal .abper-112-tripadvisor.abper-112-tripadvisor-hide {\n  display: none;\n}\n.abper-112-modal .abper-112-tripadvisor-logo {\n  background-position: center;\n  background-repeat: no-repeat;\n  background-size: cover;\n  display: inline-block;\n  height: 80px;\n  margin: auto;\n  width: 100px;\n}\n@media screen and (min-width: 1024px) {\n  .abper-112-modal .abper-112-tripadvisor-logo {\n      height: 50px;\n      position: relative;\n      top: -10px;\n      width: 63px;\n      vertical-align: middle;\n  }\n}\n.abper-112-modal .abper-112-tripadvisor-copy {\n  display: inline-block;\n}\n@media screen and (min-width: 1024px) {\n  .abper-112-modal .abper-112-tripadvisor-copy {\n      text-align: left;\n      width: 70%;\n  }\n}\n.abper-112-modal .abper-112-close-button {\n  font-size: 16px;\n  font-weight: 700;\n  line-height: normal;\n  margin-bottom: 20px;\n  min-height: 40px;\n}\n@media screen and (min-width: 1024px) {\n  .abper-112-modal .abper-112-close-button {\n      width: 317px;\n  }\n}\n.abper-112-modal .abper-112-text {\n  flex-grow: 1;\n  font-size: 14px;\n  line-height: 1.5;\n  margin: 16px 0 30px;\n  padding-bottom: 0;\n}\n.abper-112-modal a,\n.abper-112-modal a:hover {\n  color: #333;\n}\n.abper-112-modal:hover,\n.abper-112-modal:active,\n.abper-112-modal:focus {\n  outline: none !important;\n}\n.abper-112-modal *:focus {\n  outline: none !important;\n}\n.abper-112-toggle {\n  border-top: 1px solid rgba(255, 255, 255, .13);\n  margin-top: auto;\n}\n.abper-112-toggle:hover,\n.abper-112-toggle:active,\n.abper-112-toggle:focus {\n  outline: none;\n}\n.abper-112-toggle+.country-selector-mobile {\n  margin-top: 0;\n}\n.abper-112-toggle .abper-112-text {\n  color: #fff;\n  cursor: pointer;\n  display: inline-block;\n  font-family: HelveticaNeue, Helvetica Neue, Helvetica, Arial, Lucida Grande, sans-serif;\n  font-size: 14px;\n  position: relative;\n  vertical-align: middle;\n}\n@media screen and (min-width: 1024px) {\n  .abper-112-toggle .abper-112-text {\n      color: #333;\n      width: auto;\n  }\n}\n@media screen and (min-width: 1024px) {\n  .abper-112-toggle {\n      background-color: #fff;\n      border-radius: 3px 3px 0 0;\n      box-shadow: 0 1px 4px 1px #666;\n      color: #333;\n      cursor: pointer;\n      font-family: HelveticaNeue, Helvetica Neue, Helvetica, Arial, Lucida Grande, sans-serif;\n      font-size: 14px;\n      height: 40px;\n      overflow: hidden;\n      padding: 10px 15px 25px 25px;\n      position: fixed;\n      right: 0;\n      top: calc(50% - 120px);\n      transform: rotate(-90deg);\n      transform-origin: 100% 100%;\n      z-index: 99;\n  }\n}\n@media (min-width: 768px) and (max-width: 1024px) and (orientation: portrait) {\n  .abper-112-toggle {\n      top: calc(25% - 120px);\n  }\n}\n.abper-112-toggle .abper-112-toggle-container {\n  position: relative;\n}\n.abper-112-toggle .abper-112-icon {\n  background-image: url('https://c.ekstatic.net/ecl/iconography/4fb725e86a700af2f5a185035d78d864_48_42.png');\n  background-size: cover;\n  display: inline-block;\n  height: 22px;\n  vertical-align: middle;\n  width: 25px;\n}\n@media screen and (min-width: 1024px) {\n  .abper-112-toggle .abper-112-icon {\n      background-image: url('https://c.ekstatic.net/ecl/iconography/9a9731bdeeac7dabae8183d63729c015_81_68.png');\n      height: 20px;\n      position: absolute;\n      transform: rotate(90deg) translateY(15px);\n  }\n}\n.abper-112-toggle .abper-112-text {\n  display: none;\n  line-height: 20px;\n  padding: 0 0 0 15px;\n}\n.qubit-VisitorPulse-modal {\n  display: none;\n}\n#abper-112-feedback-content {\n  font-family: HelveticaNeue, Helvetica Neue, Helvetica, Arial, Lucida Grande, sans-serif;\n  margin: 0 auto;\n  max-width: 690px;\n  padding: 70px 10px;\n  text-align: center;\n  width: 100%;\n}\n@media screen and (min-width: 768px) {\n  #abper-112-feedback-content {\n      margin: auto;\n  }\n}\n@media screen and (min-width: 1024px) {\n  #abper-112-feedback-content {\n      display: flex;\n      margin: 0 auto;\n      max-width: 1056px;\n      padding: 60px 40px;\n  }\n}\n#abper-112-feedback-content .abper-112-feedback,\n#abper-112-feedback-content .abper-112-contact,\n#abper-112-feedback-content .abper-112-complaint {\n  background-color: #fff;\n  border-radius: 3px;\n  box-shadow: 0 2px 4px 2px rgba(0, 0, 0, 0.19);\n  display: block;\n  margin-bottom: 20px;\n  padding: 10px 10px 0;\n  position: relative;\n  text-decoration: none;\n}\n#abper-112-feedback-content .abper-112-feedback span.abper-112-button,\n#abper-112-feedback-content .abper-112-contact span.abper-112-button,\n#abper-112-feedback-content .abper-112-complaint span.abper-112-button {\n  pointer-events: none;\n}\n@media screen and (min-width: 1024px) {\n  #abper-112-feedback-content .abper-112-feedback,\n  #abper-112-feedback-content .abper-112-contact,\n  #abper-112-feedback-content .abper-112-complaint {\n      background: none;\n      border-radius: 0;\n      box-shadow: none;\n      display: flex;\n      flex-basis: auto;\n      flex-direction: column;\n      margin: 0;\n      padding: 30px;\n      width: 33.3333%;\n  }\n\n  #abper-112-feedback-content .abper-112-feedback::after,\n  #abper-112-feedback-content .abper-112-contact::after,\n  #abper-112-feedback-content .abper-112-complaint::after {\n      border-right: 1px solid #d8d8d8;\n      content: \"\";\n      display: block;\n      height: 100%;\n      position: absolute;\n      right: 0;\n      top: 0;\n      z-index: 1;\n  }\n}\n#abper-112-feedback-content .abper-112-title {\n  text-align: center;\n}\n#abper-112-feedback-content .abper-112-title,\n#abper-112-feedback-content .abper-112-hr,\n#abper-112-feedback-content .abper-112-text {\n  display: none;\n}\n@media screen and (min-width: 1024px) {\n  #abper-112-feedback-content .abper-112-title,\n  #abper-112-feedback-content .abper-112-hr,\n  #abper-112-feedback-content .abper-112-text {\n      display: inline-block;\n  }\n}\n#abper-112-feedback-content .abper-112-complaint::after {\n  border: none;\n}\n@media screen and (max-width: 1023px) {\n  #abper-112-feedback-content .abper-112-button,\n  #abper-112-feedback-content .abper-112-button:hover {\n      background: none;\n      border: none;\n      box-shadow: none;\n      color: #333;\n      font-weight: bold;\n      margin-bottom: 10px;\n      padding: 6px;\n      width: 100%;\n  }\n}\n#abper-112-feedback-content .abper-112-icon {\n  background-position: center;\n  background-repeat: no-repeat;\n  background-size: contain;\n  display: inline-block;\n  height: 55px;\n  margin: 0 auto;\n  width: 60px;\n}\n@media screen and (min-width: 1024px) {\n  #abper-112-feedback-content .abper-112-icon {\n      height: 68px;\n      margin: 0 auto 20px;\n      width: 80px;\n  }\n}\n#abper-112-feedback-content .abper-112-icon-feedback {\n  background-image: url('https://c.ekstatic.net/ecl/iconography/9a149a9f19b5506ca8a908f23f01c24f_60_60.png');\n  height: 34px;\n  width: 34px;\n}\n@media screen and (min-width: 1024px) {\n  #abper-112-feedback-content .abper-112-icon-feedback {\n      background-image: url('https://c.ekstatic.net/ecl/iconography/9a9731bdeeac7dabae8183d63729c015_81_68.png');\n      height: 68px;\n      width: 81px;\n  }\n}\n#abper-112-feedback-content .abper-112-icon-contact {\n  background-image: url('https://c.ekstatic.net/ecl/iconography/dcb2d20bb523a4d1b635194758896024_60_60.png');\n  height: 34px;\n  width: 34px;\n}\n@media screen and (min-width: 1024px) {\n  #abper-112-feedback-content .abper-112-icon-contact {\n      background-image: url('https://c.ekstatic.net/ecl/iconography/c8be9d69c9aa7b9c193ce1049e616f36_81_68.png');\n      height: 68px;\n      width: 81px;\n  }\n}\n#abper-112-feedback-content .abper-112-icon-complaint {\n  background-image: url('https://c.ekstatic.net/ecl/iconography/f633a3e3102979ba5c912a4b09c74c86_60_60.png');\n  height: 34px;\n  width: 34px;\n}\n@media screen and (min-width: 1024px) {\n  #abper-112-feedback-content .abper-112-icon-complaint {\n      background-image: url('https://c.ekstatic.net/ecl/iconography/fbc91a6287d56b2f84607070934ba7d8_81_68.png');\n      height: 68px;\n      width: 81px;\n  }\n}\n#abper-112-feedback-content .abper-112-title,\n.abper-112-thank-you .qubit-VisitorPulse-thankYouText {\n  color: #333;\n  font-family: EmiratesSB-Bold, Emirates-Bold, EmiratesSM, Helvetica, Arial, Lucida Grande, sans-serif !important;\n  font-size: 20px;\n  font-weight: 400;\n  line-height: 24px;\n  margin: 0;\n}\n@media screen and (min-width: 1024px) {\n  #abper-112-feedback-content .abper-112-title,\n  .abper-112-thank-you .qubit-VisitorPulse-thankYouText {\n      font-size: 30px;\n      line-height: 34px;\n  }\n}\n.abper-112-modal .qubit-VisitorPulse-thankYouText {\n  font-size: 30px;\n  line-height: 1.25;\n  margin: 0;\n}\nhr.abper-112-hr {\n  background: none;\n  border: none;\n  border-top: 2px solid #c60c30;\n  display: inline-block;\n  margin: 0 auto;\n  width: 60px;\n}\n.abper-112-button,\n.qubit-VisitorPulse-submit {\n  background-color: #fff;\n  border: 1px solid #333;\n  border-radius: 3px;\n  color: #333;\n  cursor: pointer;\n  display: inline-block;\n  font-size: 14px;\n  font-weight: bold;\n  line-height: normal;\n  margin-bottom: 20px;\n  padding: 11px;\n  text-align: center;\n  text-decoration: none;\n  width: 100%;\n}\n@media screen and (min-width: 1024px) {\n  .abper-112-button,\n  .qubit-VisitorPulse-submit {\n      width: auto;\n  }\n}\n.abper-112-button:hover,\n.qubit-VisitorPulse-submit:hover {\n  box-shadow: 0 0 6px 0 #666;\n}\n.abper-112-button.abper-112-primary,\n.qubit-VisitorPulse-submit.abper-112-primary {\n  background-color: #c60c30;\n  border-color: #c60c30;\n  color: #fff;\n  font-family: HelveticaNeue, Helvetica Neue, Helvetica, Arial, Lucida Grande, sans-serif;\n  font-size: 14px;\n  font-weight: 700;\n}\n.abper-112-button.abper-112-primary:hover,\n.qubit-VisitorPulse-submit.abper-112-primary:hover {\n  background-color: #c60c30;\n  border-color: #c60c30;\n  color: #fff;\n}\n.abper-112--focus {\n  border-radius: 2px !important;\n  box-shadow: 0 0 2px 1.5px #fff, 0 0 3px 3px #000, inset 0 0 0.5px 0.5px #fff, inset 0 0 0.5px 1.5px #000 !important;\n  outline: 0 !important;\n}\n.qubit-VisitorPulse-hidden {\n  visibility: hidden;\n}\n@media (max-width: 480px) {\n  .ekglobal-navigation-megamenu-holder.menu--opened {\n      overflow-y: scroll;\n  }\n}\n@media (orientation: portrait) {\n  .abper-112-modal .qubit-VisitorPulse {\n      display: block;\n  }\n\n  .abper-112-modal .qubit-AdvancedModal-body {\n      flex: none;\n      height: 100%;\n  }\n\n  .abper-112-modal .qubit-VisitorPulse {\n      display: block;\n  }\n\n  .abper-112-modal .qubit-VisitorPulse-content {\n      height: 100%;\n      position: relative;\n  }\n\n  .abper-112-modal .qubit-VisitorPulse-submit.abper-112-visible {\n      bottom: 30px;\n      left: 20px;\n      right: 20px;\n      position: absolute;\n      width: auto;\n  }\n\n  .abper-112-modal .qubit-VisitorPulse-thankYou {\n      height: 100%;\n      position: relative;\n  }\n}\n@media (orientation: portrait) and (min-width: 768px) {\n  .abper-112-modal .qubit-VisitorPulse-submit.abper-112-visible {\n      bottom: 60px;\n      left: 30px;\n      right: 30px;\n  }\n}\n@media (orientation: portrait) and (min-width: 1024px) {\n  .abper-112-modal .qubit-VisitorPulse-submit.abper-112-visible {\n      bottom: auto;\n      left: auto;\n      position: relative;\n      right: auto;\n      width: 317px;\n  }\n}\n@media (orientation: portrait) and (min-width: 768px) {\n  .abper-112-modal .abper-112-button.abper-112-primary.abper-112-close-button {\n      bottom: 60px;\n      left: 0;\n      max-width: 690px;\n      position: absolute;\n  }\n}\n@media (orientation: portrait) and (min-width: 1024px) {\n  .abper-112-modal .abper-112-button.abper-112-primary.abper-112-close-button {\n      bottom: auto;\n      left: auto;\n      position: relative;\n      right: auto;\n  }\n}\n.ek .abper-112-modal [contentEditable=true]:not([tabindex='-1']):not(.panel-disabled):focus,\n.ek .abper-112-modal [tabindex]:not([tabindex='-1']):not(.panel-disabled):focus,\n.ek .abper-112-modal a:not([tabindex='-1']):not(.panel-disabled):focus,\n.ek .abper-112-modal area:not([tabindex='-1']):not(.panel-disabled):focus,\n.ek .abper-112-modal button:not([disabled]):not([tabindex='-1']):not(.panel-disabled):focus,\n.ek .abper-112-modal iframe:not([tabindex='-1']):not(.panel-disabled):focus,\n.ek .abper-112-modal input:not([disabled]):not([tabindex='-1']):not(.panel-disabled):focus,\n.ek .abper-112-modal select:not([disabled]):not([tabindex='-1']):not(.panel-disabled):focus,\n.ek .abper-112-modal textarea:not([disabled]):not([tabindex='-1']):not(.panel-disabled):focus {\n  outline: none !important;\n}\n.ek .abper-112-modal p a {\n  text-decoration: underline;\n}\n.ek .abper-112-modal p a:hover {\n  text-decoration: none;\n}\n@media screen and (min-width: 1024px) {\n  .ek-global-navigation .abper-112-toggle[tabindex=\"0\"]:focus {\n      border-radius: 3px 3px 0 0 !important;\n      box-shadow: 0 1px 4px 1px #666 !important;\n  }\n}\n.abper-112-toggle[tabindex]:focus:not(a):not(button) {\n  border-radius: 0;\n  box-shadow: none;\n}\n@media screen and (min-width: 1024px) {\n  .abper-112-toggle[tabindex]:focus:not(a):not(button) {\n      border-radius: 3px 3px 0 0;\n      box-shadow: 0 1px 4px 1px #666;\n  }\n}\n.abper-112-modal a:focus {\n  border-radius: none;\n  box-shadow: none;\n}\n.page-template.leaderboard-template .abper-112-toggle {\n  height: 5px;\n}\n.ekglobal-navigation-megamenu-holder.menu--opened .abper-112-toggle {\n  height: auto;\n}\n.abper-112-modal label.qubit-VisitorPulse-radio * {\n  pointer-events: none;\n}\n.abper-112-modal * {\n  -webkit-tap-highlight-color: transparent;\n}\n.abper-112-toggle {\n  display: none;\n}\n@media screen and (min-width: 1024px) {\n  .abper-112-toggle {\n      display: block;\n  }\n}\n.abper-112-toggle+.nav__lang-wrapper {\n  margin-top: 0;\n}\n.nav--show .abper-112-toggle {\n  display: block;\n}\n.ek-global-navigation .menu--opened .abper-112-toggle,\n.main-navigation__nav .nav--mobile .abper-112-toggle {\n  display: block;\n}\n@media screen and (min-width: 1024px) {\n  .ek-global-navigation .menu--opened .abper-112-toggle,\n  .main-navigation__nav .nav--mobile .abper-112-toggle {\n      display: none;\n  }\n}\n.ek-global-navigation .menu--opened .abper-112-toggle+div,\n.main-navigation__nav .nav--mobile .abper-112-toggle+div {\n  display: block;\n}\n.main-navigation__nav .nav--mobile .abper-112-toggle-container {\n  padding: 15px;\n}\n.abper-112-hidden-mobile {\n  display: none !important;\n}\n@media screen and (min-width: 1024px) {\n  .abper-112-hidden-mobile {\n      display: inline-block !important;\n  }\n}\n.abper-112-hidden-desktop {\n  display: inline-block !important;\n}\n@media screen and (min-width: 1024px) {\n  .abper-112-hidden-desktop {\n      display: none !important;\n  }\n}\n\n#bx-contact_link3 {\n  text-decoration: underline !important;\n}\n\n#bx-contact_link3:hover {\n  text-decoration: none !important;\n  background-color: #f6f6f6;\n}\n",html:'<div id="bx-modal_overlay" class="bx-hidden_important">\n  <div class="bx-modal_content abper-112-modal">\n\n      <div class="bx-options" id="bx-options">\n          <div id="abper-112-feedback-content" class="abper-112-feedback-content">\n              <a class="abper-112-link abper-112-feedback abper-112-submit-feedback" id="bx-feedback_option" role="link" tabindex="0">\n                  <i class="abper-112-icon abper-112-icon-feedback"></i>\n                  <h2 class="abper-112-title">Leave website feedback</h2>\n                  <hr class="abper-112-hr">\n                  <p class="abper-112-text">Your opinion is important to us. Help us improve your online experience.</p>\n                  <span class="abper-112-button abper-112-secondary abper-112-submit-feedback">Submit feedback</span>\n              </a>\n              <a class="abper-112-link abper-112-contact" id="bx-contact_link" href="https://www.emirates.com/uk/english/help/" role="link"\n                  tabindex="0">\n                  <i class="abper-112-icon abper-112-icon-contact"></i>\n                  <h2 class="abper-112-title">Get in touch</h2>\n                  <hr class="abper-112-hr">\n                  <p class="abper-112-text">Need answers? Here are the most convenient ways to contact us</p>\n                  <span class="abper-112-button abper-112-secondary">Contact us</span>\n              </a>\n              <a class="abper-112-link abper-112-complaint" id="bx-complaint_link" href="https://www.emirates.com/uk/english/help/complaint.aspx" role="link" tabindex="0">\n                  <i class="abper-112-icon abper-112-icon-complaint"></i>\n                  <h2 class="abper-112-title">Raise a concern</h2>\n                  <hr class="abper-112-hr">\n                  <p class="abper-112-text">If you\'ve had a less than satisfying experience, we\'d like to hear from you.</p>\n                  <span class="abper-112-button abper-112-secondary">Submit a complaint</span>\n              </a>\n          </div>\n      </div>\n\n      <div class="bx-rating bx-hidden qubit-VisitorPulse-question" id="bx-rating">\n          <h1 class="bx-header_question" id="bx-header_question">How satisfied were you with your website experience?</h1>\n          <fieldset class="rating" id="bx-rating_buttons">\n              <input type="radio" id="star5" name="rating" value="5" /><label class="bx-star5 bx-star" for="star5" rating="5" title="Excellent"></label>\n              <input type="radio" id="star4" name="rating" value="4" /><label class="bx-star4 bx-star" for="star4" rating="4" title="Good"></label>\n              <input type="radio" id="star3" name="rating" value="3" /><label class="bx-star3 bx-star" for="star3" rating="3" title="Average"></label>\n              <input type="radio" id="star2" name="rating" value="2" /><label class="bx-star2 bx-star" for="star2" rating="2" title="Poor"></label>\n              <input type="radio" id="star1" name="rating" value="1" /><label class="bx-star1 bx-star" for="star1" rating="1" title="Very Poor"></label>\n              <span class="bx-radio_label bx-label5">Excellent</span>\n              <span class="bx-radio_label bx-label4">Good</span>\n              <span class="bx-radio_label bx-label3">Average</span>\n              <span class="bx-radio_label bx-label2">Poor</span>\n              <span class="bx-radio_label bx-label1">Very Poor</span>\n          </fieldset>\n      </div>\n\n      <div class="bx-comment bx-hidden" id="bx-comment">\n          <h1 class="bx-header_question">How satisfied were you with your website experience?</h1>\n          <h4 class="bx-header_subtext">You will receive no reply from this form. For questions that require a response, you can visit our <a href="https://www.emirates.com/uk/english/help/" target="_blank" id="bx-contact_link3">help centre.</a></h4>\n          <textarea class="bx-comment_textarea" id="bx-comment_textarea" maxlength="1500" placeholder="Tell us how we can make your experience better*"></textarea>\n          <div class="bx-comment_warning">* Do not enter personal information here</div>\n          <div class="bx-comment_submit qubit-VisitorPulse-submit" id="bx-submit_feedback" role="button" tabindex="0">Submit your feedback</div>\n      </div>\n\n      <div class="bx-thank_you bx-hidden" id="bx-thank_you">\n          <div class="qubit-VisitorPulse-thankYou" aria-hidden="false">\n              <div class="abper-112-thank-you">\n                  <i class="abper-112-icon-check abper-112-hidden-desktop"></i>\n                  <div class="qubit-VisitorPulse-thankYouText">Thank you for your feedback</div>\n                  <i class="abper-112-icon-check abper-112-hidden-mobile"></i>\n                  <p class="abper-112-text">If you have any questions or need help please visit our\n                      <a class="abper-112-faq-link" id="bx-faq_link" href="https://www.emirates.com/uk/english/help/faqs/"\n                          title="">FAQ</a> or\n                      <a class="abper-112-contact-us-link" id="bx-contact_link2" href="https://www.emirates.com/uk/english/help/"\n                          title="">Contact us</a> section.\n                  </p>\n              </div>\n              <button aria-label="Close" class="abper-112-button abper-112-primary abper-112-close-button" id="bx-close">Close</button>\n          </div>\n      </div>\n\n      <div class="bx-modal__btn-close-icon"></div>\n  </div>\n</div>\n',js:'insertHTMLAfter(\'body\');\n\nvar GA_TRACKING_ID = \'UA-49297763-3\';\nfunction getIconsFont(){\n    if(typeof __EK__ !== \'undefined\'){\n        return \'\';\n    }\n    if(typeof __INITIAL_STATE__ !== \'undefined\'){\n        return \'<link rel="stylesheet" href="https://c.ekstatic.net/shared/fonts/iconography/iconography.css">\';\n    }\n            return `<style>@font-face {\n  font-family: "iconography-bx";\n  src: url("https://c.ekstatic.net/shared/fonts/iconography/iconography.woff2?580e865c7c5f11c3fae0de33e30a4db9") format("woff2"),\n      url("https://c.ekstatic.net/shared/fonts/iconography/iconography.woff?580e865c7c5f11c3fae0de33e30a4db9") format("woff"),\n      url("https://c.ekstatic.net/shared/fonts/iconography/iconography.ttf?580e865c7c5f11c3fae0de33e30a4db9") format("truetype");\n  font-weight: normal;\n  font-style: normal;\n  font-display: fallback;\n}\n\n.abper-112-toggle .icon-feedback:before, .abper-112-modal .icon-feedback:before{\n  content: "\\\\f2a2";\n}\n.abper-112-modal .icon-chat:before {\n    content: "\\\\f140";\n}\n.abper-112-modal .icon-eticket:before {\n    content: "\\\\f17b";\n}\n.abper-112-modal .icon:before, .abper-112-toggle .icon:before{\n  font-family: "iconography-bx" !important;\n  text-transform: none;\n  font-style: normal !important;\n  font-weight: normal !important;\n  speak: none;\n  -webkit-font-smoothing: antialiased;\n  -moz-osx-font-smoothing: grayscale;\n}</style>`;\n}\n/* Add Mobile Web Feedback Button */\nvar buttonTemplate = getIconsFont() + \'<div class="abper-112-toggle-container bx-mobile_web_feedback_button"><div class="icon icon-feedback"></div><span class="abper-112-text abper-112-hidden-desktop">Leave website feedback</span><span class="abper-112-text abper-112-hidden-mobile">Feedback</span></div>\';\nvar buttonElement = document.createElement(\'div\');\nbuttonElement.classList.add(\'abper-112-toggle\');\nbuttonElement.setAttribute("role", "button");\nbuttonElement.setAttribute("tabindex", "0");\nbuttonElement.setAttribute("id", "bx-mobile_web_feedback_button");\nbuttonElement.innerHTML = buttonTemplate;\n//window.feedbackButtonLoaded = false;\n\nif ( document.getElementsByClassName("ek-global-navigation__megalinks")[0] && !window.feedbackButtonLoaded ) {\n    if (!document.getElementById(\'bx-mobile_web_feedback_button\')) {\n        var menuContainer = document.getElementsByClassName("ek-global-navigation__megalinks")[0];\n        var countrySelector = document.getElementsByClassName("country-selector-mobile")[0];\n        menuContainer.insertBefore(buttonElement, countrySelector);\n        window.feedbackButtonLoaded = true;\n    }\n}\nelse if ( document.querySelector(".nav__mobile-wrapper .nav__list") && !window.feedbackButtonLoaded ) {\n    var menuContainer = document.querySelector(".nav__mobile-wrapper .nav__list");\n    var mainMenu = document.querySelector(".nav__mobile-wrapper .nav__list .nav__lang-wrapper");\n    menuContainer.insertBefore(buttonElement, mainMenu);\n    window.feedbackButtonLoaded = true;\n}\nelse if ( document.getElementsByClassName("main-navigation__content") && !window.feedbackButtonLoaded ) {\n    if(dataLayer && dataLayer[0] && dataLayer[0].pageCategory === \'Dubai Experience\') {\n        var menuContainer = document.querySelector(\'.ek__layout.ek__layout--dexp\');\n        menuContainer.insertBefore(buttonElement, menuContainer.firstChild);\n    } else {\n        var menuContainer = document.getElementsByClassName("main-navigation__content")[0];\n        var mainMenu = document.getElementsByClassName("main-navigation__nav")[0];\n        menuContainer.insertBefore(buttonElement, mainMenu);\n    }\n    window.feedbackButtonLoaded = true;\n}\n\n\n/* Get all elements required */\nvar bxMobileWebFeedbackButton = document.getElementById(\'bx-mobile_web_feedback_button\');\nvar bxModal = document.getElementById(\'bx-modal_overlay\');\nvar bxFeedback = document.getElementById(\'bx-feedback_option\');\nvar bxOptions = document.getElementById(\'bx-options\');\nvar bxRating = document.getElementById(\'bx-rating\');\nvar bxModalClose = bxModal.querySelector(\'.bx-modal__btn-close-icon\');\nvar bxRatingButtons = document.getElementById(\'bx-rating_buttons\');\nvar bxComment = document.getElementById(\'bx-comment\');\nvar bxCommentTextarea = document.getElementById(\'bx-comment_textarea\');\nvar bxSubmitFeedback = document.getElementById(\'bx-submit_feedback\');\nvar bxThankYou = document.getElementById(\'bx-thank_you\');\nvar bxCloseButton = document.getElementById(\'bx-close\');\nvar bxModalOverlay = document.getElementById(\'bx-modal_overlay\');\nvar bxContactLink = document.getElementById(\'bx-contact_link\');\nvar bxComplaintLink = document.getElementById(\'bx-complaint_link\');\nvar bxStars = document.getElementsByClassName("bx-star");\nvar ratingValue = 0;\n\nfunction closeModal() {\n    bxThankYou.style.display = \'none\';\n    bxComment.style.display = \'none\';\n    bxRating.style.display = \'none\';\n    bxOptions.style.display = \'flex\';\n    bxModal.style.display = \'none\';\n    if (document.querySelector(".rating > input:checked")) {\n        document.querySelector(".rating > input:checked").checked = false;\n        bxCommentTextarea.value = "";\n    }\n}\n\nfunction getPos() {\n    var re = new RegExp(\'emirates.com\\/[a-z]{2}\\/\');\n    var matches = re.exec(window.location.href);\n    if (matches && matches.length > 0)\n        return matches[0].substring(0, matches[0].length - 1);\n    else\n        return "emirates.com";\n}\n\nfunction getCountryCode() {\n    var pos = getPos();\n    return pos.substring(pos.length - 2);\n}\n\nfunction sendGaEvent(category, action, label, nonInteraction = false){\n\tif ("ga" in window) {\n\t\tvar tracker;\n\t    ga.getAll().forEach(function(t) {\n    \t\tif(t.get(\'trackingId\') === GA_TRACKING_ID) {\n    \t\t\ttracker = t;\n    \t\t}\n    \t});\n\t    if (tracker) {\n\t        tracker.send(\'event\', category, action, label, {nonInteraction: nonInteraction});\n\t\t}\n\t}\n}\n\nfunction getGaClientId() {\n    clientId = "";\n    dataLayer.forEach(function(d) {\n        if (d.googleAnalyticsClientID) {\n            clientId = d.googleAnalyticsClientID;\n        }\n    });\n    return clientId;\n}\n\nfunction onClickRatingStar() {\n    ratingValue = this.getAttribute("rating");\n    bxRating.style.display = \'none\';\n    bxComment.style.display = \'block\';\n    sendGaEvent(\'Popup Interaction\', \'Form Completed\', \'VOC:SitewideSurvey:StarSelected:Score:\' + ratingValue);\n}\n\nbxMobileWebFeedbackButton.onclick = function() {\n    bxModal.classList.remove("bx-hidden_important");\n    bxModal.style.display = \'flex\';\n    sendGaEvent(\'Page Body Interaction\', \'SiteTab Clicked\', \'VOC:SitewideSurvey\');\n};\n\nbxModal.style.display = \'flex\';\n\nbxFeedback.onclick = function() {\n    bxOptions.style.display = \'none\';\n    bxRating.style.display = \'block\';\n    sendGaEvent(\'Popup Interaction\', \'CTA Clicked\',\'VOC:SitewideSurvey:Experience Selected:Submit Feedback\');\n};\n\nbxContactLink.onclick = function() {\n    sendGaEvent(\'Popup Interaction\', \'CTA Clicked\',\'VOC:SitewideSurvey:Experience Selected:Contact Us\');\n};\n\nbxComplaintLink.onclick = function() {\n    sendGaEvent(\'Popup Interaction\', \'CTA Clicked\',\'VOC:SitewideSurvey:Experience Selected:Report Issue\');\n};\n\nfor (var i = 0; i < bxStars.length; i++) {\n\tbxStars[i].onclick = onClickRatingStar;\n}\n\nbxSubmitFeedback.onclick = function() {\n    bxThankYou.style.display = \'block\';\n    bxComment.style.display = \'none\';\n    var feedbackEvent = {\n        "channel": "WEB",\n        "type": "FEEDBACK",\n        "language": dataLayer[0].languageCode,\n        "currency": dataLayer[0].posSiteCurrencyCode,\n        "page": dataLayer[0].pageName,\n        "pos": getPos(),\n        "browser_id": Boxever.getID(),\n        "rating": ratingValue,\n        "comment": document.getElementById(\'bx-comment_textarea\').value,\n        "survey_id": "150174",\n        "question_text": document.getElementById(\'bx-header_question\').textContent,\n        "page_category": dataLayer[0].pageCategory ? dataLayer[0].pageCategory : "",\n        "visitor_session_id": dataLayer[0].visitorSessionID ? dataLayer[0].visitorSessionID : "",\n        "platform_type": dataLayer[0].platformType ? dataLayer[0].platformType : "",\n        "country_region": dataLayer[0].countryRegion ? dataLayer[0].countryRegion : "",\n        "member_tier": dataLayer[0].memberTier ? dataLayer[0].memberTier : "",\n        "page_url": window.location.href,\n        "ga_client_id": getGaClientId()\n    };\n    Boxever.eventCreate(feedbackEvent, function (data) { }, \'json\');\n    sendGaEvent(\'Popup Interaction\', \'Form Completed\', \'VOC:SitewideSurvey:VerbatimSubmitted:Score:\' + ratingValue);\n};\n\nbxModalClose.onclick = function() {\n    closeModal();\n};\n\nbxCloseButton.onclick = function() {\n    closeModal();\n};\n\nvar pos = getPos();\ndocument.getElementById(\'bx-contact_link\').setAttribute("href", ("/" + getCountryCode() + "/english/help/") );\ndocument.getElementById(\'bx-complaint_link\').setAttribute("href", ("/" + getCountryCode() + "/english/help/complaint.aspx") );\ndocument.getElementById(\'bx-faq_link\').setAttribute("href", ("/" + getCountryCode() + "/english/help/faqs/") );\ndocument.getElementById(\'bx-contact_link2\').setAttribute("href", ("/" + getCountryCode() + "/english/help/") );\n\n/* Add feedback to card on Help page */\nif (document.querySelector(\'ul.help-centre-feedback__cards-container > li [data-link="Complaints and feedback:Website feedback"]\')) {\n    var helpFeedbackCard =  document.querySelector(\'ul.help-centre-feedback__cards-container > li [data-link="Complaints and feedback:Website feedback"]\');\n    helpFeedbackCard.onclick = function() {\n        bxOptions.style.display = \'none\';\n        bxRating.style.display = \'block\';\n        bxModal.classList.remove("bx-hidden_important");\n        bxModal.style.display = \'flex\';\n    };\n}\n\n\n\n'}}]},{ref:"3dd90c59-022a-4dc8-acd4-f463d903f813",name:"BOX-278 Skywards sign up prompt (MYB & OLCI)",revision:53,archived:!1,target:{script:'function filter() {\n    if (dataLayer && dataLayer.length > 0) {\n        var datalayerData = dataLayer[0];\n        \n        if (datalayerData.visitorLoginState === "Logged Out"\n        && datalayerData.PNR\n        && datalayerData.PNR.length > 0) {\n            targetingPassed();\n        }\n    }\n}\n\nfilter();',targetPages:[{operator:"Contains",value:"/MAB/MYB/ManageBooking.aspx"},{operator:"Contains",value:"/CKIN/OLCI/CheckIn.aspx"}]},traffic:{type:"advancedTraffic",allocationLow:1,allocationHigh:120,splits:[{ref:"77f4bc1e-44f9-4d15-8ea6-1b0d998e6840",lowSplit:1,highSplit:40},{ref:"534968c3-9049-4632-8922-b033315d7cd9",lowSplit:41,highSplit:79},{ref:"01fdfbb8-13c2-4694-bf27-e0caefc62d47",lowSplit:80,highSplit:120}]},variants:[{ref:"77f4bc1e-44f9-4d15-8ea6-1b0d998e6840",name:"Original",assets:{css:"",html:"",js:'const PAGES = {\r\n  MYB: "MYB",\r\n  OLCI_ERROR: "OLCI-ERROR",\r\n  OLCI_SUCCESS: "OLCI-SUCCESS"\r\n};\r\n\r\nfunction sendBoxeverEvent(eventType) {\r\n  var event = {\r\n    channel: "WEB",\r\n    type: eventType,\r\n    page: dataLayer[0].pageName,\r\n    pos: _boxever_settings.pointOfSale,\r\n    browser_id: Boxever.getID()\r\n  };\r\n  Boxever.eventCreate(event, function(data) {}, "json");\r\n}\r\n\r\nfunction triggerEvent(type, page) {\r\n  switch (page) {\r\n    case PAGES.OLCI_ERROR:\r\n    case PAGES.OLCI_SUCCESS:\r\n      sendBoxeverEvent(`BOX278_OLCI_${type}`);\r\n      break;\r\n    default:\r\n      sendBoxeverEvent(`BOX278_MYB_${type}`);\r\n  }\r\n}\r\nfunction trackIframes(page) {\r\n            window.addEventListener(\'blur\', function(e){\r\n    if(document.activeElement.tagName === \'IFRAME\')\r\n    {\r\n          triggerEvent(\r\n          `PRODUCTS_IFRAME_FOCUSED`,\r\n          page\r\n        );\r\n    }\r\n});\r\n}\r\nfunction trackPromos(page) {\r\n  const paidSeatCTA = document.querySelector("#lnkPromoPaidSeat");\r\n  const productsEventsMapping = {\r\n    ctl00_c_MC1_itineraryContainer_ServiceContainer_ctl01_MAB_MDBK:\r\n      "MODIFY_BOOKING",\r\n    ctl00_c_MC1_itineraryContainer_ServiceContainer_ctl02_MAB_SUPG:\r\n      "UPGRADE_MILES",\r\n    ctl00_c_MC1_itineraryContainer_ServiceContainer_ctl03_MAB_FUPG:\r\n      "CASH_UPGRADE"\r\n  };\r\n  if (paidSeatCTA) {\r\n    paidSeatCTA.addEventListener("click", () => {\r\n      triggerEvent("PRODUCTS_PAID_SEAT_CLICKED", page);\r\n    });\r\n  }\r\n  const productsCTAs = document.querySelectorAll(".ts-itinerary-cards a");\r\n  if (productsCTAs && productsCTAs.length) {\r\n    for (var i = 0; i < productsCTAs.length; ++i) {\r\n      productsCTAs[i].addEventListener("click", e => {\r\n        if (e.target.id in productsEventsMapping) {\r\n          triggerEvent(\r\n            `PRODUCTS_${productsEventsMapping[e.target.id]}_CLICKED`,\r\n            page\r\n          );\r\n        }\r\n      });\r\n    }\r\n  }\r\n  \r\n    const ancillaryCTAs = document.querySelectorAll(".ts-ancillary a");\r\n    if (ancillaryCTAs && ancillaryCTAs.length) {\r\n    for (var i = 0; i < ancillaryCTAs.length; ++i) {\r\n      ancillaryCTAs[i].addEventListener("click", e => {\r\n        triggerEvent(\r\n          `ANCILLARY_CLICKED`,\r\n          page\r\n        );\r\n      });\r\n    }\r\n  }\r\n}\r\n\r\n(function() {\r\n  let page = PAGES.MYB;\r\n  if (window.location.href.indexOf("/CKIN/OLCI/CheckIn.aspx") > -1) {\r\n    page = PAGES.OLCI_ERROR;\r\n  } else if (\r\n    window.location.href.indexOf("/CKIN/OLCI/BoardingDelivery.aspx") > -1\r\n  ) {\r\n    page = PAGES.OLCI_SUCCESS;\r\n  } else if (window.location.href.indexOf("/CKIN/OLCI/SelectPax.aspx") > -1) {\r\n    page = PAGES.OLCI_SUCCESS;\r\n  }\r\n  trackPromos(page);\r\n  trackIframes(page);\r\n})();\r\n'}},{ref:"534968c3-9049-4632-8922-b033315d7cd9",name:"Sign up prompt after products listing",assets:{css:":root {\n  --font-helvetica: HelveticaNeue,Helvetica Neue,Helvetica,Lucida Grande,sans-serif;\n  --font-helvetica-light: HelveticaNeue-Light,Helvetica Neue Light,Helvetica Neue,Helvetica,Arial,Lucida Grande,sans-serif;\n  --font-ek-bold: EmiratesSB-Bold, helvetica, arial, sans-serif;\n  --text-color: #333333;\n  --white-color: #FFFFFF;\n  --red-color: #c60c30;\n  --gray-color: #666666;\n}\n\n.bx-skywards-signup-container {\n    padding: 25px 20px;\n    clear: both;\n    display: block;\n    background: var(--white-color);\n    box-shadow: 0 0 10px 0 rgba(0, 0, 0, 0.1);\n    border-collapse: separate;\n    border-radius: 4px;\n    margin: 20px auto;\n    box-sizing: border-box;\n}\n.bx-skywards-signup-header {\n    display: flex;\n    flex-direction: row;\n    justify-content: space-between;\n}\n.bx-skywards-signup-title {\n    font: 700 24px/30px var(--font-ek-bold) !important;\n    color: #333333;\n    float: left;\n    margin-top: 0;\n    margin-bottom: 12px;\n    padding: 0;\n    width: 75%;\n}\n.bx-skywards-signup-title:after {\n    bottom: 0;\n    content: '';\n    width: 55px;\n    border-bottom: solid 1px var(--red-color);\n    display: block;\n    margin-top: 9px;\n}\n\n.bx-skywards-signup-body {\n    font: 700 14px/normal var(--font-helvetica);\n    clear: both;\n    padding: 0;\n    color: var(--text-color);\n    max-width: 75%;\n}\n\n.bx-skywards-signup-tiles {\n    margin: 40px 0 0;\n    display: flex;\n}\n\n.promo-tiles {\n    width: 70%;\n    display: flex;\n    flex-wrap: wrap;\n    justify-content: space-between;\n    margin: 0 30px 0 0;\n}\n\nhtml[dir=\"rtl\"] .promo-tiles{\n    margin: 0 0 0 30px;\n}\n\n.promo-tiles-card {\n    width: 23.5%;\n    display: flex;\n    flex-direction: column;\n}\n\n.promo-tiles-card img {\n    width: 100%;\n    border-radius: 3px 3px 0 0;\n    height: 75px;\n    display: block;\n}\n\n.promo-tiles-card-inner {\n    text-align: center;\n    border-radius: 0 0 3px 3px;\n    box-shadow: 0 2px 4px 2px rgba(0, 0, 0, 0.1);\n    background-color: var(--white-color);\n    padding: 10px;\n    box-sizing: border-box;\n    z-index: 1;\n    flex: 1;\n}\n\n.promo-tiles-card-inner__body {\n    font-size: 12px;\n    line-height: normal;\n    font-family: var(--font-helvetica);\n    font-weight: 300;\n    margin: 0;\n    padding: 0;\n    color: var(--gray-color);\n    white-space: normal;\n}\n\n.promo-tiles-card-inner__title {\n    font: 700 14px/normal var(--font-helvetica) !important;\n    color: var(--text-color);\n    margin: 0 auto 15px;\n    padding: 0;\n}\n\n.promo-tiles-card-inner__title:after {\n    bottom: 0;\n    content: '';\n    width: 20px;\n    border-bottom: solid 1px var(--red-color);\n    display: block;\n    margin: 10px auto 0;\n}\n\n.bx-skywards-sign-up-tiles__prompt {\n    padding: 15px 25px 15px;\n    border-radius: 3px;\n    box-shadow: 2px 2px 4px 3px rgba(0, 0, 0, 0.11);\n    background-color: var(--white-color);\n    width: 30%;\n    text-align: center;\n    display: flex;\n    flex-direction: column;\n}\n.bx-skywards-sign-up-tiles__prompt-title {\n    font: 700 18px/normal var(--font-helvetica) !important;\n    color: var(--text-color);\n    margin: 0 auto 10px;\n    padding: 0;\n}\n\n.bx-skywards-sign-up-tiles__prompt-title:after {\n    bottom: 0;\n    content: '';\n    width: 160px;\n    border-bottom: solid 1px var(--red-color);\n    display: block;\n    margin: 10px auto 0;\n}\n\n.bx-skywards-sign-up-tiles__prompt-body {\n    font: 300 14px/normal var(--font-helvetica) !important;\n    color: var(--text-color);\n    margin: auto;\n    padding: 0;\n}\n\n.bx-skywards-signup__cta {\n    border: 0;\n    height: 40px;\n    border-radius: 3px;\n    line-height: 2.750rem;\n    background-color: var(--red-color);\n    box-shadow: 0 1px 4px 0 rgba(0,0,0,0.1);\n    color: var(--white-color);\n    font-size: 16px;\n    line-height: normal;\n    font-weight: 700;\n    font-family: var(--font-helvetica);\n    width: 190px;\n    padding: 0 10px;\n    overflow: hidden;\n    white-space: normal;\n    text-align: center;\n    text-decoration: none;\n    text-overflow: ellipsis;\n    vertical-align: middle;\n    margin: auto auto 0 auto;\n    display: flex;\n    align-items: center;\n    justify-content: center;\n    cursor: pointer;\n}\n\n.bx-skywards-signup__cta:hover{\n    box-shadow: 0 0 6px 0 grey;\n    color: var(--white-color);\n}\n",html:'<div class="bx-skywards-signup-container">\r\n    <div class="bx-skywards-signup-header">\r\n        <h3 class="bx-skywards-signup-title"></h3>\r\n        <img loading="lazy" alt="" class="bx-skywards-logo"/>\r\n    </div>\r\n    <p class="bx-skywards-signup-body"></p>\r\n    <div class="bx-skywards-signup-tiles">\r\n        <div class="promo-tiles">\r\n                <div class="promo-tiles-card">\r\n                    <img loading="lazy" alt="">\r\n                    <div class="promo-tiles-card-inner">\r\n                        <p class="promo-tiles-card-inner__title"></p>\r\n                        <p class="promo-tiles-card-inner__body"></p>\r\n                    </div>\r\n                </div>\r\n                 <div class="promo-tiles-card">\r\n                    <img loading="lazy" alt="">\r\n                    <div class="promo-tiles-card-inner">\r\n                        <p class="promo-tiles-card-inner__title"></p>\r\n                        <p class="promo-tiles-card-inner__body"></p>\r\n                    </div>\r\n                </div>\r\n                 <div class="promo-tiles-card">\r\n                    <img loading="lazy" alt="">\r\n                    <div class="promo-tiles-card-inner">\r\n                        <p class="promo-tiles-card-inner__title"></p>\r\n                        <p class="promo-tiles-card-inner__body"></p>\r\n                    </div>\r\n                </div>\r\n                <div class="promo-tiles-card">\r\n                    <img loading="lazy" alt="">\r\n                    <div class="promo-tiles-card-inner">\r\n                        <p class="promo-tiles-card-inner__title"></p>\r\n                        <p class="promo-tiles-card-inner__body"></p>\r\n                    </div>\r\n                </div>\r\n        </div>\r\n        <div class="bx-skywards-sign-up-tiles__prompt">\r\n            <h4 class="bx-skywards-sign-up-tiles__prompt-title"></h4>\r\n            <p class="bx-skywards-sign-up-tiles__prompt-body"></p>\r\n            <a id="bx-signup-prompt-cta" target="_blank" class="bx-skywards-signup__cta"></a>\r\n        </div>\r\n    </div>\r\n</div>',js:'const PAGES = {\r\n  MYB: "MYB",\r\n  OLCI_ERROR: "OLCI-ERROR",\r\n  OLCI_SUCCESS: "OLCI-SUCCESS"\r\n};\r\n\r\nfunction sendBoxeverEvent(eventType) {\r\n  var event = {\r\n    channel: "WEB",\r\n    type: eventType,\r\n    page: dataLayer[0].pageName,\r\n    pos: _boxever_settings.pointOfSale,\r\n    browser_id: Boxever.getID()\r\n  };\r\n  Boxever.eventCreate(event, function(data) {}, "json");\r\n}\r\n\r\nfunction trackPromos(page) {\r\n  const paidSeatCTA = document.querySelector("#lnkPromoPaidSeat");\r\n  const productsEventsMapping = {\r\n    ctl00_c_MC1_itineraryContainer_ServiceContainer_ctl01_MAB_MDBK:\r\n      "MODIFY_BOOKING",\r\n    ctl00_c_MC1_itineraryContainer_ServiceContainer_ctl02_MAB_SUPG:\r\n      "UPGRADE_MILES",\r\n    ctl00_c_MC1_itineraryContainer_ServiceContainer_ctl03_MAB_FUPG:\r\n      "CASH_UPGRADE"\r\n  };\r\n  if (paidSeatCTA) {\r\n    paidSeatCTA.addEventListener("click", () => {\r\n      triggerEvent("PRODUCTS_PAID_SEAT_CLICKED", page);\r\n    });\r\n  }\r\n  const productsCTAs = document.querySelectorAll(".ts-itinerary-cards a");\r\n  if (productsCTAs && productsCTAs.length) {\r\n    for (var i = 0; i < productsCTAs.length; ++i) {\r\n      productsCTAs[i].addEventListener("click", e => {\r\n          if(e.target.id in productsEventsMapping) {\r\n        triggerEvent(\r\n          `PRODUCTS_${productsEventsMapping[e.target.id]}_CLICKED`,\r\n          page\r\n        );\r\n          }\r\n      });\r\n    }\r\n  }\r\n  \r\n  const ancillaryCTAs = document.querySelectorAll(".ts-ancillary a");\r\n    if (ancillaryCTAs && ancillaryCTAs.length) {\r\n    for (var i = 0; i < ancillaryCTAs.length; ++i) {\r\n      ancillaryCTAs[i].addEventListener("click", e => {\r\n        triggerEvent(\r\n          `ANCILLARY_CLICKED`,\r\n          page\r\n        );\r\n      });\r\n    }\r\n  }\r\n}\r\n\r\nfunction trackIframes(page) {\r\n            window.addEventListener(\'blur\', function(e){\r\n    if(document.activeElement.tagName === \'IFRAME\')\r\n    {\r\n          triggerEvent(\r\n          `PRODUCTS_IFRAME_FOCUSED`,\r\n          page\r\n        );\r\n    }\r\n});\r\n}\r\n\r\nfunction triggerEvent(type, page) {\r\n  switch (page) {\r\n    case PAGES.OLCI_ERROR:\r\n    case PAGES.OLCI_SUCCESS:\r\n      sendBoxeverEvent(`BOX278_OLCI_${type}`);\r\n      break;\r\n    default:\r\n      sendBoxeverEvent(`BOX278_MYB_${type}`);\r\n  }\r\n}\r\n\r\nlet wrapper = document.querySelector(".ts-box");\r\nlet page = PAGES.MYB;\r\nif (window.location.href.indexOf("/CKIN/OLCI/CheckIn.aspx") > -1) {\r\n  wrapper = document.querySelector(".alt-state-accordion");\r\n  page = PAGES.OLCI_ERROR;\r\n} else if (\r\n  window.location.href.indexOf("/CKIN/OLCI/BoardingDelivery.aspx") > -1\r\n) {\r\n  wrapper = document.querySelector("div#ctl00_c_ctl02_pExcessBAG");\r\n  page = PAGES.OLCI_SUCCESS;\r\n} else if (window.location.href.indexOf("/CKIN/OLCI/SelectPax.aspx") > -1) {\r\n  page = PAGES.OLCI_SUCCESS;\r\n  wrapper = document.querySelector("div#ctl00_c_divFinish");\r\n}\r\nlet publication = "";\r\nif (__PublicationUrl) {\r\n  if (__PublicationUrl !== "/english") {\r\n    publication = __PublicationUrl;\r\n  } else {\r\n    publication = "/global/english";\r\n  }\r\n}\r\nif (publication) {\r\n  if (wrapper) {\r\n    const RESOURCE_KEYS_ENDPOINT = `https://www.emirates.com/service/content/api/v4.0/resources/eol${publication}/Experiences/Skywards-Sign-Up/IBE`;\r\n    const RESOURCE_MAP = {\r\n      promoHeader: "Experiences/Skywards-Sign-Up/IBE/prompt-card-header__text",\r\n      promoBody: "Experiences/Skywards-Sign-Up/IBE/prompt-card-body__text",\r\n      ctaLabel: "Experiences/Skywards-Sign-Up/IBE/sign-up-cta-label__text",\r\n      ctaLink: "Experiences/Skywards-Sign-Up/IBE/sign-up-cta__link",\r\n      widgetTitle: "Experiences/Skywards-Sign-Up/IBE/header-title__text",\r\n      widgetBody: "Experiences/Skywards-Sign-Up/IBE/body-copy__text",\r\n      skywardsLogo: "Experiences/Skywards-Sign-Up/IBE/skywards-logo__image",\r\n      promoTitle_0: "Experiences/Skywards-Sign-Up/IBE/benefit-one-title__text",\r\n      promoBody_0: "Experiences/Skywards-Sign-Up/IBE/benefit-two-body__text",\r\n      promoImage_0: "Experiences/Skywards-Sign-Up/IBE/map-luggage__image",\r\n      promoTitle_1: "Experiences/Skywards-Sign-Up/IBE/benefit-two-title__text",\r\n      promoBody_1: "Experiences/Skywards-Sign-Up/IBE/benefit-one-body__text",\r\n      promoImage_1: "Experiences/Skywards-Sign-Up/IBE/shopping__image",\r\n      promoTitle_2: "Experiences/Skywards-Sign-Up/IBE/benefit-three-title__text",\r\n      promoBody_2: "Experiences/Skywards-Sign-Up/IBE/benefit-three-body__text",\r\n      promoImage_2: "Experiences/Skywards-Sign-Up/IBE/onboard-wifi__image",\r\n      promoTitle_3: "Experiences/Skywards-Sign-Up/IBE/benefit-four-title__text",\r\n      promoBody_3: "Experiences/Skywards-Sign-Up/IBE/benefit-four-body__text",\r\n      promoImage_3: "Experiences/Skywards-Sign-Up/IBE/airport-luggage__image"\r\n    };\r\n    fetch(RESOURCE_KEYS_ENDPOINT)\r\n      .then(response => {\r\n        return response.json();\r\n      })\r\n      .then(results => {\r\n        let resources = null;\r\n        if (results) {\r\n          resources = results.results;\r\n        }\r\n        if (resources && Object.keys(resources).length > 0) {\r\n          let mappedResources = {};\r\n          let resourceMap = RESOURCE_MAP;\r\n          for (var key of Object.keys(resourceMap)) {\r\n            if (resourceMap[key] in resources) {\r\n              mappedResources[key] = resources[resourceMap[key]];\r\n            } else {\r\n              mappedResources[key] = "";\r\n            }\r\n          }\r\n          switch (page) {\r\n            case PAGES.OLCI_ERROR:\r\n              wrapper.insertAdjacentHTML(\r\n                "afterend",\r\n                \'<div class="bx-skywards-signup-wrapper"></div>\'\r\n              );\r\n              break;\r\n            case PAGES.OLCI_SUCCESS:\r\n              let existingSkywardsPromptBlock = document.querySelectorAll(\r\n                ".alt-state-accordion.flight-charges.upgrade-costs.mt40.overflow-visible"\r\n              );\r\n              if (\r\n                existingSkywardsPromptBlock &&\r\n                existingSkywardsPromptBlock.length === 2\r\n              ) {\r\n                existingSkywardsPromptBlock[1].style.display = "none";\r\n              }\r\n              wrapper.insertAdjacentHTML(\r\n                "beforebegin",\r\n                \'<div class="bx-skywards-signup-wrapper"></div>\'\r\n              );\r\n              break;\r\n            default:\r\n              wrapper.insertAdjacentHTML(\r\n                "afterend",\r\n                \'<div class="bx-skywards-signup-wrapper"></div>\'\r\n              );\r\n          }\r\n          insertHTMLAfter(".bx-skywards-signup-wrapper");\r\n          triggerEvent("VIEWED", page);\r\n          trackPromos(page);\r\n          trackIframes(page);\r\n          var signUpBtn = document.getElementById("bx-signup-prompt-cta");\r\n          if (signUpBtn) {\r\n            signUpBtn.innerHTML = mappedResources["ctaLabel"];\r\n            const PRSCode =\r\n              page === PAGES.MYB\r\n                ? "AMYB7"\r\n                : "ACIP7";\r\n            signUpBtn.href = `https://www.emirates.com${mappedResources["ctaLink"].url}&prscode=${PRSCode}`;\r\n            signUpBtn.addEventListener("click", () => {\r\n              triggerEvent("CLICKED", page);\r\n            });\r\n          }\r\n          var promoCardHeader = document.querySelector(\r\n            ".bx-skywards-sign-up-tiles__prompt-title"\r\n          );\r\n          if (promoCardHeader) {\r\n            promoCardHeader.innerHTML = mappedResources["promoHeader"];\r\n          }\r\n          var promoCardBody = document.querySelector(\r\n            ".bx-skywards-sign-up-tiles__prompt-body"\r\n          );\r\n          if (promoCardBody) {\r\n            promoCardBody.innerHTML = mappedResources["promoBody"];\r\n          }\r\n          var widgetTitle = document.querySelector(".bx-skywards-signup-title");\r\n          if (widgetTitle) {\r\n            widgetTitle.innerHTML = mappedResources["widgetTitle"];\r\n          }\r\n          var widgetBody = document.querySelector(".bx-skywards-signup-body");\r\n          if (widgetBody) {\r\n            widgetBody.innerHTML = mappedResources["widgetBody"];\r\n          }\r\n          var logo = document.querySelector(".bx-skywards-logo");\r\n          if (logo) {\r\n            logo.src = mappedResources["skywardsLogo"].url;\r\n          }\r\n          var promoCards = document.querySelectorAll(".promo-tiles-card");\r\n          promoCards.forEach((promoCard, index) => {\r\n            if (page === PAGES.OLCI_ERROR || page === PAGES.OLCI_SUCCESS) {\r\n              if (index === 3) {\r\n                promoCard.style.display = "none";\r\n              } else {\r\n                promoCard.style.width = "32%";\r\n              }\r\n            }\r\n            var imageElement = promoCard.querySelector("img");\r\n            if (imageElement) {\r\n              imageElement.src = mappedResources[`promoImage_${index}`].url;\r\n            }\r\n            var titleElement = promoCard.querySelector(\r\n              "p.promo-tiles-card-inner__title"\r\n            );\r\n            if (titleElement) {\r\n              titleElement.innerHTML = mappedResources[`promoTitle_${index}`];\r\n            }\r\n            var bodyElement = promoCard.querySelector(\r\n              "p.promo-tiles-card-inner__body"\r\n            );\r\n            if (bodyElement) {\r\n              bodyElement.innerHTML = mappedResources[`promoBody_${index}`];\r\n            }\r\n          });\r\n        }\r\n      })\r\n      .catch(error => console.log(error));\r\n  }\r\n}\r\n'}},{ref:"01fdfbb8-13c2-4694-bf27-e0caefc62d47",name:"Sign up prompt before products listing",assets:{css:":root {\n  --font-helvetica: HelveticaNeue,Helvetica Neue,Helvetica,Lucida Grande,sans-serif;\n  --font-helvetica-light: HelveticaNeue-Light,Helvetica Neue Light,Helvetica Neue,Helvetica,Arial,Lucida Grande,sans-serif;\n  --font-ek-bold: EmiratesSB-Bold, helvetica, arial, sans-serif;\n  --text-color: #333333;\n  --white-color: #FFFFFF;\n  --red-color: #c60c30;\n  --gray-color: #666666;\n}\n\n.bx-skywards-signup-container {\n    padding: 25px 20px;\n    clear: both;\n    display: block;\n    background: var(--white-color);\n    box-shadow: 0 0 10px 0 rgba(0, 0, 0, 0.1);\n    border-collapse: separate;\n    border-radius: 4px;\n    margin: 20px auto;\n    box-sizing: border-box;\n}\n.bx-skywards-signup-header {\n    display: flex;\n    flex-direction: row;\n    justify-content: space-between;\n}\n.bx-skywards-signup-title {\n    font: 700 24px/30px var(--font-ek-bold) !important;\n    color: #333333;\n    float: left;\n    margin-top: 0;\n    margin-bottom: 12px;\n    padding: 0;\n    width: 75%;\n}\n.bx-skywards-signup-title:after {\n    bottom: 0;\n    content: '';\n    width: 55px;\n    border-bottom: solid 1px var(--red-color);\n    display: block;\n    margin-top: 9px;\n}\n\n.bx-skywards-signup-body {\n    font: 700 14px/normal var(--font-helvetica);\n    clear: both;\n    padding: 0;\n    color: var(--text-color);\n    max-width: 75%;\n}\n\n.bx-skywards-signup-tiles {\n    margin: 40px 0 0;\n    display: flex;\n}\n\n.promo-tiles {\n    width: 70%;\n    display: flex;\n    flex-wrap: wrap;\n    justify-content: space-between;\n    margin: 0 30px 0 0;\n}\n\nhtml[dir=\"rtl\"] .promo-tiles{\n    margin: 0 0 0 30px;\n}\n\n.promo-tiles-card {\n    width: 23.5%;\n    display: flex;\n    flex-direction: column;\n}\n\n.promo-tiles-card img {\n    width: 100%;\n    border-radius: 3px 3px 0 0;\n    height: 75px;\n    display: block;\n}\n\n.promo-tiles-card-inner {\n    text-align: center;\n    border-radius: 0 0 3px 3px;\n    box-shadow: 0 2px 4px 2px rgba(0, 0, 0, 0.1);\n    background-color: var(--white-color);\n    padding: 10px;\n    box-sizing: border-box;\n    z-index: 1;\n    flex: 1;\n}\n\n.promo-tiles-card-inner__body {\n    font-size: 12px;\n    line-height: normal;\n    font-family: var(--font-helvetica);\n    font-weight: 300;\n    margin: 0;\n    padding: 0;\n    color: var(--gray-color);\n    white-space: normal;\n}\n\n.promo-tiles-card-inner__title {\n    font: 700 14px/normal var(--font-helvetica) !important;\n    color: var(--text-color);\n    margin: 0 auto 15px;\n    padding: 0;\n}\n\n.promo-tiles-card-inner__title:after {\n    bottom: 0;\n    content: '';\n    width: 20px;\n    border-bottom: solid 1px var(--red-color);\n    display: block;\n    margin: 10px auto 0;\n}\n\n.bx-skywards-sign-up-tiles__prompt {\n    padding: 15px 25px 15px;\n    border-radius: 3px;\n    box-shadow: 2px 2px 4px 3px rgba(0, 0, 0, 0.11);\n    background-color: var(--white-color);\n    width: 30%;\n    text-align: center;\n    display: flex;\n    flex-direction: column;\n}\n.bx-skywards-sign-up-tiles__prompt-title {\n    font: 700 18px/normal var(--font-helvetica) !important;\n    color: var(--text-color);\n    margin: 0 auto 10px;\n    padding: 0;\n}\n\n.bx-skywards-sign-up-tiles__prompt-title:after {\n    bottom: 0;\n    content: '';\n    width: 160px;\n    border-bottom: solid 1px var(--red-color);\n    display: block;\n    margin: 10px auto 0;\n}\n\n.bx-skywards-sign-up-tiles__prompt-body {\n    font: 300 14px/normal var(--font-helvetica) !important;\n    color: var(--text-color);\n    margin: auto;\n    padding: 0;\n}\n\n.bx-skywards-signup__cta {\n    border: 0;\n    height: 40px;\n    border-radius: 3px;\n    line-height: 2.750rem;\n    background-color: var(--red-color);\n    box-shadow: 0 1px 4px 0 rgba(0,0,0,0.1);\n    color: var(--white-color);\n    font-size: 16px;\n    line-height: normal;\n    font-weight: 700;\n    font-family: var(--font-helvetica);\n    width: 190px;\n    padding: 0 10px;\n    overflow: hidden;\n    white-space: normal;\n    text-align: center;\n    text-decoration: none;\n    text-overflow: ellipsis;\n    vertical-align: middle;\n    margin: auto auto 0 auto;\n    display: flex;\n    align-items: center;\n    justify-content: center;\n    cursor: pointer;\n}\n\n.bx-skywards-signup__cta:hover{\n    box-shadow: 0 0 6px 0 grey;\n    color: var(--white-color);\n}\n",html:'<div class="bx-skywards-signup-container">\r\n    <div class="bx-skywards-signup-header">\r\n        <h3 class="bx-skywards-signup-title"></h3>\r\n        <img loading="lazy" alt="" class="bx-skywards-logo"/>\r\n    </div>\r\n    <p class="bx-skywards-signup-body"></p>\r\n    <div class="bx-skywards-signup-tiles">\r\n        <div class="promo-tiles">\r\n                <div class="promo-tiles-card">\r\n                    <img loading="lazy" alt="">\r\n                    <div class="promo-tiles-card-inner">\r\n                        <p class="promo-tiles-card-inner__title"></p>\r\n                        <p class="promo-tiles-card-inner__body"></p>\r\n                    </div>\r\n                </div>\r\n                 <div class="promo-tiles-card">\r\n                    <img loading="lazy" alt="">\r\n                    <div class="promo-tiles-card-inner">\r\n                        <p class="promo-tiles-card-inner__title"></p>\r\n                        <p class="promo-tiles-card-inner__body"></p>\r\n                    </div>\r\n                </div>\r\n                 <div class="promo-tiles-card">\r\n                    <img loading="lazy" alt="">\r\n                    <div class="promo-tiles-card-inner">\r\n                        <p class="promo-tiles-card-inner__title"></p>\r\n                        <p class="promo-tiles-card-inner__body"></p>\r\n                    </div>\r\n                </div>\r\n                <div class="promo-tiles-card">\r\n                    <img loading="lazy" alt="">\r\n                    <div class="promo-tiles-card-inner">\r\n                        <p class="promo-tiles-card-inner__title"></p>\r\n                        <p class="promo-tiles-card-inner__body"></p>\r\n                    </div>\r\n                </div>\r\n        </div>\r\n        <div class="bx-skywards-sign-up-tiles__prompt">\r\n            <h4 class="bx-skywards-sign-up-tiles__prompt-title"></h4>\r\n            <p class="bx-skywards-sign-up-tiles__prompt-body"></p>\r\n            <a id="bx-signup-prompt-cta" target="_blank" class="bx-skywards-signup__cta"></a>\r\n        </div>\r\n    </div>\r\n</div>',js:'const PAGES = {\n  MYB: "MYB",\n  OLCI_ERROR: "OLCI-ERROR",\n  OLCI_SUCCESS: "OLCI-SUCCESS",\n};\n\nfunction sendBoxeverEvent(eventType) {\n  var event = {\n    channel: "WEB",\n    type: eventType,\n    page: dataLayer[0].pageName,\n    pos: _boxever_settings.pointOfSale,\n    browser_id: Boxever.getID(),\n  };\n  Boxever.eventCreate(event, function (data) {}, "json");\n}\n\nfunction trackIframes(page) {\n            window.addEventListener(\'blur\', function(e){\n    if(document.activeElement.tagName === \'IFRAME\')\n    {\n          triggerEvent(\n          `PRODUCTS_IFRAME_FOCUSED`,\n          page\n        );\n    }\n});\n}\n\nfunction triggerEvent(type, page) {\n  switch (page) {\n    case PAGES.OLCI_ERROR:\n    case PAGES.OLCI_SUCCESS:\n      sendBoxeverEvent(`BOX278_OLCI_${type}`);\n      break;\n    default:\n      sendBoxeverEvent(`BOX278_MYB_${type}`);\n  }\n}\n\nfunction trackPromos(page) {\n  const paidSeatCTA = document.querySelector("#lnkPromoPaidSeat");\n  const productsEventsMapping = {\n    ctl00_c_MC1_itineraryContainer_ServiceContainer_ctl01_MAB_MDBK:\n      "MODIFY_BOOKING",\n    ctl00_c_MC1_itineraryContainer_ServiceContainer_ctl02_MAB_SUPG:\n      "UPGRADE_MILES",\n    ctl00_c_MC1_itineraryContainer_ServiceContainer_ctl03_MAB_FUPG:\n      "CASH_UPGRADE"\n  };\n  if (paidSeatCTA) {\n    paidSeatCTA.addEventListener("click", () => {\n      triggerEvent("PRODUCTS_PAID_SEAT_CLICKED", page);\n    });\n  }\n  const productsCTAs = document.querySelectorAll(".ts-itinerary-cards a");\n  if (productsCTAs && productsCTAs.length) {\n    for (var i = 0; i < productsCTAs.length; ++i) {\n      productsCTAs[i].addEventListener("click", e => {\n          if(e.target.id in productsEventsMapping) {\n        triggerEvent(\n          `PRODUCTS_${productsEventsMapping[e.target.id]}_CLICKED`,\n          page\n        );\n          }\n      });\n    }\n  }\n  \n    const ancillaryCTAs = document.querySelectorAll(".ts-ancillary a");\n    if (ancillaryCTAs && ancillaryCTAs.length) {\n    for (var i = 0; i < ancillaryCTAs.length; ++i) {\n      ancillaryCTAs[i].addEventListener("click", e => {\n        triggerEvent(\n          `ANCILLARY_CLICKED`,\n          page\n        );\n      });\n    }\n  }\n}\n\nlet wrapper = document.querySelector(".ts-box");\nlet page = PAGES.MYB;\nif (window.location.href.indexOf("/CKIN/OLCI/CheckIn.aspx") > -1) {\n  wrapper = document.querySelector(".alt-state-accordion");\n  page = PAGES.OLCI_ERROR;\n} else if (\n  window.location.href.indexOf("/CKIN/OLCI/BoardingDelivery.aspx") > -1\n) {\n  wrapper = document.querySelector("div#ctl00_c_ctl02_pExcessBAG");\n  page = PAGES.OLCI_SUCCESS;\n} else if (window.location.href.indexOf("/CKIN/OLCI/SelectPax.aspx") > -1) {\n  page = PAGES.OLCI_SUCCESS;\n  wrapper = document.querySelector("div#ctl00_c_divFinish");\n}\nlet publication = "";\nif (__PublicationUrl) {\n  if (__PublicationUrl !== "/english") {\n    publication = __PublicationUrl;\n  } else {\n    publication = "/global/english";\n  }\n}\nif (publication) {\n  if (wrapper) {\n    const RESOURCE_KEYS_ENDPOINT = `https://www.emirates.com/service/content/api/v4.0/resources/eol${publication}/Experiences/Skywards-Sign-Up/IBE`;\n    const RESOURCE_MAP = {\n      promoHeader: "Experiences/Skywards-Sign-Up/IBE/prompt-card-header__text",\n      promoBody: "Experiences/Skywards-Sign-Up/IBE/prompt-card-body__text",\n      ctaLabel: "Experiences/Skywards-Sign-Up/IBE/sign-up-cta-label__text",\n      ctaLink: "Experiences/Skywards-Sign-Up/IBE/sign-up-cta__link",\n      widgetTitle: "Experiences/Skywards-Sign-Up/IBE/header-title__text",\n      widgetBody: "Experiences/Skywards-Sign-Up/IBE/body-copy__text",\n      skywardsLogo: "Experiences/Skywards-Sign-Up/IBE/skywards-logo__image",\n      promoTitle_0: "Experiences/Skywards-Sign-Up/IBE/benefit-one-title__text",\n      promoBody_0: "Experiences/Skywards-Sign-Up/IBE/benefit-two-body__text",\n      promoImage_0: "Experiences/Skywards-Sign-Up/IBE/map-luggage__image",\n      promoTitle_1: "Experiences/Skywards-Sign-Up/IBE/benefit-two-title__text",\n      promoBody_1: "Experiences/Skywards-Sign-Up/IBE/benefit-one-body__text",\n      promoImage_1: "Experiences/Skywards-Sign-Up/IBE/shopping__image",\n      promoTitle_2: "Experiences/Skywards-Sign-Up/IBE/benefit-three-title__text",\n      promoBody_2: "Experiences/Skywards-Sign-Up/IBE/benefit-three-body__text",\n      promoImage_2: "Experiences/Skywards-Sign-Up/IBE/onboard-wifi__image",\n      promoTitle_3: "Experiences/Skywards-Sign-Up/IBE/benefit-four-title__text",\n      promoBody_3: "Experiences/Skywards-Sign-Up/IBE/benefit-four-body__text",\n      promoImage_3: "Experiences/Skywards-Sign-Up/IBE/airport-luggage__image",\n    };\n    fetch(RESOURCE_KEYS_ENDPOINT)\n      .then((response) => {\n        return response.json();\n      })\n      .then((results) => {\n        let resources = null;\n        if (results) {\n          resources = results.results;\n        }\n        if (resources && Object.keys(resources).length > 0) {\n          let mappedResources = {};\n          let resourceMap = RESOURCE_MAP;\n          for (var key of Object.keys(resourceMap)) {\n            if (resourceMap[key] in resources) {\n              mappedResources[key] = resources[resourceMap[key]];\n            } else {\n              mappedResources[key] = "";\n            }\n          }\n          switch (page) {\n            case PAGES.OLCI_ERROR:\n              wrapper.insertAdjacentHTML(\n                "afterend",\n                \'<div class="bx-skywards-signup-wrapper"></div>\'\n              );\n              break;\n            case PAGES.OLCI_SUCCESS:\n              let existingSkywardsPromptBlock = document.querySelectorAll(\n                ".alt-state-accordion.flight-charges.upgrade-costs.mt40.overflow-visible"\n              );\n              if (\n                existingSkywardsPromptBlock &&\n                existingSkywardsPromptBlock.length === 2\n              ) {\n                existingSkywardsPromptBlock[1].style.display = "none";\n              }\n              wrapper.insertAdjacentHTML(\n                "beforebegin",\n                \'<div class="bx-skywards-signup-wrapper"></div>\'\n              );\n              break;\n            default:\n              wrapper.insertAdjacentHTML(\n                "beforebegin",\n                \'<div class="bx-skywards-signup-wrapper"></div>\'\n              );\n          }\n          insertHTMLAfter(".bx-skywards-signup-wrapper");\n          triggerEvent("VIEWED", page);\n          trackPromos(page);\n          trackIframes(page);\n          var signUpBtn = document.getElementById("bx-signup-prompt-cta");\n          if (signUpBtn) {\n            signUpBtn.innerHTML = mappedResources["ctaLabel"];\n            const PRSCode =\n              page === PAGES.MYB\n                ? "AMYB7"\n                : "ACIP7";\n            signUpBtn.href = `https://www.emirates.com${mappedResources["ctaLink"].url}&prscode=${PRSCode}`;\n            signUpBtn.addEventListener("click", () => {\n              triggerEvent("CLICKED", page);\n            });\n          }\n          var promoCardHeader = document.querySelector(\n            ".bx-skywards-sign-up-tiles__prompt-title"\n          );\n          if (promoCardHeader) {\n            promoCardHeader.innerHTML = mappedResources["promoHeader"];\n          }\n          var promoCardBody = document.querySelector(\n            ".bx-skywards-sign-up-tiles__prompt-body"\n          );\n          if (promoCardBody) {\n            promoCardBody.innerHTML = mappedResources["promoBody"];\n          }\n          var widgetTitle = document.querySelector(".bx-skywards-signup-title");\n          if (widgetTitle) {\n            widgetTitle.innerHTML = mappedResources["widgetTitle"];\n          }\n          var widgetBody = document.querySelector(".bx-skywards-signup-body");\n          if (widgetBody) {\n            widgetBody.innerHTML = mappedResources["widgetBody"];\n          }\n          var logo = document.querySelector(".bx-skywards-logo");\n          if (logo) {\n            logo.src = mappedResources["skywardsLogo"].url;\n          }\n          var promoCards = document.querySelectorAll(".promo-tiles-card");\n          promoCards.forEach((promoCard, index) => {\n            if (page === PAGES.OLCI_ERROR || page === PAGES.OLCI_SUCCESS) {\n              if (index === 3) {\n                promoCard.style.display = "none";\n              } else {\n                promoCard.style.width = "32%";\n              }\n            }\n            var imageElement = promoCard.querySelector("img");\n            if (imageElement) {\n              imageElement.src = mappedResources[`promoImage_${index}`].url;\n            }\n            var titleElement = promoCard.querySelector(\n              "p.promo-tiles-card-inner__title"\n            );\n            if (titleElement) {\n              titleElement.innerHTML = mappedResources[`promoTitle_${index}`];\n            }\n            var bodyElement = promoCard.querySelector(\n              "p.promo-tiles-card-inner__body"\n            );\n            if (bodyElement) {\n              bodyElement.innerHTML = mappedResources[`promoBody_${index}`];\n            }\n          });\n        }\n      })\n      .catch((error) => console.log(error));\n  }\n}\n'}}]},{ref:"6bc395d5-e8ef-4cd2-ba33-fadd90e00ed8",name:"BOX-276 Skywards sign up prompt (MWEB)",revision:43,archived:!1,target:{script:'function filter() {\n  if (dataLayer && dataLayer.length > 0) {\n    var datalayerData = dataLayer[0];\n\n    if (\n      (!cookieComplianceEnabled ||\n        (cookieComplianceEnabled &&\n          OnetrustActiveGroups.indexOf(cookieComplianceFunctionalGroup) > -1)) \n        && datalayerData.visitorLoginState === "Logged Out"\n        && datalayerData.PNR\n        && datalayerData.PNR.length > 0\n    ) {\n      targetingPassed();\n    }\n  }\n}\n\nvar cookieComplianceEnabled = true;\nvar cookieComplianceFunctionalGroup = "C0002";\nif (cookieComplianceEnabled) {\n  window.addEventListener("OneTrustGroupsUpdated", function(e) {\n    if (OnetrustActiveGroups.indexOf(cookieComplianceFunctionalGroup) > -1) {\n      filter();\n    } else {\n      //Hide experience wrapper if functional group is disabled\n      const wrapper = document.querySelector(".bx-skywards-signup-container");\n      if(wrapper) {\n         wrapper.style.display = "none";\n      }\n    }\n  });\n}\nfilter();',targetPages:[{operator:"Contains",value:"/CAB/IBE/bookingConfirmation.xhtml"}]},traffic:{type:"advancedTraffic",allocationLow:1,allocationHigh:120,splits:[{ref:"e72f8efc-4f97-41de-b89e-d5f6faa63966",lowSplit:1,highSplit:60},{ref:"3601a760-ae7d-4599-8641-0fd2a6b94199",lowSplit:61,highSplit:120}]},variants:[{ref:"e72f8efc-4f97-41de-b89e-d5f6faa63966",name:"Original",assets:{css:"",html:"",js:""}},{ref:"3601a760-ae7d-4599-8641-0fd2a6b94199",name:"Sign up prompt",assets:{css:':root {\n  --font-helvetica: HelveticaNeue,Helvetica Neue,Helvetica,Lucida Grande,sans-serif;\n  --font-helvetica-light: HelveticaNeue-Light,Helvetica Neue Light,Helvetica Neue,Helvetica,Arial,Lucida Grande,sans-serif;\n  --font-ek: Emirates,Helvetica,Arial,Lucida Grande,sans-serif;\n  --text-color: #333333;\n  --white-color: #FFFFFF;\n  --red-color: #c60c30;\n  --gray-color: #d6d6d6;\n}\n\n.bx-skywards-signup-container {\n    background-color: var(--white-color);\n    padding: 20px 25px;\n    display: flex;\n    flex-direction: column;\n    margin: 20px 0 10px 0;\n}\n\n.bx-skywards-signup__img {\n    width: 200px;\n    margin: 0 auto 10px auto;\n}\n\n.bx-skywards-signup__title {\n    font-family: var(--font-ek);\n    text-align: center;\n    font-size: 24px;\n    line-height: 28px;\n    width: 260px;\n    font-weight: 700;\n}\n\n.bx-skywards-signup__header {\n    margin: 0 auto;\n}\n\n.bx-skywards-signup__header:after {\n    content: "";\n    background-color: var(--red-color);\n    height: 2px;\n    width: 60px;\n    margin: 10px auto;\n    display: block;\n}\n\n.bx-skywards-signup__list {\n    margin: 0;\n    color: var(--gray-color);\n    font-size: 20px;\n    padding: 0 15px;\n}\n\n.bx-skywards-signup__list-item {\n   font-weight: 500;\n   font-size: 14px;\n   color: var(--text-color);\n   font-family: var(--font-helvetica);\n}\n\n.bx-skywards-signup__summary {\n    margin: 10px auto 0;\n}\n\n.bx-skywards-signup__summary-title {\n    font-family: var(--font-helvetica);\n    font-size: 14px;\n    font-weight: 700;\n    width: 270px;\n    text-align: center;\n}\n\n.bx-skywards-signup__copy {\n    width: 100%;\n    text-align: center;\n    font-weight: 300;\n    font-family: var(--font-helvetica);\n    font-size: 14px;\n}\n\n.bx-skywards-signup__copy-bold {\n    font-weight: 700;\n}\n\n.bx-skywards-signup__cta {\n    border: 0;\n    height: 40px;\n    border-radius: 3px;\n    line-height: 2.750rem;\n    background-color: var(--red-color);\n    box-shadow: 0 1px 4px 0 rgba(0,0,0,0.1);\n    color: var(--white-color);\n    font-size: 16px;\n    line-height: 18px;\n    font-weight: 700;\n    font-family: var(--font-helvetica);\n    width: 100%;\n    overflow: hidden;\n    white-space: normal;\n    text-align: center;\n    text-decoration: none;\n    text-overflow: ellipsis;\n    vertical-align: middle;\n    margin: 20px auto 0 auto;\n    display: flex;\n    align-items: center;\n    justify-content: center;\n    cursor: pointer;\n}\n',html:'<div class="bx-skywards-signup-container">\r\n    <img loading="lazy" alt="" class="bx-skywards-signup__img">\r\n    <div class="bx-skywards-signup__header">\r\n        <h2 class="bx-skywards-signup__title"></h2>\r\n    </div>\r\n    <ul class="bx-skywards-signup__list"></ul>\r\n    <div class="bx-skywards-signup__header bx-skywards-signup__summary">\r\n        <h4 class="bx-skywards-signup__summary-title"></h4>\r\n    </div>\r\n    <p class="bx-skywards-signup__copy"></p>\r\n    <a class="bx-skywards-signup__cta" id="bx-signup-prompt-bx-cta"></a>\r\n</div>',js:'function sendBoxeverEvent(eventType) {\n  var event = {\n    channel: "MOBILE_WEB",\n    type: eventType,\n    page: dataLayer[0].pageName,\n    pos: _boxever_settings.pointOfSale,\n    browser_id: Boxever.getID(),\n  };\n  Boxever.eventCreate(event, function (data) {}, "json");\n}\nlet publication = \'\'\nconst pagePublication = document.getElementById(\'pub\');\nif(pagePublication) {\n    if(pagePublication.value !== \'/english\') {\n        publication = pagePublication.value;\n    } else {        \n        publication = \'/global/english\';\n    }\n}\nif(publication) {\nconst RESOURCE_KEYS_ENDPOINT = `https://www.emirates.com/service/content/api/v4.0/resources/eol${publication}/Experiences/Skywards-Sign-Up/Mobile-Web`;\nconst RESOURCE_MAP = {\n  promoHeader: "Experiences/Skywards-Sign-Up/Mobile-Web/header-title__text",\n  promoBody: "Experiences/Skywards-Sign-Up/Mobile-Web/body-copy__text",\n  ctaLabel: "Experiences/Skywards-Sign-Up/Mobile-Web/sign-up-cta-label__text",\n  ctaLink: "Experiences/Skywards-Sign-Up/Mobile-Web/sign-up-cta__link",\n  promoSummary: "Experiences/Skywards-Sign-Up/Mobile-Web/summary__text",\n  skywardsLogo: "Experiences/Skywards-Sign-Up/Mobile-Web/skywards-logo__image",\n};\nconst benefitList = {\n  benefit_1: "Experiences/Skywards-Sign-Up/Mobile-Web/benefit-one__text",\n  benefit_2: "Experiences/Skywards-Sign-Up/Mobile-Web/benefit-two__text",\n  benefit_3: "Experiences/Skywards-Sign-Up/Mobile-Web/benefit-three__text",\n  benefit_4: "Experiences/Skywards-Sign-Up/Mobile-Web/benefit-four__text",\n};\nfetch(RESOURCE_KEYS_ENDPOINT)\n  .then((response) => {\n    return response.json();\n  })\n  .then((results) => {\n    let resources = null;\n    if (results) {\n      resources = results.results;\n    }\n    if (resources && Object.keys(resources).length > 0) {\n      let mappedResources = {};\n      let resourceMap = RESOURCE_MAP;\n      for (var key of Object.keys(resourceMap)) {\n        if (resourceMap[key] in resources) {\n          mappedResources[key] = resources[resourceMap[key]];\n        } else {\n          mappedResources[key] = "";\n        }\n      }\n      insertHTMLAfter(".pl-32.pr-32.pb-32.bg-creamy.cf");\n      sendBoxeverEvent("BOX276_VIEWED");\n      var signUpBtn = document.getElementById("bx-signup-prompt-bx-cta");\n      if (signUpBtn) {\n        signUpBtn.innerHTML = `<span>${mappedResources["ctaLabel"]}</span>`;\n        signUpBtn.href = `https://www.emirates.com${mappedResources["ctaLink"].url}&prscode=AEOB7`;\n        signUpBtn.addEventListener("click", () => {\n          sendBoxeverEvent("BOX276_CLICKED");\n        });\n      }\n      var promoHeader = document.querySelector(".bx-skywards-signup__title");\n      if (promoHeader) {\n        promoHeader.innerHTML = mappedResources["promoHeader"];\n      }\n      var promoCardBody = document.querySelector(\n        ".bx-skywards-signup__summary-title"\n      );\n      if (promoCardBody) {\n        promoCardBody.innerHTML = mappedResources["promoBody"];\n      }\n      var promoSummary = document.querySelector(".bx-skywards-signup__copy");\n      if (promoSummary) {\n        promoSummary.innerHTML = mappedResources["promoSummary"];\n      }\n      var logo = document.querySelector(".bx-skywards-signup__img");\n      if (logo) {\n        logo.src = mappedResources["skywardsLogo"].url;\n      }\n      var benefitsListElement = document.querySelector(\n        ".bx-skywards-signup-container .bx-skywards-signup__list"\n      );\n      if (benefitsListElement) {\n          for (const benefit in benefitList) {\n              if (benefitList.hasOwnProperty(benefit)) {\n                    if (benefitList[benefit] in resources) {\n                        benefitsListElement.innerHTML += `<li><span class="bx-skywards-signup__list-item">${resources[benefitList[benefit]]}</span></li>`;\n                    }\n              }\n          }\n      }\n    }\n  })\n  .catch((error) => console.log(error));\n}\n'}}]},{ref:"bea86717-219b-4973-9843-6a48fbac2a3b",name:"BOX-135 Skywards Signup Prompt (Web)",revision:32,archived:!1,target:{script:'function filter() {\n    if (dataLayer && dataLayer.length > 0) {\n        var datalayerData = dataLayer[0];\n        \n        if ( (!cookieComplianceEnabled ||\n        (cookieComplianceEnabled &&\n          OnetrustActiveGroups.indexOf(cookieComplianceFunctionalGroup) > -1))\n        && datalayerData.visitorLoginState === "Logged Out"\n        && datalayerData.PNR\n        && datalayerData.PNR.length > 0) {\n            targetingPassed();\n        }\n    }\n}\n\nvar cookieComplianceEnabled = true;\nvar cookieComplianceFunctionalGroup = "C0002";\nif (cookieComplianceEnabled) {\n  window.addEventListener("OneTrustGroupsUpdated", function(e) {\n    if (OnetrustActiveGroups.indexOf(cookieComplianceFunctionalGroup) > -1) {\n      filter();\n    } else {\n      //Hide experience wrapper if functional group is disabled\n      const wrapper = document.querySelector(".bx-signup-prompt");\n      if(wrapper) {\n        wrapper.style.display = "none";\n      }\n    }\n  });\n}\nfilter();',targetPages:[{operator:"Contains",value:"/CAB/IBESSL/FlightConfirmation.aspx"}]},traffic:{type:"advancedTraffic",allocationLow:1,allocationHigh:120,splits:[{ref:"7f491c84-2325-457e-8556-b957178cb800",lowSplit:1,highSplit:120}]},variants:[{ref:"7f491c84-2325-457e-8556-b957178cb800",name:"Personalisation",assets:{css:".bx-signup-prompt {\n    display: flex;\n    flex-direction: column;\n    max-width: 1100px;\n    margin: 40px auto;\n}\n\n.bx-signup-prompt svg {\n    margin: 0 auto 15px;\n}\n\nh2.bx-signup-prompt-title {\n    font-size: 30px;\n    line-height: 34px;\n    color: #333 !important;\n    margin: 15px 0 0;\n    padding: 0 !important;\n    max-width: 762px;\n    text-align: center;\n    font-family: EmiratesSB-Bold,Helvetica,Arial,Lucida Grande,sans-serif !important;\n    text-align: center;\n    margin: auto;\n}\n\n.bx-signup-prompt-content {\n    margin-top: 20px;\n    padding: 0;\n    font-size: 14px;\n    line-height: 18px;\n    font-family: HelveticaNeue,Helvetica Neue,Helvetica,Lucida Grande,sans-serif;\n    text-align: center;\n    max-width: 560px;\n    color: #333;\n    margin: 20px auto 0;\n}\n\na.bx-signup-prompt-bx-cta {\n    min-width: 170px;\n    text-align: center;\n    justify-content: center;\n    align-items: center;\n    display: flex;\n    cursor: pointer;\n    font-weight: 700;\n    text-decoration: none;\n    appearance: none!important;\n    white-space: normal;\n    max-width: 180px;\n    margin: 30px auto 0;\n    border: 0;\n    background: #c60c30;\n    color: #fff;\n    padding: 12px;\n    border-radius: 3px;\n    font-size: 16px;\n    font-family: HelveticaNeue,Helvetica Neue,Helvetica,Lucida Grande,sans-serif;\n    box-sizing: border-box;\n}\n\na.bx-signup-prompt-bx-cta:hover {\n    box-shadow: 0 0 0.6rem 0 rgba(0,0,0,.5);\n}\n\na.bx-signup-prompt-bx-cta:focus {\n    border-radius: 2px;\n    box-shadow: 0 0 2px 1.5px #fff, 0 0 3px 3px #000;\n    outline: 0;\n}\n\nh2.bx-signup-prompt-promo-title {\n    text-align: center;\n    margin: 30px 0 30px;\n    font-size: 18px;\n    font-family: HelveticaNeue,Helvetica Neue,Helvetica,Lucida Grande,sans-serif;\n    font-weight: 700;\n    color: #333;\n}\n\n.bx-signup-prompt-promo-tiles {\n    width: 100%;\n    padding: 0 0 20px;\n    display: flex;\n    flex-wrap: wrap;\n    justify-content: space-between;\n}\n\n.bx-signup-prompt-promo-tiles-card {\n    width: 32.2%;\n    display: flex;\n    flex-direction: column;\n}\n\n.bx-signup-prompt-promo-tiles-card img {\n    width: 100%;\n    border-radius: 3px 3px 0 0;\n}\n\n.bx-signup-prompt-promo-tiles-card--inner {\n    text-align: center;\n    border-radius: 0 0 3px 3px;\n    box-shadow: 0 2px 4px 2px rgba(0, 0, 0, 0.1);\n    background-color: #fff;\n    padding: 30px;\n    box-sizing: border-box;\n    z-index: 1;\n    position: relative;\n    min-height: 96px;\n    flex: 1;\n}\n\n.bx-signup-prompt-promo-tiles-card--inner p {\n    font-size: 14px;\n    line-height: 18px;\n    font-family: HelveticaNeue,Helvetica Neue,Helvetica,Lucida Grande,sans-serif;\n    font-weight: bold;\n    margin: 0;\n    padding: 0;\n    color: #333;\n    white-space: normal;\n    width: auto !important;\n}",html:'<div class="bx-signup-prompt">\n   <svg width="42" height="42" xmlns="http://www.w3.org/2000/svg"><path d="M16.694 34c-.799 0-1.46-.257-1.976-.768L3 21.779l3.953-3.84 9.741 9.427L35.047 9 39 12.91 18.6 33.233c-.517.511-1.152.768-1.906.768z" fill="#287214"/></svg>\n   <h2 class="bx-signup-prompt-title"></h2>\n    <p class="bx-signup-prompt-content"></p>\n    \n    <a target="_blank" class="bx-signup-prompt-bx-cta" id="bx-signup-prompt-bx-cta"></a>\n    <h2 class="bx-signup-prompt-promo-title"></h2>\n\n    <div class="bx-signup-prompt-promo-tiles">\n        <div class="bx-signup-prompt-promo-tiles-card">\n            <img loading="lazy" alt="">\n            <div class="bx-signup-prompt-promo-tiles-card--inner">\n                <p></p>\n            </div>\n        </div>\n            <div class="bx-signup-prompt-promo-tiles-card">\n            <img loading="lazy" alt="">\n            <div class="bx-signup-prompt-promo-tiles-card--inner">\n                <p></p>\n            </div>\n        </div>\n            <div class="bx-signup-prompt-promo-tiles-card">\n            <img loading="lazy" alt="">\n            <div class="bx-signup-prompt-promo-tiles-card--inner">\n                <p></p>\n            </div>\n        </div>\n    </div>\n</div>',js:'function sendBoxeverEvent(eventType) {\n  var event = {\n    channel: "WEB",\n    type: eventType,\n    page: dataLayer[0].pageName,\n    pos: _boxever_settings.pointOfSale,\n    browser_id: Boxever.getID(),\n  };\n  Boxever.eventCreate(event, function (data) {}, "json");\n}\nlet publication = "";\nif (__PublicationUrl) {\n  if (__PublicationUrl !== "/english") {\n    publication = __PublicationUrl;\n  } else {\n    publication = "/global/english";\n  }\n}\nif (publication) {\n  const RESOURCE_KEYS_ENDPOINT = `https://www.emirates.com/service/content/api/v4.0/resources/eol${publication}/Experiences/Skywards-Sign-Up/Booking-Confirmation-IBE`;\n  const RESOURCE_MAP = {\n    ctaLabel: "Experiences/Skywards-Sign-Up/Booking-Confirmation-IBE/sign-up-cta-label__text",\n    ctaLink: "Experiences/Skywards-Sign-Up/Booking-Confirmation-IBE/sign-up-cta__link",\n    widgetTitle: "Experiences/Skywards-Sign-Up/Booking-Confirmation-IBE/widget-title__text",\n    widgetBody: "Experiences/Skywards-Sign-Up/Booking-Confirmation-IBE/widget-body__text",\n    benefitsListTitle: "Experiences/Skywards-Sign-Up/Booking-Confirmation-IBE/promo-title__text",\n    promoBody_0: "Experiences/Skywards-Sign-Up/Booking-Confirmation-IBE/benefit-one__text",\n    promoImage_0: "Experiences/Skywards-Sign-Up/Booking-Confirmation-IBE/benefit-one__image",\n    promoBody_1: "Experiences/Skywards-Sign-Up/Booking-Confirmation-IBE/benefit-two__text",\n    promoImage_1: "Experiences/Skywards-Sign-Up/Booking-Confirmation-IBE/benefit-two__image",\n    promoBody_2: "Experiences/Skywards-Sign-Up/Booking-Confirmation-IBE/benefit-three__text",\n    promoImage_2: "Experiences/Skywards-Sign-Up/Booking-Confirmation-IBE/benefit-three__image",\n  };\n  fetch(RESOURCE_KEYS_ENDPOINT)\n    .then((response) => {\n      return response.json();\n    })\n    .then((results) => {\n      let resources = null;\n      if (results) {\n        resources = results.results;\n      }\n      if (resources && Object.keys(resources).length > 0) {\n        let mappedResources = {};\n        let resourceMap = RESOURCE_MAP;\n        for (var key of Object.keys(resourceMap)) {\n          if (resourceMap[key] in resources) {\n            mappedResources[key] = resources[resourceMap[key]];\n          } else {\n            mappedResources[key] = "";\n          }\n        }\n        insertHTMLAfter(".ts-panel__container");\n        sendBoxeverEvent("BOX135_VIEWED");\n        var widgetTitle = document.querySelector(".bx-signup-prompt-title");\n        if (widgetTitle) {\n          widgetTitle.innerHTML = mappedResources["widgetTitle"];\n        }\n        var widgetBody = document.querySelector(".bx-signup-prompt-content");\n        if (widgetBody) {\n          widgetBody.innerHTML = mappedResources["widgetBody"];\n        }\n        var loginButton = document.getElementById("bx-signup-prompt-bx-cta");\n        if (loginButton) {\n          loginButton.innerHTML = mappedResources["ctaLabel"];\n          loginButton.href = `https://www.emirates.com${mappedResources["ctaLink"].url}&prscode=AEOB7`;\n          loginButton.addEventListener("click", () => {\n            sendBoxeverEvent("BOX135_CLICKED");\n          });\n        }\n        var benefitsListTitle = document.querySelector(\n          ".bx-signup-prompt-promo-title"\n        );\n        if (benefitsListTitle) {\n          benefitsListTitle.innerHTML = mappedResources["benefitsListTitle"];\n        }\n        var promoCards = document.querySelectorAll(\n          ".bx-signup-prompt-promo-tiles-card"\n        );\n        promoCards.forEach((promoCard, index) => {\n          var imageElement = promoCard.querySelector("img");\n          if (imageElement) {\n            imageElement.src = mappedResources[`promoImage_${index}`].url;\n          }\n          var bodyElement = promoCard.querySelector(\n            "div.bx-signup-prompt-promo-tiles-card--inner p"\n          );\n          if (bodyElement) {\n            bodyElement.innerHTML = mappedResources[`promoBody_${index}`];\n          }\n        });\n      }\n    })\n    .catch((error) => console.log(error));\n}\n'}}]},{ref:"7a0631ac-899a-4f7f-b30e-7d99bb1b45a6",name:"BOX-282 IBE Error Pages Recent Search Listing",revision:112,archived:!1,target:{targetPages:[{operator:"Contains",value:"/CAB/SessionTimeout.aspx"},{operator:"Contains",value:"/CAB/InvalidProcess.aspx"}]},traffic:{type:"advancedTraffic",allocationLow:1,allocationHigh:120,splits:[{ref:"420a1419-3237-444a-abec-ec76b6217fd6",lowSplit:1,highSplit:0},{ref:"7a106ccc-1751-417b-83fa-03b53b15493a",lowSplit:1,highSplit:120}]},variants:[{ref:"420a1419-3237-444a-abec-ec76b6217fd6",name:"Original",assets:{css:"/** style your Experience with CSS */",html:"",js:""}},{ref:"7a106ccc-1751-417b-83fa-03b53b15493a",name:"Recent Search Listing",assets:{css:'@import url("https://c.ekstatic.net/shared/fonts/iconography/iconography-20190304.css");\n\ndiv#mainContainer {\n    width: 100%;\n    max-width: 1100px;\n}\n \ndiv#column2Container {\n    width: 754px;\n}\n \ndiv#column2 {\n    padding: 0 0 100px 0;\n}\n\ndiv##column1 {\n    padding: 0;\n}\n\n@media screen and (min-width: 1024px) {\n.ek.ek-wrapper.new-ek-footer.navigation-skinny {\n    position: fixed;\n    bottom: 0;\n    left: 0;\n    right: 0;\n}\n}\n\n#column2 .ts-session-expire .ts-session-expire--link {\n    border-radius: 3px;\n}\n \n#column2 .ts-session-expire .ts-session-expire--link:hover {\n    -webkit-box-shadow: 0 0 5px rgba(0,0,0,.5);\n    box-shadow: 0 0 5px rgba(0,0,0,.5);\n}\n \n#column2 .ts-session-expire.active p {\n    font-size: 14px;\n    color: #333;\n    font-family: HelveticaNeue,Helvetica Neue,Helvetica,Arial,Lucida Grande,sans-serif;\n}\n \n.skip-to.hidden-xs.hidden-sm.navigation-skinny {\n    margin-top: -2px;\n}\n \n \n.bx-search-results-row {\n    display: flex;\n    border: 1px solid #d8d8d8;\n    padding: 20px;\n    border-top: 0;\n    font-family: HelveticaNeue,Helvetica Neue,Helvetica,Arial,Lucida Grande,sans-serif;\n    /*align-items: baseline;*/\n}\n \n.bx-search-results-col {\n    font-size: 14px;\n    color: #333;\n}\n \n.bx-search-results {\n    margin: 20px 0;\n}\n \n.bx-search-results-col:nth-child(2) {\n    width: 30%;\n}\n \n.bx-search-results-col:first-child {\n    width: 60%;\n    display: flex;\n}\n \n.bx-search-results-col:nth-child(3) {\n    width: 10%;\n}\nhtml[dir="rtl"] .bx-search-results-col:last-child {\n    text-align: left;\n}\n.bx-search-results-col:last-child {\n    text-align: right;\n    width: 30%;\n}\n\nhtml[dir="rtl"] .bx-search-results-col:first-child >div:first-child {\n    margin-left: 10px;\n    margin-right: 0;\n}\n \n.bx-search-results-col:first-child >div:first-child {\n    margin-right: 10px;\n}\n \nhtml[dir="rtl"] .bx-search-results-col:first-child span {\n    margin-right: 2px;\n    margin-left: 0;\n}\n.bx-search-results-col:first-child span {\n    font-weight: 700;\n    margin-left: 2px;\n}\n \n.bx-search-results-col:first-child span:last-child {\n    font-weight: normal;\n}\n\nhtml[dir="rtl"] .bx-search-results-col:first-child >div:last-child {\n    margin-right: 10px;\n    margin-left: 0;\n}\n.bx-search-results-col:first-child >div:last-child {\n    margin-left: 10px;\n}\n \n.bx-search-results-row:first-child {\n    border-top: 1px solid #d8d8d8;\n}\n \n.bx-search-results-col > a {\n    font-weight: normal;\n    color: #333;\n    text-decoration: underline;\n    color: #c60c30;\n}\n \n.bx-search-results-col > a:hover {\n    text-decoration: none;\n}\n \n.bx-search-results-col:nth-child(3) span {\n    display: flex;\n    align-items: center;\n}\nhtml[dir="rtl"] .bx-search-results-col:nth-child(3) span svg {\n    margin-right: 0;\n    margin-left: 5px;\n}\n.bx-search-results-col:nth-child(3) span svg{\n    margin-right: 5px;\n}\n \n \n/* responsive layout fix*/\n.ek.ek-wrapper.new-ek-footer .footer-navigation .footer-nav-container .container {\n    width: auto;\n    max-width: 1200px;\n}\n \nbody.extended-body {\n    width: 100%;\n    min-width: auto;\n}\n \n.ek.ek-wrapper.new-ek-footer {\n    width: 100% !important;\n}\n \n.ek.ek-wrapper.new-global-nav .navigation-skinny {\n    width: 100%;\n    max-width: 1200px;\n}\n \n#column2 .ts-session-expire {\n        padding: 0 10px;\n}\n   \n@media screen and (max-width: 1023px) {\n    #column2 .ts-session-expire {\n        padding: 0 20px;\n    }\n}\n \n \n@media screen and (max-width: 767px) {\n    .bx-search-results-row {\n        flex-direction: column;\n    }\n    .bx-search-results-col.bx-search-results-col.bx-search-results-col:first-child {\n        margin-top: 0;\n    }\n    .bx-search-results-col.bx-search-results-col.bx-search-results-col {\n        width: 100%;\n        margin-top: 15px;\n    }\n}\n \n.bx-flight-type-icon {\n    font-size: 20px;\n}\n\nhtml[dir="rtl"] .bx-search-results-flight-type {\n    transform: rotate(180deg);\n    bottom: 4px;\n    position: relative;\n}\n \n/* Arabic fixes */\nhtml[lang="ar-AE"] #column2{\n    width: 100%\n}',html:'<div class="bx-search-results"/>',js:'function sendBoxeverEvent(eventType, page) {\r\n  let eventLabel = `BOX282_${page}_${eventType}`;\r\n  var event = {\r\n    channel: "WEB",\r\n    type: eventLabel,\r\n    page: dataLayer[0].pageName,\r\n    pos: _boxever_settings.pointOfSale,\r\n    browser_id: Boxever.getID()\r\n  };\r\n  Boxever.eventCreate(event, function(data) {}, "json");\r\n}\r\n\r\nfunction getPage() {\r\n  if (window.location.href.indexOf("/CAB/SessionTimeout.aspx") > -1)\r\n    return "ST";\r\n  if (window.location.href.indexOf("/CAB/InvalidProcess.aspx") > -1)\r\n    return "IP";\r\n  return "";\r\n}\r\n\r\nfunction hideEmptyResultsMessage() {\r\n  document.querySelector(".your-search-holder").style.display = "block";\r\n}\r\n\r\nfunction getResourceKeys(resources, resourceMap) {\r\n     let mappedResources = {};\r\n        for (var key of Object.keys(resourceMap)) {\r\n          if (resourceMap[key] in resources) {\r\n            mappedResources[key] = resources[resourceMap[key]];\r\n          } else {\r\n            mappedResources[key] = "";\r\n          }\r\n        }\r\n  return mappedResources;\r\n}\r\nfunction render(){\r\n    let publication = \'\'\r\nif(__PublicationUrl) {\r\n    if(__PublicationUrl !== \'/english\') {\r\n        publication = __PublicationUrl;\r\n    } else {        \r\n        publication = \'/global/english\';\r\n    }\r\n}\r\nif(publication) {\r\nif (dataLayer && dataLayer[0]) {\r\n  let lang = dataLayer[0].languageCode.toLowerCase();\r\n  let airportsFetchURL = `https://www.emirates.com/service/airports?lang=${lang}`;\r\n  let browserID = Boxever.getID();\r\n\r\n  let bxRecentSearchFetchURL = `https://api.boxever.com/v2/callFlows?message={"context":{"clientKey":"ek2Zx82tZTOPkQhPaE41UTJEwbPdudQu","channel":"WEB","language":"en","currencyCode":"USD","uri":"/home","pointOfSale":"emirates.com/english","browserId":"${browserID}","friendlyId":"recent_searches"}}`;\r\n  let promises = [\r\n      fetch(`https://www.emirates.com/service/content/api/v4.0/resources/eol${publication}/Experiences/Recent-Searches`)\r\n        .then(response => {\r\n          return response.json();\r\n        })\r\n        .then(results => {\r\n          let resources = null;\r\n          if (results) {\r\n            resources = results.results;\r\n          }\r\n          return resources;\r\n        }),\r\n    fetch(airportsFetchURL).then(response => {\r\n      return response.json();\r\n    }),\r\n    fetch(bxRecentSearchFetchURL).then(response => {\r\n      return response.json();\r\n    })\r\n  ];\r\n\r\n  Promise.all(promises)\r\n    .then(([resources, airports, recentSearches]) => {\r\n      if (\r\n        recentSearches &&\r\n        recentSearches.recent_searches &&\r\n        recentSearches.recent_searches.length &&\r\n        airports &&\r\n        airports.results &&\r\n        resources\r\n      ) {\r\n        insertHTMLAfter(".ts-session-expire.active p");\r\n        let page = getPage();\r\n        sendBoxeverEvent("VIEWED", page);\r\n        let boxEverSearchResultEl = document.querySelector(\r\n          ".bx-search-results"\r\n        );\r\n        document.querySelector(".your-search-holder").style.display = "none";\r\n        boxEverSearchResultEl.innerHTML = "";\r\n        const resourceMap = {\r\n          searchCTALabel: `Experiences/Recent-Searches/continue-search-cta-label__text`\r\n        };\r\n        const resourceKeys = getResourceKeys(resources, resourceMap);\r\n        const cabinClassMapping = {\r\n            "Y": 0, "J": 1, "F": 2,\r\n        };\r\n        recentSearches.recent_searches.map(function(row) {\r\n          let departDate = new Date(`${row.depart_date}`);\r\n          let returnDate = new Date(`${row.return_date}`);\r\n          let IBECabinClass = 0;\r\n          if(row.booking_class in cabinClassMapping) {\r\n             IBECabinClass = cabinClassMapping[row.booking_class];\r\n          }\r\n          let departLocaleString =\r\n            departDate.getDate() +\r\n            " " +\r\n            departDate.toLocaleDateString(lang, { month: "short" }) +\r\n            " " +\r\n            departDate.getFullYear().toString().substring(2);;\r\n          let returnLocaleString =\r\n            returnDate.getDate() +\r\n            " " +\r\n            returnDate.toLocaleDateString(lang, { month: "short" }) +\r\n            " " +\r\n            returnDate.getFullYear().toString().substring(2);;\r\n          boxEverSearchResultEl.innerHTML += `<div class="bx-search-results-row">\r\n    <div class="bx-search-results-col">\r\n    <div><span>${\r\n      airports.results[`${row.origin_iata}`].city.shortName\r\n    }</span><span> (${row.origin_iata})</span></div><div class="bx-search-results-flight-type"><i class="bx-flight-type-icon icon ${row.flight_type === \'OW\'? "icon-one-way-flight" : "icon-return-flight"}"></i></div><div><span>${\r\n            airports.results[`${row.destination_iata}`].city.shortName\r\n          }</span><span> (${row.destination_iata})</span></div>\r\n    </div>\r\n    \r\n    <div class="bx-search-results-col">${\r\n      row.flight_type === "OW"\r\n        ? departLocaleString\r\n        : departLocaleString + " - " + returnLocaleString\r\n    }</div>\r\n    <div class="bx-search-results-col">\r\n       <span>\r\n        <svg width="18" height="18" xmlns="http://www.w3.org/2000/svg"><path d="M15.9 15.7V13c0-2-1.6-3.5-3.6-3.5H5.7c-2 0-3.6 1.5-3.6 3.5v2.8H16zM9 8.5A3.2 3.2 0 109 2a3.2 3.2 0 000 6.5z" fill="#666" fill-rule="nonzero"/></svg>\r\n        ${row.adults + row.children + row.youths + row.infants}\r\n        </span>\r\n    </div>\r\n    <div class="bx-search-results-col">\r\n        <a class=\'bx-search-results-cta\' href=\'http://www.emirates.com/SessionHandler.aspx?pub=${__PublicationUrl}&pageurl=/IBE.aspx&section=IBE&showpage=true&TID=${\r\n            row.flight_type === "OW" ? "OW" : "SB"\r\n          }&seldcity1=${row.origin_iata}&selacity1=${\r\n            row.destination_iata\r\n          }&selddate1=${row.depart_date}&seladate1=${\r\n            row.return_date\r\n          }&seladults=${row.adults}&selchildren=${row.children}&selinfants=${\r\n            row.infants\r\n          }&selcabinclass=${IBECabinClass}&selcabinclass1=${IBECabinClass}&resultby=0\'>${\r\n            resourceKeys.searchCTALabel\r\n          }</a>\r\n    </div>\r\n    </div>`;\r\n          const links = document.querySelectorAll(".bx-search-results-cta");\r\n          links.forEach(el =>\r\n            el.addEventListener("click", event => {\r\n              sendBoxeverEvent("CLICKED", page);\r\n            })\r\n          );\r\n        });\r\n      } else {\r\n        hideEmptyResultsMessage();\r\n      }\r\n    })\r\n    .catch(error => {\r\n      console.log(error);\r\n      hideEmptyResultsMessage();\r\n    });\r\n}\r\n}\r\n}\r\n//Cookie consent check\r\nlet cookieComplianceEnabled =\r\n  "Yes" === "Yes";\r\nconst cookieComplianceFunctionalGroup = "C0002";\r\n//Listen for disabling/enabling functional cookies group for new browser\r\nif (cookieComplianceEnabled) {\r\n  window.addEventListener("OneTrustGroupsUpdated", function (e) {\r\n    if (OnetrustActiveGroups.indexOf(cookieComplianceFunctionalGroup) > -1) {\r\n     //Show experience wrapper here\r\n        document.querySelector(\r\n          ".bx-search-results"\r\n        ).style.display = \'block\';\r\n         render();\r\n    } else {\r\n        document.querySelector(\r\n          ".bx-search-results"\r\n        ).style.display = \'none\';\r\n        hideEmptyResultsMessage();\r\n    }\r\n  });\r\n}\r\nif (\r\n  !cookieComplianceEnabled ||\r\n  (cookieComplianceEnabled && OnetrustActiveGroups.indexOf(cookieComplianceFunctionalGroup) > -1)\r\n) {\r\n    render();\r\n}'}}]},{ref:"2b4a6993-8b88-4e72-ab2a-a2447be4b434",name:"VOC - End of Journey",revision:78,archived:!1,target:{script:'var inclusions = ["bookingConfirmation",\n                "FlightConfirmation",\n                "OLCI/BoardingDelivery",\n                "/MYB/UpgradeConfirmation",\n                "/MYB/SeatConfirmation",\n                "/MYB/MYBConfirmation",\n                "/MAB/MYB/ExBgUpgradeConfirmation",\n                "/OLCI/BoardingDelivery"];\n\nfunction isIncluded() {\n    for (var i = 0; i < inclusions.length; i++) {\n        if (window.location.href.indexOf(inclusions[i]) >= 0)\n            return true;\n    }\n    return false;\n}\n\nfunction isEnglish() {\n    return dataLayer[0].languageCode.substr(0,2) === "EN";\n}\n\nfunction triggerVOC() {\n    if (isIncluded() && isEnglish()) {\n        targetingPassed();\n    }\n}\n\ntriggerVOC();',targetPages:[]},traffic:{type:"advancedTraffic",allocationLow:1,allocationHigh:120,splits:[{ref:"a2956dd0-d121-40c4-8cc6-accfb26eb786",lowSplit:1,highSplit:120}]},variants:[{ref:"a2956dd0-d121-40c4-8cc6-accfb26eb786",name:"Personalisation",assets:{css:'/* Hide original top banner (in case it\'s present) */\n.operational-updates {\n    display: none !important;\n}\n\n/* Add this clase when \'click\' close icon */\n.bx_TopBanner--hide {\n    display: none !important;\n}\n\n/* Push content down to allocate top banner */\nbody.show-TopBanner {\n    margin-top: 133px !important;\n}\n\n/* pre-load images */\nbody:after{\n display:none;\n content: url(https://c.ekstatic.net/ecl/iconography/e72585a018510638901dd029c05d0724_40_38.png) url(https://c.ekstatic.net/ecl/iconography/27b9f781a94a8af00418bf50ea278016_40_38.png);\n}\n\n/* Banner styling */\n#bx_TopBanner {\n    -webkit-box-shadow: 0px 0px 4px 0px rgba(9,9,9,0.4);\n    -moz-box-shadow: 0px 0px 4px 0px rgba(9,9,9,0.4);\n    box-shadow: 0px 0px 4px 0px rgba(9,9,9,0.4);\n}\n\n#bx_TopBanner {\n    position: fixed;\n    z-index: 99998;\n    height: 133px;\n    width: 100%;\n    top: 0;\n    background: #F6F6F6;\n    font-family: Arial,HelveticaNeue-Light,Helvetica,sans-serif;\n}\n\n#bx_TopBanner .bx_TopBanner__banner {\n    padding-left: 50px;\n    padding-right: 50px;\n    margin: 0 auto;\n    position: relative;\n    display: flex;\n    align-items: center;\n    justify-content: space-between;\n    text-align: center;\n}\n\n#bx_TopBanner .bx_TopBanner__p {\n    margin: 8px 0;\n    display: flex;\n    align-items: center;\n    justify-content: space-between;\n    height: 24px;\n    width: 100%;\n    line-height: 10px;\n}\n\n#bx_TopBanner .bx_TopBanner__p--span {\n    color: #000;\n    font-family: HelveticaNeue,Helvetica Neue,Helvetica,Arial,Lucida Grande,sans-serif;\n    font-size: 14px;\n    line-height: 16.1px;\n    font-weight: 500;\n    padding-right: 40px;\n}\n\n#bx_TopBanner .bx_TopBanner__p--button {\n    border-radius: 4px;\n    color: #fff;\n    background-color: #00B377;\n    padding: 10px 23px;\n    margin-right: 30px;\n    cursor: pointer;\n}\n\n.bx__btn-close:hover,\n.bx__btn-close:focus,\n.bx__btn-close:active {\n    background-color: transparent;\n    box-shadow: none;\n    color: #333;\n    text-decoration: none !important;\n    cursor: pointer;\n}\n\n.bx_TopBanner__banner .bx-header_question {\n    font-family: HelveticaNeue, "Helvetica Neue", Helvetica, Arial, "Lucida Grande", sans-serif;\n    font-size: 14px;\n    font-weight: normal;\n    margin-bottom: 10px;\n    text-align: center;\n    color: #666;\n    padding: 15px 15px 0 10px;\n    letter-spacing: -.025em;\n}\n\n.bx-hidden {\n    display: none ;\n}\n\n/* close button */\n.bx__btn-close__icon {\n    background: transparent;\n    width: 40px;\n    height: 40px;\n    position: relative;\n    display: flex;\n    justify-content: center;\n    align-items: center;\n    cursor: pointer;\n}\n\n.bx__btn-close__icon:after {\n    content: \'\';\n    height: 30px;\n    border-left: 2px solid #75808F;\n    position: absolute;\n    transform: rotate(45deg);\n    left: 28px;\n}\n\n.bx__btn-close__icon:before {\n    content: \'\';\n    height: 30px;\n    border-left: 2px solid #75808F;\n    position: absolute;\n    transform: rotate(-45deg);\n    left: 28px;\n}\n\n/* Rating Banner */\n.bx-rating {\n    margin: auto;\n}\n\n.bx-rating .rating {\n    border: none;\n}\n\n#bxbanner-rating_buttons {\n    height: 70px;\n}\n\n.bx-radio_label {\n  right: 39px;\n  left: 0;\n  bottom: 10px;\n  position: absolute;\n  font-size: 14px;\n  display: none;\n}\n\n.rating .bx-star5:hover ~ .bx-label5 {\n   display: block;\n}\n\n.rating .bx-star4:hover ~ .bx-label4 {\n   display: block;\n}\n\n.rating .bx-star3:hover ~ .bx-label3 {\n   display: block;\n}\n\n.rating .bx-star2:hover ~ .bx-label2 {\n   display: block;\n}\n\n.rating .bx-star1:hover ~ .bx-label1 {\n   display: block;\n}\n\n/* Comment Banner */\n.bx-comment {\n    max-width: 1100px;\n    padding: 15px 0;\n    text-align: left;\n    margin: auto;\n    margin-top: 20px;\n    width: 100%;\n    text-align: center;\n}\n\n.bx-comment_textarea {\n    background: #FFF;\n    border: 1px solid #666;\n    border-radius: 3px;\n    box-shadow: inset 4px 4px 0 0 #F6F6F6;\n    color: #333;\n    font-family: HelveticaNeue-Light, Helvetica Neue Light, Helvetica Neue, Helvetica, Arial, Lucida Grande, sans-serif;\n    font-size: 16px;\n    height: 60px;\n    width: 78%;\n    padding: 20px 18px 16px 20px;\n    outline: none;\n    resize: none;\n    box-sizing: border-box;\n}\n\n.bx-comment_textarea:focus {\n    outline: none;\n    border-color: #666;\n}\n\n.bx-comment_submit {\n    background: #C60C30;\n    font-family: HelveticaNeue, "Helvetica Neue", Helvetica, Arial, "Lucida Grande", sans-serif;\n    font-size: 16px;\n    font-weight: bold;\n    height: 60px;\n    line-height: 60px;\n    max-width: 195px;\n    width: 20%;\n    color: #fff;\n    border-color: #555d63;\n    border-radius: 3px;\n    margin-left: 15px;\n}\n\n.bx-comment_submit:hover {\n    box-shadow: 0 0 5px 3px #999;\n}\n\n/* Thank You Banner */\n.bx-thank_you {\n    width: 100%;\n    padding-top: 45px;\n}\n\n.bx-thank_you:before {\n    content: \'\';\n    display: block;\n    height: 20px;\n    width: 8px;\n    border-bottom: 2px solid green;\n    border-right: 2px solid green;\n    position: absolute;\n    -webkit-transform: rotate(40deg);\n    transform: rotate(45deg);\n    left: 0;\n    right: 35px;\n    margin: 0 auto;\n    top: 18px;\n}\n\n.bx-thank_you:after {\n    content: \'\';\n    display: block;\n    height: 40px;\n    width: 40px;\n    border-radius: 50px;\n    border: 2px solid green;\n    position: absolute;\n    left: 0;\n    right: 35px;\n    margin: 0 auto;\n    top: 10px;\n}\n\n.bx-thank_you .bx-thank_you_text {\n    font-family: HelveticaNeue, "Helvetica Neue", Helvetica, Arial, "Lucida Grande", sans-serif;\n    font-size: 15px;\n    font-weight: bold;\n    letter-spacing: normal;\n    line-height: 16.2px;\n    margin-bottom: 0;\n    margin-top: 22px;\n    padding: 0;\n    text-align: center;\n    color: #666;\n    margin: 15px 0 15px 0;\n}\n\n.bx-thank_you .bx-thank_you_message {\n    font-size: 12px;\n}\n\n/* Rating Stars */\n.rating {\n    display: inline-block;\n}\n\n/* :not(:checked) is a filter, so that browsers that don’t support :checked don’t \n   follow these rules. Every browser that supports :checked also supports :not(), so\n   it doesn’t make the test unnecessarily selective */\n.rating:not(:checked) > input {\n    position:absolute;\n    top:-9999px;\n    clip:rect(0,0,0,0);\n}\n\n.rating:not(:checked) > label {\n    float:right;\n    padding:0 .1em;\n    overflow:hidden;\n    white-space:nowrap;\n    cursor:pointer;\n    font-size:300%;\n    line-height:1.2;\n    color:#ddd;\n}\n\n.rating:not(:checked) > label:before {\n    content: url(https://c.ekstatic.net/ecl/iconography/e72585a018510638901dd029c05d0724_40_38.png);\n}\n\n.rating > input:checked ~ label {\n    content: url(https://c.ekstatic.net/ecl/iconography/27b9f781a94a8af00418bf50ea278016_40_38.png);\n}\n\n.rating:not(:checked) > label:hover,\n.rating:not(:checked) > label:hover ~ label {\n    content: url(https://c.ekstatic.net/ecl/iconography/27b9f781a94a8af00418bf50ea278016_40_38.png);\n}\n\n.rating > input:checked + label:hover,\n.rating > input:checked + label:hover ~ label,\n.rating > input:checked ~ label:hover,\n.rating > input:checked ~ label:hover ~ label,\n.rating > label:hover ~ input:checked ~ label {\n    color: #ea0;\n}\n\n.rating > label:active {\n    position:relative;\n    top:2px;\n    left:2px;\n}\n\n/* Mobile Screens <500px wide */\n@media only screen and (max-width:500px) {\n    .rating:not(:checked) > label {\n        font-size: 100%;\n        transform: scale(.8);\n        padding: 0;\n    }\n    #bx_TopBanner .bx_TopBanner__banner {\n        padding-left: 15px;\n        padding-right: 15px;\n    }\n    .bx-comment {\n        flex-wrap: wrap;\n        padding: 0;\n        margin-top: 15px;\n    }\n    .bx-comment_textarea {\n        font-size: 12px;\n        width: 100%;\n        padding: 10px 18px 16px 20px;\n    }\n    .bx-comment_submit {\n        font-size: 14px;\n        width: 100%;\n        margin: 10px 0px 0 0px;\n        max-width: none;\n        height: 35px;\n        line-height: 35px;\n    }\n}',html:'<div id="bx_TopBanner">\n    <div class="bx_TopBanner__banner">\n        <div class="bx-rating" id="bxbanner-rating">\n            <h2 class="bx-header_question" id="bx-header_question">How would you rate your satisfaction with your booking experience?</h2>\n            <fieldset class="rating" id="bxbanner-rating_buttons">\n                <input type="radio" id="star5" name="rating" value="5" class="bxbanner-star" /><label class="bx-star5" for="star5" title="Excellent"></label>\n                <input type="radio" id="star4" name="rating" value="4" class="bxbanner-star" /><label class="bx-star4" for="star4" title="Good"></label>\n                <input type="radio" id="star3" name="rating" value="3" class="bxbanner-star" /><label class="bx-star3" for="star3" title="Average"></label>\n                <input type="radio" id="star2" name="rating" value="2" class="bxbanner-star" /><label class="bx-star2" for="star2" title="Poor"></label>\n                <input type="radio" id="star1" name="rating" value="1" class="bxbanner-star" /><label class="bx-star1" for="star1" title="Very Poor"></label>\n                <span class="bx-radio_label bx-label5">Excellent</span>\n                <span class="bx-radio_label bx-label4">Good</span>\n                <span class="bx-radio_label bx-label3">Average</span>\n                <span class="bx-radio_label bx-label2">Poor</span>\n                <span class="bx-radio_label bx-label1">Very Poor</span>\n            </fieldset>\n        </div>\n\n        <div class="bx-comment bx-hidden" id="bxbanner-comment">\n            <textarea class="bx-comment_textarea" placeholder="What can we do to improve your experience? Please enter your feedback here…" tabindex="0" id="bx-comment_textarea"></textarea>\n            <div class="bx-comment_submit" id="bxbanner-comment_submit" tabindex="0" role="button">Submit</div>\n        </div>\n\n        <div class="bx-thank_you bx-hidden" id="bxbanner-thank_you">\n            <h2 class="bx-thank_you_text">Thank you</h2>\n            <div class="bx-thank_you_message">For general queries, please <a href="https://www.emirates.com/english/help/">contact us</a> or <a href="https://www.emirates.com/english/help/faqs/">read our FAQs</a>.</div>\n        </div>\n\n        <a class="bx__btn-close" aria-label="Close">\n            <span class="bx__btn-close__icon"></span>\n        </a>\n\n    </div>\n</div>',js:'insertHTMLBefore(\'body\');\n\n// Close banner\ndocument.body.classList.add(\'show-TopBanner\');\ndocument.querySelector(\'.bx__btn-close\').addEventListener(\'click\', function(){\n  document.querySelector(\'#bx_TopBanner\').style.display = \'none\';\n  document.body.classList.remove(\'show-TopBanner\');\n});\n\nconst bxRating = document.getElementById(\'bxbanner-rating\');\nconst bxComment = document.getElementById(\'bxbanner-comment\');\nconst bxThankYou = document.getElementById(\'bxbanner-thank_you\');\nconst bxRatingButtons = document.getElementById(\'bxbanner-rating_buttons\');\nconst bxCommentSubmit = document.getElementById(\'bxbanner-comment_submit\');\nvar ratingValue;\n\nfunction getRadioValue() { \n    var stars = document.getElementsByClassName(\'bxbanner-star\'); \n    for(i = 0; i < stars.length; i++) { \n        if(stars[i].checked) \n            return stars[i].value;\n    }\n}\n\nfunction getPos() {\n    var re = new RegExp(\'emirates.com\\/[a-z]{2}\\/\');\n    var matches = re.exec(window.location.href);\n    if (matches && matches.length > 0)\n        return matches[0].substring(0, matches[0].length - 1);\n    else\n        return "emirates.com";\n}\n\nfunction getSurveyId() {\n    var re = new RegExp(\'OLCI\\/BoardingDelivery\');\n    var matches = re.exec(window.location.href);\n    if (matches && matches.length > 0)\n        return "159122";\n    var re = new RegExp(\'MYB\');\n    var matches = re.exec(window.location.href);\n    if (matches && matches.length > 0)\n        return "1300088";\n    else\n        return "152417";\n}\n\nfunction getGaClientId() {\n    var clientId = "";\n    dataLayer.forEach(function(d) {\n        if (d.GA_ID) {\n            clientId = d.GA_ID;\n        }\n    });\n    return clientId;\n}\n\nfunction getQmSessionId() {\n    var sessionId = "";\n    dataLayer.forEach(function(d) {\n        if (d.QMSessionID) {\n            sessionId = d.QMSessionID;\n        }\n    });\n    return sessionId;\n}\n\nfunction sendDataToBoxever() {\n    bxThankYou.style.display = \'block\';\n    bxComment.style.display = \'none\';\n    var feedbackEvent = {\n        "channel": "WEB",\n        "type": "FEEDBACK",\n        "language": dataLayer[0].languageCode,\n        "currency": dataLayer[0].posSiteCurrencyCode,\n        "page": dataLayer[0].pageName,\n        "pos": getPos(),\n        "browser_id": Boxever.getID(),\n        "rating": ratingValue,\n        "comment": document.getElementById(\'bx-comment_textarea\').value,\n        "survey_id": getSurveyId(),\n        "question_text": document.getElementById(\'bx-header_question\').textContent,\n        "page_category": dataLayer[0].pageCategory ? dataLayer[0].pageCategory : "",\n        "visitor_session_id": dataLayer[0].visitorSessionID ? dataLayer[0].visitorSessionID : "",\n        "platform_type": dataLayer[0].platformType ? dataLayer[0].platformType : "",\n        "country_region": dataLayer[0].countryRegion ? dataLayer[0].countryRegion : "",\n        "member_tier": dataLayer[0].memberTier ? dataLayer[0].memberTier : "",\n        "page_url": window.location.href,\n        "ga_client_id": getGaClientId(),\n        "qm_session_id": getQmSessionId()\n    };\n    Boxever.eventCreate(feedbackEvent, function (data) { }, \'json\');\n}\n\nbxRatingButtons.onclick = function() {\n    ratingValue = getRadioValue();\n    if(ratingValue) {\n        bxRating.style.display = \'none\';\n        bxComment.style.display = \'flex\';\n    }\n};\n\nbxCommentSubmit.onclick = function() {\n    bxComment.style.display = \'none\';\n    bxThankYou.style.display = \'block\';\n    sendDataToBoxever();\n};'}}]},{ref:"a3f1d929-b57d-46f6-b9ee-47355c90537b",name:"Your DXB holiday awaits - UK mobile widget copy",revision:27,archived:!1,target:{script:"",targetPages:[{operator:"Contains",value:"/english/special-offers/your-dubai-holiday-awaits-from-"}]},traffic:{type:"advancedTraffic",allocationLow:1,allocationHigh:120,splits:[{ref:"1288566e-bf4e-46d0-8b51-30bae71ff690",lowSplit:1,highSplit:120}]},variants:[{ref:"1288566e-bf4e-46d0-8b51-30bae71ff690",name:"Personalisation",assets:{css:".widget-container__mobile-cta-icon {\r\n    display: none;\r\n}\r\n\r\n.widget-container__mobile-cta h2 {\r\n    margin: 15px 0;\r\n    font-size: 20px;\r\n    line-height: 24px;\r\n    display: flex;\r\n}\r\n\r\n@media screen and (min-width: 991px) {\r\n    .widget-container__mobile-cta h2, .advance-booking-widget__widget-container h2 {\r\n        display: none;\r\n    }\r\n   \r\n}",html:"<h2>Book your flight with us</h2>",js:"if(document.querySelector('.widget-container__mobile-cta')) {\ninsertHTMLBefore('.widget-container__mobile-cta')\n}"}}]},{ref:"db48afc5-866f-460f-bf4b-f80b2e082b2f",name:"VOC - Mobile App Feedback",revision:31,archived:!1,target:{script:"",targetPages:[{operator:"Contains",value:"help/voc/app-survey.aspx"},{operator:"Contains",value:"/help/voice-of-customer/app-survey/"}]},traffic:{type:"advancedTraffic",allocationLow:1,allocationHigh:120,splits:[{ref:"ad3231b7-6ae0-4507-906d-c69f72f64a53",lowSplit:1,highSplit:120}]},variants:[{ref:"ad3231b7-6ae0-4507-906d-c69f72f64a53",name:"Blank Template",assets:{css:"#bx-modal_overlay {\n    display: none;\n    justify-content: center;\n    align-items: center;\n    position: fixed;\n    z-index: 999999;\n    left: 0;\n    top: 0;\n    width: 100%;\n    height: 100%;\n    overflow: hidden;\n    background-color: rgba(0,0,0,0.4);\n    font-family: Arial,HelveticaNeue,Helvetica Neue,Helvetica,Lucida Grande,sans-serif;\n}\n\n#bx-modal_overlay .bx-modal_content {\n    display: flex;\n    flex-direction: column;\n    position:relative;\n    background-color: #F6F6F6;\n    margin: 0 auto;\n    border-radius: 4px;\n    box-shadow: 0 2px 10px 6px rgba(0,0,0,0.3);\n    height: 100%;\n    width: 100%;\n    border: none;\n}\n\n@media screen and (min-width: 1024px) {\n    #bx-modal_overlay .bx-modal_content {\n        max-width: 1056px;\n        height: auto;\n        min-height: 100px;\n        width: auto;\n    }\n}\n\n#bx-modal_overlay .bx-modal_button-wrapper {\n    display: flex;\n    margin-top: auto;\n}\n\n#bx-modal_overlay .bx-modal_button {\n    display: inline-block;\n    border-radius: 4px;\n    color: #fff;\n    background-color: #00B377;\n    padding: 10px 23px;\n}\n\n.bx-hidden {\n    display: none ;\n}\n\n/* Options Screen */\n.bx-options {\n    display: flex;\n}\n\n.bx-options .abper-112-text {\n    flex-grow: 1;\n    font-size: 14px;\n    line-height: 1.5;\n    margin: 16px 0 30px;\n    padding-bottom: 0;\n}\n\n.abper-112-link {\n    cursor: pointer; \n}\n\n/* Radio button modal */\n\n.bx-modal_content h1 {\n    font-size: 30px;\n    line-height: 34px;\n    font-family: EmiratesSB-Bold,Georgia,\"Times New Roman\",Times,serif !important;\n    max-width: 90%;\n    margin: auto;\n    text-align: center;\n}\n\n.bx-modal_content {\n    text-align: center;\n}\n\n.bx-comment > .bx-comment_textarea {\n    height: 174px;\n    width: 80%;\n    border: 1px solid #666;\n    border-radius: 3px;\n    padding: 15px 18px 16px 20px;\n    resize: none;\n    margin: 10px auto 10px;\n    font-family: HelveticaNeue-Light, Helvetica Neue Light, Helvetica Neue, Helvetica, Arial, Lucida Grande, sans-serif;\n    font-size: 16px;\n    font-weight: 300;\n} \n\n.bx-comment > .bx-comment_warning {\n    color: #999;\n    text-align: left;\n    width: 80%;\n    margin: 10px auto 30px;\n    font-family: HelveticaNeue-Light, Helvetica Neue Light, Helvetica Neue, Helvetica, Arial, Lucida Grande, sans-serif;\n    font-size: 16px;\n    font-style: italic;\n    font-weight: 300;\n}\n\n/* Rating screen */\n.bx-modal_content > #bx-rating {\n    padding: 30px 20px 20px;\n}\n\n.bx-radio_label {\n    display: none;\n}\n\n@media screen and (min-width: 1024px) {\n    .bx-radio_label {\n      right: 0;\n      left: 0;\n      bottom: 10px;\n      position: absolute;\n      font-size: 14px;\n    }\n\n    .rating .bx-star5:hover ~ .bx-label5 {\n       display: block;\n    }\n\n    .rating .bx-star4:hover ~ .bx-label4 {\n       display: block;\n    }\n\n    .rating .bx-star3:hover ~ .bx-label3 {\n       display: block;\n    }\n\n    .rating .bx-star2:hover ~ .bx-label2 {\n       display: block;\n    }\n\n    .rating .bx-star1:hover ~ .bx-label1 {\n       display: block;\n    }\n}\n\n/* Rating Stars */\n.rating {\n    display: inline-block;\n    border: none;\n    height: 75px;\n}\n\n/* :not(:checked) is a filter, so that browsers that don’t support :checked don’t \n   follow these rules. Every browser that supports :checked also supports :not(), so\n   it doesn’t make the test unnecessarily selective */\n.rating:not(:checked) > input {\n    position:absolute;\n    top:-9999px;\n    clip:rect(0,0,0,0);\n}\n\n.rating:not(:checked) > label {\n    float:right;\n    padding:0.3em .1em;\n    overflow:hidden;\n    white-space:nowrap;\n    cursor:pointer;\n    font-size:300%;\n    line-height:1.2;\n    color:#ddd;\n}\n\n.rating:not(:checked) > label:before {\n    content: url(https://c.ekstatic.net/ecl/iconography/e72585a018510638901dd029c05d0724_40_38.png);\n}\n\n.rating > input:checked ~ label {\n    content: url(https://c.ekstatic.net/ecl/iconography/27b9f781a94a8af00418bf50ea278016_40_38.png);\n}\n\n.rating:not(:checked) > label:hover,\n.rating:not(:checked) > label:hover ~ label {\n    content: url(https://c.ekstatic.net/ecl/iconography/27b9f781a94a8af00418bf50ea278016_40_38.png);\n}\n\n.rating > input:checked + label:hover,\n.rating > input:checked + label:hover ~ label,\n.rating > input:checked ~ label:hover,\n.rating > input:checked ~ label:hover ~ label,\n.rating > label:hover ~ input:checked ~ label {\n    content: url(https://c.ekstatic.net/ecl/iconography/27b9f781a94a8af00418bf50ea278016_40_38.png);\n}\n\n.rating > label:active {\n    position:relative;\n    top:2px;\n    left:2px;\n}\n\n/* Comment Screen */\n.bx-comment {\n    padding: 30px 20px 20px;\n}\n\n/* Thank You Screen */\n.bx-thank_you {\n    padding: 30px 20px 20px;\n}\n\n/* close button */\n.bx-modal__btn-close-icon {\n    background: transparent;\n    top: 0;\n    right: 0;\n    width: 30px;\n    height: 30px;\n    margin-top: 20px;\n    margin-right: 25px;\n    position: absolute;\n    display: flex;\n    justify-content: center;\n    align-items: center;\n    cursor: pointer;\n}\n\n.bx-modal__btn-close-icon:after {\n    content: '';\n    height: 30px;\n    border-left: 2px solid #75808F;\n    position: absolute;\n    transform: rotate(45deg);\n}\n\n.bx-modal__btn-close-icon:before {\n    content: '';\n    height: 30px;\n    border-left: 2px solid #75808F;\n    position: absolute;\n    transform: rotate(-45deg);\n}\n\n/* Comment Screen */\n\n    /*font-family: HelveticaNeue-Light, Helvetica Neue Light, Helvetica Neue, Helvetica, Arial, Lucida Grande, sans-serif;*/\n    \n/* Mobile Web Feedback Button */\n.abper-112-toggle .bx-mobile_web_feedback_button {\n    padding: 15px 25px;\n}\n\n@media screen and (min-width: 1024px) {\n    .abper-112-toggle .bx-mobile_web_feedback_button {\n        padding: 0;\n    }\n}\n\n/******* EK CSS *******/\n\n@font-face {\n    font-family: ek-font-icons;\n    src: url(https://cdn.ek.aero/shared/fonts/ek-icons/ek-font-icons.eot);\n    src: url(https://cdn.ek.aero/shared/fonts/ek-icons/ek-font-icons.eot?#iefix) format(\"embedded-opentype\"), url(https://cdn.ek.aero/shared/fonts/ek-icons/ek-font-icons.woff) format(\"woff\"), url(https://cdn.ek.aero/shared/fonts/ek-icons/ek-font-icons.ttf) format(\"truetype\"), url(https://cdn.ek.aero/shared/fonts/ek-icons/ek-font-icons.svg#ek-font-icons) format(\"svg\");\n    font-weight: 400;\n    font-style: normal;\n}\n\n@font-face {\n    font-family: EmiratesSM;\n    src: url(https://cdn.ek.aero/shared/fonts/emirates/emirates-medium.eot);\n    src: url(https://cdn.ek.aero/shared/fonts/emirates/emirates-medium.eot?#iefix) format('embedded-opentype'), url(https://cdn.ek.aero/shared/fonts/emirates/emirates-medium.woff2) format('woff2'), url(https://cdn.ek.aero/shared/fonts/emirates/emirates-medium.woff) format('woff'), url(https://cdn.ek.aero/shared/fonts/emirates/emirates-medium.ttf) format('truetype'), url(https://cdn.ek.aero/shared/fonts/emirates/emirates-medium.svg#Emirates-Medium) format('svg');\n    font-weight: 400;\n    font-style: normal;\n}\n\n@font-face {\n    font-family: EmiratesSB-Bold;\n    src: url(https://cdn.ek.aero/shared/fonts/emirates/emirates-bold.eot);\n    src: url(https://cdn.ek.aero/shared/fonts/emirates/emirates-bold.eot?#iefix) format('embedded-opentype'), url(https://cdn.ek.aero/shared/fonts/emirates/emirates-bold.woff2) format('woff2'), url(https://cdn.ek.aero/shared/fonts/emirates/emirates-bold.woff) format('woff'), url(https://cdn.ek.aero/shared/fonts/emirates/emirates-bold.ttf) format('truetype'), url(https://cdn.ek.aero/shared/fonts/emirates/emirates-bold.svg#Emirates-Bold) format('svg');\n    font-weight: 400;\n    font-style: normal;\n}\n\n@font-face {\n    font-family: EmiratesSL;\n    src: url(https://cdn.ek.aero/shared/fonts/emirates/emirates-light.eot);\n    src: url(https://cdn.ek.aero/shared/fonts/emirates/emirates-light.eot?#iefix) format('embedded-opentype'), url(https://cdn.ek.aero/shared/fonts/emirates/emirates-light.woff2) format('woff2'), url(https://cdn.ek.aero/shared/fonts/emirates/emirates-light.woff) format('woff'), url(https://cdn.ek.aero/shared/fonts/emirates/emirates-light.ttf) format('truetype'), url(https://cdn.ek.aero/shared/fonts/emirates/emirates-light.svg#Emirates-Light) format('svg');\n    font-weight: 400;\n    font-style: normal;\n}\n\n@font-face {\n    font-family: heroic-condensed-black-oblique;\n    src: url(https://cdn.ek.aero/shared/fonts/heroic/heroic-condensed-black-oblique.eot);\n    src: url(https://cdn.ek.aero/shared/fonts/heroic/heroic-condensed-black-oblique.eot?#iefix) format(\"embedded-opentype\"), url(https://cdn.ek.aero/shared/fonts/heroic/heroic-condensed-black-oblique.woff) format(\"woff\"), url(https://cdn.ek.aero/shared/fonts/heroic/heroic-condensed-black-oblique.ttf) format(\"truetype\"), url(https://cdn.ek.aero/shared/fonts/heroic/heroic-condensed-black-oblique.svg#heroic-condensed-black-oblique) format(\"svg\");\n    font-weight: 400;\n    font-style: normal;\n}\n\n@font-face {\n    font-family: heroic-condensed-medium-oblique;\n    src: url(https://cdn.ek.aero/shared/fonts/heroic/heroic-condensed-medium-oblique.eot);\n    src: url(https://cdn.ek.aero/shared/fonts/heroic/heroic-condensed-medium-oblique.eot?#iefix) format(\"embedded-opentype\"), url(https://cdn.ek.aero/shared/fonts/heroic/heroic-condensed-medium-oblique.woff) format(\"woff\"), url(https://cdn.ek.aero/shared/fonts/heroic/heroic-condensed-medium-oblique.ttf) format(\"truetype\");\n    font-weight: 400;\n    font-style: normal;\n}\n\n@font-face {\n    font-family: heroic-condensed-light-oblique;\n    src: url(https://cdn.ek.aero/shared/fonts/heroic/heroic-condensed-light-oblique.eot);\n    src: url(https://cdn.ek.aero/shared/fonts/heroic/heroic-condensed-light-oblique.eot?#iefix) format(\"embedded-opentype\"), url(https://cdn.ek.aero/shared/fonts/heroic/heroic-condensed-light-oblique.woff) format(\"woff\"), url(https://cdn.ek.aero/shared/fonts/heroic/heroic-condensed-light-oblique.ttf) format(\"truetype\"), url(https://cdn.ek.aero/shared/fonts/heroic/heroic-condensed-light-oblique.svg#heroic-condensed-light-oblique) format(\"svg\");\n    font-weight: 400;\n    font-style: normal;\n}\n\n\n.abper-112-modal.qubit-AdvancedModal {\n    align-items: normal;\n    left: auto;\n    padding: 0;\n    right: auto;\n    width: 100%;\n    z-index: 9999;\n}\n@media screen and (min-width: 1024px) {\n    .abper-112-modal.qubit-AdvancedModal {\n        align-items: center;\n    }\n}\n@media (max-width: 768px) {\n    .abper-112-modal .qubit-AdvancedModal-body {\n        height: 100%;\n    }\n}\n.abper-112-modal .qubit-AdvancedModal-box {\n    background-color: #f6f6f6;\n    display: block;\n    height: 100%;\n    max-height: none;\n    width: 100%;\n    z-index: 9999;\n}\n@media screen and (min-width: 1024px) {\n    .abper-112-modal .qubit-AdvancedModal-box {\n        height: auto;\n        width: auto;\n    }\n}\n.abper-112-modal .qubit-AdvancedModal-Icon {\n    color: #333;\n    font-size: 10px;\n}\n.abper-112-modal .qubit-VisitorPulse {\n    color: #333;\n    display: flex;\n    font-family: HelveticaNeue, Helvetica Neue, Helvetica, Arial, Lucida Grande, sans-serif;\n    font-size: 16px;\n    flex-grow: 1;\n    margin: auto;\n}\n.abper-112-modal .qubit-VisitorPulse-content {\n    display: flex;\n    margin: 0 auto;\n    overflow: auto;\n    padding: 30px 20px 20px;\n    width: 100%;\n}\n@media screen and (min-width: 768px) {\n    .abper-112-modal .qubit-VisitorPulse-content {\n        margin: auto;\n    }\n}\n@media screen and (min-width: 1024px) {\n    .abper-112-modal .qubit-VisitorPulse-content {\n        display: block;\n        margin: 0 auto;\n    }\n}\n.abper-112-modal .qubit-VisitorPulse-titleContainer {\n    display: none;\n}\n.abper-112-modal .qubit-VisitorPulse-question {\n    border-bottom: none;\n    margin-bottom: 0;\n    max-width: 690px;\n    padding-bottom: 0;\n    text-align: center;\n}\n.abper-112-modal .qubit-VisitorPulse-question .qubit-VisitorPulse-questionName {\n    color: #333;\n    font-family: EmiratesSB-Bold, Emirates-Bold, EmiratesSM, Helvetica, Arial, Lucida Grande, sans-serif !important;\n    font-size: 20px;\n    font-weight: 400;\n    line-height: 24px;\n    margin: 0 auto 20px;\n    text-align: center;\n    width: 80%;\n}\n@media screen and (min-width: 1024px) {\n    .abper-112-modal .qubit-VisitorPulse-question .qubit-VisitorPulse-questionName {\n        font-size: 30px;\n        line-height: 34px;\n    }\n}\n.abper-112-modal .qubit-VisitorPulse-question .qubit-VisitorPulse-radios {\n    height: 75px;\n    position: relative;\n    width: 260px;\n}\n.abper-112-modal .qubit-VisitorPulse-question .qubit-VisitorPulse-radio input {\n    display: none;\n}\n.abper-112-modal .qubit-VisitorPulse-question:first-child .qubit-VisitorPulse-radio {\n    display: inline-block;\n    margin-bottom: 0;\n    text-align: center;\n    width: 20%;\n}\n.abper-112-modal .qubit-VisitorPulse-question:first-child .qubit-VisitorPulse-radio .qubit-VisitorPulse-radioOuter {\n    background: url('https://c.ekstatic.net/ecl/iconography/e72585a018510638901dd029c05d0724_40_38.png');\n    background-repeat: no-repeat;\n    height: 40px;\n    margin: 0;\n    width: 40px;\n}\n.abper-112-modal .qubit-VisitorPulse-question:first-child .qubit-VisitorPulse-radio.abper-112-active .qubit-VisitorPulse-radioOuter {\n    background: url('https://c.ekstatic.net/ecl/iconography/27b9f781a94a8af00418bf50ea278016_40_38.png');\n    background-repeat: no-repeat;\n}\n.abper-112-modal .qubit-VisitorPulse-question:first-child .qubit-VisitorPulse-radio .qubit-VisitorPulse-radioInner {\n    display: none;\n}\n.abper-112-modal .qubit-VisitorPulse-question:first-child .qubit-VisitorPulse-radio .qubit-VisitorPulse-radioText {\n    bottom: 10px;\n    display: none;\n    font-family: HelveticaNeue, Helvetica Neue, Helvetica, Arial, Lucida Grande, sans-serif;\n    font-size: 14px;\n    font-weight: normal;\n    left: 0;\n    margin: 0 auto;\n    position: absolute;\n    right: 0;\n    width: 100%;\n}\n.abper-112-modal .qubit-VisitorPulse-question:first-child .qubit-VisitorPulse-radio .qubit-VisitorPulse-radioText.abper-112-visible {\n    display: inline-block;\n}\n.abper-112-modal .qubit-VisitorPulse-question:nth-child(2) {\n    display: none;\n}\n.abper-112-modal .qubit-VisitorPulse-question:nth-child(2) .qubit-VisitorPulse-textarea {\n    background: #fff;\n    border: 1px solid #666;\n    border-radius: 3px;\n    box-shadow: inset 4px 4px 0 0 #f6f6f6;\n    color: #333;\n    display: block;\n    font-family: HelveticaNeue-Light, Helvetica Neue Light, Helvetica Neue, Helvetica, Arial, Lucida Grande, sans-serif;\n    font-size: 16px;\n    font-weight: 300;\n    height: 214px;\n    margin: auto;\n    padding: 20px 18px 16px 20px;\n}\n@media screen and (min-width: 1024px) {\n    .abper-112-modal .qubit-VisitorPulse-question:nth-child(2) .qubit-VisitorPulse-textarea {\n        height: 174px;\n        width: 80%;\n    }\n}\n.abper-112-modal .qubit-VisitorPulse-question:nth-child(2) .abper-112-optional {\n    color: #999;\n    font-family: HelveticaNeue-Light, Helvetica Neue Light, Helvetica Neue, Helvetica, Arial, Lucida Grande, sans-serif;\n    font-size: 16px;\n    font-style: italic;\n    font-weight: 300;\n    margin: 10px auto 30px;\n    text-align: left;\n}\n@media screen and (min-width: 1024px) {\n    .abper-112-modal .qubit-VisitorPulse-question:nth-child(2) .abper-112-optional {\n        width: 80%;\n    }\n}\n.abper-112-modal .qubit-VisitorPulse-question.abper-112-visible {\n    display: block;\n}\n.abper-112-modal .qubit-VisitorPulse-question.abper-112-hide {\n    display: none;\n    visibility: hidden;\n}\n.abper-112-modal .qubit-VisitorPulse-submit {\n    background-color: #c60c30;\n    border-color: #c60c30;\n    color: #fff;\n    display: inline-block;\n    font-size: 14px;\n    font-weight: bold;\n    height: auto;\n    line-height: normal;\n    margin: auto 0 0;\n    max-width: 690px;\n    width: 100%;\n}\n@media screen and (min-width: 768px) {\n    .abper-112-modal .qubit-VisitorPulse-submit {\n        margin: 0 auto;\n    }\n}\n@media screen and (min-width: 1024px) {\n    .abper-112-modal .qubit-VisitorPulse-submit {\n        width: 317px;\n    }\n}\n.abper-112-modal .qubit-VisitorPulse-submit:hover {\n    background-color: #c60c30;\n    border-color: #c60c30;\n    box-shadow: 0 0 6px 0 #333;\n    color: #fff;\n}\n.abper-112-modal .qubit-VisitorPulse-submit.abper-112-visible {\n    display: inline-block;\n    visibility: visible;\n}\n.abper-112-modal .qubit-VisitorPulse-thankYou {\n    flex-direction: column;\n    flex-grow: 1;\n    margin: 0 auto;\n    max-width: 690px;\n    overflow: auto;\n    padding: 40px 20px 20px;\n    text-align: center;\n}\n@media screen and (min-width: 768px) {\n    .abper-112-modal .qubit-VisitorPulse-thankYou {\n        margin: auto;\n    }\n}\n@media screen and (min-width: 1024px) {\n    .abper-112-modal .qubit-VisitorPulse-thankYou {\n        margin: 0 auto;\n        overflow: hidden;\n    }\n}\n.abper-112-modal .qubit-VisitorPulse-thankYou .abper-112-icon-check {\n    border: 2px solid green;\n    border-radius: 50px;\n    box-sizing: border-box;\n    height: 70px;\n    margin: 0 auto 30px;\n    width: 70px;\n}\n@media screen and (min-width: 1024px) {\n    .abper-112-modal .qubit-VisitorPulse-thankYou .abper-112-icon-check {\n        margin: 40px auto 20px;\n        height: 60px;\n        width: 60px;\n    }\n}\n.abper-112-modal .qubit-VisitorPulse-thankYou .abper-112-icon-check::before {\n    border-bottom: 2px solid green;\n    border-right: 2px solid green;\n    box-sizing: border-box;\n    content: '';\n    display: inline-block;\n    height: 30px;\n    margin-top: -5px;\n    position: relative;\n    top: 50%;\n    transform: rotate(45deg) translateX(-60%) translateY(-35%);\n    width: 15px;\n}\n.abper-112-modal .qubit-VisitorPulse-thankYou .abper-112-text {\n    flex-grow: 0;\n    padding-left: 0;\n    padding-right: 0;\n}\n@media screen and (min-width: 1024px) {\n    .abper-112-modal .qubit-VisitorPulse-thankYou .abper-112-text {\n        margin-bottom: 30px;\n    }\n}\n.abper-112-modal .qubit-VisitorPulse-thankYou .abper-112-close-button {\n    margin: auto 0 0;\n}\n@media screen and (min-width: 768px) {\n    .abper-112-modal .qubit-VisitorPulse-thankYou .abper-112-close-button {\n        margin: 0;\n    }\n}\n.abper-112-modal .abper-112-tripadvisor {\n    border-top: 2px solid #d8d8d8;\n    flex-grow: 1;\n    padding: 20px 0 0;\n}\n.abper-112-modal .abper-112-tripadvisor.abper-112-tripadvisor-hide {\n    display: none;\n}\n.abper-112-modal .abper-112-tripadvisor-logo {\n    background-position: center;\n    background-repeat: no-repeat;\n    background-size: cover;\n    display: inline-block;\n    height: 80px;\n    margin: auto;\n    width: 100px;\n}\n@media screen and (min-width: 1024px) {\n    .abper-112-modal .abper-112-tripadvisor-logo {\n        height: 50px;\n        position: relative;\n        top: -10px;\n        width: 63px;\n        vertical-align: middle;\n    }\n}\n.abper-112-modal .abper-112-tripadvisor-copy {\n    display: inline-block;\n}\n@media screen and (min-width: 1024px) {\n    .abper-112-modal .abper-112-tripadvisor-copy {\n        text-align: left;\n        width: 70%;\n    }\n}\n.abper-112-modal .abper-112-close-button {\n    font-size: 16px;\n    font-weight: 700;\n    line-height: normal;\n    margin-bottom: 20px;\n    min-height: 40px;\n}\n@media screen and (min-width: 1024px) {\n    .abper-112-modal .abper-112-close-button {\n        width: 317px;\n    }\n}\n.abper-112-modal .abper-112-text {\n    flex-grow: 1;\n    font-size: 14px;\n    line-height: 1.5;\n    margin: 16px 0 30px;\n    padding-bottom: 0;\n}\n.abper-112-modal a,\n.abper-112-modal a:hover {\n    color: #333;\n}\n.abper-112-modal:hover,\n.abper-112-modal:active,\n.abper-112-modal:focus {\n    outline: none !important;\n}\n.abper-112-modal *:focus {\n    outline: none !important;\n}\n.abper-112-toggle {\n    border-top: 1px solid rgba(255, 255, 255, .13);\n    margin-top: auto;\n}\n.abper-112-toggle:hover,\n.abper-112-toggle:active,\n.abper-112-toggle:focus {\n    outline: none;\n}\n.abper-112-toggle+.country-selector-mobile {\n    margin-top: 0;\n}\n.abper-112-toggle .abper-112-text {\n    color: #fff;\n    cursor: pointer;\n    display: inline-block;\n    font-family: HelveticaNeue, Helvetica Neue, Helvetica, Arial, Lucida Grande, sans-serif;\n    font-size: 14px;\n    position: relative;\n    vertical-align: middle;\n}\n@media screen and (min-width: 1024px) {\n    .abper-112-toggle .abper-112-text {\n        color: #333;\n        width: auto;\n    }\n}\n@media screen and (min-width: 1024px) {\n    .abper-112-toggle {\n        background-color: #fff;\n        border-radius: 3px 3px 0 0;\n        box-shadow: 0 1px 4px 1px #666;\n        color: #333;\n        cursor: pointer;\n        font-family: HelveticaNeue, Helvetica Neue, Helvetica, Arial, Lucida Grande, sans-serif;\n        font-size: 14px;\n        height: 40px;\n        overflow: hidden;\n        padding: 10px 15px 25px 25px;\n        position: fixed;\n        right: 0;\n        top: calc(50% - 120px);\n        transform: rotate(-90deg);\n        transform-origin: 100% 100%;\n        z-index: 99;\n    }\n}\n@media (min-width: 768px) and (max-width: 1024px) and (orientation: portrait) {\n    .abper-112-toggle {\n        top: calc(25% - 120px);\n    }\n}\n.abper-112-toggle .abper-112-toggle-container {\n    position: relative;\n}\n.abper-112-toggle .abper-112-icon {\n    background-image: url('https://c.ekstatic.net/ecl/iconography/4fb725e86a700af2f5a185035d78d864_48_42.png');\n    background-size: cover;\n    display: inline-block;\n    height: 22px;\n    vertical-align: middle;\n    width: 25px;\n}\n@media screen and (min-width: 1024px) {\n    .abper-112-toggle .abper-112-icon {\n        background-image: url('https://c.ekstatic.net/ecl/iconography/9a9731bdeeac7dabae8183d63729c015_81_68.png');\n        height: 20px;\n        position: absolute;\n        transform: rotate(90deg) translateY(15px);\n    }\n}\n.abper-112-toggle .abper-112-text {\n    display: none;\n    line-height: 20px;\n    padding: 0 0 0 15px;\n}\n.qubit-VisitorPulse-modal {\n    display: none;\n}\n#abper-112-feedback-content {\n    font-family: HelveticaNeue, Helvetica Neue, Helvetica, Arial, Lucida Grande, sans-serif;\n    margin: 0 auto;\n    max-width: 690px;\n    padding: 70px 10px;\n    text-align: center;\n    width: 100%;\n}\n@media screen and (min-width: 768px) {\n    #abper-112-feedback-content {\n        margin: auto;\n    }\n}\n@media screen and (min-width: 1024px) {\n    #abper-112-feedback-content {\n        display: flex;\n        margin: 0 auto;\n        max-width: 1056px;\n        padding: 60px 40px;\n    }\n}\n#abper-112-feedback-content .abper-112-feedback,\n#abper-112-feedback-content .abper-112-contact,\n#abper-112-feedback-content .abper-112-complaint {\n    background-color: #fff;\n    border-radius: 3px;\n    box-shadow: 0 2px 4px 2px rgba(0, 0, 0, 0.19);\n    display: block;\n    margin-bottom: 20px;\n    padding: 10px 10px 0;\n    position: relative;\n    text-decoration: none;\n}\n#abper-112-feedback-content .abper-112-feedback span.abper-112-button,\n#abper-112-feedback-content .abper-112-contact span.abper-112-button,\n#abper-112-feedback-content .abper-112-complaint span.abper-112-button {\n    pointer-events: none;\n}\n@media screen and (min-width: 1024px) {\n    #abper-112-feedback-content .abper-112-feedback,\n    #abper-112-feedback-content .abper-112-contact,\n    #abper-112-feedback-content .abper-112-complaint {\n        background: none;\n        border-radius: 0;\n        box-shadow: none;\n        display: flex;\n        flex-basis: auto;\n        flex-direction: column;\n        margin: 0;\n        padding: 30px;\n        width: 33.3333%;\n    }\n    \n    #abper-112-feedback-content .abper-112-feedback::after,\n    #abper-112-feedback-content .abper-112-contact::after,\n    #abper-112-feedback-content .abper-112-complaint::after {\n        border-right: 1px solid #d8d8d8;\n        content: \"\";\n        display: block;\n        height: 100%;\n        position: absolute;\n        right: 0;\n        top: 0;\n        z-index: 1;\n    }\n}\n#abper-112-feedback-content .abper-112-title {\n    text-align: center;\n}\n#abper-112-feedback-content .abper-112-title,\n#abper-112-feedback-content .abper-112-hr,\n#abper-112-feedback-content .abper-112-text {\n    display: none;\n}\n@media screen and (min-width: 1024px) {\n    #abper-112-feedback-content .abper-112-title,\n    #abper-112-feedback-content .abper-112-hr,\n    #abper-112-feedback-content .abper-112-text {\n        display: inline-block;\n    }\n}\n#abper-112-feedback-content .abper-112-complaint::after {\n    border: none;\n}\n@media screen and (max-width: 1023px) {\n    #abper-112-feedback-content .abper-112-button,\n    #abper-112-feedback-content .abper-112-button:hover {\n        background: none;\n        border: none;\n        box-shadow: none;\n        color: #333;\n        font-weight: bold;\n        margin-bottom: 10px;\n        padding: 6px;\n        width: 100%;\n    }\n}\n#abper-112-feedback-content .abper-112-icon {\n    background-position: center;\n    background-repeat: no-repeat;\n    background-size: contain;\n    display: inline-block;\n    height: 55px;\n    margin: 0 auto;\n    width: 60px;\n}\n@media screen and (min-width: 1024px) {\n    #abper-112-feedback-content .abper-112-icon {\n        height: 68px;\n        margin: 0 auto 20px;\n        width: 80px;\n    }\n}\n#abper-112-feedback-content .abper-112-icon-feedback {\n    background-image: url('https://c.ekstatic.net/ecl/iconography/9a149a9f19b5506ca8a908f23f01c24f_60_60.png');\n    height: 34px;\n    width: 34px;\n}\n@media screen and (min-width: 1024px) {\n    #abper-112-feedback-content .abper-112-icon-feedback {\n        background-image: url('https://c.ekstatic.net/ecl/iconography/9a9731bdeeac7dabae8183d63729c015_81_68.png');\n        height: 68px;\n        width: 81px;\n    }\n}\n#abper-112-feedback-content .abper-112-icon-contact {\n    background-image: url('https://c.ekstatic.net/ecl/iconography/dcb2d20bb523a4d1b635194758896024_60_60.png');\n    height: 34px;\n    width: 34px;\n}\n@media screen and (min-width: 1024px) {\n    #abper-112-feedback-content .abper-112-icon-contact {\n        background-image: url('https://c.ekstatic.net/ecl/iconography/c8be9d69c9aa7b9c193ce1049e616f36_81_68.png');\n        height: 68px;\n        width: 81px;\n    }\n}\n#abper-112-feedback-content .abper-112-icon-complaint {\n    background-image: url('https://c.ekstatic.net/ecl/iconography/f633a3e3102979ba5c912a4b09c74c86_60_60.png');\n    height: 34px;\n    width: 34px;\n}\n@media screen and (min-width: 1024px) {\n    #abper-112-feedback-content .abper-112-icon-complaint {\n        background-image: url('https://c.ekstatic.net/ecl/iconography/fbc91a6287d56b2f84607070934ba7d8_81_68.png');\n        height: 68px;\n        width: 81px;\n    }\n}\n#abper-112-feedback-content .abper-112-title,\n.abper-112-thank-you .qubit-VisitorPulse-thankYouText {\n    color: #333;\n    font-family: EmiratesSB-Bold, Emirates-Bold, EmiratesSM, Helvetica, Arial, Lucida Grande, sans-serif !important;\n    font-size: 20px;\n    font-weight: 400;\n    line-height: 24px;\n    margin: 0;\n}\n@media screen and (min-width: 1024px) {\n    #abper-112-feedback-content .abper-112-title,\n    .abper-112-thank-you .qubit-VisitorPulse-thankYouText {\n        font-size: 30px;\n        line-height: 34px;\n    }\n}\n.abper-112-modal .qubit-VisitorPulse-thankYouText {\n    font-size: 30px;\n    line-height: 1.25;\n    margin: 0;\n}\nhr.abper-112-hr {\n    background: none;\n    border: none;\n    border-top: 2px solid #c60c30;\n    display: inline-block;\n    margin: 0 auto;\n    width: 60px;\n}\n.abper-112-button,\n.qubit-VisitorPulse-submit {\n    background-color: #fff;\n    border: 1px solid #333;\n    border-radius: 3px;\n    color: #333;\n    cursor: pointer;\n    display: inline-block;\n    font-size: 14px;\n    font-weight: bold;\n    line-height: normal;\n    margin-bottom: 20px;\n    padding: 11px;\n    text-align: center;\n    text-decoration: none;\n    width: 100%;\n}\n@media screen and (min-width: 1024px) {\n    .abper-112-button,\n    .qubit-VisitorPulse-submit {\n        width: auto;\n    }\n}\n.abper-112-button:hover,\n.qubit-VisitorPulse-submit:hover {\n    box-shadow: 0 0 6px 0 #666;\n}\n.abper-112-button.abper-112-primary,\n.qubit-VisitorPulse-submit.abper-112-primary {\n    background-color: #c60c30;\n    border-color: #c60c30;\n    color: #fff;\n    font-family: HelveticaNeue, Helvetica Neue, Helvetica, Arial, Lucida Grande, sans-serif;\n    font-size: 14px;\n    font-weight: 700;\n}\n.abper-112-button.abper-112-primary:hover,\n.qubit-VisitorPulse-submit.abper-112-primary:hover {\n    background-color: #c60c30;\n    border-color: #c60c30;\n    color: #fff;\n}\n.abper-112--focus {\n    border-radius: 2px !important;\n    box-shadow: 0 0 2px 1.5px #fff, 0 0 3px 3px #000, inset 0 0 0.5px 0.5px #fff, inset 0 0 0.5px 1.5px #000 !important;\n    outline: 0 !important;\n}\n.qubit-VisitorPulse-hidden {\n    visibility: hidden;\n}\n@media (max-width: 480px) {\n    .ekglobal-navigation-megamenu-holder.menu--opened {\n        overflow-y: scroll;\n    }\n}\n@media (orientation: portrait) {\n    .abper-112-modal .qubit-VisitorPulse {\n        display: block;\n    }\n    \n    .abper-112-modal .qubit-AdvancedModal-body {\n        flex: none;\n        height: 100%;\n    }\n    \n    .abper-112-modal .qubit-VisitorPulse {\n        display: block;\n    }\n    \n    .abper-112-modal .qubit-VisitorPulse-content {\n        height: 100%;\n        position: relative;\n    }\n    \n    .abper-112-modal .qubit-VisitorPulse-submit.abper-112-visible {\n        bottom: 30px;\n        left: 20px;\n        right: 20px;\n        position: absolute;\n        width: auto;\n    }\n    \n    .abper-112-modal .qubit-VisitorPulse-thankYou {\n        height: 100%;\n        position: relative;\n    }\n}\n@media (orientation: portrait) and (min-width: 768px) {\n    .abper-112-modal .qubit-VisitorPulse-submit.abper-112-visible {\n        bottom: 60px;\n        left: 30px;\n        right: 30px;\n    }\n}\n@media (orientation: portrait) and (min-width: 1024px) {\n    .abper-112-modal .qubit-VisitorPulse-submit.abper-112-visible {\n        bottom: auto;\n        left: auto;\n        position: relative;\n        right: auto;\n        width: 317px;\n    }\n}\n@media (orientation: portrait) and (min-width: 768px) {\n    .abper-112-modal .abper-112-button.abper-112-primary.abper-112-close-button {\n        bottom: 60px;\n        left: 0;\n        max-width: 690px;\n        position: absolute;\n    }\n}\n@media (orientation: portrait) and (min-width: 1024px) {\n    .abper-112-modal .abper-112-button.abper-112-primary.abper-112-close-button {\n        bottom: auto;\n        left: auto;\n        position: relative;\n        right: auto;\n    }\n}\n.ek .abper-112-modal [contentEditable=true]:not([tabindex='-1']):not(.panel-disabled):focus,\n.ek .abper-112-modal [tabindex]:not([tabindex='-1']):not(.panel-disabled):focus,\n.ek .abper-112-modal a:not([tabindex='-1']):not(.panel-disabled):focus,\n.ek .abper-112-modal area:not([tabindex='-1']):not(.panel-disabled):focus,\n.ek .abper-112-modal button:not([disabled]):not([tabindex='-1']):not(.panel-disabled):focus,\n.ek .abper-112-modal iframe:not([tabindex='-1']):not(.panel-disabled):focus,\n.ek .abper-112-modal input:not([disabled]):not([tabindex='-1']):not(.panel-disabled):focus,\n.ek .abper-112-modal select:not([disabled]):not([tabindex='-1']):not(.panel-disabled):focus,\n.ek .abper-112-modal textarea:not([disabled]):not([tabindex='-1']):not(.panel-disabled):focus {\n    outline: none !important;\n}\n.ek .abper-112-modal p a {\n    text-decoration: underline;\n}\n.ek .abper-112-modal p a:hover {\n    text-decoration: none;\n}\n@media screen and (min-width: 1024px) {\n    .ek-global-navigation .abper-112-toggle[tabindex=\"0\"]:focus {\n        border-radius: 3px 3px 0 0 !important;\n        box-shadow: 0 1px 4px 1px #666 !important;\n    }\n}\n.abper-112-toggle[tabindex]:focus:not(a):not(button) {\n    border-radius: 0;\n    box-shadow: none;\n}\n@media screen and (min-width: 1024px) {\n    .abper-112-toggle[tabindex]:focus:not(a):not(button) {\n        border-radius: 3px 3px 0 0;\n        box-shadow: 0 1px 4px 1px #666;\n    }\n}\n.abper-112-modal a:focus {\n    border-radius: none;\n    box-shadow: none;\n}\n.page-template.leaderboard-template .abper-112-toggle {\n    height: 5px;\n}\n.ekglobal-navigation-megamenu-holder.menu--opened .abper-112-toggle {\n    height: auto;\n}\n.abper-112-modal label.qubit-VisitorPulse-radio * {\n    pointer-events: none;\n}\n.abper-112-modal * {\n    -webkit-tap-highlight-color: transparent;\n}\n.abper-112-toggle {\n    display: none;\n}\n@media screen and (min-width: 1024px) {\n    .abper-112-toggle {\n        display: block;\n    }\n}\n.abper-112-toggle+.nav__lang-wrapper {\n    margin-top: 0;\n}\n.nav--show .abper-112-toggle {\n    display: block;\n}\n.ek-global-navigation .menu--opened .abper-112-toggle,\n.main-navigation__nav .nav--mobile .abper-112-toggle {\n    display: block;\n}\n@media screen and (min-width: 1024px) {\n    .ek-global-navigation .menu--opened .abper-112-toggle,\n    .main-navigation__nav .nav--mobile .abper-112-toggle {\n        display: none;\n    }\n}\n.ek-global-navigation .menu--opened .abper-112-toggle+div,\n.main-navigation__nav .nav--mobile .abper-112-toggle+div {\n    display: block;\n}\n.main-navigation__nav .nav--mobile .abper-112-toggle-container {\n    padding: 15px;\n}\n.abper-112-hidden-mobile {\n    display: none !important;\n}\n@media screen and (min-width: 1024px) {\n    .abper-112-hidden-mobile {\n        display: inline-block !important;\n    }\n}\n.abper-112-hidden-desktop {\n    display: inline-block !important;\n}\n@media screen and (min-width: 1024px) {\n    .abper-112-hidden-desktop {\n        display: none !important;\n    }\n}",html:'<div id="bx-modal_overlay">\n    <div class="bx-modal_content abper-112-modal">\n        \n        <div class="bx-options" id="bx-options">\n            <div id="abper-112-feedback-content" class="abper-112-feedback-content">\n                <a class="abper-112-link abper-112-feedback abper-112-submit-feedback" id="bx-feedback_option" role="link" tabindex="0">\n                    <i class="abper-112-icon abper-112-icon-feedback"></i>\n                    <h2 class="abper-112-title">Leave app feedback</h2>\n                    <hr class="abper-112-hr">\n                    <p class="abper-112-text">Your opinion is important to us. Help us improve your online experience.</p>\n                    <span class="abper-112-button abper-112-secondary abper-112-submit-feedback">Submit feedback</span>\n                </a>\n                <a class="abper-112-link abper-112-contact" id="bx-contact_link" href="https://www.emirates.com/uk/english/help/" role="link"\n                    tabindex="0">\n                    <i class="abper-112-icon abper-112-icon-contact"></i>\n                    <h2 class="abper-112-title">Get in touch</h2>\n                    <hr class="abper-112-hr">\n                    <p class="abper-112-text">Need answers? Here are the most convenient ways to contact us</p>\n                    <span class="abper-112-button abper-112-secondary">Contact us</span>\n                </a>\n                <a class="abper-112-link abper-112-complaint" id="bx-complaint_link" href="https://www.emirates.com/uk/english/help/complaint.aspx" role="link" tabindex="0">\n                    <i class="abper-112-icon abper-112-icon-complaint"></i>\n                    <h2 class="abper-112-title">Raise a concern</h2>\n                    <hr class="abper-112-hr">\n                    <p class="abper-112-text">If you\'ve had a less than satisfying experience, we\'d like to hear from you.</p>\n                    <span class="abper-112-button abper-112-secondary">Submit a complaint</span>\n                </a>\n            </div>\n        </div>\n\n        <div class="bx-rating bx-hidden qubit-VisitorPulse-question" id="bx-rating">\n            <h1 class="bx-header_question" id="bx-header_question">How satisfied are you with the Emirates App experience?</h1>\n            <fieldset class="rating" id="bx-rating_buttons">\n                <input type="radio" id="star5" name="rating" value="5" /><label class="bx-star5" for="star5" title="Excellent"></label>\n                <input type="radio" id="star4" name="rating" value="4" /><label class="bx-star4" for="star4" title="Good"></label>\n                <input type="radio" id="star3" name="rating" value="3" /><label class="bx-star3" for="star3" title="Average"></label>\n                <input type="radio" id="star2" name="rating" value="2" /><label class="bx-star2" for="star2" title="Poor"></label>\n                <input type="radio" id="star1" name="rating" value="1" /><label class="bx-star1" for="star1" title="Very Poor"></label>\n                <span class="bx-radio_label bx-label5">Excellent</span>\n                <span class="bx-radio_label bx-label4">Good</span>\n                <span class="bx-radio_label bx-label3">Average</span>\n                <span class="bx-radio_label bx-label2">Poor</span>\n                <span class="bx-radio_label bx-label1">Very Poor</span>\n            </fieldset>\n        </div>\n\n        <div class="bx-comment bx-hidden" id="bx-comment">\n            <h1 class="bx-header_question">How satisfied are you with the Emirates App experience?</h1>\n            <textarea class="bx-comment_textarea" id="bx-comment_textarea" maxlength="1500" placeholder="Tell us how we can make your experience better*"></textarea>\n            <div class="bx-comment_warning">* Do not enter personal information here</div>\n            <div class="bx-comment_submit qubit-VisitorPulse-submit" id="bx-submit_feedback" role="button" tabindex="0">Submit feedback</div>\n        </div>\n\n        <div class="bx-thank_you bx-hidden" id="bx-thank_you">\n            <div class="qubit-VisitorPulse-thankYou" aria-hidden="false">\n                <div class="abper-112-thank-you">\n                    <i class="abper-112-icon-check abper-112-hidden-desktop"></i>\n                    <div class="qubit-VisitorPulse-thankYouText">Thank you for your feedback</div>\n                    <i class="abper-112-icon-check abper-112-hidden-mobile"></i>\n                    <p class="abper-112-text">If you have any questions or need help please visit our\n                        <a class="abper-112-faq-link" id="bx-faq_link" href="https://www.emirates.com/uk/english/help/faqs/"\n                            title="">FAQ</a> or\n                        <a class="abper-112-contact-us-link" id="bx-contact_link2" href="https://www.emirates.com/uk/english/help/"\n                            title="">Contact us</a> section.\n                    </p>\n                </div>\n            </div>\n        </div>\n    </div>\n</div>\n\n\n\n\n',js:'insertHTMLAfter(\'body\');\n\n/* Get all elements required */\nvar bxModal = document.getElementById(\'bx-modal_overlay\');\nvar bxFeedback = document.getElementById(\'bx-feedback_option\');\nvar bxOptions = document.getElementById(\'bx-options\');\nvar bxRating = document.getElementById(\'bx-rating\');\nvar bxRatingButtons = document.getElementById(\'bx-rating_buttons\');\nvar bxComment = document.getElementById(\'bx-comment\');\nvar bxCommentTextarea = document.getElementById(\'bx-comment_textarea\');\nvar bxSubmitFeedback = document.getElementById(\'bx-submit_feedback\');\nvar bxThankYou = document.getElementById(\'bx-thank_you\');\nvar bxModalOverlay = document.getElementById(\'bx-modal_overlay\');\nvar ratingValue = 0;\n\nfunction closeModal() {\n    bxThankYou.style.display = \'none\';\n    bxComment.style.display = \'none\';\n    bxRating.style.display = \'none\';\n    bxOptions.style.display = \'flex\';\n    bxModal.style.display = \'none\';\n    if (document.querySelector(".rating > input:checked")) {\n        document.querySelector(".rating > input:checked").checked = false;\n        bxCommentTextarea.value = "";\n    }\n}\n\nfunction getPos() {\n    var re = new RegExp(\'emirates.com\\/[a-z]{2}\\/\');\n    var matches = re.exec(window.location.href);\n    if (matches && matches.length > 0)\n        return matches[0].substring(0, matches[0].length - 1);\n    else\n        return "emirates.com";\n}\n\nbxModal.style.display = \'flex\';\n\nbxFeedback.onclick = function() {\n    bxOptions.style.display = \'none\';\n    bxRating.style.display = \'block\';\n};\n\nfunction getRadioValue() { \n    var stars = document.getElementsByName(\'rating\'); \n    for(i = 0; i < stars.length; i++) { \n        if(stars[i].checked) \n            return stars[i].value;\n    } \n}\n\nbxRatingButtons.onclick = function() {\n    ratingValue = getRadioValue();\n    if (ratingValue) {\n        bxRating.style.display = \'none\';\n        bxComment.style.display = \'block\';\n    }\n};\n\nfunction getGaClientId() {\n    var clientId = "";\n    dataLayer.forEach(function(d) {\n        if (d.GA_ID) {\n            clientId = d.GA_ID;\n        }\n    });\n    return clientId;\n}\n\nfunction getQmSessionId() {\n    var sessionId = "";\n    dataLayer.forEach(function(d) {\n        if (d.QMSessionID) {\n            sessionId = d.QMSessionID;\n        }\n    });\n    return sessionId;\n}\n\nbxSubmitFeedback.onclick = function() {\n    bxThankYou.style.display = \'block\';\n    bxComment.style.display = \'none\';\n    var feedbackEvent = {\n        "channel": "MOBILE_APP",\n        "type": "FEEDBACK",\n        "language": dataLayer[0].languageCode,\n        "currency": dataLayer[0].posSiteCurrencyCode,\n        "page": dataLayer[0].pageName,\n        "pos": getPos(),\n        "browser_id": Boxever.getID(),\n        "rating": ratingValue,\n        "comment": document.getElementById(\'bx-comment_textarea\').value,\n        "survey_id": "129514",\n        "question_text": document.getElementById(\'bx-header_question\').textContent,\n        "page_category": dataLayer[0].pageCategory ? dataLayer[0].pageCategory : "",\n        "visitor_session_id": dataLayer[0].visitorSessionID ? dataLayer[0].visitorSessionID : "",\n        "platform_type": dataLayer[0].platformType ? dataLayer[0].platformType : "",\n        "country_region": dataLayer[0].countryRegion ? dataLayer[0].countryRegion : "",\n        "member_tier": dataLayer[0].memberTier ? dataLayer[0].memberTier : "",\n        "page_url": window.location.href,\n        "ga_client_id": getGaClientId(),\n        "qm_session_id": getQmSessionId()\n    };\n    Boxever.eventCreate(feedbackEvent, function (data) { }, \'json\');\n};\n\nvar pos = getPos();\ndocument.getElementById(\'bx-contact_link\').setAttribute("href", ("https://www." + pos + "/english/help/") );\ndocument.getElementById(\'bx-complaint_link\').setAttribute("href", ("https://www." + pos + "/english/help/complaint.aspx") );\ndocument.getElementById(\'bx-faq_link\').setAttribute("href", ("https://www." + pos + "/english/help/faqs/") );\ndocument.getElementById(\'bx-contact_link2\').setAttribute("href", ("https://www." + pos + "/english/help/") );\n\n/* Add feedback to card on Help page */\nif (document.querySelector(\'ul.help-centre-feedback__cards-container > li [data-link="Complaints and feedback:Website feedback"]\')) {\n    var helpFeedbackCard =  document.querySelector(\'ul.help-centre-feedback__cards-container > li [data-link="Complaints and feedback:Website feedback"]\');\n    helpFeedbackCard.onclick = function() {\n        bxOptions.style.display = \'none\';\n        bxRating.style.display = \'block\';\n        bxModal.classList.remove("bx-hidden_important");\n        bxModal.style.display = \'flex\';\n    };\n}\n\n\n\n'}}]},{ref:"edbd9c57-7154-42f5-adaa-5df6f49379c4",name:"BOX-133 Skywards - Login Prompt (Web)",revision:50,archived:!1,target:{script:"function isBxQa() {\n    var queryString = window.location.search;\n    var urlParams = new URLSearchParams(queryString);\n    return urlParams.get('bx-qa') == '1';\n}\n\nfunction filter() {\n    if (dataLayer && dataLayer.length > 0) {\n        var datalayerData = dataLayer[0];\n        \n        if (datalayerData.pageName === \"/ Home\"\n            && datalayerData.languageCode === \"EN\"\n            && datalayerData.visitorLoginState === \"Logged Out\"\n            && !sessionStorage.getItem('bx-skywards-login-prompt-dismissed')) {\n               \n            \n            targetingPassed();\n        }\n    }\n}\n\nfilter();",targetPages:[]},traffic:{type:"advancedTraffic",allocationLow:1,allocationHigh:40,splits:[{ref:"dd43ea86-db40-4a0d-bdfc-4a3b44bbfd1a",lowSplit:1,highSplit:20},{ref:"2cd0db22-283d-423b-9f4b-3c1d765e4050",lowSplit:21,highSplit:40}]},variants:[{ref:"dd43ea86-db40-4a0d-bdfc-4a3b44bbfd1a",name:"Login Prompt",assets:{css:"\n@media screen and (min-width:1024px) {\n.bx-login-prompt {\n    display: flex;\n    background: #FFF;\n    padding: 20px 15px;\n    position: absolute;\n    margin-top: 10px;\n    width: 250px;\n    border-radius: 3px;\n    flex-direction: column;\n    margin-left: -13px;\n}\n\n.bx-login-prompt h2 {\n    font-size: 24px;\n    font-family: Emirates-Bold,Helvetica,Arial,Lucida Grande,sans-serif;\n    line-height: 28px;\n    text-align: center;\n    color: #333;\n    position: relative;\n    padding: 0 10px;\n}\n\n.bx-login-prompt p {\n    font-family: HelveticaNeue,Helvetica Neue,Helvetica,Arial,Lucida Grande,sans-serif;\n    font-size: 14px;\n    margin-top: 25px;\n    text-align: center;\n    line-height: 18px;\n    color: #333;\n}\n\n.bx-login-prompt:after {\n    width: 0;\n    height: 0;\n    border-left: 8px solid transparent;\n    border-right: 8px solid transparent;\n    border-bottom: 8px solid #fff;\n    top: -8px;\n    content: \"\";\n    position: absolute;\n    border-top: 0;\n    -webkit-transform: translate(-50%);\n    -ms-transform: translate(-50%);\n    transform: translate(-50%);\n    right: 11%;\n}\n.bx-login-prompt h2:after {\n    content: '';\n    height: 2px;\n    width: 60px;\n    background: #c60b30;\n    position: absolute;\n    bottom: -12px;\n    left: 50%;\n    transform: translate(-50%);\n}\n\n.bx-login-prompt-close {\n    right: 10px;\n    top: 8px;\n    width: 20px;\n    height: 20px;\n    background: transparent;\n    position: absolute;\n    cursor: pointer;\n}\n\n.bx-login-prompt-close:before, .bx-login-prompt-close:after {\n    content: '';\n    position: absolute;\n    height: 12px;\n    border-left: 2px solid #333333;\n    right: 9px;\n    top: 5px;\n}\n\n.bx-login-prompt-close:before {\n    transform: rotate(-45deg);\n}\n\n.bx-login-prompt-close:after {\n    transform: rotate(45deg);\n}\n\n}\n\n@media screen and (max-width:1023px) {\n    .bx-login-prompt {\n    display: none;\n}\n}",html:'<div class="bx-login-prompt">\n    <h2>Login to <br>Emirates Skywards</h2>\n    <p>Enjoy reward flights, upgrades, exclusive benefits and more.</p>\n    <div class="bx-login-prompt-close"></div>\n</div>\n',js:'insertHTMLAfter(\'.ek-global-navigation__secondarymenu\');\nsendBoxeverEvent("BOX133_VIEWED");\n\nconst bxLoginPrompt = document.querySelector(".bx-login-prompt");\nconst bxLoginPromptClose = bxLoginPrompt.querySelector(".bx-login-prompt-close");\nconst ekMainNavBar = document.querySelector(".ek-global-navigation__inner-container")\n\nfunction dismissPrompt() {\n    bxLoginPrompt.style.display = "none";\n    \n    window.removeEventListener("scroll", dismissPrompt);\n    ekMainNavBar.removeEventListener("click", dismissPrompt);\n    \n    sessionStorage.setItem(\'bx-skywards-login-prompt-dismissed\', \'true\');\n    sendBoxeverEvent("BOX133_DISMISSED");\n}\n\nfunction getPos() {\n    var re = new RegExp(\'emirates.com\\/[a-z]{2}\\/\');\n    var matches = re.exec(window.location.href);\n    if (matches && matches.length > 0)\n        return matches[0].substring(0, matches[0].length - 1);\n    else\n        return "emirates.com";\n}\n\nfunction sendBoxeverEvent(eventType) {\n    var customEvent = {\n        "channel": "WEB",\n        "type": eventType,\n        "language": dataLayer[0].languageCode,\n        "currency": dataLayer[0].posSiteCurrencyCode,\n        "page": dataLayer[0].pageName,\n        "pos": getPos(),\n        "browser_id": Boxever.getID()\n    };\n    Boxever.eventCreate(customEvent, function (data) { }, \'json\');\n}\n\nif(bxLoginPrompt) {\n    \n    // Dismiss for close button\n    bxLoginPromptClose.onclick = function() {\n        dismissPrompt();\n    }\n    \n    // Dismiss for scroll\n    window.addEventListener("scroll", dismissPrompt);\n    \n    // Dismiss for interaction with menu\n    ekMainNavBar.addEventListener("click", dismissPrompt);\n}'}},{ref:"2cd0db22-283d-423b-9f4b-3c1d765e4050",name:"Original",assets:{css:"/** style your Experience with CSS */",html:"\x3c!-- define the structure and content of your Experience in HTML e.g.--\x3e\n<div>My Content</div>\n\x3c!-- Use dynamic Guest variables, type ctrl+space or guest to explore available entities.--\x3e\n\x3c!-- Type 'd' to see decisioning helpers --\x3e\n",js:"// You can choose how you want to add your HTML by using insertHTMLBefore, insertHTMLAfter, or replaceHTML methods\n// e.g insertHTMLAfter('#.someClassName'); or insertHTMLAfter('body'); or replaceHTML('#myPageId')\n"}}]}]}catch(n){var allFlows=[]}var QA_TOOL_URL="https://d35vb5cccm4xzp.cloudfront.net/qa-tool/bx-qa-tool/bx-qa-tool.js";if(_boxever_settings&&_boxever_settings.web_flow_target&&(QA_TOOL_URL=_boxever_settings.web_flow_target+"/qa-tool/bx-qa-tool/bx-qa-tool.js"),sessionStorage.getItem("BX_WEB_FLOW_CONFIG"))try{Boxever.webFlowDebug.flows.config=JSON.parse(sessionStorage.getItem("BX_WEB_FLOW_CONFIG")),0===Object.entries(Boxever.webFlowDebug.flows.config).length?resetQAToolConfig():(Boxever.webFlowDebug.flows.config.env=Boxever.webFlowDebug.flows.config.env||"PRODUCTION",Boxever.webFlowDebug.flows.config.browserId=Boxever.browser_id||Boxever.webFlowDebug.flows.config.browserId,Boxever.webFlowDebug.flows.config.clientKey=Boxever.client_key||Boxever.webFlowDebug.flows.config.clientKey,Boxever.webFlowDebug.flows.config.bucketNumber=Boxever.webFlowDebug.flows.config.bucketNumber||Boxever.bucket_number,Boxever.webFlowDebug.flows.config.disabledFlows=Boxever.webFlowDebug.flows.config.disabledFlows||[],Boxever.webFlowDebug.flows.config.customVariantRefs=Boxever.webFlowDebug.flows.config.customVariantRefs||{})}catch(n){resetQAToolConfig()}else resetQAToolConfig();var bxQATool=Boxever.webFlowDebug.flows.config.enableQATool,guestRef=Boxever.webFlowDebug.flows.config.guestRef,guestName=Boxever.webFlowDebug.flows.config.guestName,flowRef=Boxever.webFlowDebug.flows.config.previewFlowRef,variantRef=Boxever.webFlowDebug.flows.config.previewVariantRef,isDevOrg="DEV"===Boxever.webFlowDebug.flows.config.env,currentFlowDebug;getUrlParameter("bxQATool")&&(bxQATool=Boxever.webFlowDebug.flows.config.enableQATool="false"!==getUrlParameter("bxQATool"),updateQAToolSessionInfo(Boxever.webFlowDebug.flows.config)),getUrlParameter("bxFlowRef")&&(flowRef=Boxever.webFlowDebug.flows.config.previewFlowRef=getUrlParameter("bxFlowRef"),updateQAToolSessionInfo(Boxever.webFlowDebug.flows.config)),getUrlParameter("bxVariantRef")&&(variantRef=Boxever.webFlowDebug.flows.config.previewVariantRef=getUrlParameter("bxVariantRef"),updateQAToolSessionInfo(Boxever.webFlowDebug.flows.config)),-1!==location.href.indexOf("bxGuestRef")&&getUrlParameter("bxGuestRef").length&&(guestRef=Boxever.webFlowDebug.flows.config.guestRef=getUrlParameter("bxGuestRef"),Boxever.webFlowDebug.flows.config.advancedConfigEnabled=!0,updateQAToolSessionInfo(Boxever.webFlowDebug.flows.config)),-1!==location.href.indexOf("bxGuestName")&&getUrlParameter("bxGuestName").length&&(guestName=Boxever.webFlowDebug.flows.config.guestName=getUrlParameter("bxGuestName"),updateQAToolSessionInfo(Boxever.webFlowDebug.flows.config)),-1!==location.href.indexOf("bxIsDevOrg")&&(isDevOrg=getUrlParameter("bxIsDevOrg"),Boxever.webFlowDebug.flows.config.env=isDevOrg?"DEV":"PRODUCTION",updateQAToolSessionInfo(Boxever.webFlowDebug.flows.config)),isDevOrg&&(API_PATH="https://dev-api.boxever.com");var bucketNumberEndpoint="".concat(API_PATH,"/v2/getBucket");Boxever.getBucketNumber=function(n){getBucketNumber(bucketNumberEndpoint).then((function(e){e.json().then((function(e){e&&e.bucket&&(Boxever.bucket_number=Boxever.webFlowDebug.flows.config.bucketNumber=Number(e.bucket),Boxever.setCookie("bx_bucket_number",Number(e.bucket)),n&&"function"==typeof n&&n())}))}))},userHasBucketNumber()?(Boxever.webFlowDebug.flows.config.bucketNumber=Boxever.bucket_number=Number(Boxever.getCookie("bx_bucket_number")),initSDK()):getBucketNumber(bucketNumberEndpoint).then((function(n){n.json().then((function(n){n&&n.bucket?(Boxever.bucket_number=Boxever.webFlowDebug.flows.config.bucketNumber=Number(n.bucket),Boxever.setCookie("bx_bucket_number",Number(n.bucket)),initSDK()):(Boxever.bucket_number=Boxever.webFlowDebug.flows.config.bucketNumber=1,initSDK())}))})).catch((function(n){Boxever.bucket_number=Boxever.webFlowDebug.flows.config.bucketNumber=1,BoxeverJERS.errors.push(n),initSDK()}))}else window.BoxeverWebLibRetryCount&&Number(window.BoxeverWebLibRetryCount)?window.BoxeverWebLibRetryCount+=1:window.BoxeverWebLibRetryCount=1,window.BoxeverWebLibRetryCount<10&&setTimeout(BoxeverWebLib,250);function updateQAToolSessionInfo(n){try{sessionStorage.setItem("BX_WEB_FLOW_CONFIG",JSON.stringify(n))}catch(n){throw n}}function userHasBucketNumber(){return Boxever.bucket_number||!!Boxever.getCookie("bx_bucket_number")}function getBucketNumber(n){return fetch(n,{method:"POST",mode:"cors",cache:"no-cache",headers:{"Content-Type":"application/json"},body:JSON.stringify({clientKey:Boxever.client_key,browserId:Boxever.browser_id})})}function resetQAToolConfig(){Boxever.webFlowDebug.flows.config={enableQATool:!1,advancedConfigEnabled:!1,browserId:Boxever.browser_id,clientKey:Boxever.client_key,bucketNumber:null,guestRef:null,guestName:null,productionFlowsEnabled:!1,sandboxFlowsEnabled:!0,env:"PRODUCTION",disabledFlows:[],customVariantRefs:{},previewFlowRef:"",previewVariantRef:""}}function initSDK(){Boxever.triggerExperiences=function(){Boxever.webFlowDebug.flows.config.productionFlowsEnabled||flowRef||(Boxever.webFlowDebug.flows.config.productionFlowsEnabled=!0),allFlows.forEach((function(n){Boxever.webFlowDebug.flows.production.push({definition:n}),(currentFlowDebug=Boxever.webFlowDebug.flows.production[Boxever.webFlowDebug.flows.production.length-1]).validFlowAndVariantReferences="PASSED",Boxever.webFlowDebug.flows.config.productionFlowsEnabled?-1!==Boxever.webFlowDebug.flows.config.disabledFlows.indexOf(n.ref)?currentFlowDebug.disabled=!0:currentFlowDebug.disabled=!1:bxQATool&&flowRef?n.ref===flowRef?currentFlowDebug.disabled=!1:currentFlowDebug.disabled=!0:currentFlowDebug.disabled=!1,shouldWeTriggerAVariant(Boxever.bucket_number,n,currentFlowDebug)}))},Boxever.triggerExperiences(),Handlebars.registerHelper("equals",(function(n,e,t){return n==e?t.fn(this):t.inverse(this)})),Boxever.templating=Handlebars.noConflict(),bxQATool&&(flowRef&&fetchFlowInformation(flowRef,variantRef),setTimeout((function(){window.oldDefine=window.define,window.define=null;var n=document.createElement("bx-qa-tool");n.setAttribute("id","bx-qa-tool"),document.body.appendChild(n);var e=document.createElement("script");e.id="boxever-web-flows-qa-tool",e.type="text/javascript",e.src=QA_TOOL_URL,e.async=!0,e.defer=!0,document.querySelector("html").appendChild(e),setTimeout((function(){window.define=window.oldDefine}),2e3)}),500))}function callFlow(n){var e={channel:"WEB",browserId:Boxever.browser_id,clientKey:Boxever.client_key,pointOfSale:Boxever.pointOfSale};return guestRef&&(e.guestRef=guestRef),fetch(n,{method:"POST",mode:"cors",cache:"no-cache",headers:{"Content-Type":"application/json"},body:JSON.stringify({context:e})})}function fetchFlowInformation(n,e){Boxever.webFlowDebug.flows.sandbox[0]||(Boxever.webFlowDebug.flows.sandbox.push({disabled:!1,variantRef:e}),currentFlowDebug=Boxever.webFlowDebug.flows.sandbox[0],fetch(API_PATH+"/v2/flowInfo/"+n,{method:"POST",mode:"cors",cache:"no-cache",headers:{"Content-Type":"application/json"},body:JSON.stringify({clientKey:Boxever.client_key})}).then((function(n){n.json().then((function(n){currentFlowDebug.definition=Boxever.webFlowDebug.flows.sandbox[0].definition=n,n.code&&(n.code<200||n.code>299)?currentFlowDebug&&(currentFlowDebug.validFlowAndVariantReferences="FAILED",currentFlowDebug.basicPageTargeting=null,currentFlowDebug.apiResponse=null):(currentFlowDebug.validFlowAndVariantReferences="PASSED",shouldWeTriggerAVariant(Boxever.bucket_number,n,currentFlowDebug))}))})).catch((function(n){currentFlowDebug&&(currentFlowDebug.validFlowAndVariantReferences="FAILED",currentFlowDebug.basicPageTargeting=null,currentFlowDebug.apiResponse=null)})))}function checkTargetPageViewConditions(n){return!n||!n.length||n.some((function(n){return"Equals"===n.operator&&window.location.href===n.value||("Contains"===n.operator&&-1!==window.location.href.indexOf(n.value)||(!("Starts with"!==n.operator||!new RegExp("^"+n.value).test(window.location.href))||(!("Ends with"!==n.operator||!new RegExp(n.value+"$").test(window.location.href))||(!("Matches Regex"!==n.operator||!new RegExp(n.value).test(window.location.href))||(!("Matches Regex (Ignore Case)"!==n.operator||!new RegExp(n.value,"i").test(window.location.href))||("Does not equal"===n.operator&&window.location.href!==n.value||("Does not contain"===n.operator&&-1===window.location.href.indexOf(n.value)||("Does not start with"===n.operator&&!new RegExp("^"+n.value).test(window.location.href)||("Does not end with"===n.operator&&!new RegExp(n.value+"$").test(window.location.href)||("Does not match Regex"===n.operator&&!new RegExp(n.value).test(window.location.href)||("Does not match Regex (Ignore Case)"===n.operator&&!new RegExp(n.value,"i").test(window.location.href)||void 0)))))))))))}))}function shouldWeTriggerAVariant(n,e,t){var r;if(!t.disabled)if((variantRef||t.variantRef)&&(r=variantRef||t.variantRef),Boxever.webFlowDebug.flows.config.customVariantRefs&&Boxever.webFlowDebug.flows.config.customVariantRefs[e.ref]&&(r=Boxever.webFlowDebug.flows.config.customVariantRefs[e.ref]),isNumberInRange(n,e.traffic.allocationLow,e.traffic.allocationHigh)){var a=e.variants.filter((function(n){return n.ref===r}))[0];if(r&&a){var i=e.variants.filter((function(n){return n.ref===r}))[0];i?(t.userIsInAllocation="PASSED",t.variantRef=r,runSelectedVariant(e,i,t)):t.validFlowAndVariantReferences="FAILED"}else e.traffic.splits.forEach((function(r){if("PASSED"!==t.userIsInAllocation)if(isNumberInRange(n,r.lowSplit,r.highSplit)){t.userIsInAllocation="PASSED",t.variantRef=r.ref;var a=e.variants.filter((function(n){return n.ref===r.ref}))[0];runSelectedVariant(e,a,t)}else t.userIsInAllocation="FAILED"}))}else t.userIsInAllocation="FAILED"}function runSelectedVariant(flow,selectedVariant,debugFlow){var targetingPassed=triggerVariant;function doesTargetingPass(){var hasTargetPages=flow.target&&flow.target.targetPages&&flow.target.targetPages.length,hasTargetScript=flow.target&&flow.target.script;if(hasTargetPages||hasTargetScript)if(hasTargetPages&&hasTargetScript)if(checkTargetPageViewConditions(flow.target.targetPages)){debugFlow.basicPageTargeting="PASSED";try{debugFlow.advancedPageTargeting="FAILED",debugFlow.advancedPageTargetingMessage="targetingPassed() method hasn't been called",eval(flow.target.script)}catch(n){debugFlow.advancedPageTargeting="FAILED",debugFlow.advancedPageTargetingMessage="".concat(n)}}else debugFlow.basicPageTargeting="FAILED",debugFlow.advancedPageTargeting=null;else if(hasTargetPages&&!hasTargetScript)checkTargetPageViewConditions(flow.target.targetPages)?(debugFlow.basicPageTargeting="PASSED",debugFlow.advancedPageTargeting="PASSED",targetingPassed()):(debugFlow.basicPageTargeting="FAILED",debugFlow.advancedPageTargeting=null);else if(!hasTargetPages&&hasTargetScript){debugFlow.basicPageTargeting="PASSED";try{debugFlow.advancedPageTargeting="FAILED",debugFlow.advancedPageTargetingMessage="targetingPassed() method hasn't been called",eval(flow.target.script)}catch(n){debugFlow.advancedPageTargeting="FAILED",debugFlow.advancedPageTargetingMessage="".concat(n)}}else debugFlow.basicPageTargeting="PASSED",debugFlow.advancedPageTargeting="PASSED",targetingPassed();else debugFlow.basicPageTargeting="PASSED",debugFlow.advancedPageTargeting="PASSED",targetingPassed()}function triggerVariant(){var n;(debugFlow.advancedPageTargeting="PASSED",debugFlow.advancedPageTargetingMessage="",flow.ref&&selectedVariant.ref)&&callFlow(API_PATH+"/v2/callFlows/"+flow.ref+"/variants/"+selectedVariant.ref).then((function(n){return n.text()})).then((function(e){try{return JSON.parse(e)}catch(t){throw n=e,new Error("JSON cannot be parsed")}})).then((function(n){if(debugFlow.apiResponse=n,n.code&&(n.code<200||n.code>299)||n.category&&-1!==["FLOW_VARIANT_NOT_FOUND","AUDIENCE_FILTER_CODE_NOT_PASSED","NO_FLOW_EXECUTED_AUDIENCE_FILTER_FALSE","AUDIENCE_SEGMENT_NOT_MATCHED","FLOW_CURRENTLY_NOT_SCHEDULED","NO_FLOW_EXECUTED_AUDIENCE_SEGMENT_FALSE","NO_FLOW_EXECUTED_NOT_SCHEDULED","NO_FLOW_EXECUTED_EXCLUDED_FROM_TEST"].indexOf(n.category)||n.status&&-1!==["FLOW_VARIANT_NOT_FOUND","AUDIENCE_FILTER_CODE_NOT_PASSED","NO_FLOW_EXECUTED_AUDIENCE_FILTER_FALSE","AUDIENCE_SEGMENT_NOT_MATCHED","FLOW_CURRENTLY_NOT_SCHEDULED","NO_FLOW_EXECUTED_AUDIENCE_SEGMENT_FALSE","NO_FLOW_EXECUTED_NOT_SCHEDULED","NO_FLOW_EXECUTED_EXCLUDED_FROM_TEST"].indexOf(n.status));else{if(selectedVariant.assets){selectedVariant.assets.compiled={html:"",css:"",js:""};try{selectedVariant.assets.compiled.html=Handlebars.compile(selectedVariant.assets.html)(n)}catch(n){debugFlow.variantCode={status:"error",message:"HandlebarsJS error in HTML",developerMessage:"".concat(n)}}try{selectedVariant.assets.compiled.css=Handlebars.compile(selectedVariant.assets.css)(n)}catch(n){debugFlow.variantCode={status:"error",message:"HandlebarsJS error in CSS",developerMessage:"".concat(n)}}try{selectedVariant.assets.compiled.js=Handlebars.compile(selectedVariant.assets.js)(n)}catch(n){debugFlow.variantCode={status:"error",message:"HandlebarsJS error in JavaScript",developerMessage:"".concat(n)}}}debugFlow.variantCode||bxRenderVariant(Object.assign(selectedVariant,{context:n}),debugFlow)}})).catch((function(e){debugFlow.apiResponse={status:"FLOW_CONFIG_ERROR_TEMPLATE_RESPONSE_INVALID",message:"Invalid JSON",developerMessage:"Response value: \n ".concat(n)}}))}window.onpopstate=doesTargetingPass,doesTargetingPass()}function bxRenderVariant(variant,debugFlow){var result=variant,styleId="style-"+variant.ref,existingStyleTag=document.getElementById(styleId);if(existingStyleTag)document.getElementById(styleId).innerHTML=variant.assets.compiled.css;else{var styleNode=document.createElement("style");styleNode.setAttribute("id",styleId),styleNode.innerHTML=variant.assets.compiled.css,document.body.appendChild(styleNode)}function insertHTMLAfter(n){var e=document.querySelector(n),t="bx-"+variant.ref;if(document.getElementById(t))document.getElementById(t).innerHTML=variant.assets.compiled.html;else{var r=document.createElement("div");r.setAttribute("id","bx-"+variant.ref),r.innerHTML=variant.assets.compiled.html,e instanceof HTMLElement?e.appendChild(r):document.body.appendChild(r)}}function insertHTMLBefore(n){var e=document.querySelector(n),t="bx-"+variant.ref;if(document.getElementById(t))document.getElementById(t).innerHTML=variant.assets.compiled.html;else{var r=document.createElement("div");r.setAttribute("id","bx-"+variant.ref),r.innerHTML=variant.assets.compiled.html,e instanceof HTMLElement?e.prepend(r):document.body.prepend(r)}}function replaceHTML(n){var e=document.querySelector(n),t="bx-"+variant.ref;if(document.getElementById(t))document.getElementById(t).innerHTML=variant.assets.compiled.html;else{var r=document.createElement("div");if(r.setAttribute("id","bx-"+variant.ref),r.innerHTML=variant.assets.compiled.html,!(e instanceof HTMLElement))throw"HTML element not found";e.innerHTML(r)}}try{eval(variant.assets.compiled.js)}catch(n){debugFlow.variantCode={status:"error",message:"JavaScript Evaluation Error",developerMessage:"".concat(n)}}}function isNumberInRange(n,e,t){return n>=e&&n<=t}function getUrlParameter(n){n=n.replace(/[\[]/,"\\[").replace(/[\]]/,"\\]");var e=new RegExp("[\\?&]"+n+"=([^&#]*)").exec(location.href);return null===e?"":decodeURIComponent(e[1].replace(/\+/g," "))}}window.Promise||(window.Promise=promise_polyfill__WEBPACK_IMPORTED_MODULE_0__.a),"function"!=typeof Object.assign&&Object.defineProperty(Object,"assign",{value:function(n,e){if(null==n)throw new TypeError("Cannot convert undefined or null to object");for(var t=Object(n),r=1;r<arguments.length;r++){var a=arguments[r];if(null!=a)for(var i in a)Object.prototype.hasOwnProperty.call(a,i)&&(t[i]=a[i])}return t},writable:!0,configurable:!0}),BoxeverWebLib()},function(n,e,t){"use strict";var r={searchParams:"URLSearchParams"in self,iterable:"Symbol"in self&&"iterator"in Symbol,blob:"FileReader"in self&&"Blob"in self&&function(){try{return new Blob,!0}catch(n){return!1}}(),formData:"FormData"in self,arrayBuffer:"ArrayBuffer"in self};if(r.arrayBuffer)var a=["[object Int8Array]","[object Uint8Array]","[object Uint8ClampedArray]","[object Int16Array]","[object Uint16Array]","[object Int32Array]","[object Uint32Array]","[object Float32Array]","[object Float64Array]"],i=ArrayBuffer.isView||function(n){return n&&a.indexOf(Object.prototype.toString.call(n))>-1};function normalizeName(n){if("string"!=typeof n&&(n=String(n)),/[^a-z0-9\-#$%&'*+.^_`|~]/i.test(n))throw new TypeError("Invalid character in header field name");return n.toLowerCase()}function normalizeValue(n){return"string"!=typeof n&&(n=String(n)),n}function iteratorFor(n){var e={next:function(){var e=n.shift();return{done:void 0===e,value:e}}};return r.iterable&&(e[Symbol.iterator]=function(){return e}),e}function Headers(n){this.map={},n instanceof Headers?n.forEach((function(n,e){this.append(e,n)}),this):Array.isArray(n)?n.forEach((function(n){this.append(n[0],n[1])}),this):n&&Object.getOwnPropertyNames(n).forEach((function(e){this.append(e,n[e])}),this)}function consumed(n){if(n.bodyUsed)return Promise.reject(new TypeError("Already read"));n.bodyUsed=!0}function fileReaderReady(n){return new Promise((function(e,t){n.onload=function(){e(n.result)},n.onerror=function(){t(n.error)}}))}function readBlobAsArrayBuffer(n){var e=new FileReader,t=fileReaderReady(e);return e.readAsArrayBuffer(n),t}function bufferClone(n){if(n.slice)return n.slice(0);var e=new Uint8Array(n.byteLength);return e.set(new Uint8Array(n)),e.buffer}function Body(){return this.bodyUsed=!1,this._initBody=function(n){var e;this._bodyInit=n,n?"string"==typeof n?this._bodyText=n:r.blob&&Blob.prototype.isPrototypeOf(n)?this._bodyBlob=n:r.formData&&FormData.prototype.isPrototypeOf(n)?this._bodyFormData=n:r.searchParams&&URLSearchParams.prototype.isPrototypeOf(n)?this._bodyText=n.toString():r.arrayBuffer&&r.blob&&((e=n)&&DataView.prototype.isPrototypeOf(e))?(this._bodyArrayBuffer=bufferClone(n.buffer),this._bodyInit=new Blob([this._bodyArrayBuffer])):r.arrayBuffer&&(ArrayBuffer.prototype.isPrototypeOf(n)||i(n))?this._bodyArrayBuffer=bufferClone(n):this._bodyText=n=Object.prototype.toString.call(n):this._bodyText="",this.headers.get("content-type")||("string"==typeof n?this.headers.set("content-type","text/plain;charset=UTF-8"):this._bodyBlob&&this._bodyBlob.type?this.headers.set("content-type",this._bodyBlob.type):r.searchParams&&URLSearchParams.prototype.isPrototypeOf(n)&&this.headers.set("content-type","application/x-www-form-urlencoded;charset=UTF-8"))},r.blob&&(this.blob=function(){var n=consumed(this);if(n)return n;if(this._bodyBlob)return Promise.resolve(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(new Blob([this._bodyArrayBuffer]));if(this._bodyFormData)throw new Error("could not read FormData body as blob");return Promise.resolve(new Blob([this._bodyText]))},this.arrayBuffer=function(){return this._bodyArrayBuffer?consumed(this)||Promise.resolve(this._bodyArrayBuffer):this.blob().then(readBlobAsArrayBuffer)}),this.text=function(){var n,e,t,r=consumed(this);if(r)return r;if(this._bodyBlob)return n=this._bodyBlob,e=new FileReader,t=fileReaderReady(e),e.readAsText(n),t;if(this._bodyArrayBuffer)return Promise.resolve(function(n){for(var e=new Uint8Array(n),t=new Array(e.length),r=0;r<e.length;r++)t[r]=String.fromCharCode(e[r]);return t.join("")}(this._bodyArrayBuffer));if(this._bodyFormData)throw new Error("could not read FormData body as text");return Promise.resolve(this._bodyText)},r.formData&&(this.formData=function(){return this.text().then(decode)}),this.json=function(){return this.text().then(JSON.parse)},this}Headers.prototype.append=function(n,e){n=normalizeName(n),e=normalizeValue(e);var t=this.map[n];this.map[n]=t?t+", "+e:e},Headers.prototype.delete=function(n){delete this.map[normalizeName(n)]},Headers.prototype.get=function(n){return n=normalizeName(n),this.has(n)?this.map[n]:null},Headers.prototype.has=function(n){return this.map.hasOwnProperty(normalizeName(n))},Headers.prototype.set=function(n,e){this.map[normalizeName(n)]=normalizeValue(e)},Headers.prototype.forEach=function(n,e){for(var t in this.map)this.map.hasOwnProperty(t)&&n.call(e,this.map[t],t,this)},Headers.prototype.keys=function(){var n=[];return this.forEach((function(e,t){n.push(t)})),iteratorFor(n)},Headers.prototype.values=function(){var n=[];return this.forEach((function(e){n.push(e)})),iteratorFor(n)},Headers.prototype.entries=function(){var n=[];return this.forEach((function(e,t){n.push([t,e])})),iteratorFor(n)},r.iterable&&(Headers.prototype[Symbol.iterator]=Headers.prototype.entries);var o=["DELETE","GET","HEAD","OPTIONS","POST","PUT"];function Request(n,e){var t,r,a=(e=e||{}).body;if(n instanceof Request){if(n.bodyUsed)throw new TypeError("Already read");this.url=n.url,this.credentials=n.credentials,e.headers||(this.headers=new Headers(n.headers)),this.method=n.method,this.mode=n.mode,this.signal=n.signal,a||null==n._bodyInit||(a=n._bodyInit,n.bodyUsed=!0)}else this.url=String(n);if(this.credentials=e.credentials||this.credentials||"same-origin",!e.headers&&this.headers||(this.headers=new Headers(e.headers)),this.method=(t=e.method||this.method||"GET",r=t.toUpperCase(),o.indexOf(r)>-1?r:t),this.mode=e.mode||this.mode||null,this.signal=e.signal||this.signal,this.referrer=null,("GET"===this.method||"HEAD"===this.method)&&a)throw new TypeError("Body not allowed for GET or HEAD requests");this._initBody(a)}function decode(n){var e=new FormData;return n.trim().split("&").forEach((function(n){if(n){var t=n.split("="),r=t.shift().replace(/\+/g," "),a=t.join("=").replace(/\+/g," ");e.append(decodeURIComponent(r),decodeURIComponent(a))}})),e}function Response(n,e){e||(e={}),this.type="default",this.status=void 0===e.status?200:e.status,this.ok=this.status>=200&&this.status<300,this.statusText="statusText"in e?e.statusText:"OK",this.headers=new Headers(e.headers),this.url=e.url||"",this._initBody(n)}Request.prototype.clone=function(){return new Request(this,{body:this._bodyInit})},Body.call(Request.prototype),Body.call(Response.prototype),Response.prototype.clone=function(){return new Response(this._bodyInit,{status:this.status,statusText:this.statusText,headers:new Headers(this.headers),url:this.url})},Response.error=function(){var n=new Response(null,{status:0,statusText:""});return n.type="error",n};var s=[301,302,303,307,308];Response.redirect=function(n,e){if(-1===s.indexOf(e))throw new RangeError("Invalid status code");return new Response(null,{status:e,headers:{location:n}})};var l=self.DOMException;try{new l}catch(n){(l=function(n,e){this.message=n,this.name=e;var t=Error(n);this.stack=t.stack}).prototype=Object.create(Error.prototype),l.prototype.constructor=l}function fetch(n,e){return new Promise((function(t,a){var i=new Request(n,e);if(i.signal&&i.signal.aborted)return a(new l("Aborted","AbortError"));var o=new XMLHttpRequest;function abortXhr(){o.abort()}o.onload=function(){var n,e,r={status:o.status,statusText:o.statusText,headers:(n=o.getAllResponseHeaders()||"",e=new Headers,n.replace(/\r?\n[\t ]+/g," ").split(/\r?\n/).forEach((function(n){var t=n.split(":"),r=t.shift().trim();if(r){var a=t.join(":").trim();e.append(r,a)}})),e)};r.url="responseURL"in o?o.responseURL:r.headers.get("X-Request-URL");var a="response"in o?o.response:o.responseText;t(new Response(a,r))},o.onerror=function(){a(new TypeError("Network request failed"))},o.ontimeout=function(){a(new TypeError("Network request failed"))},o.onabort=function(){a(new l("Aborted","AbortError"))},o.open(i.method,i.url,!0),"include"===i.credentials?o.withCredentials=!0:"omit"===i.credentials&&(o.withCredentials=!1),"responseType"in o&&r.blob&&(o.responseType="blob"),i.headers.forEach((function(n,e){o.setRequestHeader(e,n)})),i.signal&&(i.signal.addEventListener("abort",abortXhr),o.onreadystatechange=function(){4===o.readyState&&i.signal.removeEventListener("abort",abortXhr)}),o.send(void 0===i._bodyInit?null:i._bodyInit)}))}fetch.polyfill=!0,self.fetch||(self.fetch=fetch,self.Headers=Headers,self.Request=Request,self.Response=Response)},function(n,e,t){var r=t(12).default,a=t(33);r.PrintVisitor=a.PrintVisitor,r.print=a.print,n.exports=r},function(n,e,t){"use strict";function _interopRequireDefault(n){return n&&n.__esModule?n:{default:n}}e.__esModule=!0;var r=_interopRequireDefault(t(13)),a=_interopRequireDefault(t(6)),i=t(26),o=t(30),s=_interopRequireDefault(t(31)),l=_interopRequireDefault(t(3)),c=_interopRequireDefault(t(5)),d=r.default.create;function create(){var n=d();return n.compile=function(e,t){return o.compile(e,t,n)},n.precompile=function(e,t){return o.precompile(e,t,n)},n.AST=a.default,n.Compiler=o.Compiler,n.JavaScriptCompiler=s.default,n.Parser=i.parser,n.parse=i.parse,n.parseWithoutProcessing=i.parseWithoutProcessing,n}var p=create();p.create=create,c.default(p),p.Visitor=l.default,p.default=p,e.default=p,n.exports=e.default},function(n,e,t){"use strict";function _interopRequireDefault(n){return n&&n.__esModule?n:{default:n}}function _interopRequireWildcard(n){if(n&&n.__esModule)return n;var e={};if(null!=n)for(var t in n)Object.prototype.hasOwnProperty.call(n,t)&&(e[t]=n[t]);return e.default=n,e}e.__esModule=!0;var r=_interopRequireWildcard(t(2)),a=_interopRequireDefault(t(24)),i=_interopRequireDefault(t(1)),o=_interopRequireWildcard(t(0)),s=_interopRequireWildcard(t(25)),l=_interopRequireDefault(t(5));function create(){var n=new r.HandlebarsEnvironment;return o.extend(n,r),n.SafeString=a.default,n.Exception=i.default,n.Utils=o,n.escapeExpression=o.escapeExpression,n.VM=s,n.template=function(e){return s.template(e,n)},n}var c=create();c.create=create,l.default(c),c.default=c,e.default=c,n.exports=e.default},function(n,e,t){"use strict";e.__esModule=!0;var r=t(0);e.default=function(n){n.registerHelper("blockHelperMissing",(function(e,t){var a=t.inverse,i=t.fn;if(!0===e)return i(this);if(!1===e||null==e)return a(this);if(r.isArray(e))return e.length>0?(t.ids&&(t.ids=[t.name]),n.helpers.each(e,t)):a(this);if(t.data&&t.ids){var o=r.createFrame(t.data);o.contextPath=r.appendContextPath(t.data.contextPath,t.name),t={data:o}}return i(e,t)}))},n.exports=e.default},function(n,e,t){"use strict";e.__esModule=!0;var r,a=t(0),i=t(1),o=(r=i)&&r.__esModule?r:{default:r};e.default=function(n){n.registerHelper("each",(function(n,e){if(!e)throw new o.default("Must pass iterator to #each");var t=e.fn,r=e.inverse,i=0,s="",l=void 0,c=void 0;function execIteration(e,r,i){l&&(l.key=e,l.index=r,l.first=0===r,l.last=!!i,c&&(l.contextPath=c+e)),s+=t(n[e],{data:l,blockParams:a.blockParams([n[e],e],[c+e,null])})}if(e.data&&e.ids&&(c=a.appendContextPath(e.data.contextPath,e.ids[0])+"."),a.isFunction(n)&&(n=n.call(this)),e.data&&(l=a.createFrame(e.data)),n&&"object"==typeof n)if(a.isArray(n))for(var d=n.length;i<d;i++)i in n&&execIteration(i,i,i===n.length-1);else if(global.Symbol&&n[global.Symbol.iterator]){for(var p=[],u=n[global.Symbol.iterator](),g=u.next();!g.done;g=u.next())p.push(g.value);for(d=(n=p).length;i<d;i++)execIteration(i,i,i===n.length-1)}else{var h=void 0;for(var f in n)n.hasOwnProperty(f)&&(void 0!==h&&execIteration(h,i-1),h=f,i++);void 0!==h&&execIteration(h,i-1,!0)}return 0===i&&(s=r(this)),s}))},n.exports=e.default},function(n,e,t){"use strict";e.__esModule=!0;var r,a=t(1),i=(r=a)&&r.__esModule?r:{default:r};e.default=function(n){n.registerHelper("helperMissing",(function(){if(1!==arguments.length)throw new i.default('Missing helper: "'+arguments[arguments.length-1].name+'"')}))},n.exports=e.default},function(n,e,t){"use strict";e.__esModule=!0;var r,a=t(0),i=t(1),o=(r=i)&&r.__esModule?r:{default:r};e.default=function(n){n.registerHelper("if",(function(n,e){if(2!=arguments.length)throw new o.default("#if requires exactly one argument");return a.isFunction(n)&&(n=n.call(this)),!e.hash.includeZero&&!n||a.isEmpty(n)?e.inverse(this):e.fn(this)})),n.registerHelper("unless",(function(e,t){if(2!=arguments.length)throw new o.default("#unless requires exactly one argument");return n.helpers.if.call(this,e,{fn:t.inverse,inverse:t.fn,hash:t.hash})}))},n.exports=e.default},function(n,e,t){"use strict";e.__esModule=!0,e.default=function(n){n.registerHelper("log",(function(){for(var e=[void 0],t=arguments[arguments.length-1],r=0;r<arguments.length-1;r++)e.push(arguments[r]);var a=1;null!=t.hash.level?a=t.hash.level:t.data&&null!=t.data.level&&(a=t.data.level),e[0]=a,n.log.apply(n,e)}))},n.exports=e.default},function(n,e,t){"use strict";e.__esModule=!0,e.default=function(n){n.registerHelper("lookup",(function(n,e){return n?"constructor"!==e||n.propertyIsEnumerable(e)?n[e]:void 0:n}))},n.exports=e.default},function(n,e,t){"use strict";e.__esModule=!0;var r,a=t(0),i=t(1),o=(r=i)&&r.__esModule?r:{default:r};e.default=function(n){n.registerHelper("with",(function(n,e){if(2!=arguments.length)throw new o.default("#with requires exactly one argument");a.isFunction(n)&&(n=n.call(this));var t=e.fn;if(a.isEmpty(n))return e.inverse(this);var r=e.data;return e.data&&e.ids&&((r=a.createFrame(e.data)).contextPath=a.appendContextPath(e.data.contextPath,e.ids[0])),t(n,{data:r,blockParams:a.blockParams([n],[r&&r.contextPath])})}))},n.exports=e.default},function(n,e,t){"use strict";e.__esModule=!0,e.registerDefaultDecorators=function(n){i.default(n)};var r,a=t(22),i=(r=a)&&r.__esModule?r:{default:r}},function(n,e,t){"use strict";e.__esModule=!0;var r=t(0);e.default=function(n){n.registerDecorator("inline",(function(n,e,t,a){var i=n;return e.partials||(e.partials={},i=function(a,i){var o=t.partials;t.partials=r.extend({},o,e.partials);var s=n(a,i);return t.partials=o,s}),e.partials[a.args[0]]=a.fn,i}))},n.exports=e.default},function(n,e,t){"use strict";e.__esModule=!0;var r=t(0),a={methodMap:["debug","info","warn","error"],level:"info",lookupLevel:function(n){if("string"==typeof n){var e=r.indexOf(a.methodMap,n.toLowerCase());n=e>=0?e:parseInt(n,10)}return n},log:function(n){if(n=a.lookupLevel(n),"undefined"!=typeof console&&a.lookupLevel(a.level)<=n){var e=a.methodMap[n];console[e]||(e="log");for(var t=arguments.length,r=Array(t>1?t-1:0),i=1;i<t;i++)r[i-1]=arguments[i];console[e].apply(console,r)}}};e.default=a,n.exports=e.default},function(n,e,t){"use strict";function SafeString(n){this.string=n}e.__esModule=!0,SafeString.prototype.toString=SafeString.prototype.toHTML=function(){return""+this.string},e.default=SafeString,n.exports=e.default},function(n,e,t){"use strict";e.__esModule=!0,e.checkRevision=function(n){var e=n&&n[0]||1,t=s.COMPILER_REVISION;if(e>=s.LAST_COMPATIBLE_COMPILER_REVISION&&e<=s.COMPILER_REVISION)return;if(e<s.LAST_COMPATIBLE_COMPILER_REVISION){var r=s.REVISION_CHANGES[t],a=s.REVISION_CHANGES[e];throw new o.default("Template was precompiled with an older version of Handlebars than the current runtime. Please update your precompiler to a newer version ("+r+") or downgrade your runtime to an older version ("+a+").")}throw new o.default("Template was precompiled with a newer version of Handlebars than the current runtime. Please update your runtime to a newer version ("+n[1]+").")},e.template=function(n,e){if(!e)throw new o.default("No environment passed to template");if(!n||!n.main)throw new o.default("Unknown template object: "+typeof n);n.main.decorator=n.main_d,e.VM.checkRevision(n.compiler);var t=n.compiler&&7===n.compiler[0];var r={strict:function(n,e,t){if(!(n&&e in n))throw new o.default('"'+e+'" not defined in '+n,{loc:t});return n[e]},lookup:function(n,e){for(var t=n.length,r=0;r<t;r++)if(n[r]&&null!=n[r][e])return n[r][e]},lambda:function(n,e){return"function"==typeof n?n.call(e):n},escapeExpression:a.escapeExpression,invokePartial:function(t,r,i){i.hash&&(r=a.extend({},r,i.hash),i.ids&&(i.ids[0]=!0)),t=e.VM.resolvePartial.call(this,t,r,i);var s=a.extend({},i,{hooks:this.hooks}),l=e.VM.invokePartial.call(this,t,r,s);if(null==l&&e.compile&&(i.partials[i.name]=e.compile(t,n.compilerOptions,e),l=i.partials[i.name](r,s)),null!=l){if(i.indent){for(var c=l.split("\n"),d=0,p=c.length;d<p&&(c[d]||d+1!==p);d++)c[d]=i.indent+c[d];l=c.join("\n")}return l}throw new o.default("The partial "+i.name+" could not be compiled when running in runtime-only mode")},fn:function(e){var t=n[e];return t.decorator=n[e+"_d"],t},programs:[],program:function(n,e,t,r,a){var i=this.programs[n],o=this.fn(n);return e||a||r||t?i=wrapProgram(this,n,o,e,t,r,a):i||(i=this.programs[n]=wrapProgram(this,n,o)),i},data:function(n,e){for(;n&&e--;)n=n._parent;return n},nullContext:Object.seal({}),noop:e.VM.noop,compilerInfo:n.compiler};function ret(e){var t=arguments.length<=1||void 0===arguments[1]?{}:arguments[1],a=t.data;ret._setup(t),!t.partial&&n.useData&&(a=function(n,e){e&&"root"in e||((e=e?s.createFrame(e):{}).root=n);return e}(e,a));var i=void 0,o=n.useBlockParams?[]:void 0;function main(e){return""+n.main(r,e,r.helpers,r.partials,a,o,i)}return n.useDepths&&(i=t.depths?e!=t.depths[0]?[e].concat(t.depths):t.depths:[e]),(main=executeDecorators(n.main,main,r,t.depths||[],a,o))(e,t)}return ret.isTop=!0,ret._setup=function(i){if(i.partial)r.helpers=i.helpers,r.partials=i.partials,r.decorators=i.decorators,r.hooks=i.hooks;else{r.helpers=a.extend({},e.helpers,i.helpers),n.usePartial&&(r.partials=a.extend({},e.partials,i.partials)),(n.usePartial||n.useDecorators)&&(r.decorators=a.extend({},e.decorators,i.decorators)),r.hooks={};var o=i.allowCallsToHelperMissing||t;l.moveHelperToHooks(r,"helperMissing",o),l.moveHelperToHooks(r,"blockHelperMissing",o)}},ret._child=function(e,t,a,i){if(n.useBlockParams&&!a)throw new o.default("must pass block params");if(n.useDepths&&!i)throw new o.default("must pass parent depths");return wrapProgram(r,e,n[e],t,0,a,i)},ret},e.wrapProgram=wrapProgram,e.resolvePartial=function(n,e,t){n?n.call||t.name||(t.name=n,n=t.partials[n]):n="@partial-block"===t.name?t.data["partial-block"]:t.partials[t.name];return n},e.invokePartial=function(n,e,t){var r=t.data&&t.data["partial-block"];t.partial=!0,t.ids&&(t.data.contextPath=t.ids[0]||t.data.contextPath);var i=void 0;t.fn&&t.fn!==noop&&function(){t.data=s.createFrame(t.data);var n=t.fn;i=t.data["partial-block"]=function(e){var t=arguments.length<=1||void 0===arguments[1]?{}:arguments[1];return t.data=s.createFrame(t.data),t.data["partial-block"]=r,n(e,t)},n.partials&&(t.partials=a.extend({},t.partials,n.partials))}();void 0===n&&i&&(n=i);if(void 0===n)throw new o.default("The partial "+t.name+" could not be found");if(n instanceof Function)return n(e,t)},e.noop=noop;var r,a=function(n){if(n&&n.__esModule)return n;var e={};if(null!=n)for(var t in n)Object.prototype.hasOwnProperty.call(n,t)&&(e[t]=n[t]);return e.default=n,e}(t(0)),i=t(1),o=(r=i)&&r.__esModule?r:{default:r},s=t(2),l=t(4);function wrapProgram(n,e,t,r,a,i,o){function prog(e){var a=arguments.length<=1||void 0===arguments[1]?{}:arguments[1],s=o;return!o||e==o[0]||e===n.nullContext&&null===o[0]||(s=[e].concat(o)),t(n,e,n.helpers,n.partials,a.data||r,i&&[a.blockParams].concat(i),s)}return(prog=executeDecorators(t,prog,n,o,r,i)).program=e,prog.depth=o?o.length:0,prog.blockParams=a||0,prog}function noop(){return""}function executeDecorators(n,e,t,r,i,o){if(n.decorator){var s={};e=n.decorator(e,s,t,r&&r[0],i,o,r),a.extend(e,s)}return e}},function(n,e,t){"use strict";function _interopRequireDefault(n){return n&&n.__esModule?n:{default:n}}e.__esModule=!0,e.parseWithoutProcessing=parseWithoutProcessing,e.parse=function(n,e){var t=parseWithoutProcessing(n,e);return new a.default(e).accept(t)};var r=_interopRequireDefault(t(27)),a=_interopRequireDefault(t(28)),i=function(n){if(n&&n.__esModule)return n;var e={};if(null!=n)for(var t in n)Object.prototype.hasOwnProperty.call(n,t)&&(e[t]=n[t]);return e.default=n,e}(t(29)),o=t(0);e.parser=r.default;var s={};function parseWithoutProcessing(n,e){return"Program"===n.type?n:(r.default.yy=s,s.locInfo=function(n){return new s.SourceLocation(e&&e.srcName,n)},r.default.parse(n))}o.extend(s,i)},function(n,e,t){"use strict";e.__esModule=!0;var r=function(){var n={trace:function(){},yy:{},symbols_:{error:2,root:3,program:4,EOF:5,program_repetition0:6,statement:7,mustache:8,block:9,rawBlock:10,partial:11,partialBlock:12,content:13,COMMENT:14,CONTENT:15,openRawBlock:16,rawBlock_repetition0:17,END_RAW_BLOCK:18,OPEN_RAW_BLOCK:19,helperName:20,openRawBlock_repetition0:21,openRawBlock_option0:22,CLOSE_RAW_BLOCK:23,openBlock:24,block_option0:25,closeBlock:26,openInverse:27,block_option1:28,OPEN_BLOCK:29,openBlock_repetition0:30,openBlock_option0:31,openBlock_option1:32,CLOSE:33,OPEN_INVERSE:34,openInverse_repetition0:35,openInverse_option0:36,openInverse_option1:37,openInverseChain:38,OPEN_INVERSE_CHAIN:39,openInverseChain_repetition0:40,openInverseChain_option0:41,openInverseChain_option1:42,inverseAndProgram:43,INVERSE:44,inverseChain:45,inverseChain_option0:46,OPEN_ENDBLOCK:47,OPEN:48,mustache_repetition0:49,mustache_option0:50,OPEN_UNESCAPED:51,mustache_repetition1:52,mustache_option1:53,CLOSE_UNESCAPED:54,OPEN_PARTIAL:55,partialName:56,partial_repetition0:57,partial_option0:58,openPartialBlock:59,OPEN_PARTIAL_BLOCK:60,openPartialBlock_repetition0:61,openPartialBlock_option0:62,param:63,sexpr:64,OPEN_SEXPR:65,sexpr_repetition0:66,sexpr_option0:67,CLOSE_SEXPR:68,hash:69,hash_repetition_plus0:70,hashSegment:71,ID:72,EQUALS:73,blockParams:74,OPEN_BLOCK_PARAMS:75,blockParams_repetition_plus0:76,CLOSE_BLOCK_PARAMS:77,path:78,dataName:79,STRING:80,NUMBER:81,BOOLEAN:82,UNDEFINED:83,NULL:84,DATA:85,pathSegments:86,SEP:87,$accept:0,$end:1},terminals_:{2:"error",5:"EOF",14:"COMMENT",15:"CONTENT",18:"END_RAW_BLOCK",19:"OPEN_RAW_BLOCK",23:"CLOSE_RAW_BLOCK",29:"OPEN_BLOCK",33:"CLOSE",34:"OPEN_INVERSE",39:"OPEN_INVERSE_CHAIN",44:"INVERSE",47:"OPEN_ENDBLOCK",48:"OPEN",51:"OPEN_UNESCAPED",54:"CLOSE_UNESCAPED",55:"OPEN_PARTIAL",60:"OPEN_PARTIAL_BLOCK",65:"OPEN_SEXPR",68:"CLOSE_SEXPR",72:"ID",73:"EQUALS",75:"OPEN_BLOCK_PARAMS",77:"CLOSE_BLOCK_PARAMS",80:"STRING",81:"NUMBER",82:"BOOLEAN",83:"UNDEFINED",84:"NULL",85:"DATA",87:"SEP"},productions_:[0,[3,2],[4,1],[7,1],[7,1],[7,1],[7,1],[7,1],[7,1],[7,1],[13,1],[10,3],[16,5],[9,4],[9,4],[24,6],[27,6],[38,6],[43,2],[45,3],[45,1],[26,3],[8,5],[8,5],[11,5],[12,3],[59,5],[63,1],[63,1],[64,5],[69,1],[71,3],[74,3],[20,1],[20,1],[20,1],[20,1],[20,1],[20,1],[20,1],[56,1],[56,1],[79,2],[78,1],[86,3],[86,1],[6,0],[6,2],[17,0],[17,2],[21,0],[21,2],[22,0],[22,1],[25,0],[25,1],[28,0],[28,1],[30,0],[30,2],[31,0],[31,1],[32,0],[32,1],[35,0],[35,2],[36,0],[36,1],[37,0],[37,1],[40,0],[40,2],[41,0],[41,1],[42,0],[42,1],[46,0],[46,1],[49,0],[49,2],[50,0],[50,1],[52,0],[52,2],[53,0],[53,1],[57,0],[57,2],[58,0],[58,1],[61,0],[61,2],[62,0],[62,1],[66,0],[66,2],[67,0],[67,1],[70,1],[70,2],[76,1],[76,2]],performAction:function(n,e,t,r,a,i,o){var s=i.length-1;switch(a){case 1:return i[s-1];case 2:this.$=r.prepareProgram(i[s]);break;case 3:case 4:case 5:case 6:case 7:case 8:this.$=i[s];break;case 9:this.$={type:"CommentStatement",value:r.stripComment(i[s]),strip:r.stripFlags(i[s],i[s]),loc:r.locInfo(this._$)};break;case 10:this.$={type:"ContentStatement",original:i[s],value:i[s],loc:r.locInfo(this._$)};break;case 11:this.$=r.prepareRawBlock(i[s-2],i[s-1],i[s],this._$);break;case 12:this.$={path:i[s-3],params:i[s-2],hash:i[s-1]};break;case 13:this.$=r.prepareBlock(i[s-3],i[s-2],i[s-1],i[s],!1,this._$);break;case 14:this.$=r.prepareBlock(i[s-3],i[s-2],i[s-1],i[s],!0,this._$);break;case 15:this.$={open:i[s-5],path:i[s-4],params:i[s-3],hash:i[s-2],blockParams:i[s-1],strip:r.stripFlags(i[s-5],i[s])};break;case 16:case 17:this.$={path:i[s-4],params:i[s-3],hash:i[s-2],blockParams:i[s-1],strip:r.stripFlags(i[s-5],i[s])};break;case 18:this.$={strip:r.stripFlags(i[s-1],i[s-1]),program:i[s]};break;case 19:var l=r.prepareBlock(i[s-2],i[s-1],i[s],i[s],!1,this._$),c=r.prepareProgram([l],i[s-1].loc);c.chained=!0,this.$={strip:i[s-2].strip,program:c,chain:!0};break;case 20:this.$=i[s];break;case 21:this.$={path:i[s-1],strip:r.stripFlags(i[s-2],i[s])};break;case 22:case 23:this.$=r.prepareMustache(i[s-3],i[s-2],i[s-1],i[s-4],r.stripFlags(i[s-4],i[s]),this._$);break;case 24:this.$={type:"PartialStatement",name:i[s-3],params:i[s-2],hash:i[s-1],indent:"",strip:r.stripFlags(i[s-4],i[s]),loc:r.locInfo(this._$)};break;case 25:this.$=r.preparePartialBlock(i[s-2],i[s-1],i[s],this._$);break;case 26:this.$={path:i[s-3],params:i[s-2],hash:i[s-1],strip:r.stripFlags(i[s-4],i[s])};break;case 27:case 28:this.$=i[s];break;case 29:this.$={type:"SubExpression",path:i[s-3],params:i[s-2],hash:i[s-1],loc:r.locInfo(this._$)};break;case 30:this.$={type:"Hash",pairs:i[s],loc:r.locInfo(this._$)};break;case 31:this.$={type:"HashPair",key:r.id(i[s-2]),value:i[s],loc:r.locInfo(this._$)};break;case 32:this.$=r.id(i[s-1]);break;case 33:case 34:this.$=i[s];break;case 35:this.$={type:"StringLiteral",value:i[s],original:i[s],loc:r.locInfo(this._$)};break;case 36:this.$={type:"NumberLiteral",value:Number(i[s]),original:Number(i[s]),loc:r.locInfo(this._$)};break;case 37:this.$={type:"BooleanLiteral",value:"true"===i[s],original:"true"===i[s],loc:r.locInfo(this._$)};break;case 38:this.$={type:"UndefinedLiteral",original:void 0,value:void 0,loc:r.locInfo(this._$)};break;case 39:this.$={type:"NullLiteral",original:null,value:null,loc:r.locInfo(this._$)};break;case 40:case 41:this.$=i[s];break;case 42:this.$=r.preparePath(!0,i[s],this._$);break;case 43:this.$=r.preparePath(!1,i[s],this._$);break;case 44:i[s-2].push({part:r.id(i[s]),original:i[s],separator:i[s-1]}),this.$=i[s-2];break;case 45:this.$=[{part:r.id(i[s]),original:i[s]}];break;case 46:this.$=[];break;case 47:i[s-1].push(i[s]);break;case 48:this.$=[];break;case 49:i[s-1].push(i[s]);break;case 50:this.$=[];break;case 51:i[s-1].push(i[s]);break;case 58:this.$=[];break;case 59:i[s-1].push(i[s]);break;case 64:this.$=[];break;case 65:i[s-1].push(i[s]);break;case 70:this.$=[];break;case 71:i[s-1].push(i[s]);break;case 78:this.$=[];break;case 79:i[s-1].push(i[s]);break;case 82:this.$=[];break;case 83:i[s-1].push(i[s]);break;case 86:this.$=[];break;case 87:i[s-1].push(i[s]);break;case 90:this.$=[];break;case 91:i[s-1].push(i[s]);break;case 94:this.$=[];break;case 95:i[s-1].push(i[s]);break;case 98:this.$=[i[s]];break;case 99:i[s-1].push(i[s]);break;case 100:this.$=[i[s]];break;case 101:i[s-1].push(i[s])}},table:[{3:1,4:2,5:[2,46],6:3,14:[2,46],15:[2,46],19:[2,46],29:[2,46],34:[2,46],48:[2,46],51:[2,46],55:[2,46],60:[2,46]},{1:[3]},{5:[1,4]},{5:[2,2],7:5,8:6,9:7,10:8,11:9,12:10,13:11,14:[1,12],15:[1,20],16:17,19:[1,23],24:15,27:16,29:[1,21],34:[1,22],39:[2,2],44:[2,2],47:[2,2],48:[1,13],51:[1,14],55:[1,18],59:19,60:[1,24]},{1:[2,1]},{5:[2,47],14:[2,47],15:[2,47],19:[2,47],29:[2,47],34:[2,47],39:[2,47],44:[2,47],47:[2,47],48:[2,47],51:[2,47],55:[2,47],60:[2,47]},{5:[2,3],14:[2,3],15:[2,3],19:[2,3],29:[2,3],34:[2,3],39:[2,3],44:[2,3],47:[2,3],48:[2,3],51:[2,3],55:[2,3],60:[2,3]},{5:[2,4],14:[2,4],15:[2,4],19:[2,4],29:[2,4],34:[2,4],39:[2,4],44:[2,4],47:[2,4],48:[2,4],51:[2,4],55:[2,4],60:[2,4]},{5:[2,5],14:[2,5],15:[2,5],19:[2,5],29:[2,5],34:[2,5],39:[2,5],44:[2,5],47:[2,5],48:[2,5],51:[2,5],55:[2,5],60:[2,5]},{5:[2,6],14:[2,6],15:[2,6],19:[2,6],29:[2,6],34:[2,6],39:[2,6],44:[2,6],47:[2,6],48:[2,6],51:[2,6],55:[2,6],60:[2,6]},{5:[2,7],14:[2,7],15:[2,7],19:[2,7],29:[2,7],34:[2,7],39:[2,7],44:[2,7],47:[2,7],48:[2,7],51:[2,7],55:[2,7],60:[2,7]},{5:[2,8],14:[2,8],15:[2,8],19:[2,8],29:[2,8],34:[2,8],39:[2,8],44:[2,8],47:[2,8],48:[2,8],51:[2,8],55:[2,8],60:[2,8]},{5:[2,9],14:[2,9],15:[2,9],19:[2,9],29:[2,9],34:[2,9],39:[2,9],44:[2,9],47:[2,9],48:[2,9],51:[2,9],55:[2,9],60:[2,9]},{20:25,72:[1,35],78:26,79:27,80:[1,28],81:[1,29],82:[1,30],83:[1,31],84:[1,32],85:[1,34],86:33},{20:36,72:[1,35],78:26,79:27,80:[1,28],81:[1,29],82:[1,30],83:[1,31],84:[1,32],85:[1,34],86:33},{4:37,6:3,14:[2,46],15:[2,46],19:[2,46],29:[2,46],34:[2,46],39:[2,46],44:[2,46],47:[2,46],48:[2,46],51:[2,46],55:[2,46],60:[2,46]},{4:38,6:3,14:[2,46],15:[2,46],19:[2,46],29:[2,46],34:[2,46],44:[2,46],47:[2,46],48:[2,46],51:[2,46],55:[2,46],60:[2,46]},{15:[2,48],17:39,18:[2,48]},{20:41,56:40,64:42,65:[1,43],72:[1,35],78:26,79:27,80:[1,28],81:[1,29],82:[1,30],83:[1,31],84:[1,32],85:[1,34],86:33},{4:44,6:3,14:[2,46],15:[2,46],19:[2,46],29:[2,46],34:[2,46],47:[2,46],48:[2,46],51:[2,46],55:[2,46],60:[2,46]},{5:[2,10],14:[2,10],15:[2,10],18:[2,10],19:[2,10],29:[2,10],34:[2,10],39:[2,10],44:[2,10],47:[2,10],48:[2,10],51:[2,10],55:[2,10],60:[2,10]},{20:45,72:[1,35],78:26,79:27,80:[1,28],81:[1,29],82:[1,30],83:[1,31],84:[1,32],85:[1,34],86:33},{20:46,72:[1,35],78:26,79:27,80:[1,28],81:[1,29],82:[1,30],83:[1,31],84:[1,32],85:[1,34],86:33},{20:47,72:[1,35],78:26,79:27,80:[1,28],81:[1,29],82:[1,30],83:[1,31],84:[1,32],85:[1,34],86:33},{20:41,56:48,64:42,65:[1,43],72:[1,35],78:26,79:27,80:[1,28],81:[1,29],82:[1,30],83:[1,31],84:[1,32],85:[1,34],86:33},{33:[2,78],49:49,65:[2,78],72:[2,78],80:[2,78],81:[2,78],82:[2,78],83:[2,78],84:[2,78],85:[2,78]},{23:[2,33],33:[2,33],54:[2,33],65:[2,33],68:[2,33],72:[2,33],75:[2,33],80:[2,33],81:[2,33],82:[2,33],83:[2,33],84:[2,33],85:[2,33]},{23:[2,34],33:[2,34],54:[2,34],65:[2,34],68:[2,34],72:[2,34],75:[2,34],80:[2,34],81:[2,34],82:[2,34],83:[2,34],84:[2,34],85:[2,34]},{23:[2,35],33:[2,35],54:[2,35],65:[2,35],68:[2,35],72:[2,35],75:[2,35],80:[2,35],81:[2,35],82:[2,35],83:[2,35],84:[2,35],85:[2,35]},{23:[2,36],33:[2,36],54:[2,36],65:[2,36],68:[2,36],72:[2,36],75:[2,36],80:[2,36],81:[2,36],82:[2,36],83:[2,36],84:[2,36],85:[2,36]},{23:[2,37],33:[2,37],54:[2,37],65:[2,37],68:[2,37],72:[2,37],75:[2,37],80:[2,37],81:[2,37],82:[2,37],83:[2,37],84:[2,37],85:[2,37]},{23:[2,38],33:[2,38],54:[2,38],65:[2,38],68:[2,38],72:[2,38],75:[2,38],80:[2,38],81:[2,38],82:[2,38],83:[2,38],84:[2,38],85:[2,38]},{23:[2,39],33:[2,39],54:[2,39],65:[2,39],68:[2,39],72:[2,39],75:[2,39],80:[2,39],81:[2,39],82:[2,39],83:[2,39],84:[2,39],85:[2,39]},{23:[2,43],33:[2,43],54:[2,43],65:[2,43],68:[2,43],72:[2,43],75:[2,43],80:[2,43],81:[2,43],82:[2,43],83:[2,43],84:[2,43],85:[2,43],87:[1,50]},{72:[1,35],86:51},{23:[2,45],33:[2,45],54:[2,45],65:[2,45],68:[2,45],72:[2,45],75:[2,45],80:[2,45],81:[2,45],82:[2,45],83:[2,45],84:[2,45],85:[2,45],87:[2,45]},{52:52,54:[2,82],65:[2,82],72:[2,82],80:[2,82],81:[2,82],82:[2,82],83:[2,82],84:[2,82],85:[2,82]},{25:53,38:55,39:[1,57],43:56,44:[1,58],45:54,47:[2,54]},{28:59,43:60,44:[1,58],47:[2,56]},{13:62,15:[1,20],18:[1,61]},{33:[2,86],57:63,65:[2,86],72:[2,86],80:[2,86],81:[2,86],82:[2,86],83:[2,86],84:[2,86],85:[2,86]},{33:[2,40],65:[2,40],72:[2,40],80:[2,40],81:[2,40],82:[2,40],83:[2,40],84:[2,40],85:[2,40]},{33:[2,41],65:[2,41],72:[2,41],80:[2,41],81:[2,41],82:[2,41],83:[2,41],84:[2,41],85:[2,41]},{20:64,72:[1,35],78:26,79:27,80:[1,28],81:[1,29],82:[1,30],83:[1,31],84:[1,32],85:[1,34],86:33},{26:65,47:[1,66]},{30:67,33:[2,58],65:[2,58],72:[2,58],75:[2,58],80:[2,58],81:[2,58],82:[2,58],83:[2,58],84:[2,58],85:[2,58]},{33:[2,64],35:68,65:[2,64],72:[2,64],75:[2,64],80:[2,64],81:[2,64],82:[2,64],83:[2,64],84:[2,64],85:[2,64]},{21:69,23:[2,50],65:[2,50],72:[2,50],80:[2,50],81:[2,50],82:[2,50],83:[2,50],84:[2,50],85:[2,50]},{33:[2,90],61:70,65:[2,90],72:[2,90],80:[2,90],81:[2,90],82:[2,90],83:[2,90],84:[2,90],85:[2,90]},{20:74,33:[2,80],50:71,63:72,64:75,65:[1,43],69:73,70:76,71:77,72:[1,78],78:26,79:27,80:[1,28],81:[1,29],82:[1,30],83:[1,31],84:[1,32],85:[1,34],86:33},{72:[1,79]},{23:[2,42],33:[2,42],54:[2,42],65:[2,42],68:[2,42],72:[2,42],75:[2,42],80:[2,42],81:[2,42],82:[2,42],83:[2,42],84:[2,42],85:[2,42],87:[1,50]},{20:74,53:80,54:[2,84],63:81,64:75,65:[1,43],69:82,70:76,71:77,72:[1,78],78:26,79:27,80:[1,28],81:[1,29],82:[1,30],83:[1,31],84:[1,32],85:[1,34],86:33},{26:83,47:[1,66]},{47:[2,55]},{4:84,6:3,14:[2,46],15:[2,46],19:[2,46],29:[2,46],34:[2,46],39:[2,46],44:[2,46],47:[2,46],48:[2,46],51:[2,46],55:[2,46],60:[2,46]},{47:[2,20]},{20:85,72:[1,35],78:26,79:27,80:[1,28],81:[1,29],82:[1,30],83:[1,31],84:[1,32],85:[1,34],86:33},{4:86,6:3,14:[2,46],15:[2,46],19:[2,46],29:[2,46],34:[2,46],47:[2,46],48:[2,46],51:[2,46],55:[2,46],60:[2,46]},{26:87,47:[1,66]},{47:[2,57]},{5:[2,11],14:[2,11],15:[2,11],19:[2,11],29:[2,11],34:[2,11],39:[2,11],44:[2,11],47:[2,11],48:[2,11],51:[2,11],55:[2,11],60:[2,11]},{15:[2,49],18:[2,49]},{20:74,33:[2,88],58:88,63:89,64:75,65:[1,43],69:90,70:76,71:77,72:[1,78],78:26,79:27,80:[1,28],81:[1,29],82:[1,30],83:[1,31],84:[1,32],85:[1,34],86:33},{65:[2,94],66:91,68:[2,94],72:[2,94],80:[2,94],81:[2,94],82:[2,94],83:[2,94],84:[2,94],85:[2,94]},{5:[2,25],14:[2,25],15:[2,25],19:[2,25],29:[2,25],34:[2,25],39:[2,25],44:[2,25],47:[2,25],48:[2,25],51:[2,25],55:[2,25],60:[2,25]},{20:92,72:[1,35],78:26,79:27,80:[1,28],81:[1,29],82:[1,30],83:[1,31],84:[1,32],85:[1,34],86:33},{20:74,31:93,33:[2,60],63:94,64:75,65:[1,43],69:95,70:76,71:77,72:[1,78],75:[2,60],78:26,79:27,80:[1,28],81:[1,29],82:[1,30],83:[1,31],84:[1,32],85:[1,34],86:33},{20:74,33:[2,66],36:96,63:97,64:75,65:[1,43],69:98,70:76,71:77,72:[1,78],75:[2,66],78:26,79:27,80:[1,28],81:[1,29],82:[1,30],83:[1,31],84:[1,32],85:[1,34],86:33},{20:74,22:99,23:[2,52],63:100,64:75,65:[1,43],69:101,70:76,71:77,72:[1,78],78:26,79:27,80:[1,28],81:[1,29],82:[1,30],83:[1,31],84:[1,32],85:[1,34],86:33},{20:74,33:[2,92],62:102,63:103,64:75,65:[1,43],69:104,70:76,71:77,72:[1,78],78:26,79:27,80:[1,28],81:[1,29],82:[1,30],83:[1,31],84:[1,32],85:[1,34],86:33},{33:[1,105]},{33:[2,79],65:[2,79],72:[2,79],80:[2,79],81:[2,79],82:[2,79],83:[2,79],84:[2,79],85:[2,79]},{33:[2,81]},{23:[2,27],33:[2,27],54:[2,27],65:[2,27],68:[2,27],72:[2,27],75:[2,27],80:[2,27],81:[2,27],82:[2,27],83:[2,27],84:[2,27],85:[2,27]},{23:[2,28],33:[2,28],54:[2,28],65:[2,28],68:[2,28],72:[2,28],75:[2,28],80:[2,28],81:[2,28],82:[2,28],83:[2,28],84:[2,28],85:[2,28]},{23:[2,30],33:[2,30],54:[2,30],68:[2,30],71:106,72:[1,107],75:[2,30]},{23:[2,98],33:[2,98],54:[2,98],68:[2,98],72:[2,98],75:[2,98]},{23:[2,45],33:[2,45],54:[2,45],65:[2,45],68:[2,45],72:[2,45],73:[1,108],75:[2,45],80:[2,45],81:[2,45],82:[2,45],83:[2,45],84:[2,45],85:[2,45],87:[2,45]},{23:[2,44],33:[2,44],54:[2,44],65:[2,44],68:[2,44],72:[2,44],75:[2,44],80:[2,44],81:[2,44],82:[2,44],83:[2,44],84:[2,44],85:[2,44],87:[2,44]},{54:[1,109]},{54:[2,83],65:[2,83],72:[2,83],80:[2,83],81:[2,83],82:[2,83],83:[2,83],84:[2,83],85:[2,83]},{54:[2,85]},{5:[2,13],14:[2,13],15:[2,13],19:[2,13],29:[2,13],34:[2,13],39:[2,13],44:[2,13],47:[2,13],48:[2,13],51:[2,13],55:[2,13],60:[2,13]},{38:55,39:[1,57],43:56,44:[1,58],45:111,46:110,47:[2,76]},{33:[2,70],40:112,65:[2,70],72:[2,70],75:[2,70],80:[2,70],81:[2,70],82:[2,70],83:[2,70],84:[2,70],85:[2,70]},{47:[2,18]},{5:[2,14],14:[2,14],15:[2,14],19:[2,14],29:[2,14],34:[2,14],39:[2,14],44:[2,14],47:[2,14],48:[2,14],51:[2,14],55:[2,14],60:[2,14]},{33:[1,113]},{33:[2,87],65:[2,87],72:[2,87],80:[2,87],81:[2,87],82:[2,87],83:[2,87],84:[2,87],85:[2,87]},{33:[2,89]},{20:74,63:115,64:75,65:[1,43],67:114,68:[2,96],69:116,70:76,71:77,72:[1,78],78:26,79:27,80:[1,28],81:[1,29],82:[1,30],83:[1,31],84:[1,32],85:[1,34],86:33},{33:[1,117]},{32:118,33:[2,62],74:119,75:[1,120]},{33:[2,59],65:[2,59],72:[2,59],75:[2,59],80:[2,59],81:[2,59],82:[2,59],83:[2,59],84:[2,59],85:[2,59]},{33:[2,61],75:[2,61]},{33:[2,68],37:121,74:122,75:[1,120]},{33:[2,65],65:[2,65],72:[2,65],75:[2,65],80:[2,65],81:[2,65],82:[2,65],83:[2,65],84:[2,65],85:[2,65]},{33:[2,67],75:[2,67]},{23:[1,123]},{23:[2,51],65:[2,51],72:[2,51],80:[2,51],81:[2,51],82:[2,51],83:[2,51],84:[2,51],85:[2,51]},{23:[2,53]},{33:[1,124]},{33:[2,91],65:[2,91],72:[2,91],80:[2,91],81:[2,91],82:[2,91],83:[2,91],84:[2,91],85:[2,91]},{33:[2,93]},{5:[2,22],14:[2,22],15:[2,22],19:[2,22],29:[2,22],34:[2,22],39:[2,22],44:[2,22],47:[2,22],48:[2,22],51:[2,22],55:[2,22],60:[2,22]},{23:[2,99],33:[2,99],54:[2,99],68:[2,99],72:[2,99],75:[2,99]},{73:[1,108]},{20:74,63:125,64:75,65:[1,43],72:[1,35],78:26,79:27,80:[1,28],81:[1,29],82:[1,30],83:[1,31],84:[1,32],85:[1,34],86:33},{5:[2,23],14:[2,23],15:[2,23],19:[2,23],29:[2,23],34:[2,23],39:[2,23],44:[2,23],47:[2,23],48:[2,23],51:[2,23],55:[2,23],60:[2,23]},{47:[2,19]},{47:[2,77]},{20:74,33:[2,72],41:126,63:127,64:75,65:[1,43],69:128,70:76,71:77,72:[1,78],75:[2,72],78:26,79:27,80:[1,28],81:[1,29],82:[1,30],83:[1,31],84:[1,32],85:[1,34],86:33},{5:[2,24],14:[2,24],15:[2,24],19:[2,24],29:[2,24],34:[2,24],39:[2,24],44:[2,24],47:[2,24],48:[2,24],51:[2,24],55:[2,24],60:[2,24]},{68:[1,129]},{65:[2,95],68:[2,95],72:[2,95],80:[2,95],81:[2,95],82:[2,95],83:[2,95],84:[2,95],85:[2,95]},{68:[2,97]},{5:[2,21],14:[2,21],15:[2,21],19:[2,21],29:[2,21],34:[2,21],39:[2,21],44:[2,21],47:[2,21],48:[2,21],51:[2,21],55:[2,21],60:[2,21]},{33:[1,130]},{33:[2,63]},{72:[1,132],76:131},{33:[1,133]},{33:[2,69]},{15:[2,12],18:[2,12]},{14:[2,26],15:[2,26],19:[2,26],29:[2,26],34:[2,26],47:[2,26],48:[2,26],51:[2,26],55:[2,26],60:[2,26]},{23:[2,31],33:[2,31],54:[2,31],68:[2,31],72:[2,31],75:[2,31]},{33:[2,74],42:134,74:135,75:[1,120]},{33:[2,71],65:[2,71],72:[2,71],75:[2,71],80:[2,71],81:[2,71],82:[2,71],83:[2,71],84:[2,71],85:[2,71]},{33:[2,73],75:[2,73]},{23:[2,29],33:[2,29],54:[2,29],65:[2,29],68:[2,29],72:[2,29],75:[2,29],80:[2,29],81:[2,29],82:[2,29],83:[2,29],84:[2,29],85:[2,29]},{14:[2,15],15:[2,15],19:[2,15],29:[2,15],34:[2,15],39:[2,15],44:[2,15],47:[2,15],48:[2,15],51:[2,15],55:[2,15],60:[2,15]},{72:[1,137],77:[1,136]},{72:[2,100],77:[2,100]},{14:[2,16],15:[2,16],19:[2,16],29:[2,16],34:[2,16],44:[2,16],47:[2,16],48:[2,16],51:[2,16],55:[2,16],60:[2,16]},{33:[1,138]},{33:[2,75]},{33:[2,32]},{72:[2,101],77:[2,101]},{14:[2,17],15:[2,17],19:[2,17],29:[2,17],34:[2,17],39:[2,17],44:[2,17],47:[2,17],48:[2,17],51:[2,17],55:[2,17],60:[2,17]}],defaultActions:{4:[2,1],54:[2,55],56:[2,20],60:[2,57],73:[2,81],82:[2,85],86:[2,18],90:[2,89],101:[2,53],104:[2,93],110:[2,19],111:[2,77],116:[2,97],119:[2,63],122:[2,69],135:[2,75],136:[2,32]},parseError:function(n,e){throw new Error(n)},parse:function(n){var e=this,t=[0],r=[null],a=[],i=this.table,o="",s=0,l=0,c=0;this.lexer.setInput(n),this.lexer.yy=this.yy,this.yy.lexer=this.lexer,this.yy.parser=this,void 0===this.lexer.yylloc&&(this.lexer.yylloc={});var d=this.lexer.yylloc;a.push(d);var p=this.lexer.options&&this.lexer.options.ranges;"function"==typeof this.yy.parseError&&(this.parseError=this.yy.parseError);for(var u,g,h,f,b,m,x,_,v,w,y={};;){if(h=t[t.length-1],this.defaultActions[h]?f=this.defaultActions[h]:(null==u&&(w=void 0,"number"!=typeof(w=e.lexer.lex()||1)&&(w=e.symbols_[w]||w),u=w),f=i[h]&&i[h][u]),void 0===f||!f.length||!f[0]){var E="";if(!c){for(m in v=[],i[h])this.terminals_[m]&&m>2&&v.push("'"+this.terminals_[m]+"'");E=this.lexer.showPosition?"Parse error on line "+(s+1)+":\n"+this.lexer.showPosition()+"\nExpecting "+v.join(", ")+", got '"+(this.terminals_[u]||u)+"'":"Parse error on line "+(s+1)+": Unexpected "+(1==u?"end of input":"'"+(this.terminals_[u]||u)+"'"),this.parseError(E,{text:this.lexer.match,token:this.terminals_[u]||u,line:this.lexer.yylineno,loc:d,expected:v})}}if(f[0]instanceof Array&&f.length>1)throw new Error("Parse Error: multiple actions possible at state: "+h+", token: "+u);switch(f[0]){case 1:t.push(u),r.push(this.lexer.yytext),a.push(this.lexer.yylloc),t.push(f[1]),u=null,g?(u=g,g=null):(l=this.lexer.yyleng,o=this.lexer.yytext,s=this.lexer.yylineno,d=this.lexer.yylloc,c>0&&c--);break;case 2:if(x=this.productions_[f[1]][1],y.$=r[r.length-x],y._$={first_line:a[a.length-(x||1)].first_line,last_line:a[a.length-1].last_line,first_column:a[a.length-(x||1)].first_column,last_column:a[a.length-1].last_column},p&&(y._$.range=[a[a.length-(x||1)].range[0],a[a.length-1].range[1]]),void 0!==(b=this.performAction.call(y,o,l,s,this.yy,f[1],r,a)))return b;x&&(t=t.slice(0,-1*x*2),r=r.slice(0,-1*x),a=a.slice(0,-1*x)),t.push(this.productions_[f[1]][0]),r.push(y.$),a.push(y._$),_=i[t[t.length-2]][t[t.length-1]],t.push(_);break;case 3:return!0}}return!0}},e=function(){var n={EOF:1,parseError:function(n,e){if(!this.yy.parser)throw new Error(n);this.yy.parser.parseError(n,e)},setInput:function(n){return this._input=n,this._more=this._less=this.done=!1,this.yylineno=this.yyleng=0,this.yytext=this.matched=this.match="",this.conditionStack=["INITIAL"],this.yylloc={first_line:1,first_column:0,last_line:1,last_column:0},this.options.ranges&&(this.yylloc.range=[0,0]),this.offset=0,this},input:function(){var n=this._input[0];return this.yytext+=n,this.yyleng++,this.offset++,this.match+=n,this.matched+=n,n.match(/(?:\r\n?|\n).*/g)?(this.yylineno++,this.yylloc.last_line++):this.yylloc.last_column++,this.options.ranges&&this.yylloc.range[1]++,this._input=this._input.slice(1),n},unput:function(n){var e=n.length,t=n.split(/(?:\r\n?|\n)/g);this._input=n+this._input,this.yytext=this.yytext.substr(0,this.yytext.length-e-1),this.offset-=e;var r=this.match.split(/(?:\r\n?|\n)/g);this.match=this.match.substr(0,this.match.length-1),this.matched=this.matched.substr(0,this.matched.length-1),t.length-1&&(this.yylineno-=t.length-1);var a=this.yylloc.range;return this.yylloc={first_line:this.yylloc.first_line,last_line:this.yylineno+1,first_column:this.yylloc.first_column,last_column:t?(t.length===r.length?this.yylloc.first_column:0)+r[r.length-t.length].length-t[0].length:this.yylloc.first_column-e},this.options.ranges&&(this.yylloc.range=[a[0],a[0]+this.yyleng-e]),this},more:function(){return this._more=!0,this},less:function(n){this.unput(this.match.slice(n))},pastInput:function(){var n=this.matched.substr(0,this.matched.length-this.match.length);return(n.length>20?"...":"")+n.substr(-20).replace(/\n/g,"")},upcomingInput:function(){var n=this.match;return n.length<20&&(n+=this._input.substr(0,20-n.length)),(n.substr(0,20)+(n.length>20?"...":"")).replace(/\n/g,"")},showPosition:function(){var n=this.pastInput(),e=new Array(n.length+1).join("-");return n+this.upcomingInput()+"\n"+e+"^"},next:function(){if(this.done)return this.EOF;var n,e,t,r,a;this._input||(this.done=!0),this._more||(this.yytext="",this.match="");for(var i=this._currentRules(),o=0;o<i.length&&(!(t=this._input.match(this.rules[i[o]]))||e&&!(t[0].length>e[0].length)||(e=t,r=o,this.options.flex));o++);return e?((a=e[0].match(/(?:\r\n?|\n).*/g))&&(this.yylineno+=a.length),this.yylloc={first_line:this.yylloc.last_line,last_line:this.yylineno+1,first_column:this.yylloc.last_column,last_column:a?a[a.length-1].length-a[a.length-1].match(/\r?\n?/)[0].length:this.yylloc.last_column+e[0].length},this.yytext+=e[0],this.match+=e[0],this.matches=e,this.yyleng=this.yytext.length,this.options.ranges&&(this.yylloc.range=[this.offset,this.offset+=this.yyleng]),this._more=!1,this._input=this._input.slice(e[0].length),this.matched+=e[0],n=this.performAction.call(this,this.yy,this,i[r],this.conditionStack[this.conditionStack.length-1]),this.done&&this._input&&(this.done=!1),n||void 0):""===this._input?this.EOF:this.parseError("Lexical error on line "+(this.yylineno+1)+". Unrecognized text.\n"+this.showPosition(),{text:"",token:null,line:this.yylineno})},lex:function(){var n=this.next();return void 0!==n?n:this.lex()},begin:function(n){this.conditionStack.push(n)},popState:function(){return this.conditionStack.pop()},_currentRules:function(){return this.conditions[this.conditionStack[this.conditionStack.length-1]].rules},topState:function(){return this.conditionStack[this.conditionStack.length-2]},pushState:function(n){this.begin(n)},options:{},performAction:function(n,e,t,r){function strip(n,t){return e.yytext=e.yytext.substring(n,e.yyleng-t+n)}switch(t){case 0:if("\\\\"===e.yytext.slice(-2)?(strip(0,1),this.begin("mu")):"\\"===e.yytext.slice(-1)?(strip(0,1),this.begin("emu")):this.begin("mu"),e.yytext)return 15;break;case 1:return 15;case 2:return this.popState(),15;case 3:return this.begin("raw"),15;case 4:return this.popState(),"raw"===this.conditionStack[this.conditionStack.length-1]?15:(strip(5,9),"END_RAW_BLOCK");case 5:return 15;case 6:return this.popState(),14;case 7:return 65;case 8:return 68;case 9:return 19;case 10:return this.popState(),this.begin("raw"),23;case 11:return 55;case 12:return 60;case 13:return 29;case 14:return 47;case 15:case 16:return this.popState(),44;case 17:return 34;case 18:return 39;case 19:return 51;case 20:return 48;case 21:this.unput(e.yytext),this.popState(),this.begin("com");break;case 22:return this.popState(),14;case 23:return 48;case 24:return 73;case 25:case 26:return 72;case 27:return 87;case 28:break;case 29:return this.popState(),54;case 30:return this.popState(),33;case 31:return e.yytext=strip(1,2).replace(/\\"/g,'"'),80;case 32:return e.yytext=strip(1,2).replace(/\\'/g,"'"),80;case 33:return 85;case 34:case 35:return 82;case 36:return 83;case 37:return 84;case 38:return 81;case 39:return 75;case 40:return 77;case 41:return 72;case 42:return e.yytext=e.yytext.replace(/\\([\\\]])/g,"$1"),72;case 43:return"INVALID";case 44:return 5}},rules:[/^(?:[^\x00]*?(?=(\{\{)))/,/^(?:[^\x00]+)/,/^(?:[^\x00]{2,}?(?=(\{\{|\\\{\{|\\\\\{\{|$)))/,/^(?:\{\{\{\{(?=[^\/]))/,/^(?:\{\{\{\{\/[^\s!"#%-,\.\/;->@\[-\^`\{-~]+(?=[=}\s\/.])\}\}\}\})/,/^(?:[^\x00]+?(?=(\{\{\{\{)))/,/^(?:[\s\S]*?--(~)?\}\})/,/^(?:\()/,/^(?:\))/,/^(?:\{\{\{\{)/,/^(?:\}\}\}\})/,/^(?:\{\{(~)?>)/,/^(?:\{\{(~)?#>)/,/^(?:\{\{(~)?#\*?)/,/^(?:\{\{(~)?\/)/,/^(?:\{\{(~)?\^\s*(~)?\}\})/,/^(?:\{\{(~)?\s*else\s*(~)?\}\})/,/^(?:\{\{(~)?\^)/,/^(?:\{\{(~)?\s*else\b)/,/^(?:\{\{(~)?\{)/,/^(?:\{\{(~)?&)/,/^(?:\{\{(~)?!--)/,/^(?:\{\{(~)?![\s\S]*?\}\})/,/^(?:\{\{(~)?\*?)/,/^(?:=)/,/^(?:\.\.)/,/^(?:\.(?=([=~}\s\/.)|])))/,/^(?:[\/.])/,/^(?:\s+)/,/^(?:\}(~)?\}\})/,/^(?:(~)?\}\})/,/^(?:"(\\["]|[^"])*")/,/^(?:'(\\[']|[^'])*')/,/^(?:@)/,/^(?:true(?=([~}\s)])))/,/^(?:false(?=([~}\s)])))/,/^(?:undefined(?=([~}\s)])))/,/^(?:null(?=([~}\s)])))/,/^(?:-?[0-9]+(?:\.[0-9]+)?(?=([~}\s)])))/,/^(?:as\s+\|)/,/^(?:\|)/,/^(?:([^\s!"#%-,\.\/;->@\[-\^`\{-~]+(?=([=~}\s\/.)|]))))/,/^(?:\[(\\\]|[^\]])*\])/,/^(?:.)/,/^(?:$)/],conditions:{mu:{rules:[7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44],inclusive:!1},emu:{rules:[2],inclusive:!1},com:{rules:[6],inclusive:!1},raw:{rules:[3,4,5],inclusive:!1},INITIAL:{rules:[0,1,44],inclusive:!0}}};return n}();function Parser(){this.yy={}}return n.lexer=e,Parser.prototype=n,n.Parser=Parser,new Parser}();e.default=r,n.exports=e.default},function(n,e,t){"use strict";e.__esModule=!0;var r,a=t(3),i=(r=a)&&r.__esModule?r:{default:r};function WhitespaceControl(){var n=arguments.length<=0||void 0===arguments[0]?{}:arguments[0];this.options=n}function isPrevWhitespace(n,e,t){void 0===e&&(e=n.length);var r=n[e-1],a=n[e-2];return r?"ContentStatement"===r.type?(a||!t?/\r?\n\s*?$/:/(^|\r?\n)\s*?$/).test(r.original):void 0:t}function isNextWhitespace(n,e,t){void 0===e&&(e=-1);var r=n[e+1],a=n[e+2];return r?"ContentStatement"===r.type?(a||!t?/^\s*?\r?\n/:/^\s*?(\r?\n|$)/).test(r.original):void 0:t}function omitRight(n,e,t){var r=n[null==e?0:e+1];if(r&&"ContentStatement"===r.type&&(t||!r.rightStripped)){var a=r.value;r.value=r.value.replace(t?/^\s+/:/^[ \t]*\r?\n?/,""),r.rightStripped=r.value!==a}}function omitLeft(n,e,t){var r=n[null==e?n.length-1:e-1];if(r&&"ContentStatement"===r.type&&(t||!r.leftStripped)){var a=r.value;return r.value=r.value.replace(t?/\s+$/:/[ \t]+$/,""),r.leftStripped=r.value!==a,r.leftStripped}}WhitespaceControl.prototype=new i.default,WhitespaceControl.prototype.Program=function(n){var e=!this.options.ignoreStandalone,t=!this.isRootSeen;this.isRootSeen=!0;for(var r=n.body,a=0,i=r.length;a<i;a++){var o=r[a],s=this.accept(o);if(s){var l=isPrevWhitespace(r,a,t),c=isNextWhitespace(r,a,t),d=s.openStandalone&&l,p=s.closeStandalone&&c,u=s.inlineStandalone&&l&&c;s.close&&omitRight(r,a,!0),s.open&&omitLeft(r,a,!0),e&&u&&(omitRight(r,a),omitLeft(r,a)&&"PartialStatement"===o.type&&(o.indent=/([ \t]+$)/.exec(r[a-1].original)[1])),e&&d&&(omitRight((o.program||o.inverse).body),omitLeft(r,a)),e&&p&&(omitRight(r,a),omitLeft((o.inverse||o.program).body))}}return n},WhitespaceControl.prototype.BlockStatement=WhitespaceControl.prototype.DecoratorBlock=WhitespaceControl.prototype.PartialBlockStatement=function(n){this.accept(n.program),this.accept(n.inverse);var e=n.program||n.inverse,t=n.program&&n.inverse,r=t,a=t;if(t&&t.chained)for(r=t.body[0].program;a.chained;)a=a.body[a.body.length-1].program;var i={open:n.openStrip.open,close:n.closeStrip.close,openStandalone:isNextWhitespace(e.body),closeStandalone:isPrevWhitespace((r||e).body)};if(n.openStrip.close&&omitRight(e.body,null,!0),t){var o=n.inverseStrip;o.open&&omitLeft(e.body,null,!0),o.close&&omitRight(r.body,null,!0),n.closeStrip.open&&omitLeft(a.body,null,!0),!this.options.ignoreStandalone&&isPrevWhitespace(e.body)&&isNextWhitespace(r.body)&&(omitLeft(e.body),omitRight(r.body))}else n.closeStrip.open&&omitLeft(e.body,null,!0);return i},WhitespaceControl.prototype.Decorator=WhitespaceControl.prototype.MustacheStatement=function(n){return n.strip},WhitespaceControl.prototype.PartialStatement=WhitespaceControl.prototype.CommentStatement=function(n){var e=n.strip||{};return{inlineStandalone:!0,open:e.open,close:e.close}},e.default=WhitespaceControl,n.exports=e.default},function(n,e,t){"use strict";e.__esModule=!0,e.SourceLocation=function(n,e){this.source=n,this.start={line:e.first_line,column:e.first_column},this.end={line:e.last_line,column:e.last_column}},e.id=function(n){return/^\[.*\]$/.test(n)?n.substring(1,n.length-1):n},e.stripFlags=function(n,e){return{open:"~"===n.charAt(2),close:"~"===e.charAt(e.length-3)}},e.stripComment=function(n){return n.replace(/^\{\{~?!-?-?/,"").replace(/-?-?~?\}\}$/,"")},e.preparePath=function(n,e,t){t=this.locInfo(t);for(var r=n?"@":"",a=[],o=0,s=0,l=e.length;s<l;s++){var c=e[s].part,d=e[s].original!==c;if(r+=(e[s].separator||"")+c,d||".."!==c&&"."!==c&&"this"!==c)a.push(c);else{if(a.length>0)throw new i.default("Invalid path: "+r,{loc:t});".."===c&&o++}}return{type:"PathExpression",data:n,depth:o,parts:a,original:r,loc:t}},e.prepareMustache=function(n,e,t,r,a,i){var o=r.charAt(3)||r.charAt(2),s="{"!==o&&"&"!==o;return{type:/\*/.test(r)?"Decorator":"MustacheStatement",path:n,params:e,hash:t,escaped:s,strip:a,loc:this.locInfo(i)}},e.prepareRawBlock=function(n,e,t,r){validateClose(n,t),r=this.locInfo(r);var a={type:"Program",body:e,strip:{},loc:r};return{type:"BlockStatement",path:n.path,params:n.params,hash:n.hash,program:a,openStrip:{},inverseStrip:{},closeStrip:{},loc:r}},e.prepareBlock=function(n,e,t,r,a,o){r&&r.path&&validateClose(n,r);var s=/\*/.test(n.open);e.blockParams=n.blockParams;var l=void 0,c=void 0;if(t){if(s)throw new i.default("Unexpected inverse block on decorator",t);t.chain&&(t.program.body[0].closeStrip=r.strip),c=t.strip,l=t.program}a&&(a=l,l=e,e=a);return{type:s?"DecoratorBlock":"BlockStatement",path:n.path,params:n.params,hash:n.hash,program:e,inverse:l,openStrip:n.strip,inverseStrip:c,closeStrip:r&&r.strip,loc:this.locInfo(o)}},e.prepareProgram=function(n,e){if(!e&&n.length){var t=n[0].loc,r=n[n.length-1].loc;t&&r&&(e={source:t.source,start:{line:t.start.line,column:t.start.column},end:{line:r.end.line,column:r.end.column}})}return{type:"Program",body:n,strip:{},loc:e}},e.preparePartialBlock=function(n,e,t,r){return validateClose(n,t),{type:"PartialBlockStatement",name:n.path,params:n.params,hash:n.hash,program:e,openStrip:n.strip,closeStrip:t&&t.strip,loc:this.locInfo(r)}};var r,a=t(1),i=(r=a)&&r.__esModule?r:{default:r};function validateClose(n,e){if(e=e.path?e.path.original:e,n.path.original!==e){var t={loc:n.path.loc};throw new i.default(n.path.original+" doesn't match "+e,t)}}},function(n,e,t){"use strict";function _interopRequireDefault(n){return n&&n.__esModule?n:{default:n}}e.__esModule=!0,e.Compiler=Compiler,e.precompile=function(n,e,t){if(null==n||"string"!=typeof n&&"Program"!==n.type)throw new r.default("You must pass a string or Handlebars AST to Handlebars.precompile. You passed "+n);"data"in(e=e||{})||(e.data=!0);e.compat&&(e.useDepths=!0);var a=t.parse(n,e),i=(new t.Compiler).compile(a,e);return(new t.JavaScriptCompiler).compile(i,e)},e.compile=function(n,e,t){void 0===e&&(e={});if(null==n||"string"!=typeof n&&"Program"!==n.type)throw new r.default("You must pass a string or Handlebars AST to Handlebars.compile. You passed "+n);"data"in(e=a.extend({},e))||(e.data=!0);e.compat&&(e.useDepths=!0);var i=void 0;function compileInput(){var r=t.parse(n,e),a=(new t.Compiler).compile(r,e),i=(new t.JavaScriptCompiler).compile(a,e,void 0,!0);return t.template(i)}function ret(n,e){return i||(i=compileInput()),i.call(this,n,e)}return ret._setup=function(n){return i||(i=compileInput()),i._setup(n)},ret._child=function(n,e,t,r){return i||(i=compileInput()),i._child(n,e,t,r)},ret};var r=_interopRequireDefault(t(1)),a=t(0),i=_interopRequireDefault(t(6)),o=[].slice;function Compiler(){}function argEquals(n,e){if(n===e)return!0;if(a.isArray(n)&&a.isArray(e)&&n.length===e.length){for(var t=0;t<n.length;t++)if(!argEquals(n[t],e[t]))return!1;return!0}}function transformLiteralToPath(n){if(!n.path.parts){var e=n.path;n.path={type:"PathExpression",data:!1,depth:0,parts:[e.original+""],original:e.original+"",loc:e.loc}}}Compiler.prototype={compiler:Compiler,equals:function(n){var e=this.opcodes.length;if(n.opcodes.length!==e)return!1;for(var t=0;t<e;t++){var r=this.opcodes[t],a=n.opcodes[t];if(r.opcode!==a.opcode||!argEquals(r.args,a.args))return!1}e=this.children.length;for(t=0;t<e;t++)if(!this.children[t].equals(n.children[t]))return!1;return!0},guid:0,compile:function(n,e){this.sourceNode=[],this.opcodes=[],this.children=[],this.options=e,this.stringParams=e.stringParams,this.trackIds=e.trackIds,e.blockParams=e.blockParams||[];var t=e.knownHelpers;if(e.knownHelpers={helperMissing:!0,blockHelperMissing:!0,each:!0,if:!0,unless:!0,with:!0,log:!0,lookup:!0},t)for(var r in t)this.options.knownHelpers[r]=t[r];return this.accept(n)},compileProgram:function(n){var e=(new this.compiler).compile(n,this.options),t=this.guid++;return this.usePartial=this.usePartial||e.usePartial,this.children[t]=e,this.useDepths=this.useDepths||e.useDepths,t},accept:function(n){if(!this[n.type])throw new r.default("Unknown type: "+n.type,n);this.sourceNode.unshift(n);var e=this[n.type](n);return this.sourceNode.shift(),e},Program:function(n){this.options.blockParams.unshift(n.blockParams);for(var e=n.body,t=e.length,r=0;r<t;r++)this.accept(e[r]);return this.options.blockParams.shift(),this.isSimple=1===t,this.blockParams=n.blockParams?n.blockParams.length:0,this},BlockStatement:function(n){transformLiteralToPath(n);var e=n.program,t=n.inverse;e=e&&this.compileProgram(e),t=t&&this.compileProgram(t);var r=this.classifySexpr(n);"helper"===r?this.helperSexpr(n,e,t):"simple"===r?(this.simpleSexpr(n),this.opcode("pushProgram",e),this.opcode("pushProgram",t),this.opcode("emptyHash"),this.opcode("blockValue",n.path.original)):(this.ambiguousSexpr(n,e,t),this.opcode("pushProgram",e),this.opcode("pushProgram",t),this.opcode("emptyHash"),this.opcode("ambiguousBlockValue")),this.opcode("append")},DecoratorBlock:function(n){var e=n.program&&this.compileProgram(n.program),t=this.setupFullMustacheParams(n,e,void 0),r=n.path;this.useDecorators=!0,this.opcode("registerDecorator",t.length,r.original)},PartialStatement:function(n){this.usePartial=!0;var e=n.program;e&&(e=this.compileProgram(n.program));var t=n.params;if(t.length>1)throw new r.default("Unsupported number of partial arguments: "+t.length,n);t.length||(this.options.explicitPartialContext?this.opcode("pushLiteral","undefined"):t.push({type:"PathExpression",parts:[],depth:0}));var a=n.name.original,i="SubExpression"===n.name.type;i&&this.accept(n.name),this.setupFullMustacheParams(n,e,void 0,!0);var o=n.indent||"";this.options.preventIndent&&o&&(this.opcode("appendContent",o),o=""),this.opcode("invokePartial",i,a,o),this.opcode("append")},PartialBlockStatement:function(n){this.PartialStatement(n)},MustacheStatement:function(n){this.SubExpression(n),n.escaped&&!this.options.noEscape?this.opcode("appendEscaped"):this.opcode("append")},Decorator:function(n){this.DecoratorBlock(n)},ContentStatement:function(n){n.value&&this.opcode("appendContent",n.value)},CommentStatement:function(){},SubExpression:function(n){transformLiteralToPath(n);var e=this.classifySexpr(n);"simple"===e?this.simpleSexpr(n):"helper"===e?this.helperSexpr(n):this.ambiguousSexpr(n)},ambiguousSexpr:function(n,e,t){var r=n.path,a=r.parts[0],i=null!=e||null!=t;this.opcode("getContext",r.depth),this.opcode("pushProgram",e),this.opcode("pushProgram",t),r.strict=!0,this.accept(r),this.opcode("invokeAmbiguous",a,i)},simpleSexpr:function(n){var e=n.path;e.strict=!0,this.accept(e),this.opcode("resolvePossibleLambda")},helperSexpr:function(n,e,t){var a=this.setupFullMustacheParams(n,e,t),o=n.path,s=o.parts[0];if(this.options.knownHelpers[s])this.opcode("invokeKnownHelper",a.length,s);else{if(this.options.knownHelpersOnly)throw new r.default("You specified knownHelpersOnly, but used the unknown helper "+s,n);o.strict=!0,o.falsy=!0,this.accept(o),this.opcode("invokeHelper",a.length,o.original,i.default.helpers.simpleId(o))}},PathExpression:function(n){this.addDepth(n.depth),this.opcode("getContext",n.depth);var e=n.parts[0],t=i.default.helpers.scopedId(n),r=!n.depth&&!t&&this.blockParamIndex(e);r?this.opcode("lookupBlockParam",r,n.parts):e?n.data?(this.options.data=!0,this.opcode("lookupData",n.depth,n.parts,n.strict)):this.opcode("lookupOnContext",n.parts,n.falsy,n.strict,t):this.opcode("pushContext")},StringLiteral:function(n){this.opcode("pushString",n.value)},NumberLiteral:function(n){this.opcode("pushLiteral",n.value)},BooleanLiteral:function(n){this.opcode("pushLiteral",n.value)},UndefinedLiteral:function(){this.opcode("pushLiteral","undefined")},NullLiteral:function(){this.opcode("pushLiteral","null")},Hash:function(n){var e=n.pairs,t=0,r=e.length;for(this.opcode("pushHash");t<r;t++)this.pushParam(e[t].value);for(;t--;)this.opcode("assignToHash",e[t].key);this.opcode("popHash")},opcode:function(n){this.opcodes.push({opcode:n,args:o.call(arguments,1),loc:this.sourceNode[0].loc})},addDepth:function(n){n&&(this.useDepths=!0)},classifySexpr:function(n){var e=i.default.helpers.simpleId(n.path),t=e&&!!this.blockParamIndex(n.path.parts[0]),r=!t&&i.default.helpers.helperExpression(n),a=!t&&(r||e);if(a&&!r){var o=n.path.parts[0],s=this.options;s.knownHelpers[o]?r=!0:s.knownHelpersOnly&&(a=!1)}return r?"helper":a?"ambiguous":"simple"},pushParams:function(n){for(var e=0,t=n.length;e<t;e++)this.pushParam(n[e])},pushParam:function(n){var e=null!=n.value?n.value:n.original||"";if(this.stringParams)e.replace&&(e=e.replace(/^(\.?\.\/)*/g,"").replace(/\//g,".")),n.depth&&this.addDepth(n.depth),this.opcode("getContext",n.depth||0),this.opcode("pushStringParam",e,n.type),"SubExpression"===n.type&&this.accept(n);else{if(this.trackIds){var t=void 0;if(!n.parts||i.default.helpers.scopedId(n)||n.depth||(t=this.blockParamIndex(n.parts[0])),t){var r=n.parts.slice(1).join(".");this.opcode("pushId","BlockParam",t,r)}else(e=n.original||e).replace&&(e=e.replace(/^this(?:\.|$)/,"").replace(/^\.\//,"").replace(/^\.$/,"")),this.opcode("pushId",n.type,e)}this.accept(n)}},setupFullMustacheParams:function(n,e,t,r){var a=n.params;return this.pushParams(a),this.opcode("pushProgram",e),this.opcode("pushProgram",t),n.hash?this.accept(n.hash):this.opcode("emptyHash",r),a},blockParamIndex:function(n){for(var e=0,t=this.options.blockParams.length;e<t;e++){var r=this.options.blockParams[e],i=r&&a.indexOf(r,n);if(r&&i>=0)return[e,i]}}}},function(n,e,t){"use strict";function _interopRequireDefault(n){return n&&n.__esModule?n:{default:n}}e.__esModule=!0;var r=t(2),a=_interopRequireDefault(t(1)),i=t(0),o=_interopRequireDefault(t(32));function Literal(n){this.value=n}function JavaScriptCompiler(){}JavaScriptCompiler.prototype={nameLookup:function(n,e){var t=[this.aliasable("container.propertyIsEnumerable"),".call(",n,',"constructor")'];return"constructor"===e?["(",t,"?",_actualLookup()," : undefined)"]:_actualLookup();function _actualLookup(){return JavaScriptCompiler.isValidJavaScriptVariableName(e)?[n,".",e]:[n,"[",JSON.stringify(e),"]"]}},depthedLookup:function(n){return[this.aliasable("container.lookup"),'(depths, "',n,'")']},compilerInfo:function(){var n=r.COMPILER_REVISION;return[n,r.REVISION_CHANGES[n]]},appendToBuffer:function(n,e,t){return i.isArray(n)||(n=[n]),n=this.source.wrap(n,e),this.environment.isSimple?["return ",n,";"]:t?["buffer += ",n,";"]:(n.appendToBuffer=!0,n)},initializeBuffer:function(){return this.quotedString("")},compile:function(n,e,t,r){this.environment=n,this.options=e,this.stringParams=this.options.stringParams,this.trackIds=this.options.trackIds,this.precompile=!r,this.name=this.environment.name,this.isChild=!!t,this.context=t||{decorators:[],programs:[],environments:[]},this.preamble(),this.stackSlot=0,this.stackVars=[],this.aliases={},this.registers={list:[]},this.hashes=[],this.compileStack=[],this.inlineStack=[],this.blockParams=[],this.compileChildren(n,e),this.useDepths=this.useDepths||n.useDepths||n.useDecorators||this.options.compat,this.useBlockParams=this.useBlockParams||n.useBlockParams;var i=n.opcodes,o=void 0,s=void 0,l=void 0,c=void 0;for(l=0,c=i.length;l<c;l++)o=i[l],this.source.currentLocation=o.loc,s=s||o.loc,this[o.opcode].apply(this,o.args);if(this.source.currentLocation=s,this.pushSource(""),this.stackSlot||this.inlineStack.length||this.compileStack.length)throw new a.default("Compile completed with content left on stack");this.decorators.isEmpty()?this.decorators=void 0:(this.useDecorators=!0,this.decorators.prepend("var decorators = container.decorators;\n"),this.decorators.push("return fn;"),r?this.decorators=Function.apply(this,["fn","props","container","depth0","data","blockParams","depths",this.decorators.merge()]):(this.decorators.prepend("function(fn, props, container, depth0, data, blockParams, depths) {\n"),this.decorators.push("}\n"),this.decorators=this.decorators.merge()));var d=this.createFunctionContext(r);if(this.isChild)return d;var p={compiler:this.compilerInfo(),main:d};this.decorators&&(p.main_d=this.decorators,p.useDecorators=!0);var u=this.context,g=u.programs,h=u.decorators;for(l=0,c=g.length;l<c;l++)g[l]&&(p[l]=g[l],h[l]&&(p[l+"_d"]=h[l],p.useDecorators=!0));return this.environment.usePartial&&(p.usePartial=!0),this.options.data&&(p.useData=!0),this.useDepths&&(p.useDepths=!0),this.useBlockParams&&(p.useBlockParams=!0),this.options.compat&&(p.compat=!0),r?p.compilerOptions=this.options:(p.compiler=JSON.stringify(p.compiler),this.source.currentLocation={start:{line:1,column:0}},p=this.objectLiteral(p),e.srcName?(p=p.toStringWithSourceMap({file:e.destName})).map=p.map&&p.map.toString():p=p.toString()),p},preamble:function(){this.lastContext=0,this.source=new o.default(this.options.srcName),this.decorators=new o.default(this.options.srcName)},createFunctionContext:function(n){var e="",t=this.stackVars.concat(this.registers.list);t.length>0&&(e+=", "+t.join(", "));var r=0;for(var a in this.aliases){var i=this.aliases[a];this.aliases.hasOwnProperty(a)&&i.children&&i.referenceCount>1&&(e+=", alias"+ ++r+"="+a,i.children[0]="alias"+r)}var o=["container","depth0","helpers","partials","data"];(this.useBlockParams||this.useDepths)&&o.push("blockParams"),this.useDepths&&o.push("depths");var s=this.mergeSource(e);return n?(o.push(s),Function.apply(this,o)):this.source.wrap(["function(",o.join(","),") {\n  ",s,"}"])},mergeSource:function(n){var e=this.environment.isSimple,t=!this.forceBuffer,r=void 0,a=void 0,i=void 0,o=void 0;return this.source.each((function(n){n.appendToBuffer?(i?n.prepend("  + "):i=n,o=n):(i&&(a?i.prepend("buffer += "):r=!0,o.add(";"),i=o=void 0),a=!0,e||(t=!1))})),t?i?(i.prepend("return "),o.add(";")):a||this.source.push('return "";'):(n+=", buffer = "+(r?"":this.initializeBuffer()),i?(i.prepend("return buffer + "),o.add(";")):this.source.push("return buffer;")),n&&this.source.prepend("var "+n.substring(2)+(r?"":";\n")),this.source.merge()},blockValue:function(n){var e=this.aliasable("container.hooks.blockHelperMissing"),t=[this.contextName(0)];this.setupHelperArgs(n,0,t);var r=this.popStack();t.splice(1,0,r),this.push(this.source.functionCall(e,"call",t))},ambiguousBlockValue:function(){var n=this.aliasable("container.hooks.blockHelperMissing"),e=[this.contextName(0)];this.setupHelperArgs("",0,e,!0),this.flushInline();var t=this.topStack();e.splice(1,0,t),this.pushSource(["if (!",this.lastHelper,") { ",t," = ",this.source.functionCall(n,"call",e),"}"])},appendContent:function(n){this.pendingContent?n=this.pendingContent+n:this.pendingLocation=this.source.currentLocation,this.pendingContent=n},append:function(){if(this.isInline())this.replaceStack((function(n){return[" != null ? ",n,' : ""']})),this.pushSource(this.appendToBuffer(this.popStack()));else{var n=this.popStack();this.pushSource(["if (",n," != null) { ",this.appendToBuffer(n,void 0,!0)," }"]),this.environment.isSimple&&this.pushSource(["else { ",this.appendToBuffer("''",void 0,!0)," }"])}},appendEscaped:function(){this.pushSource(this.appendToBuffer([this.aliasable("container.escapeExpression"),"(",this.popStack(),")"]))},getContext:function(n){this.lastContext=n},pushContext:function(){this.pushStackLiteral(this.contextName(this.lastContext))},lookupOnContext:function(n,e,t,r){var a=0;r||!this.options.compat||this.lastContext?this.pushContext():this.push(this.depthedLookup(n[a++])),this.resolvePath("context",n,a,e,t)},lookupBlockParam:function(n,e){this.useBlockParams=!0,this.push(["blockParams[",n[0],"][",n[1],"]"]),this.resolvePath("context",e,1)},lookupData:function(n,e,t){n?this.pushStackLiteral("container.data(data, "+n+")"):this.pushStackLiteral("data"),this.resolvePath("data",e,0,!0,t)},resolvePath:function(n,e,t,r,a){var i=this;if(this.options.strict||this.options.assumeObjects)this.push(function(n,e,t,r){var a=e.popStack(),i=0,o=t.length;n&&o--;for(;i<o;i++)a=e.nameLookup(a,t[i],r);return n?[e.aliasable("container.strict"),"(",a,", ",e.quotedString(t[i]),", ",JSON.stringify(e.source.currentLocation)," )"]:a}(this.options.strict&&a,this,e,n));else for(var o=e.length;t<o;t++)this.replaceStack((function(a){var o=i.nameLookup(a,e[t],n);return r?[" && ",o]:[" != null ? ",o," : ",a]}))},resolvePossibleLambda:function(){this.push([this.aliasable("container.lambda"),"(",this.popStack(),", ",this.contextName(0),")"])},pushStringParam:function(n,e){this.pushContext(),this.pushString(e),"SubExpression"!==e&&("string"==typeof n?this.pushString(n):this.pushStackLiteral(n))},emptyHash:function(n){this.trackIds&&this.push("{}"),this.stringParams&&(this.push("{}"),this.push("{}")),this.pushStackLiteral(n?"undefined":"{}")},pushHash:function(){this.hash&&this.hashes.push(this.hash),this.hash={values:{},types:[],contexts:[],ids:[]}},popHash:function(){var n=this.hash;this.hash=this.hashes.pop(),this.trackIds&&this.push(this.objectLiteral(n.ids)),this.stringParams&&(this.push(this.objectLiteral(n.contexts)),this.push(this.objectLiteral(n.types))),this.push(this.objectLiteral(n.values))},pushString:function(n){this.pushStackLiteral(this.quotedString(n))},pushLiteral:function(n){this.pushStackLiteral(n)},pushProgram:function(n){null!=n?this.pushStackLiteral(this.programExpression(n)):this.pushStackLiteral(null)},registerDecorator:function(n,e){var t=this.nameLookup("decorators",e,"decorator"),r=this.setupHelperArgs(e,n);this.decorators.push(["fn = ",this.decorators.functionCall(t,"",["fn","props","container",r])," || fn;"])},invokeHelper:function(n,e,t){var r=this.popStack(),a=this.setupHelper(n,e),i=[];t&&i.push(a.name),i.push(r),this.options.strict||i.push(this.aliasable("container.hooks.helperMissing"));var o=["(",this.itemsSeparatedBy(i,"||"),")"],s=this.source.functionCall(o,"call",a.callParams);this.push(s)},itemsSeparatedBy:function(n,e){var t=[];t.push(n[0]);for(var r=1;r<n.length;r++)t.push(e,n[r]);return t},invokeKnownHelper:function(n,e){var t=this.setupHelper(n,e);this.push(this.source.functionCall(t.name,"call",t.callParams))},invokeAmbiguous:function(n,e){this.useRegister("helper");var t=this.popStack();this.emptyHash();var r=this.setupHelper(0,n,e),a=["(","(helper = ",this.lastHelper=this.nameLookup("helpers",n,"helper")," || ",t,")"];this.options.strict||(a[0]="(helper = ",a.push(" != null ? helper : ",this.aliasable("container.hooks.helperMissing"))),this.push(["(",a,r.paramsInit?["),(",r.paramsInit]:[],"),","(typeof helper === ",this.aliasable('"function"')," ? ",this.source.functionCall("helper","call",r.callParams)," : helper))"])},invokePartial:function(n,e,t){var r=[],a=this.setupParams(e,1,r);n&&(e=this.popStack(),delete a.name),t&&(a.indent=JSON.stringify(t)),a.helpers="helpers",a.partials="partials",a.decorators="container.decorators",n?r.unshift(e):r.unshift(this.nameLookup("partials",e,"partial")),this.options.compat&&(a.depths="depths"),a=this.objectLiteral(a),r.push(a),this.push(this.source.functionCall("container.invokePartial","",r))},assignToHash:function(n){var e=this.popStack(),t=void 0,r=void 0,a=void 0;this.trackIds&&(a=this.popStack()),this.stringParams&&(r=this.popStack(),t=this.popStack());var i=this.hash;t&&(i.contexts[n]=t),r&&(i.types[n]=r),a&&(i.ids[n]=a),i.values[n]=e},pushId:function(n,e,t){"BlockParam"===n?this.pushStackLiteral("blockParams["+e[0]+"].path["+e[1]+"]"+(t?" + "+JSON.stringify("."+t):"")):"PathExpression"===n?this.pushString(e):"SubExpression"===n?this.pushStackLiteral("true"):this.pushStackLiteral("null")},compiler:JavaScriptCompiler,compileChildren:function(n,e){for(var t=n.children,r=void 0,a=void 0,i=0,o=t.length;i<o;i++){r=t[i],a=new this.compiler;var s=this.matchExistingProgram(r);if(null==s){this.context.programs.push("");var l=this.context.programs.length;r.index=l,r.name="program"+l,this.context.programs[l]=a.compile(r,e,this.context,!this.precompile),this.context.decorators[l]=a.decorators,this.context.environments[l]=r,this.useDepths=this.useDepths||a.useDepths,this.useBlockParams=this.useBlockParams||a.useBlockParams,r.useDepths=this.useDepths,r.useBlockParams=this.useBlockParams}else r.index=s.index,r.name="program"+s.index,this.useDepths=this.useDepths||s.useDepths,this.useBlockParams=this.useBlockParams||s.useBlockParams}},matchExistingProgram:function(n){for(var e=0,t=this.context.environments.length;e<t;e++){var r=this.context.environments[e];if(r&&r.equals(n))return r}},programExpression:function(n){var e=this.environment.children[n],t=[e.index,"data",e.blockParams];return(this.useBlockParams||this.useDepths)&&t.push("blockParams"),this.useDepths&&t.push("depths"),"container.program("+t.join(", ")+")"},useRegister:function(n){this.registers[n]||(this.registers[n]=!0,this.registers.list.push(n))},push:function(n){return n instanceof Literal||(n=this.source.wrap(n)),this.inlineStack.push(n),n},pushStackLiteral:function(n){this.push(new Literal(n))},pushSource:function(n){this.pendingContent&&(this.source.push(this.appendToBuffer(this.source.quotedString(this.pendingContent),this.pendingLocation)),this.pendingContent=void 0),n&&this.source.push(n)},replaceStack:function(n){var e=["("],t=void 0,r=void 0,i=void 0;if(!this.isInline())throw new a.default("replaceStack on non-inline");var o=this.popStack(!0);if(o instanceof Literal)e=["(",t=[o.value]],i=!0;else{r=!0;var s=this.incrStack();e=["((",this.push(s)," = ",o,")"],t=this.topStack()}var l=n.call(this,t);i||this.popStack(),r&&this.stackSlot--,this.push(e.concat(l,")"))},incrStack:function(){return this.stackSlot++,this.stackSlot>this.stackVars.length&&this.stackVars.push("stack"+this.stackSlot),this.topStackName()},topStackName:function(){return"stack"+this.stackSlot},flushInline:function(){var n=this.inlineStack;this.inlineStack=[];for(var e=0,t=n.length;e<t;e++){var r=n[e];if(r instanceof Literal)this.compileStack.push(r);else{var a=this.incrStack();this.pushSource([a," = ",r,";"]),this.compileStack.push(a)}}},isInline:function(){return this.inlineStack.length},popStack:function(n){var e=this.isInline(),t=(e?this.inlineStack:this.compileStack).pop();if(!n&&t instanceof Literal)return t.value;if(!e){if(!this.stackSlot)throw new a.default("Invalid stack pop");this.stackSlot--}return t},topStack:function(){var n=this.isInline()?this.inlineStack:this.compileStack,e=n[n.length-1];return e instanceof Literal?e.value:e},contextName:function(n){return this.useDepths&&n?"depths["+n+"]":"depth"+n},quotedString:function(n){return this.source.quotedString(n)},objectLiteral:function(n){return this.source.objectLiteral(n)},aliasable:function(n){var e=this.aliases[n];return e?(e.referenceCount++,e):((e=this.aliases[n]=this.source.wrap(n)).aliasable=!0,e.referenceCount=1,e)},setupHelper:function(n,e,t){var r=[];return{params:r,paramsInit:this.setupHelperArgs(e,n,r,t),name:this.nameLookup("helpers",e,"helper"),callParams:[this.aliasable(this.contextName(0)+" != null ? "+this.contextName(0)+" : (container.nullContext || {})")].concat(r)}},setupParams:function(n,e,t){var r={},a=[],i=[],o=[],s=!t,l=void 0;s&&(t=[]),r.name=this.quotedString(n),r.hash=this.popStack(),this.trackIds&&(r.hashIds=this.popStack()),this.stringParams&&(r.hashTypes=this.popStack(),r.hashContexts=this.popStack());var c=this.popStack(),d=this.popStack();(d||c)&&(r.fn=d||"container.noop",r.inverse=c||"container.noop");for(var p=e;p--;)l=this.popStack(),t[p]=l,this.trackIds&&(o[p]=this.popStack()),this.stringParams&&(i[p]=this.popStack(),a[p]=this.popStack());return s&&(r.args=this.source.generateArray(t)),this.trackIds&&(r.ids=this.source.generateArray(o)),this.stringParams&&(r.types=this.source.generateArray(i),r.contexts=this.source.generateArray(a)),this.options.data&&(r.data="data"),this.useBlockParams&&(r.blockParams="blockParams"),r},setupHelperArgs:function(n,e,t,r){var a=this.setupParams(n,e,t);return a.loc=JSON.stringify(this.source.currentLocation),a=this.objectLiteral(a),r?(this.useRegister("options"),t.push("options"),["options=",a]):t?(t.push(a),""):a}},function(){for(var n="break else new var case finally return void catch for switch while continue function this with default if throw delete in try do instanceof typeof abstract enum int short boolean export interface static byte extends long super char final native synchronized class float package throws const goto private transient debugger implements protected volatile double import public let yield await null true false".split(" "),e=JavaScriptCompiler.RESERVED_WORDS={},t=0,r=n.length;t<r;t++)e[n[t]]=!0}(),JavaScriptCompiler.isValidJavaScriptVariableName=function(n){return!JavaScriptCompiler.RESERVED_WORDS[n]&&/^[a-zA-Z_$][0-9a-zA-Z_$]*$/.test(n)},e.default=JavaScriptCompiler,n.exports=e.default},function(n,e,t){"use strict";e.__esModule=!0;var r=t(0),a=void 0;try{}catch(n){}function castChunk(n,e,t){if(r.isArray(n)){for(var a=[],i=0,o=n.length;i<o;i++)a.push(e.wrap(n[i],t));return a}return"boolean"==typeof n||"number"==typeof n?n+"":n}function CodeGen(n){this.srcFile=n,this.source=[]}a||((a=function(n,e,t,r){this.src="",r&&this.add(r)}).prototype={add:function(n){r.isArray(n)&&(n=n.join("")),this.src+=n},prepend:function(n){r.isArray(n)&&(n=n.join("")),this.src=n+this.src},toStringWithSourceMap:function(){return{code:this.toString()}},toString:function(){return this.src}}),CodeGen.prototype={isEmpty:function(){return!this.source.length},prepend:function(n,e){this.source.unshift(this.wrap(n,e))},push:function(n,e){this.source.push(this.wrap(n,e))},merge:function(){var n=this.empty();return this.each((function(e){n.add(["  ",e,"\n"])})),n},each:function(n){for(var e=0,t=this.source.length;e<t;e++)n(this.source[e])},empty:function(){var n=this.currentLocation||{start:{}};return new a(n.start.line,n.start.column,this.srcFile)},wrap:function(n){var e=arguments.length<=1||void 0===arguments[1]?this.currentLocation||{start:{}}:arguments[1];return n instanceof a?n:(n=castChunk(n,this,e),new a(e.start.line,e.start.column,this.srcFile,n))},functionCall:function(n,e,t){return t=this.generateList(t),this.wrap([n,e?"."+e+"(":"(",t,")"])},quotedString:function(n){return'"'+(n+"").replace(/\\/g,"\\\\").replace(/"/g,'\\"').replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/\u2028/g,"\\u2028").replace(/\u2029/g,"\\u2029")+'"'},objectLiteral:function(n){var e=[];for(var t in n)if(n.hasOwnProperty(t)){var r=castChunk(n[t],this);"undefined"!==r&&e.push([this.quotedString(t),":",r])}var a=this.generateList(e);return a.prepend("{"),a.add("}"),a},generateList:function(n){for(var e=this.empty(),t=0,r=n.length;t<r;t++)t&&e.add(","),e.add(castChunk(n[t],this));return e},generateArray:function(n){var e=this.generateList(n);return e.prepend("["),e.add("]"),e}},e.default=CodeGen,n.exports=e.default},function(n,e,t){"use strict";e.__esModule=!0,e.print=function(n){return(new PrintVisitor).accept(n)},e.PrintVisitor=PrintVisitor;var r,a=t(3),i=(r=a)&&r.__esModule?r:{default:r};function PrintVisitor(){this.padding=0}PrintVisitor.prototype=new i.default,PrintVisitor.prototype.pad=function(n){for(var e="",t=0,r=this.padding;t<r;t++)e+="  ";return e+=n+"\n"},PrintVisitor.prototype.Program=function(n){var e="",t=n.body,r=void 0,a=void 0;if(n.blockParams){var i="BLOCK PARAMS: [";for(r=0,a=n.blockParams.length;r<a;r++)i+=" "+n.blockParams[r];i+=" ]",e+=this.pad(i)}for(r=0,a=t.length;r<a;r++)e+=this.accept(t[r]);return this.padding--,e},PrintVisitor.prototype.MustacheStatement=function(n){return this.pad("{{ "+this.SubExpression(n)+" }}")},PrintVisitor.prototype.Decorator=function(n){return this.pad("{{ DIRECTIVE "+this.SubExpression(n)+" }}")},PrintVisitor.prototype.BlockStatement=PrintVisitor.prototype.DecoratorBlock=function(n){var e="";return e+=this.pad(("DecoratorBlock"===n.type?"DIRECTIVE ":"")+"BLOCK:"),this.padding++,e+=this.pad(this.SubExpression(n)),n.program&&(e+=this.pad("PROGRAM:"),this.padding++,e+=this.accept(n.program),this.padding--),n.inverse&&(n.program&&this.padding++,e+=this.pad("{{^}}"),this.padding++,e+=this.accept(n.inverse),this.padding--,n.program&&this.padding--),this.padding--,e},PrintVisitor.prototype.PartialStatement=function(n){var e="PARTIAL:"+n.name.original;return n.params[0]&&(e+=" "+this.accept(n.params[0])),n.hash&&(e+=" "+this.accept(n.hash)),this.pad("{{> "+e+" }}")},PrintVisitor.prototype.PartialBlockStatement=function(n){var e="PARTIAL BLOCK:"+n.name.original;return n.params[0]&&(e+=" "+this.accept(n.params[0])),n.hash&&(e+=" "+this.accept(n.hash)),e+=" "+this.pad("PROGRAM:"),this.padding++,e+=this.accept(n.program),this.padding--,this.pad("{{> "+e+" }}")},PrintVisitor.prototype.ContentStatement=function(n){return this.pad("CONTENT[ '"+n.value+"' ]")},PrintVisitor.prototype.CommentStatement=function(n){return this.pad("{{! '"+n.value+"' }}")},PrintVisitor.prototype.SubExpression=function(n){for(var e,t=n.params,r=[],a=0,i=t.length;a<i;a++)r.push(this.accept(t[a]));return t="["+r.join(", ")+"]",e=n.hash?" "+this.accept(n.hash):"",this.accept(n.path)+" "+t+e},PrintVisitor.prototype.PathExpression=function(n){var e=n.parts.join("/");return(n.data?"@":"")+"PATH:"+e},PrintVisitor.prototype.StringLiteral=function(n){return'"'+n.value+'"'},PrintVisitor.prototype.NumberLiteral=function(n){return"NUMBER{"+n.value+"}"},PrintVisitor.prototype.BooleanLiteral=function(n){return"BOOLEAN{"+n.value+"}"},PrintVisitor.prototype.UndefinedLiteral=function(){return"UNDEFINED"},PrintVisitor.prototype.NullLiteral=function(){return"NULL"},PrintVisitor.prototype.Hash=function(n){for(var e=n.pairs,t=[],r=0,a=e.length;r<a;r++)t.push(this.accept(e[r]));return"HASH{"+t.join(", ")+"}"},PrintVisitor.prototype.HashPair=function(n){return n.key+"="+this.accept(n.value)}},function(n,e){n.exports=require("fs")}]);